const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ExperienceSection.CfYKZunu.js","assets/react.qOf0oG0c.js","assets/vendor.BX0anqfg.js","assets/ExperienceHero.BwO6VK69.js","assets/ProjectHero.C-3Bka26.js","assets/ProjectModal.B_SkKzM3.js","assets/ProjectDetails.Cbx1NI6f.js"])))=>i.map(i=>d[i]);
var rA=Object.defineProperty;var sA=(r,e,t)=>e in r?rA(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var am=(r,e,t)=>sA(r,typeof e!="symbol"?e+"":e,t);import{r as B,a as aA,u as bu,L as iv,R as Lc,g as rv,b as f_,c as xr,B as oA}from"./react.qOf0oG0c.js";import{G as pt,m as ve,A as mr,u as lA,a as Fs}from"./vendor.BX0anqfg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Nw={exports:{}},pf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA=B,uA=Symbol.for("react.element"),dA=Symbol.for("react.fragment"),hA=Object.prototype.hasOwnProperty,fA=cA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pA={key:!0,ref:!0,__self:!0,__source:!0};function Iw(r,e,t){var n,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)hA.call(e,n)&&!pA.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:uA,type:r,key:s,ref:a,props:i,_owner:fA.current}}pf.Fragment=dA;pf.jsx=Iw;pf.jsxs=Iw;Nw.exports=pf;var m=Nw.exports,Lw,p_=aA;Lw=p_.createRoot,p_.hydrateRoot;const mA="modulepreload",gA=function(r){return"/Sahil-Ali-Portfolio/"+r},m_={},wu=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=gA(l),l in m_)return;m_[l]=!0;const d=l.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":mA,d||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},kw=()=>{B.useEffect(()=>{const r=t=>{t.preventDefault();const i=t.target.getAttribute("href");if(!i)return;const s=i.replace("#",""),a=document.getElementById(s);a&&a.scrollIntoView({behavior:"smooth"})},e=document.querySelectorAll('a[href^="#"]');return e.forEach(t=>{t.addEventListener("click",r)}),()=>{e.forEach(t=>{t.removeEventListener("click",r)})}},[])};var vA=(r,e,t,n,i,s,a,o)=>{let l=document.documentElement,d=["light","dark"];function h(g){(Array.isArray(r)?r:[r]).forEach(y=>{let b=y==="class",_=b&&s?i.map(x=>s[x]||x):i;b?(l.classList.remove(..._),l.classList.add(s&&s[g]?s[g]:g)):l.setAttribute(y,g)}),f(g)}function f(g){o&&d.includes(g)&&(l.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)h(n);else try{let g=localStorage.getItem(e)||t,y=a&&g==="system"?p():g;h(y)}catch{}},g_=["light","dark"],Dw="(prefers-color-scheme: dark)",xA=typeof window>"u",sv=B.createContext(void 0),yA={setTheme:r=>{},themes:[]},Ow=()=>{var r;return(r=B.useContext(sv))!=null?r:yA},_A=r=>B.useContext(sv)?B.createElement(B.Fragment,null,r.children):B.createElement(wA,{...r}),bA=["light","dark"],wA=({forcedTheme:r,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:n=!0,storageKey:i="theme",themes:s=bA,defaultTheme:a=t?"system":"light",attribute:o="data-theme",value:l,children:d,nonce:h,scriptProps:f})=>{let[p,g]=B.useState(()=>MA(i,a)),[y,b]=B.useState(()=>p==="system"?om():p),_=l?Object.values(l):s,x=B.useCallback(T=>{let P=T;if(!P)return;T==="system"&&t&&(P=om());let I=l?l[P]:P,k=e?EA(h):null,R=document.documentElement,L=F=>{F==="class"?(R.classList.remove(..._),I&&R.classList.add(I)):F.startsWith("data-")&&(I?R.setAttribute(F,I):R.removeAttribute(F))};if(Array.isArray(o)?o.forEach(L):L(o),n){let F=g_.includes(a)?a:null,W=g_.includes(P)?P:F;R.style.colorScheme=W}k==null||k()},[h]),M=B.useCallback(T=>{let P=typeof T=="function"?T(p):T;g(P);try{localStorage.setItem(i,P)}catch{}},[p]),S=B.useCallback(T=>{let P=om(T);b(P),p==="system"&&t&&!r&&x("system")},[p,r]);B.useEffect(()=>{let T=window.matchMedia(Dw);return T.addListener(S),S(T),()=>T.removeListener(S)},[S]),B.useEffect(()=>{let T=P=>{P.key===i&&(P.newValue?g(P.newValue):M(a))};return window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)},[M]),B.useEffect(()=>{x(r??p)},[r,p]);let E=B.useMemo(()=>({theme:p,setTheme:M,forcedTheme:r,resolvedTheme:p==="system"?y:p,themes:t?[...s,"system"]:s,systemTheme:t?y:void 0}),[p,M,r,y,t,s]);return B.createElement(sv.Provider,{value:E},B.createElement(SA,{forcedTheme:r,storageKey:i,attribute:o,enableSystem:t,enableColorScheme:n,defaultTheme:a,value:l,themes:s,nonce:h,scriptProps:f}),d)},SA=B.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:i,defaultTheme:s,value:a,themes:o,nonce:l,scriptProps:d})=>{let h=JSON.stringify([t,e,s,r,o,a,n,i]).slice(1,-1);return B.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${vA.toString()})(${h})`}})}),MA=(r,e)=>{if(xA)return;let t;try{t=localStorage.getItem(r)||void 0}catch{}return t||e},EA=r=>{let e=document.createElement("style");return r&&e.setAttribute("nonce",r),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},om=r=>(r||(r=window.matchMedia(Dw)),r.matches?"dark":"light");const TA=B.createContext(void 0);function Uw({children:r,attribute:e="class",defaultTheme:t="system",enableSystem:n=!0,disableTransitionOnChange:i=!0,storageKey:s="theme",...a}){const[o,l]=B.useState(!1);return B.useEffect(()=>{l(!0)},[]),m.jsx(_A,{attribute:e,defaultTheme:t,enableSystem:n,disableTransitionOnChange:i,storageKey:s,...a,children:o?m.jsx(AA,{children:r}):m.jsx("div",{style:{visibility:"hidden"},children:r})})}const AA=({children:r})=>{const{theme:e,setTheme:t,systemTheme:n,resolvedTheme:i}=Ow();return m.jsx(TA.Provider,{value:{theme:e,setTheme:t,systemTheme:n,resolvedTheme:i},children:r})};function mf(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(r)}function CA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(r)}function so(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(r)}function Fw(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(r)}function RA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(r)}function zw(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(r)}function Ks(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(r)}function PA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(r)}function jw(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(r)}function NA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(r)}function IA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(r)}function aj(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(r)}function LA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(r)}function kA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(r)}function El(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"},child:[]},{tag:"polyline",attr:{points:"8 6 2 12 8 18"},child:[]}]})(r)}function Bw(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(r)}function DA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(r)}function ws(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]},{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"},child:[]}]})(r)}function OA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(r)}function Hw(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"},child:[]}]})(r)}function oj(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(r)}function Vw(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"},child:[]},{tag:"rect",attr:{x:"2",y:"9",width:"4",height:"12"},child:[]},{tag:"circle",attr:{cx:"4",cy:"4",r:"2"},child:[]}]})(r)}function kc(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"},child:[]},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"},child:[]},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"},child:[]}]})(r)}function av(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(r)}function Gw(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(r)}function UA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(r)}function FA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(r)}function zA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(r)}function jA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(r)}function BA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(r)}function HA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 3 21 3 21 8"},child:[]},{tag:"line",attr:{x1:"4",y1:"20",x2:"21",y2:"3"},child:[]},{tag:"polyline",attr:{points:"21 16 21 21 16 21"},child:[]},{tag:"line",attr:{x1:"15",y1:"15",x2:"21",y2:"21"},child:[]},{tag:"line",attr:{x1:"4",y1:"4",x2:"9",y2:"9"},child:[]}]})(r)}function VA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(r)}function GA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(r)}function lj(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(r)}function Ww(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(r)}function WA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(r)}function XA(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(r)}function Xw(r){return pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(r)}const qA=[{label:"Home",path:"/"},{label:"About",path:"/about"},{label:"Experience",path:"/experience"},{label:"Projects",path:"/projects"},{label:"Blog",path:"/blog"},{label:"Contact",path:"/contact"}],YA=()=>{const r=bu();return m.jsx("nav",{className:"hidden md:flex space-x-10",children:qA.map(({label:e,path:t})=>{const n=r.pathname===t;return m.jsx(ve.div,{className:"group relative",whileHover:{scale:1.05},whileTap:{scale:.95},children:m.jsxs(iv,{to:t,className:`
                relative
                font-medium
                text-foreground/80 dark:text-gray-300
                hover:text-primary dark:hover:text-primary-foreground
                focus-visible:outline-none
                focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2
                transition-colors duration-300
                ${n?"text-primary dark:text-primary-foreground":""}
              `,"aria-current":n?"page":void 0,children:[e,m.jsx("span",{className:`
                  absolute bottom-0 left-0 h-0.5 bg-primary dark:bg-primary-foreground
                  transition-all duration-300
                  ${n?"w-full":"w-0 group-hover:w-full"}
                `})]})},t)})})},ov=({src:r,alt:e="",className:t="",background:n=!1,width:i,height:s,placeholder:a})=>{const[o,l]=B.useState(!1),[d,h]=B.useState(!1),[f,p]=B.useState(!1),[g,y]=B.useState(!1);B.useEffect(()=>{y(!0)},[]);const b=Lc.useRef(null);B.useEffect(()=>{if(!b.current)return;const M=setTimeout(()=>{const S=new IntersectionObserver(E=>{E.forEach(T=>{T.isIntersecting&&(l(!0),S.unobserve(T.target))})},{root:null,rootMargin:"100px",threshold:.01});return S.observe(b.current),()=>{b.current&&S.unobserve(b.current)}},100);return()=>clearTimeout(M)},[r]);const _=()=>{h(!0)},x=()=>{p(!0)};return n?m.jsxs("div",{ref:b,className:`relative ${t}`,style:{width:i?`${i}px`:"100%",height:s?`${s}px`:"auto",position:"relative",overflow:"hidden"},children:[m.jsx(mr,{children:!d&&!f&&m.jsx(ve.div,{className:"absolute inset-0 bg-gray-200 dark:bg-gray-800",initial:{opacity:1},exit:{opacity:0},transition:{duration:.3}},"placeholder")}),m.jsx(ve.div,{className:"absolute inset-0",style:{backgroundImage:d?`url(${r})`:"none",backgroundSize:"cover",backgroundPosition:"center",opacity:d?1:0,transition:"opacity 0.3s ease-in-out"},initial:{opacity:0},animate:{opacity:d?1:0}},"image"),f&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-red-500",children:m.jsx(kc,{className:"animate-spin"})})]}):m.jsxs("div",{ref:b,className:`relative ${t}`,style:{width:i?`${i}px`:"100%",height:s?`${s}px`:"auto"},children:[m.jsx(mr,{children:!d&&!f&&m.jsx(ve.div,{className:"absolute inset-0 flex items-center justify-center bg-gray-200 dark:bg-gray-800",initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:m.jsx(kc,{className:"animate-spin"})},"placeholder")}),g&&o&&m.jsx(ve.img,{src:r,alt:e,onLoad:_,onError:x,className:`absolute inset-0 object-cover ${t}`,style:{opacity:d?1:0,transition:"opacity 0.3s ease-in-out"},initial:{opacity:0},animate:{opacity:d?1:0}},`img-${r}`),f&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-red-500",children:m.jsx(kc,{className:"animate-spin"})})]})},ZA=({onMenuToggle:r,isScrolled:e=!1})=>{const[t,n]=B.useState(!1),{theme:i,setTheme:s}=Ow();return B.useEffect(()=>{n(!0)},[]),t?m.jsx("header",{className:`
        fixed top-0 left-0 right-0 z-50
        backdrop-blur-md bg-white/60 dark:bg-gray-900/60
        transition-all duration-300
        ${e?"py-0 shadow-md":"py-2"}
        border-b border-gray-200 dark:border-gray-800
      `,children:m.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex justify-between items-center h-14 md:h-16",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(ov,{src:"/Sahil-Ali-Portfolio/favicon/favicon-192x192.png",alt:"Logo",width:40,height:40,className:"h-10 w-10 object-contain rounded-md shadow-sm"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-extrabold text-gray-900 dark:text-white select-none leading-tight",children:"Sahil Ali"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium select-none",children:"Data Generalist"})]})]}),m.jsx("nav",{className:"hidden md:flex space-x-8",children:m.jsx(YA,{})}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("button",{onClick:()=>s(i==="dark"?"light":"dark"),"aria-label":"Toggle theme",className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1",title:`Switch to ${i==="dark"?"light":"dark"} mode`,children:i==="dark"?m.jsx(GA,{className:"w-5 h-5"}):m.jsx(zA,{className:"w-5 h-5"})}),m.jsx("button",{onClick:r,"aria-label":"Toggle menu",className:"md:hidden text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 transition-colors",title:"Open menu",children:m.jsx(UA,{className:"w-6 h-6"})})]})]})})}):null},KA=[{label:"Home",path:"/"},{label:"About",path:"/about"},{label:"Projects",path:"/projects"},{label:"Contact",path:"/contact"},{label:"Blog",path:"/blog"}],$A=({isOpen:r,onClose:e})=>{const t=bu();return B.useEffect(()=>{e()},[t.pathname]),r?m.jsxs("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black bg-opacity-95 backdrop-blur-sm text-white text-2xl space-y-10 p-8",children:[m.jsx("button",{onClick:e,"aria-label":"Close menu",className:`absolute top-6 right-6 p-3 text-gray-200 bg-gray-800/90 hover:bg-gray-700 rounded-full border border-gray-600/50 shadow-lg 
                   hover:scale-110 transition-transform duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:m.jsx(Xw,{className:"w-7 h-7"})}),KA.map(({label:n,path:i})=>{const s=t.pathname===i;return m.jsx(iv,{to:i,onClick:e,className:`
              w-56 text-center rounded-lg py-3 px-6
              transition-colors duration-300
              ${s?"bg-blue-600 text-white shadow-lg":"hover:bg-blue-600 hover:text-white"}
            `,"aria-current":s?"page":void 0,children:n},i)})]}):null},JA=({children:r})=>{const[e,t]=B.useState(!1),[n,i]=B.useState(!1),[s,a]=B.useState("up"),o=B.useRef(0),l=B.useRef(null),d=B.useCallback(()=>{t(p=>!p)},[]),h=B.useCallback(()=>{t(!1)},[]);B.useEffect(()=>{const p=l.current;if(!p)return;const g=()=>{const _=window.scrollY,x=p.offsetHeight;_>o.current&&_>x?a("down"):_<o.current&&a("up"),i(_>5),o.current=_};let y;const b=()=>{y&&clearTimeout(y),y=setTimeout(g,50)};return window.addEventListener("scroll",b,{passive:!0}),()=>{window.removeEventListener("scroll",b),y&&clearTimeout(y)}},[]);const f=s==="up"||!n;return m.jsxs(m.Fragment,{children:[m.jsx(ve.div,{ref:l,className:"fixed top-0 left-0 right-0 z-50",initial:"visible",animate:f?"visible":"hidden",variants:{visible:{y:0},hidden:{y:"-100%"}},transition:{type:"tween",duration:.3},children:m.jsx(ZA,{onMenuToggle:d,isScrolled:n})}),m.jsx(mr,{children:m.jsx($A,{isOpen:e,onClose:h})}),r&&m.jsx("div",{className:"pt-16",children:r})]})};function QA(r){return pt({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(r)}function e3(r){return pt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(r)}function t3(r){return pt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(r)}function v_(r){return pt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(r)}function cj(r){return pt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"},child:[]}]})(r)}function uj(r){return pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(r)}function dj(r){return pt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"},child:[]}]})(r)}function hj(r){return pt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(r)}function n3(r){return pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(r)}function fj(r){return pt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(r)}function pj(r){return pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"},child:[]}]})(r)}function mj(r){return pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(r)}function gj(r){return pt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(r)}function vj(r){return pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"},child:[]}]})(r)}function xj(r){return pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(r)}function yj(r){return pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(r)}function _j(r){return pt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"},child:[]}]})(r)}class Su{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const i3=()=>{if(!(typeof localStorage>"u"))return{get:r=>Promise.resolve(localStorage.getItem(r)),set:(r,e)=>Promise.resolve(localStorage.setItem(r,e)),remove:r=>Promise.resolve(localStorage.removeItem(r))}},ei={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:i3()},lv=r=>r?typeof r=="string"?{publicKey:r}:r.toString()==="[object Object]"?r:{}:{},r3=(r,e="https://api.emailjs.com")=>{if(!r)return;const t=lv(r);ei.publicKey=t.publicKey,ei.blockHeadless=t.blockHeadless,ei.storageProvider=t.storageProvider,ei.blockList=t.blockList,ei.limitRate=t.limitRate,ei.origin=t.origin||e},qw=async(r,e,t={})=>{const n=await fetch(ei.origin+r,{method:"POST",headers:t,body:e}),i=await n.text(),s=new Su(n.status,i);if(n.ok)return s;throw s},Yw=(r,e,t)=>{if(!r||typeof r!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},s3=r=>{if(r&&r.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Zw=r=>r.webdriver||!r.languages||r.languages.length===0,Kw=()=>new Su(451,"Unavailable For Headless Browser"),a3=(r,e)=>{if(!Array.isArray(r))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},o3=r=>{var e;return!((e=r.list)!=null&&e.length)||!r.watchVariable},l3=(r,e)=>r instanceof FormData?r.get(e):r[e],$w=(r,e)=>{if(o3(r))return!1;a3(r.list,r.watchVariable);const t=l3(e,r.watchVariable);return typeof t!="string"?!1:r.list.includes(t)},Jw=()=>new Su(403,"Forbidden"),c3=(r,e)=>{if(typeof r!="number"||r<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},u3=async(r,e,t)=>{const n=Number(await t.get(r)||0);return e-Date.now()+n},Qw=async(r,e,t)=>{if(!e.throttle||!t)return!1;c3(e.throttle,e.id);const n=e.id||r;return await u3(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},eS=()=>new Su(429,"Too Many Requests"),d3=async(r,e,t,n)=>{const i=lv(n),s=i.publicKey||ei.publicKey,a=i.blockHeadless||ei.blockHeadless,o=i.storageProvider||ei.storageProvider,l={...ei.blockList,...i.blockList},d={...ei.limitRate,...i.limitRate};return a&&Zw(navigator)?Promise.reject(Kw()):(Yw(s,r,e),s3(t),t&&$w(l,t)?Promise.reject(Jw()):await Qw(location.pathname,d,o)?Promise.reject(eS()):qw("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:r,template_id:e,template_params:t}),{"Content-type":"application/json"}))},h3=r=>{if(!r||r.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},f3=r=>typeof r=="string"?document.querySelector(r):r,p3=async(r,e,t,n)=>{const i=lv(n),s=i.publicKey||ei.publicKey,a=i.blockHeadless||ei.blockHeadless,o=ei.storageProvider||i.storageProvider,l={...ei.blockList,...i.blockList},d={...ei.limitRate,...i.limitRate};if(a&&Zw(navigator))return Promise.reject(Kw());const h=f3(t);Yw(s,r,e),h3(h);const f=new FormData(h);return $w(l,f)?Promise.reject(Jw()):await Qw(location.pathname,d,o)?Promise.reject(eS()):(f.append("lib_version","4.4.1"),f.append("service_id",r),f.append("template_id",e),f.append("user_id",s),qw("/api/v1.0/email/send-form",f))},x_={init:r3,send:d3,sendForm:p3,EmailJSResponseStatus:Su},m3=({className:r=""})=>{const[e,t]=B.useState(""),[n,i]=B.useState("idle"),s={serviceId:"service_3zjzhw9",templateId:"template_8ceuxmj",adminTemplateId:"template_vwsoo8c",publicKey:"SSZTLSy9RXXetSXKM",toEmail:"sahilkhan36985@gmail.com",adminEmail:"sahilkhan36985@gmail.com"},a=l=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l),o=async l=>{if(l.preventDefault(),!a(e)){i("error");return}i("loading");try{if(Object.values(s).some(h=>!h))throw new Error("Missing EmailJS environment variables.");const d={to_email:s.toEmail,from_email:e,subject:"Newsletter Subscription",message:`New subscription from ${e}`};await x_.send(s.serviceId,s.templateId,d,s.publicKey),await x_.send(s.serviceId,s.adminTemplateId,{...d,to_email:s.adminEmail},s.publicKey),i("success"),t("")}catch(d){console.error("EmailJS Error:",d),i("error")}};return m.jsx(ve.div,{initial:{opacity:0,y:25},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0},className:`max-w-md w-full ${r}`,children:m.jsxs(ve.div,{className:"p-6 sm:p-8 bg-background/60 backdrop-blur-sm rounded-xl border border-border relative overflow-hidden shadow-lg",whileHover:{scale:1.01},transition:{type:"spring",stiffness:150},children:[m.jsx(ve.div,{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-transparent to-primary/5",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:6,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}}),m.jsxs("div",{className:"flex items-center mb-5 relative z-10",children:[m.jsx(av,{className:"h-6 w-6 text-primary mr-2"}),m.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Stay Updated"})]}),m.jsx(mr,{children:n!=="success"?m.jsxs(ve.form,{onSubmit:o,className:"space-y-4 relative z-10",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"email",placeholder:"Enter your email",value:e,onChange:l=>t(l.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background focus:ring-2 focus:ring-primary/30 focus:border-primary/30 text-foreground placeholder-muted-foreground transition-all",required:!0,"aria-label":"Email address"}),m.jsxs(ve.button,{type:"submit",disabled:n==="loading",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-muted text-foreground px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-muted/80 focus:outline-none focus:ring-2 focus:ring-primary/40 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-sm",whileTap:{scale:.96},children:[n==="loading"&&m.jsx(kc,{className:"animate-spin"}),n==="loading"?"Sending...":"Subscribe"]})]}),n==="error"&&m.jsxs(ve.p,{role:"alert","aria-live":"assertive",className:"text-sm text-red-500 flex items-center gap-2 mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[m.jsx(XA,{})," Please enter a valid email or try again later."]},"error")]},"form"):m.jsxs(ve.div,{className:"flex items-center gap-2 text-green-500 text-sm font-medium relative z-10",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[m.jsx(jw,{})," Thank you for subscribing! 🎉"]},"success-message")})]})})},g3=[{name:"Home",href:"/"},{name:"About",href:"/about"},{name:"Experience",href:"/experience"},{name:"Projects",href:"/projects"},{name:"Blog",href:"/blog"},{name:"Contact",href:"/contact"}],v3=[{name:"Terms of Service",href:"/terms-of-service"},{name:"Privacy Policy",href:"/privacy-policy"}],x3=[{name:"GitHub",href:"https://github.com/sahilthecoder",icon:m.jsx(QA,{})},{name:"WhatsApp",href:"https://wa.me/919875771550",icon:m.jsx(t3,{})},{name:"LinkedIn",href:"https://www.linkedin.com/in/sahil-ali-714867242",icon:m.jsx(e3,{})},{name:"Email",href:"mailto:sahilkhan36985@gmail.com",icon:m.jsx(n3,{})}],y_=({title:r,links:e,ariaLabel:t})=>m.jsxs("nav",{"aria-label":t,className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:r}),m.jsx("ul",{className:"space-y-2",children:e.map(({name:n,href:i})=>m.jsx("li",{children:m.jsx(iv,{to:i,className:"text-muted-foreground hover:text-primary transition-colors duration-200",children:n})},i))})]}),y3=()=>m.jsx("div",{className:"flex space-x-5",children:x3.map(({name:r,href:e,icon:t})=>m.jsx(ve.a,{href:e,target:"_blank",rel:"noopener noreferrer","aria-label":r,className:"text-2xl text-muted-foreground hover:text-primary transition-colors duration-200",whileHover:{y:-4},whileTap:{scale:.95},children:t},r))}),_3=()=>{const r=new Date().getFullYear();return m.jsx("footer",{className:"bg-background border-t border-border pt-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-6 sm:px-8 lg:px-12",children:[m.jsxs(ve.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"bg-primary/5 rounded-2xl p-8 mb-16 text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-3 text-foreground",children:"Stay in the Loop"}),m.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Subscribe to get updates on my latest projects, insights, and resources — directly to your inbox."}),m.jsx("div",{className:"max-w-md mx-auto",children:m.jsx(m3,{})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 gap-12",children:[m.jsx("div",{className:"md:col-span-3",children:m.jsx(y_,{title:"Navigation",links:g3,ariaLabel:"Footer navigation"})}),m.jsx("div",{className:"md:col-span-2",children:m.jsx(y_,{title:"Legal",links:v3,ariaLabel:"Legal links"})}),m.jsxs("div",{className:"md:col-span-4 space-y-5",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Let’s Connect"}),m.jsx(y3,{}),m.jsx("p",{className:"text-muted-foreground",children:"Got a project or idea? Let’s bring it to life together."}),m.jsx("a",{href:"mailto:sahilkhan36985@gmail.com",className:"inline-flex items-center text-primary font-semibold hover:underline",children:"Get in touch"})]}),m.jsxs("div",{className:"md:col-span-3",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"About Me"}),m.jsx("p",{className:"text-muted-foreground",children:"I’m a data analyst & developer passionate about turning data into actionable insights and building creative tech solutions."})]})]}),m.jsxs("div",{className:"mt-16 pt-8 border-t border-border flex flex-col sm:flex-row justify-between items-center text-muted-foreground text-sm",children:[m.jsxs("p",{children:["© ",r," Sahil Ali. All rights reserved."]}),m.jsxs("p",{className:"mt-3 sm:mt-0",children:["Built with ",m.jsx("span",{className:"text-primary font-semibold",children:"React"}),","," ",m.jsx("span",{className:"text-primary font-semibold",children:"TypeScript"}),", &"," ",m.jsx("span",{className:"text-primary font-semibold",children:"Tailwind CSS"}),"."]})]})]})})},Kn=()=>m.jsxs("div",{className:"relative w-full",children:[m.jsx("div",{className:"absolute inset-0 bg-border/10"}),m.jsx("div",{className:"relative h-px bg-border/20"})]}),b3={"arrow-right":mf,download:DA,mail:av,github:Hw,linkedin:Vw,external:ws,view:ws},w3="inline-flex items-center justify-center rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:pointer-events-none",S3={primary:"bg-gradient-primary text-primary-foreground hover:brightness-110 focus:ring-primary/50 shadow-lg hover:shadow-xl transition-all duration-300",secondary:"bg-gradient-secondary text-secondary-foreground hover:brightness-110 focus:ring-secondary/50 shadow-lg hover:shadow-xl transition-all duration-300",outline:"border-2 border-primary text-primary hover:bg-primary/10 focus:ring-primary/30 transition-all duration-300",ghost:"text-foreground hover:bg-muted/50 focus:ring-muted/40 transition-all duration-300",link:"text-primary hover:underline p-0 h-auto transition-colors duration-300",white:"bg-white text-foreground hover:bg-gray-100 focus:ring-primary/40 shadow-md hover:shadow-lg transition-all duration-300",dark:"bg-foreground text-background hover:brightness-90 focus:ring-primary/40 shadow-md hover:shadow-lg transition-all duration-300"},M3={sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"},E3={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},wi=B.forwardRef(({variant:r="primary",size:e="md",icon:t=null,iconPosition:n="right",fullWidth:i=!1,isLoading:s=!1,className:a="",children:o,...l},d)=>{const h=t?b3[t]:null,f=`${E3[e]} ${o?n==="left"?"mr-2":"ml-2":""}`;return m.jsx("button",{ref:d,className:`${w3} ${S3[r]} ${M3[e]} ${i?"w-full":""} ${s?"opacity-75 cursor-not-allowed":""} ${a}`,disabled:s||l.disabled,...l,children:s?m.jsxs("span",{className:"flex items-center",children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):m.jsxs(m.Fragment,{children:[t&&n==="left"&&h&&m.jsx(h,{className:f}),o,t&&n==="right"&&h&&m.jsx(h,{className:f})]})})});wi.displayName="Button";const T3={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3,type:"spring",stiffness:100,damping:15}}},__={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.6,ease:[.16,1,.3,1]}}},A3=()=>m.jsx(ve.div,{className:"flex items-center space-x-5 mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,staggerChildren:.1},children:[{icon:m.jsx(Hw,{}),href:"https://github.com/sahilthecoder",label:"GitHub",color:"hover:text-gray-800 dark:hover:text-gray-200"},{icon:m.jsx(Vw,{}),href:"https://www.linkedin.com/in/sahil-ali-714867242",label:"LinkedIn",color:"hover:text-blue-600 dark:hover:text-blue-400"},{icon:m.jsx(av,{}),href:"mailto:sahilkhan36985@gmail.com",label:"Email",color:"hover:text-red-500 dark:hover:text-red-400"},{icon:m.jsx(FA,{}),href:"https://wa.me/919875771550",label:"WhatsApp",color:"hover:text-green-500 dark:hover:text-green-400"}].map((r,e)=>m.jsx(ve.a,{href:r.href,target:"_blank",rel:"noopener noreferrer",className:`text-2xl bg-white/10 backdrop-blur-sm p-3 rounded-full border border-white/10 ${r.color} transition-all duration-300 hover:bg-white/20 hover:shadow-lg`,"aria-label":r.label,whileHover:{y:-4,scale:1.1},whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+e*.1},children:r.icon},r.label))}),C3=()=>m.jsxs("section",{className:"relative py-20 md:py-32 px-6 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-gray-900 dark:to-gray-950 text-foreground overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1/3 -left-1/4 w-2/3 h-full bg-gradient-to-br from-primary/5 via-primary/10 to-transparent rounded-full filter blur-3xl"}),m.jsx("div",{className:"absolute top-1/4 -right-1/4 w-1/2 h-1/2 bg-gradient-to-br from-blue-500/5 to-purple-500/5 rounded-full filter blur-3xl"}),m.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/4 h-1/2 bg-gradient-to-t from-slate-100 to-transparent dark:from-gray-950/80 dark:to-transparent"})]}),m.jsxs("div",{className:"container mx-auto max-w-7xl relative px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-12 lg:gap-8",children:[m.jsx(ve.div,{className:"w-full lg:w-1/2 text-center lg:text-left",initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},children:m.jsxs(ve.div,{variants:T3,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-10% 0px -10% 0px"},className:"max-w-2xl mx-auto lg:mx-0",children:[m.jsx(ve.div,{className:"inline-block px-4 py-2 mb-6 text-sm font-medium text-primary bg-primary/10 rounded-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:"Welcome to my portfolio"}),m.jsxs(ve.h1,{variants:__,className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold leading-tight tracking-tight text-gray-900 dark:text-white mb-6",children:["Transforming Data into ",m.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-600",children:"Business Value"})]}),m.jsxs(ve.p,{variants:__,className:"text-xl md:text-2xl text-gray-600 dark:text-gray-300 mb-8 max-w-2xl leading-relaxed",children:["I'm ",m.jsx("span",{className:"font-semibold text-primary",children:"Sahil Ali"}),", a results-driven professional specializing in AI, Data Analytics, and Business Intelligence solutions that drive growth and efficiency."]}),m.jsxs(ve.div,{className:"flex flex-col sm:flex-row gap-4 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[m.jsx(wi,{variant:"primary",size:"lg",className:"w-full sm:w-auto",onClick:()=>window.location.href="#contact",children:"Let's Work Together"}),m.jsx(wi,{variant:"outline",size:"lg",className:"w-full sm:w-auto",onClick:()=>{const r=document.getElementById("projects");r&&r.scrollIntoView({behavior:"smooth"})},children:"View My Work"})]}),m.jsxs(ve.div,{className:"flex items-center justify-center lg:justify-start gap-4 text-sm text-gray-500 dark:text-gray-400",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[m.jsxs("span",{className:"flex items-center",children:[m.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),"Available for opportunities"]}),m.jsx("span",{children:"•"}),m.jsx("span",{children:"4+ Years Experience"})]}),m.jsx("div",{className:"mt-8",children:m.jsx(A3,{})})]})}),m.jsx(ve.div,{className:"w-full lg:w-1/2 flex justify-center relative",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"relative w-64 h-64 sm:w-80 sm:h-80 rounded-3xl overflow-hidden border-4 border-white/20 shadow-2xl bg-white/5 backdrop-blur-sm",children:m.jsx("img",{src:"/Sahil-Ali-Portfolio/images/profile/profile-600w.webp",alt:"Sahil Ali",className:"w-full h-full object-cover",loading:"eager",srcSet:"/Sahil-Ali-Portfolio/images/profile/profile-300w.webp 300w, /Sahil-Ali-Portfolio/images/profile/profile-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"})}),m.jsx(ve.div,{className:"absolute -z-10 -top-6 -right-6 w-32 h-32 bg-blue-500/10 rounded-full filter blur-xl",animate:{scale:[1,1.1,1],opacity:[.2,.3,.2]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),m.jsx(ve.div,{className:"absolute -bottom-6 -left-6 w-40 h-40 bg-purple-500/10 rounded-full filter blur-xl -z-10",animate:{scale:[1,1.2,1],opacity:[.2,.3,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:1}}),m.jsx(ve.div,{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 flex gap-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:["AI/ML","Data Analytics","Business Intelligence"].map((r,e)=>m.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full shadow-md border border-gray-100 dark:border-gray-700",children:r},r))})]})})]}),m.jsxs(ve.div,{className:"mt-24 text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[m.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-6 uppercase tracking-wider",children:"Trusted by innovative teams at"}),m.jsx("div",{className:"flex flex-wrap items-center justify-center gap-8 md:gap-12 opacity-70",children:["Zomato","Ekam","Bansal"].map((r,e)=>m.jsx("div",{className:"text-xl font-medium text-gray-700 dark:text-gray-300",children:r},r))})]})]})]}),Mu=({children:r,className:e="",delay:t=.1})=>m.jsx(ve.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,ease:"easeOut",delay:t},className:e,children:r}),Er=({title:r,subtitle:e,className:t="",id:n})=>m.jsxs("div",{className:`mb-8 ${t}`,children:[m.jsx("h2",{id:n,className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:r}),e&&m.jsx("p",{className:"mt-2 text-muted-foreground max-w-2xl",children:e})]}),R3=()=>m.jsx("section",{id:"about",className:"py-16 bg-background",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx("div",{className:"w-full mb-16 lg:mb-20",children:m.jsx(Er,{title:"About Me",subtitle:"Passionate about transforming data into actionable insights"})}),m.jsx("div",{className:"space-y-8",children:m.jsxs(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"max-w-3xl mx-auto",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[m.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10 text-primary",children:m.jsx(El,{className:"h-6 w-6"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:"Data Analyst & Automation Specialist"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"2024–Present • Self-Employed"})]})]}),m.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"With a strong background in data analysis and automation, I specialize in creating efficient solutions that drive business growth. My journey from inventory management to data analytics has equipped me with unique insights into optimizing processes and extracting meaningful insights from complex data sets."}),m.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"flex flex-col items-center p-6 border rounded-lg border-border hover:border-primary/20 transition-colors",children:[m.jsx(Ks,{className:"h-8 w-8 text-primary mb-4"}),m.jsx("h4",{className:"text-xl font-semibold text-foreground mb-2",children:"Business Solutions"}),m.jsx("p",{className:"text-center text-muted-foreground",children:"Crafting data-driven solutions that align with business goals"})]}),m.jsxs("div",{className:"flex flex-col items-center p-6 border rounded-lg border-border hover:border-primary/20 transition-colors",children:[m.jsx(El,{className:"h-8 w-8 text-primary mb-4"}),m.jsx("h4",{className:"text-xl font-semibold text-foreground mb-2",children:"Technical Expertise"}),m.jsx("p",{className:"text-center text-muted-foreground",children:"Proficient in Python, SQL, and AI automation tools"})]}),m.jsxs("div",{className:"flex flex-col items-center p-6 border rounded-lg border-border hover:border-primary/20 transition-colors",children:[m.jsx(Ww,{className:"h-8 w-8 text-primary mb-4"}),m.jsx("h4",{className:"text-xl font-semibold text-foreground mb-2",children:"Process Optimization"}),m.jsx("p",{className:"text-center text-muted-foreground",children:"Streamlining operations through automation and analysis"})]})]})]})})]})});function tS(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=tS(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function cv(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=tS(r))&&(n&&(n+=" "),n+=e);return n}const b_=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,w_=cv,P3=(r,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return w_(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(d=>{const h=t==null?void 0:t[d],f=s==null?void 0:s[d];if(h===null)return null;const p=b_(h)||b_(f);return i[d][p]}),o=t&&Object.entries(t).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(y=>{let[b,_]=y;return Array.isArray(_)?_.includes({...s,...o}[b]):{...s,...o}[b]===_})?[...d,f,p]:d},[]);return w_(r,a,l,t==null?void 0:t.class,t==null?void 0:t.className)},uv="-",N3=r=>{const e=L3(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:a=>{const o=a.split(uv);return o[0]===""&&o.length!==1&&o.shift(),nS(o,e)||I3(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&n[a]?[...l,...n[a]]:l}}},nS=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),i=n?nS(r.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=r.join(uv);return(a=e.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},S_=/^\[(.+)\]$/,I3=r=>{if(S_.test(r)){const e=S_.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},L3=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return D3(Object.entries(r.classGroups),t).forEach(([s,a])=>{Vg(a,n,s,e)}),n},Vg=(r,e,t,n)=>{r.forEach(i=>{if(typeof i=="string"){const s=i===""?e:M_(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(k3(i)){Vg(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,a])=>{Vg(a,M_(e,s),t,n)})})},M_=(r,e)=>{let t=r;return e.split(uv).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},k3=r=>r.isThemeGetter,D3=(r,e)=>e?r.map(([t,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,o])=>[e+a,o])):s);return[t,i]}):r,O3=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(s,a)=>{t.set(s,a),e++,e>r&&(e=0,n=t,t=new Map)};return{get(s){let a=t.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){t.has(s)?t.set(s,a):i(s,a)}}},iS="!",U3=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,i=e[0],s=e.length,a=o=>{const l=[];let d=0,h=0,f;for(let _=0;_<o.length;_++){let x=o[_];if(d===0){if(x===i&&(n||o.slice(_,_+s)===e)){l.push(o.slice(h,_)),h=_+s;continue}if(x==="/"){f=_;continue}}x==="["?d++:x==="]"&&d--}const p=l.length===0?o:o.substring(h),g=p.startsWith(iS),y=g?p.substring(1):p,b=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:b}};return t?o=>t({className:o,parseClassName:a}):a},F3=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},z3=r=>({cache:O3(r.cacheSize),parseClassName:U3(r),...N3(r)}),j3=/\s+/,B3=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],a=r.trim().split(j3);let o="";for(let l=a.length-1;l>=0;l-=1){const d=a[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=t(d);let y=!!g,b=n(y?p.substring(0,g):p);if(!b){if(!y){o=d+(o.length>0?" "+o:o);continue}if(b=n(p),!b){o=d+(o.length>0?" "+o:o);continue}y=!1}const _=F3(h).join(":"),x=f?_+iS:_,M=x+b;if(s.includes(M))continue;s.push(M);const S=i(b,y);for(let E=0;E<S.length;++E){const T=S[E];s.push(x+T)}o=d+(o.length>0?" "+o:o)}return o};function H3(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=rS(e))&&(n&&(n+=" "),n+=t);return n}const rS=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=rS(r[n]))&&(t&&(t+=" "),t+=e);return t};function V3(r,...e){let t,n,i,s=a;function a(l){const d=e.reduce((h,f)=>f(h),r());return t=z3(d),n=t.cache.get,i=t.cache.set,s=o,o(l)}function o(l){const d=n(l);if(d)return d;const h=B3(l,t);return i(l,h),h}return function(){return s(H3.apply(null,arguments))}}const dn=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},sS=/^\[(?:([a-z-]+):)?(.+)\]$/i,G3=/^\d+\/\d+$/,W3=new Set(["px","full","screen"]),X3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,q3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Y3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Z3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,os=r=>yl(r)||W3.has(r)||G3.test(r),zs=r=>Fl(r,"length",rC),yl=r=>!!r&&!Number.isNaN(Number(r)),lm=r=>Fl(r,"number",yl),dc=r=>!!r&&Number.isInteger(Number(r)),$3=r=>r.endsWith("%")&&yl(r.slice(0,-1)),Ct=r=>sS.test(r),js=r=>X3.test(r),J3=new Set(["length","size","percentage"]),Q3=r=>Fl(r,J3,aS),eC=r=>Fl(r,"position",aS),tC=new Set(["image","url"]),nC=r=>Fl(r,tC,aC),iC=r=>Fl(r,"",sC),hc=()=>!0,Fl=(r,e,t)=>{const n=sS.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},rC=r=>q3.test(r)&&!Y3.test(r),aS=()=>!1,sC=r=>Z3.test(r),aC=r=>K3.test(r),oC=()=>{const r=dn("colors"),e=dn("spacing"),t=dn("blur"),n=dn("brightness"),i=dn("borderColor"),s=dn("borderRadius"),a=dn("borderSpacing"),o=dn("borderWidth"),l=dn("contrast"),d=dn("grayscale"),h=dn("hueRotate"),f=dn("invert"),p=dn("gap"),g=dn("gradientColorStops"),y=dn("gradientColorStopPositions"),b=dn("inset"),_=dn("margin"),x=dn("opacity"),M=dn("padding"),S=dn("saturate"),E=dn("scale"),T=dn("sepia"),P=dn("skew"),I=dn("space"),k=dn("translate"),R=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Ct,e],W=()=>[Ct,e],J=()=>["",os,zs],z=()=>["auto",yl,Ct],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ne=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>["start","end","center","between","around","evenly","stretch"],ie=()=>["","0",Ct],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[yl,Ct];return{cacheSize:500,separator:":",theme:{colors:[hc],spacing:[os,zs],blur:["none","",js,Ct],brightness:Z(),borderColor:[r],borderRadius:["none","","full",js,Ct],borderSpacing:W(),borderWidth:J(),contrast:Z(),grayscale:ie(),hueRotate:Z(),invert:ie(),gap:W(),gradientColorStops:[r],gradientColorStopPositions:[$3,zs],inset:F(),margin:F(),opacity:Z(),padding:W(),saturate:Z(),scale:Z(),sepia:ie(),skew:Z(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",Ct]}],container:["container"],columns:[{columns:[js]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),Ct]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dc,Ct]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ct]}],grow:[{grow:ie()}],shrink:[{shrink:ie()}],order:[{order:["first","last","none",dc,Ct]}],"grid-cols":[{"grid-cols":[hc]}],"col-start-end":[{col:["auto",{span:["full",dc,Ct]},Ct]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[hc]}],"row-start-end":[{row:["auto",{span:[dc,Ct]},Ct]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ct]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...te()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...te(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...te(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ct,e]}],"min-w":[{"min-w":[Ct,e,"min","max","fit"]}],"max-w":[{"max-w":[Ct,e,"none","full","min","max","fit","prose",{screen:[js]},js]}],h:[{h:[Ct,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ct,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ct,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ct,e,"auto","min","max","fit"]}],"font-size":[{text:["base",js,zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",lm]}],"font-family":[{font:[hc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ct]}],"line-clamp":[{"line-clamp":["none",yl,lm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",os,Ct]}],"list-image":[{"list-image":["none",Ct]}],"list-style-type":[{list:["none","disc","decimal",Ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",os,zs]}],"underline-offset":[{"underline-offset":["auto",os,Ct]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),eC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Q3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nC]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...ne(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:ne()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ne()]}],"outline-offset":[{"outline-offset":[os,Ct]}],"outline-w":[{outline:[os,zs]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[os,zs]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",js,iC]}],"shadow-color":[{shadow:[hc]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",js,Ct]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ct]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",Ct]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[dc,Ct]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ct]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ct]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ct]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[os,zs,lm]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oS=V3(oC);function po(...r){return oS(cv(r))}const lC=P3("rounded-lg border bg-card text-card-foreground shadow-sm transition-shadow duration-300 ease-in-out",{variants:{variant:{default:"border-border",elevated:"border-border shadow-md hover:shadow-xl hover:scale-[1.02] active:scale-100 transition-transform",outline:"border-border",secondary:"bg-secondary/20 border-secondary/30"},size:{default:"p-6",sm:"p-4",lg:"p-8"}},defaultVariants:{variant:"default",size:"default"}}),gf=B.forwardRef(({className:r,variant:e,size:t,...n},i)=>m.jsx("div",{ref:i,role:n.role??"group",tabIndex:n.tabIndex??0,className:po(lC({variant:e,size:t,className:r})),...n}));gf.displayName="Card";const vf=B.forwardRef(({className:r,...e},t)=>m.jsx("header",{ref:t,className:po("flex flex-col space-y-1.5 p-6",r),...e}));vf.displayName="CardHeader";const xf=B.forwardRef(({className:r,...e},t)=>m.jsx("h3",{ref:t,className:po("text-2xl font-semibold leading-none tracking-tight select-text",r),...e}));xf.displayName="CardTitle";const lS=B.forwardRef(({className:r,...e},t)=>m.jsx("p",{ref:t,className:po("text-sm text-muted-foreground",r),...e}));lS.displayName="CardDescription";const yf=B.forwardRef(({className:r,...e},t)=>m.jsx("section",{ref:t,className:po("p-6 pt-0",r),...e}));yf.displayName="CardContent";const dv=B.forwardRef(({className:r,...e},t)=>m.jsx("footer",{ref:t,className:po("flex items-center p-6 pt-0",r),...e}));dv.displayName="CardFooter";const cC={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2,duration:.6,ease:[.16,1,.3,1]}}},uC={hidden:{y:30,opacity:0,scale:.98},show:{y:0,opacity:1,scale:1,transition:{type:"spring",stiffness:120,damping:15,mass:.5}},hover:{y:-5,scale:1.02,transition:{duration:.2}}},dC=()=>{const r=[{id:"inventory",title:"Inventory Specialist",description:"Optimizing supply chain and warehouse operations",icon:zw,skills:["Inventory Management","Warehouse Operations","Process Automation","FIFO Implementation","ERP Software","Supply Chain Optimization"]},{id:"data",title:"Data Analyst",description:"Transforming data into actionable insights",icon:Fw,skills:["Data Analysis","SQL","Data Visualization","Excel/Sheets","Statistical Analysis","Reporting"]},{id:"ai",title:"AI Generalist",description:"Leveraging AI for business solutions",icon:Bw,skills:["Machine Learning","Predictive Analytics","AI Integration","Process Automation","Data Mining","AI Tools & Frameworks"]},{id:"tech",title:"Technical Skills",description:"Development and technical expertise",icon:El,skills:["Python","JavaScript/TypeScript","React/Next.js","Node.js","Database Management","Cloud Services"]}];return m.jsx("section",{className:"py-16 bg-background",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx("div",{className:"w-full mb-16 lg:mb-20",children:m.jsx(Er,{title:"My Expertise",subtitle:"A comprehensive overview of my technical and professional capabilities"})}),m.jsx(ve.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8",initial:"hidden",whileInView:"show",viewport:{once:!0,margin:"-10% 0px -10% 0px"},variants:cC,children:r.map(e=>{const t=e.icon;return m.jsxs(ve.div,{variants:uC,whileHover:"hover",className:"h-full group relative",children:[m.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-primary/40 via-primary/20 to-primary/5 rounded-2xl opacity-0 group-hover:opacity-100 blur transition duration-300 group-hover:duration-300"}),m.jsxs(gf,{className:"h-full border border-border/30 bg-card/90 backdrop-blur-sm transition-all duration-300 group-hover:border-primary/40 group-hover:shadow-xl group-hover:shadow-primary/10 relative overflow-hidden hover:bg-card/95 group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/70 to-background/20 pointer-events-none"}),m.jsxs(vf,{className:"flex-row items-start space-x-4 pb-5 relative z-10",children:[m.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary/10 to-primary/5 text-primary shadow-sm border border-primary/20 group-hover:shadow-primary/20 group-hover:shadow-sm transition-all duration-300 group-hover:bg-primary/15 group-hover:scale-105",children:m.jsx(t,{className:"w-6 h-6 transition-transform duration-300 group-hover:scale-110"})}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(xf,{className:"text-xl font-semibold text-foreground group-hover:text-primary transition-colors duration-300",children:e.title}),m.jsx(lS,{className:"text-sm text-muted-foreground/90",children:e.description})]})]}),m.jsx(yf,{className:"pt-0 relative z-10",children:m.jsx("div",{className:"flex flex-wrap gap-2.5",children:e.skills.map((n,i)=>m.jsxs(ve.span,{className:"inline-flex items-center text-xs font-medium px-3.5 py-1.5 rounded-full bg-muted/30 text-muted-foreground group-hover:bg-primary/10 group-hover:text-foreground group-hover:border-primary/30 transition-all duration-200 border border-border/30 group-hover:shadow-sm group/skill hover:bg-primary/20 hover:border-primary/40",initial:{opacity:0,y:5},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-10% 0px -10% 0px"},transition:{delay:.05*(i%3),duration:.3,ease:[.16,1,.3,1]},children:[n,m.jsx(LA,{className:"ml-1.5 w-3 h-3 opacity-0 -translate-x-1 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-200"})]},i))})}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]},e.id)})})]})})},hC=[{value:"4+",label:"Experience"},{value:"15+",label:"Projects"},{value:"10+",label:"Clients"},{value:"20+",label:"Tech"}],fC={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},pC={hidden:{y:10,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:150,damping:12}}},mC=()=>m.jsxs("section",{id:"stats",className:"relative overflow-hidden bg-gradient-to-br from-primary to-primary/80 py-5 px-3 text-background shadow-inner",children:[m.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-primary to-primary/70 opacity-80"}),m.jsx("div",{className:"container mx-auto max-w-4xl relative z-10",children:m.jsx(ve.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-3",variants:fC,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-20px"},children:hC.map(({value:r,label:e},t)=>m.jsxs(ve.div,{variants:pC,className:"text-center rounded-lg bg-white/10 border border-white/20 p-2.5 transition-all duration-200 hover:bg-white/20 hover:scale-105 hover:shadow-md",children:[m.jsx("div",{className:"text-xl md:text-2xl font-extrabold text-white drop-shadow-md",children:r}),m.jsx("div",{className:"text-[0.7rem] font-medium text-white/90 uppercase tracking-wider mt-1",children:e})]},t))})})]}),Gg=[{id:"zomato-dashboard",title:"Zomato Restaurant Expansion Dashboard",subtitle:"Market Strategy Analysis",description:"Built an interactive Excel dashboard to analyze Zomato's city-wise expansion strategy across India, uncovering performance trends and market insights.",highlights:["Identified top 5 high-potential cities for expansion with estimated 30% growth potential","Reduced manual analysis time by 65% through automated reporting","Uncovered key market trends leading to optimized marketing spend allocation"],image:{src:"/Sahil-Ali-Portfolio/images/projects/Zomto_Project1/Project1_Cover-600w.webp",alt:"Zomato Expansion Dashboard showing city-wise performance metrics",srcSet:"/Sahil-Ali-Portfolio/images/projects/Zomto_Project1/Project1_Cover-300w.webp 300w, /Sahil-Ali-Portfolio/images/projects/Zomto_Project1/Project1_Cover-600w.webp 600w, /Sahil-Ali-Portfolio/images/projects/Zomto_Project1/Project1_Cover-1200w.webp 1200w",sizes:"(max-width: 640px) 300px, (max-width: 1024px) 600px, 1200px"},links:[{label:"View Dashboard",url:"/projects/zomato-dashboard"},{label:"Case Study",url:"/projects/zomato-dashboard/case-study"}],technologies:["Excel","Pivot Tables","Data Visualization","Market Analysis","Business Intelligence"],date:"2024-03-01",featured:!0,challenge:"Zomato needed to identify the most promising cities for expansion in India but lacked a centralized view of market potential, competitor presence, and customer behavior across different regions.",solution:"Developed a comprehensive Excel dashboard that analyzed multiple data points including order volumes, average order values, customer demographics, and competitor presence across 50+ cities. Implemented dynamic filtering and interactive visualizations to enable data-driven decision making.",role:"Data Analyst | Led the data collection, analysis, and visualization efforts. Collaborated with business stakeholders to define key metrics and translate business questions into analytical solutions.",gallery:[{src:"/images/projects/Zomto_Project1/Project1_Cover-600w.webp",alt:"Dashboard overview showing city performance metrics",caption:"City Performance Overview",srcSet:"/images/projects/Zomto_Project1/Project1_Cover-300w.webp 300w, /images/projects/Zomto_Project1/Project1_Cover-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Zomto_Project1/zometo-ds-600w.webp",alt:"Data Analysis",caption:"Data Analysis",srcSet:"/images/projects/Zomto_Project1/zometo-ds-300w.webp 300w, /images/projects/Zomto_Project1/zometo-ds-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Zomto_Project1/zt1-600w.webp",alt:"Performance Metrics",caption:"Performance Metrics",srcSet:"/images/projects/Zomto_Project1/zt1-300w.webp 300w, /images/projects/Zomto_Project1/zt1-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Zomto_Project1/zt2-600w.webp",alt:"City-wise Analysis",caption:"City-wise Analysis",srcSet:"/images/projects/Zomto_Project1/zt2-300w.webp 300w, /images/projects/Zomto_Project1/zt2-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"}],metrics:[{label:"Cities Analyzed",value:"50+"},{label:"Time Savings",value:"65%"},{label:"Identified Growth",value:"30%"}]},{id:"bansal-dashboard",title:"Bansal Supermarket Analytics Dashboard",subtitle:"Retail Performance Optimization",description:"Developed a comprehensive Tableau analytics dashboard providing real-time insights into sales performance, inventory management, and customer behavior for Bansal Supermarket.",highlights:["Increased revenue by 12% through data-driven inventory optimization and targeted promotions","Reduced stockouts by 35% with predictive inventory management","Improved decision-making with real-time sales and performance metrics"],image:{src:"/Sahil-Ali-Portfolio/images/projects/Bansal_Project2/Project2_Cover-600w.webp",alt:"Bansal Supermarket Inventory Management Dashboard",srcSet:"/Sahil-Ali-Portfolio/images/projects/Bansal_Project2/Project2_Cover-300w.webp 300w, /Sahil-Ali-Portfolio/images/projects/Bansal_Project2/Project2_Cover-600w.webp 600w, /Sahil-Ali-Portfolio/images/projects/Bansal_Project2/Project2_Cover-1200w.webp 1200w",sizes:"(max-width: 640px) 300px, (max-width: 1024px) 600px, 1200px"},links:[{label:"View Dashboard",url:"/projects/bansal-dashboard"},{label:"Case Study",url:"/projects/bansal-dashboard/case-study"}],technologies:["Tableau","Data Visualization","Retail Analytics","Business Intelligence","Inventory Management"],date:"2024-02-15",featured:!0,challenge:"Bansal Supermarket needed better visibility into their sales performance and inventory management across multiple locations. They were facing challenges with stockouts, inefficient promotions, and lacked real-time insights into customer buying patterns.",solution:"Developed an interactive Tableau dashboard that integrated data from POS systems and inventory management. The solution included sales trend analysis, inventory turnover metrics, and customer segmentation to optimize stock levels and promotional strategies.",role:"Data Analyst | Led the end-to-end development of the analytics solution, from data collection and cleaning to visualization and stakeholder training.",gallery:[{src:"/images/projects/Bansal_Project2/bs-saleVSpft-600w.webp",alt:"Sales vs Profit Analysis",caption:"Sales vs. Profit Analysis",srcSet:"/images/projects/Bansal_Project2/bs-saleVSpft-300w.webp 300w, /images/projects/Bansal_Project2/bs-saleVSpft-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Bansal_Project2/bs-stockTO-600w.webp",alt:"Stock Turnover Dashboard",caption:"Inventory Turnover Analysis",srcSet:"/images/projects/Bansal_Project2/bs-stockTO-300w.webp 300w, /images/projects/Bansal_Project2/bs-stockTO-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Bansal_Project2/bs-top10-600w.webp",alt:"Top Performing Products",caption:"Top 10 Products by Revenue",srcSet:"/images/projects/Bansal_Project2/bs-top10-300w.webp 300w, /images/projects/Bansal_Project2/bs-top10-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Bansal_Project2/bs2-600w.webp",alt:"Sales Dashboard",caption:"Sales Performance Dashboard",srcSet:"/images/projects/Bansal_Project2/bs2-300w.webp 300w, /images/projects/Bansal_Project2/bs2-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Bansal_Project2/bs3-600w.webp",alt:"Inventory Dashboard",caption:"Inventory Management Dashboard",srcSet:"/images/projects/Bansal_Project2/bs3-300w.webp 300w, /images/projects/Bansal_Project2/bs3-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"}],metrics:[{label:"Revenue Increase",value:"12%"},{label:"Stockout Reduction",value:"35%"},{label:"Reporting Time Saved",value:"20 hours/week"}]},{id:"ekam-attendance",title:"Ekam Attendance & Payroll Automation",subtitle:"HR & Finance Process Optimization",description:"Designed and implemented an automated attendance tracking and payroll reporting system using SQL and Google Apps Script, streamlining HR and finance operations for Ekam Indian Groceries.",highlights:["Reduced manual data entry and reporting time by 80% (20+ hours monthly)","Eliminated calculation errors in payroll processing","Enabled real-time attendance tracking and reporting"],image:{src:"/Sahil-Ali-Portfolio/images/projects/Attendance_Project3/Project3_Cover-600w.webp",alt:"Ekam Attendance Management System",srcSet:"/Sahil-Ali-Portfolio/images/projects/Attendance_Project3/Project3_Cover-300w.webp 300w, /Sahil-Ali-Portfolio/images/projects/Attendance_Project3/Project3_Cover-600w.webp 600w, /Sahil-Ali-Portfolio/images/projects/Attendance_Project3/Project3_Cover-1200w.webp 1200w",sizes:"(max-width: 640px) 300px, (max-width: 1024px) 600px, 1200px"},links:[{label:"View Project",url:"/projects/ekam-attendance"},{label:"Case Study",url:"/projects/ekam-attendance/case-study"}],technologies:["SQL","Google Apps Script","Google Sheets","Process Automation","HR Analytics"],date:"2024-01-20",challenge:"Ekam Indian Groceries was spending excessive time on manual attendance tracking and payroll calculations, leading to errors and inefficiencies in their HR and finance operations. The existing process was time-consuming and prone to human error.",solution:"Developed a custom solution using SQL for data processing and Google Apps Script for automation. The system automatically imports attendance data, calculates work hours, processes leave balances, and generates payroll reports, significantly reducing manual effort and improving accuracy.",role:"Automation Specialist | Designed and implemented the end-to-end solution, including database design, automation scripts, and user training.",gallery:[{src:"/images/projects/Attendance_Project3/Attendance_before-600w.webp",alt:"Before Automation - Manual Process",caption:"Manual Process - Before Automation",srcSet:"/images/projects/Attendance_Project3/Attendance_before-300w.webp 300w, /images/projects/Attendance_Project3/Attendance_before-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Attendance_Project3/Attendance_after-600w.webp",alt:"After Automation - Digital Dashboard",caption:"Automated Dashboard - After Implementation",srcSet:"/images/projects/Attendance_Project3/Attendance_after-300w.webp 300w, /images/projects/Attendance_Project3/Attendance_after-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/Attendance_Project3/Project3_Cover-600w.webp",alt:"Attendance System Dashboard",caption:"Attendance System Dashboard",srcSet:"/images/projects/Attendance_Project3/Project3_Cover-300w.webp 300w, /images/projects/Attendance_Project3/Project3_Cover-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"}],metrics:[{label:"Time Savings",value:"20+ hours/month"},{label:"Error Reduction",value:"100%"},{label:"Processing Time",value:"From 2 days to 2 hours"}]},{id:"powerbi-cashflow",title:"Multi-Store Financial Analytics Dashboard",subtitle:"Real-time Cash Flow & Financial Monitoring",description:"Developed a comprehensive Power BI solution for monitoring financial performance across multiple retail locations, providing real-time visibility into cash flow, sales, and expense metrics.",highlights:["Reduced financial discrepancies by 90% through real-time monitoring","Enabled data-driven decision making with daily financial insights","Streamlined financial reporting across 5+ store locations"],image:{src:"/Sahil-Ali-Portfolio/images/projects/RetailCashFlow_Project4/Project4_Cover-600w.webp",alt:"Retail Cash Flow Analysis Dashboard",srcSet:"/Sahil-Ali-Portfolio/images/projects/RetailCashFlow_Project4/Project4_Cover-300w.webp 300w, /Sahil-Ali-Portfolio/images/projects/RetailCashFlow_Project4/Project4_Cover-600w.webp 600w, /Sahil-Ali-Portfolio/images/projects/RetailCashFlow_Project4/Project4_Cover-1200w.webp 1200w",sizes:"(max-width: 640px) 300px, (max-width: 1024px) 600px, 1200px"},links:[{label:"View Dashboard",url:"/projects/powerbi-cashflow"},{label:"Case Study",url:"/projects/powerbi-cashflow/case-study"}],technologies:["Power BI","DAX","Financial Analysis","Data Visualization","Business Intelligence"],date:"2023-12-10",featured:!0,challenge:"The retail chain lacked a centralized view of financial performance across locations, leading to delayed insights, difficulty in identifying discrepancies, and challenges in making timely financial decisions.",solution:"Created an interactive Power BI dashboard that aggregates financial data from multiple store locations. The solution includes automated data refreshes, anomaly detection for cash discrepancies, and drill-down capabilities for detailed analysis of sales, expenses, and cash flow metrics.",role:"Business Intelligence Developer | Led the design and implementation of the financial analytics platform, including data modeling, visualization, and user training.",gallery:[{src:"/images/projects/RetailCashFlow_Project4/Project4_Cover-600w.webp",alt:"Financial Overview Dashboard",caption:"Financial Performance Overview",srcSet:"/images/projects/RetailCashFlow_Project4/Project4_Cover-300w.webp 300w, /images/projects/RetailCashFlow_Project4/Project4_Cover-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/RetailCashFlow_Project4/CashFlow1-600w.webp",alt:"Cash Flow Analysis",caption:"Cash Flow Analysis Dashboard",srcSet:"/images/projects/RetailCashFlow_Project4/CashFlow1-300w.webp 300w, /images/projects/RetailCashFlow_Project4/CashFlow1-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/images/projects/RetailCashFlow_Project4/CashFlow2-600w.webp",alt:"Financial Metrics",caption:"Financial Metrics Overview",srcSet:"/images/projects/RetailCashFlow_Project4/CashFlow2-300w.webp 300w, /images/projects/RetailCashFlow_Project4/CashFlow2-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"}],metrics:[{label:"Discrepancy Reduction",value:"90%"},{label:"Reporting Time Saved",value:"15 hours/week"},{label:"Stores Connected",value:"5+"}]},{id:"ai-decision-system",title:"AI-Powered Personal Productivity System",subtitle:"Intelligent Task & Time Management",description:"Developed an AI-driven personal productivity system that automates task prioritization, scheduling, and decision-making using GPT, Notion, and Google Apps Script.",highlights:["Saved 2+ hours daily through intelligent task automation and scheduling","Improved task completion rate by 65% with AI-powered prioritization","Created a seamless integration between Notion, Google Calendar, and task management"],image:{src:"/Sahil-Ali-Portfolio/images/projects/AIautomation_Project5/Project5_Cover-600w.webp",alt:"AI-Powered Productivity System Dashboard",srcSet:"/Sahil-Ali-Portfolio/images/projects/AIautomation_Project5/Project5_Cover-300w.webp 300w, /Sahil-Ali-Portfolio/images/projects/AIautomation_Project5/Project5_Cover-600w.webp 600w, /Sahil-Ali-Portfolio/images/projects/AIautomation_Project5/Project5_Cover-1200w.webp 1200w",sizes:"(max-width: 640px) 300px, (max-width: 1024px) 600px, 1200px"},links:[{label:"Explore the System",url:"/projects/ai-decision-system"},{label:"Case Study",url:"/projects/ai-decision-system/case-study"}],technologies:["AI/ML","GPT Integration","Google Apps Script","Notion API","Productivity Automation"],date:"2023-11-05",challenge:"Managing multiple projects, tasks, and priorities was becoming increasingly complex and time-consuming, leading to decision fatigue and reduced productivity. The existing tools didn't provide intelligent prioritization or automation capabilities.",solution:"Built a custom AI system that integrates with Notion and Google services to automate task management. The solution uses GPT to analyze tasks, suggest priorities, and create optimized daily schedules based on deadlines, energy levels, and personal productivity patterns.",role:"Product Developer & AI Specialist | Designed and implemented the entire system, including AI model integration, API connections, and user interface.",gallery:[{src:"/images/projects/AIautomation_Project5/Project5_Cover-600w.webp",alt:"AI Task Management Dashboard",caption:"AI-Powered Task Management Interface",srcSet:"/images/projects/AIautomation_Project5/Project5_Cover-300w.webp 300w, /images/projects/AIautomation_Project5/Project5_Cover-600w.webp 600w, /images/projects/AIautomation_Project5/Project5_Cover-1200w.webp 1200w",sizes:"(max-width: 640px) 300px, (max-width: 1024px) 600px, 1200px"},{src:"/images/projects/AIautomation_Project5/Project5_Cover-600w.webp",alt:"AI Integration",caption:"AI Integration with Productivity Tools",srcSet:"/images/projects/AIautomation_Project5/Project5_Cover-300w.webp 300w, /images/projects/AIautomation_Project5/Project5_Cover-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"}],metrics:[{label:"Daily Time Saved",value:"2+ hours"},{label:"Task Completion Rate",value:"65% improvement"},{label:"Automation Coverage",value:"80% of routine decisions"}]},{id:"gpt-automation",title:"GPT Automation Suite",subtitle:"Business Workflow Automation",description:"Designed AI + Zapier automations for Excel and emails—auto-generating reports, syncing data, and streamlining ops for daily business use.",highlights:["Saved 15+ hours/month by eliminating repetitive manual work."],image:{src:"/images/projects/CommingSoon_Project6/Project6_Cover-600w.webp",alt:"GPT Automation Suite",srcSet:"/images/projects/CommingSoon_Project6/Project6_Cover-300w.webp 300w, /images/projects/CommingSoon_Project6/Project6_Cover-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},links:[{label:"See the Project",url:"/projects/gpt-automation"}],technologies:["GPT","Zapier","Automation"],date:"2023-10-15",solution:"",challenge:"",role:void 0},{id:"portfolio-creation",title:"Portfolio Creation",subtitle:"Showcasing AI-Assisted Development",description:"A demonstration of how I leveraged AI tools as a non-developer to create professional portfolios, including this one and others.",highlights:["AI-assisted development","No-code solutions","Responsive design","Modern UI/UX"],image:{src:"/Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-600w.webp",alt:"AI-Powered Portfolio Creation",srcSet:"/Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-300w.webp 300w, /Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-600w.webp 600w, /Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-1200w.webp 1200w",sizes:"(max-width: 640px) 300px, (max-width: 1024px) 600px, 1200px"},gallery:[{src:"/Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-600w.webp",alt:"Portfolio Showcase",caption:"Modern Portfolio Showcase",srcSet:"/Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-300w.webp 300w, /Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"},{src:"/Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-600w.webp",alt:"Responsive Design",caption:"Fully Responsive Layout",srcSet:"/Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-300w.webp 300w, /Sahil-Ali-Portfolio/images/projects/Mahira_Portfolio_Web+AI/Project7_Cover-600w.webp 600w",sizes:"(max-width: 640px) 300px, 600px"}],links:[{label:"View Project",url:"/projects/portfolio-creation"}],technologies:["AI Tools","React","TypeScript","Tailwind CSS","Responsive Design"],date:"2024-08-01",featured:!0,solution:"",challenge:"",role:void 0}],gC=({project:r})=>{var e;return m.jsx("article",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden border border-border",children:m.jsxs("a",{href:((e=r.links[0])==null?void 0:e.url)??"#",className:"block focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2","aria-label":`View details of project ${r.title}`,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("img",{src:r.image.src,alt:r.image.alt,className:"w-full h-48 object-cover",loading:"lazy",decoding:"async"}),m.jsxs("div",{className:"p-5",children:[m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-1",children:r.title}),m.jsx("p",{className:"text-muted-foreground mb-3 text-sm",children:r.subtitle}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3 line-clamp-3",children:r.description}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.technologies.map(t=>m.jsx("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded text-xs font-medium",children:t},t))}),m.jsx("time",{dateTime:r.date,className:"text-xs text-muted-foreground",children:new Date(r.date).toLocaleDateString(void 0,{year:"numeric",month:"short"})})]})]})})},vC=()=>{const r=Gg.filter(e=>e.featured);return m.jsxs("section",{id:"projects","aria-labelledby":"projects-heading",className:"py-16 px-4 max-w-7xl mx-auto scroll-mt-16",children:[m.jsx("div",{className:"w-full mb-16 lg:mb-20",children:m.jsx(Er,{title:"Featured Projects",subtitle:"Showcasing my best work and technical capabilities",className:"text-left"})}),m.jsx("div",{className:"grid gap-10 sm:grid-cols-2 lg:grid-cols-3",children:r.map(e=>m.jsx(gC,{project:e},e.id))})]})},xC=[{id:"testimonial-1",name:"Alex Johnson",role:"CEO",company:"Bansal Supermarket",avatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200&h=200&fit=crop&crop=faces",content:"Sahil transformed our sales analysis with his Tableau dashboard. The insights helped us increase revenue by 12% through better inventory management. His attention to detail and understanding of retail operations is exceptional.",rating:5,date:"2024-02-20",project:"Bansal Supermarket Tableau Dashboard"},{id:"testimonial-2",name:"Priya Sharma",role:"HR Manager",company:"Ekam Indian Groceries",avatar:"https://images.unsplash.com/photo-1603415526960-f8fbdc7a2f5b?w=200&h=200&fit=crop&crop=faces",content:"The attendance tracking system Sahil automated for us saved countless hours of manual work. His SQL and Google Sheets integration was a game-changer for our HR and finance teams. Highly recommended for any business looking to streamline operations.",rating:5,date:"2024-01-25",project:"Ekam Attendance Tracker"},{id:"testimonial-3",name:"Michael Chen",role:"Finance Director",company:"Retail Chain Australia",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&crop=faces",content:"Sahil's Power BI dashboard gave us real-time visibility into our multi-store cash flow. His ability to identify and flag discrepancies has been invaluable. A true professional who delivers beyond expectations.",rating:5,date:"2023-12-15"},{id:"testimonial-4",name:"Sarah Williams",role:"Operations Manager",company:"FoodTech Solutions",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=200&h=200&fit=crop&crop=faces",content:"The AI decision system Sahil built has become an integral part of our daily operations. His understanding of AI and automation is impressive, and he delivered exactly what we needed to optimize our workflows.",rating:4,date:"2023-11-10"},{id:"testimonial-5",name:"Raj Patel",role:"CTO",company:"TechStart Inc.",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=200&h=200&fit=crop&crop=faces",content:"Sahil's GPT automation suite saved us over 15 hours of manual work each month. His ability to integrate various tools and create seamless workflows is remarkable. Looking forward to more collaborations!",rating:5,date:"2023-10-20",project:"GPT Automation Suite"},{id:"testimonial-6",name:"Emma Wilson",role:"Marketing Director",company:"Creative Minds Agency",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200&h=200&fit=crop&crop=faces",content:"Working with Sahil on our portfolio website was a pleasure. He understood our vision and delivered a stunning, responsive design that perfectly showcases our work. His technical skills and creative approach are top-notch!",rating:5,date:"2023-09-30"}],yC={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.2}}},_C={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:120,damping:20}}},bC=r=>Array(5).fill(0).map((e,t)=>m.jsx("svg",{className:`w-4 h-4 inline-block ${t<r?"text-yellow-400":"text-gray-300 dark:text-gray-600"}`,fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:m.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.97a1 1 0 00.95.69h4.178c.969 0 1.371 1.24.588 1.81l-3.385 2.455a1 1 0 00-.364 1.118l1.287 3.969c.3.922-.755 1.688-1.54 1.118l-3.384-2.454a1 1 0 00-1.176 0L5.21 16.05c-.784.57-1.838-.196-1.54-1.118l1.287-3.97a1 1 0 00-.364-1.117L1.208 9.397c-.783-.57-.38-1.81.588-1.81h4.178a1 1 0 00.95-.69l1.285-3.97z"})},t)),wC=()=>m.jsxs("section",{id:"testimonials","aria-label":"Testimonials",className:"py-16 bg-background",children:[m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"w-full mb-16 lg:mb-20",children:m.jsx(Er,{title:"What People Say",subtitle:"Client testimonials and feedback"})})}),m.jsx(ve.div,{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-3 max-w-7xl mx-auto",variants:yC,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:xC.map(({id:r,name:e,role:t,company:n,avatar:i,content:s,rating:a,date:o,project:l})=>m.jsxs(ve.article,{variants:_C,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col",tabIndex:0,children:[m.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6 flex-grow leading-relaxed",children:["“",s,"”"]}),m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(ov,{src:i,alt:`${e}'s avatar`,width:56,height:56,className:"w-14 h-14 rounded-full object-cover border-2 border-primary"}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:e}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t," @ ",n]})]})]}),m.jsx("div",{className:"mb-3","aria-label":`Rating: ${a} out of 5 stars`,children:bC(a)}),l&&m.jsxs("p",{className:"text-sm text-primary dark:text-blue-400 font-medium mb-2",children:["Project: ",m.jsx("span",{className:"italic",children:l})]}),m.jsx("time",{dateTime:o,className:"mt-auto text-xs text-gray-400 dark:text-gray-500",children:new Date(o).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]},r))})]});let SC={data:""},MC=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||SC,EC=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,TC=/\/\*[^]*?\*\/|  +/g,E_=/\n+/g,Zs=(r,e)=>{let t="",n="",i="";for(let s in r){let a=r[s];s[0]=="@"?s[1]=="i"?t=s+" "+a+";":n+=s[1]=="f"?Zs(a,s):s+"{"+Zs(a,s[1]=="k"?"":e)+"}":typeof a=="object"?n+=Zs(a,e?e.replace(/([^,])+/g,o=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Zs.p?Zs.p(s,a):s+":"+a+";")}return t+(e&&i?e+"{"+i+"}":i)+n},ls={},cS=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+cS(r[t]);return e}return r},AC=(r,e,t,n,i)=>{let s=cS(r),a=ls[s]||(ls[s]=(l=>{let d=0,h=11;for(;d<l.length;)h=101*h+l.charCodeAt(d++)>>>0;return"go"+h})(s));if(!ls[a]){let l=s!==r?r:(d=>{let h,f,p=[{}];for(;h=EC.exec(d.replace(TC,""));)h[4]?p.shift():h[3]?(f=h[3].replace(E_," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][h[1]]=h[2].replace(E_," ").trim();return p[0]})(r);ls[a]=Zs(i?{["@keyframes "+a]:l}:l,t?"":"."+a)}let o=t&&ls.g?ls.g:null;return t&&(ls.g=ls[a]),((l,d,h,f)=>{f?d.data=d.data.replace(f,l):d.data.indexOf(l)===-1&&(d.data=h?l+d.data:d.data+l)})(ls[a],e,n,o),a},CC=(r,e,t)=>r.reduce((n,i,s)=>{let a=e[s];if(a&&a.call){let o=a(t),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":Zs(o,""):o===!1?"":o}return n+i+(a??"")},"");function _f(r){let e=this||{},t=r.call?r(e.p):r;return AC(t.unshift?t.raw?CC(t,[].slice.call(arguments,1),e.p):t.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):t,MC(e.target),e.g,e.o,e.k)}let uS,Wg,Xg;_f.bind({g:1});let Ms=_f.bind({k:1});function RC(r,e,t,n){Zs.p=e,uS=r,Wg=t,Xg=n}function ha(r,e){let t=this||{};return function(){let n=arguments;function i(s,a){let o=Object.assign({},s),l=o.className||i.className;t.p=Object.assign({theme:Wg&&Wg()},o),t.o=/ *go\d+/.test(l),o.className=_f.apply(t,n)+(l?" "+l:"");let d=r;return r[0]&&(d=o.as||r,delete o.as),Xg&&d[0]&&Xg(o),uS(d,o)}return i}}var PC=r=>typeof r=="function",qg=(r,e)=>PC(r)?r(e):r,NC=(()=>{let r=0;return()=>(++r).toString()})(),IC=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),LC=20,dS=(r,e)=>{switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,LC)};case 1:return{...r,toasts:r.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return dS(r,{type:r.toasts.find(s=>s.id===t.id)?1:0,toast:t});case 3:let{toastId:n}=e;return{...r,toasts:r.toasts.map(s=>s.id===n||n===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let i=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},kC=[],cm={toasts:[],pausedAt:void 0},hv=r=>{cm=dS(cm,r),kC.forEach(e=>{e(cm)})},DC=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||NC()}),Eu=r=>(e,t)=>{let n=DC(e,r,t);return hv({type:2,toast:n}),n.id},ci=(r,e)=>Eu("blank")(r,e);ci.error=Eu("error");ci.success=Eu("success");ci.loading=Eu("loading");ci.custom=Eu("custom");ci.dismiss=r=>{hv({type:3,toastId:r})};ci.remove=r=>hv({type:4,toastId:r});ci.promise=(r,e,t)=>{let n=ci.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof r=="function"&&(r=r()),r.then(i=>{let s=e.success?qg(e.success,i):void 0;return s?ci.success(s,{id:n,...t,...t==null?void 0:t.success}):ci.dismiss(n),i}).catch(i=>{let s=e.error?qg(e.error,i):void 0;s?ci.error(s,{id:n,...t,...t==null?void 0:t.error}):ci.dismiss(n)}),r};var OC=Ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,UC=Ms`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,FC=Ms`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zC=ha("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${OC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${UC} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${FC} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jC=Ms`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,BC=ha("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${jC} 1s linear infinite;
`,HC=Ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,VC=Ms`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,GC=ha("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${HC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${VC} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,WC=ha("div")`
  position: absolute;
`,XC=ha("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,qC=Ms`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,YC=ha("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${qC} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ZC=({toast:r})=>{let{icon:e,type:t,iconTheme:n}=r;return e!==void 0?typeof e=="string"?B.createElement(YC,null,e):e:t==="blank"?null:B.createElement(XC,null,B.createElement(BC,{...n}),t!=="loading"&&B.createElement(WC,null,t==="error"?B.createElement(zC,{...n}):B.createElement(GC,{...n})))},KC=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,$C=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,JC="0%{opacity:0;} 100%{opacity:1;}",QC="0%{opacity:1;} 100%{opacity:0;}",eR=ha("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,tR=ha("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,nR=(r,e)=>{let t=r.includes("top")?1:-1,[n,i]=IC()?[JC,QC]:[KC(t),$C(t)];return{animation:e?`${Ms(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ms(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};B.memo(({toast:r,position:e,style:t,children:n})=>{let i=r.height?nR(r.position||e||"top-center",r.visible):{opacity:0},s=B.createElement(ZC,{toast:r}),a=B.createElement(tR,{...r.ariaProps},qg(r.message,r));return B.createElement(eR,{className:r.className,style:{...i,...t,...r.style}},typeof n=="function"?n({icon:s,message:a}):B.createElement(B.Fragment,null,s,a))});RC(B.createElement);_f`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const iR={hidden:{opacity:0,y:20},visible:r=>({opacity:1,y:0,transition:{delay:r*.1,duration:.4}})},rR=()=>{const[r,e]=B.useState(!1),[t,n]=B.useState(!1),[i,s]=B.useState({}),a=l=>{var h,f,p;const d={};return(h=l.get("name"))!=null&&h.toString().trim()||(d.name="Name is required"),(f=l.get("email"))!=null&&f.toString().trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.get("email"))||(d.email="Invalid email format"):d.email="Email is required",(p=l.get("message"))!=null&&p.toString().trim()||(d.message="Message is required"),d},o=async l=>{l.preventDefault();const d=new FormData(l.currentTarget),h=a(d);if(Object.keys(h).length>0){s(h),ci.error("Please fix the highlighted fields");return}s({}),e(!0);try{(await fetch("https://formspree.io/f/xpwrjjqj",{method:"POST",body:d,headers:{Accept:"application/json"}})).ok?(n(!0),ci.success("Message sent successfully!")):ci.error("Failed to send message. Please try again.")}catch(f){ci.error("Something went wrong. Please try again."),console.error(f)}finally{e(!1)}};return m.jsx("section",{id:"contact",className:"py-16 bg-background",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx("div",{className:"w-full mb-16 lg:mb-20",children:m.jsx(Er,{title:"Get in Touch",subtitle:"I'm always open to discussing new projects, creative ideas, or opportunities to be part of your visions."})}),m.jsx(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"max-w-3xl mx-auto",children:m.jsx(mr,{children:t?m.jsxs(ve.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.4},className:"text-center space-y-4",children:[m.jsx(ve.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20},className:"flex justify-center",children:m.jsx(jw,{className:"text-green-500 w-12 h-12"})}),m.jsx("h3",{className:"text-xl font-semibold",children:"Message Sent Successfully!"}),m.jsx("p",{className:"text-muted-foreground",children:"Thank you for your message! I'll get back to you soon."}),m.jsx(ve.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!1),className:"bg-primary text-white py-2 px-6 rounded-lg shadow hover:bg-primary/90 transition-colors",children:"Send Another Message"})]},"success"):m.jsxs(ve.form,{onSubmit:o,className:"space-y-4",initial:"hidden",animate:"visible",children:[["name","email","message"].map((l,d)=>m.jsxs(ve.div,{custom:d,variants:iR,children:[l!=="message"?m.jsx("input",{type:l==="email"?"email":"text",name:l,placeholder:`Your ${l.charAt(0).toUpperCase()+l.slice(1)}`,className:`w-full px-4 py-2 rounded-lg border ${i[l]?"border-red-500":"border-border"} focus:outline-none focus:ring-2 focus:ring-primary`}):m.jsx("textarea",{name:l,placeholder:"Your Message",rows:4,className:`w-full px-4 py-2 rounded-lg border ${i[l]?"border-red-500":"border-border"} focus:outline-none focus:ring-2 focus:ring-primary`}),i[l]&&m.jsx("p",{className:"text-red-500 text-sm mt-1",children:i[l]})]},l)),m.jsx(ve.button,{whileHover:{scale:r?1:1.03},whileTap:{scale:r?1:.97},type:"submit",disabled:r,className:"w-full flex items-center justify-center gap-2 bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?m.jsx(ve.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:m.jsx(kc,{className:"w-5 h-5"})}):m.jsxs(m.Fragment,{children:[m.jsx(BA,{className:"w-5 h-5"}),"Send Message"]})})]},"form")})})]})})},T_=()=>m.jsxs("main",{className:"w-full","aria-label":"Home page main content",children:[m.jsx(C3,{}),m.jsx(Kn,{}),m.jsx(R3,{}),m.jsx(Kn,{}),m.jsx(dC,{}),m.jsx(Kn,{}),m.jsx(mC,{}),m.jsx(Kn,{}),m.jsx(vC,{}),m.jsx(Kn,{}),m.jsx(wC,{}),m.jsx(Kn,{}),m.jsx(rR,{})]});function xs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function hS(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Yi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Tl={duration:.5,overwrite:!1,delay:0},fv,ti,gn,hr=1e8,sn=1/hr,Yg=Math.PI*2,sR=Yg/4,aR=0,fS=Math.sqrt,oR=Math.cos,lR=Math.sin,Jn=function(e){return typeof e=="string"},Tn=function(e){return typeof e=="function"},Es=function(e){return typeof e=="number"},pv=function(e){return typeof e>"u"},Zr=function(e){return typeof e=="object"},Pi=function(e){return e!==!1},mv=function(){return typeof window<"u"},kd=function(e){return Tn(e)||Jn(e)},pS=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},di=Array.isArray,Zg=/(?:-?\.?\d|\.)+/gi,mS=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,hl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,um=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,gS=/[+-]=-?[.\d]+/,vS=/[^,'"\[\]\s]+/gi,cR=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_n,Br,Kg,gv,$i={},$h={},xS,yS=function(e){return($h=Al(e,$i))&&Di},vv=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Wc=function(e,t){return!t&&console.warn(e)},_S=function(e,t){return e&&($i[e]=t)&&$h&&($h[e]=t)||$i},Xc=function(){return 0},uR={suppressEvents:!0,isStart:!0,kill:!1},zh={suppressEvents:!0,kill:!1},dR={suppressEvents:!0},xv={},ta=[],$g={},bS,Gi={},dm={},A_=30,jh=[],yv="",_v=function(e){var t=e[0],n,i;if(Zr(t)||Tn(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=jh.length;i--&&!jh[i].targetTest(t););n=jh[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new WS(e[i],n)))||e.splice(i,1);return e},Ka=function(e){return e._gsap||_v(fr(e))[0]._gsap},wS=function(e,t,n){return(n=e[t])&&Tn(n)?e[t]():pv(n)&&e.getAttribute&&e.getAttribute(t)||n},Ni=function(e,t){return(e=e.split(",")).forEach(t)||e},Nn=function(e){return Math.round(e*1e5)/1e5||0},Fn=function(e){return Math.round(e*1e7)/1e7||0},_l=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},hR=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},Jh=function(){var e=ta.length,t=ta.slice(0),n,i;for($g={},ta.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},bv=function(e){return!!(e._initted||e._startAt||e.add)},SS=function(e,t,n,i){ta.length&&!ti&&Jh(),e.render(t,n,!!(ti&&t<0&&bv(e))),ta.length&&!ti&&Jh()},MS=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(vS).length<2?t:Jn(e)?e.trim():e},ES=function(e){return e},Ji=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},fR=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},Al=function(e,t){for(var n in t)e[n]=t[n];return e},C_=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Zr(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},Qh=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},Dc=function(e){var t=e.parent||_n,n=e.keyframes?fR(di(e.keyframes)):Ji;if(Pi(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},pR=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},TS=function(e,t,n,i,s){var a=e[i],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},bf=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=t._prev,a=t._next;s?s._next=a:e[n]===t&&(e[n]=a),a?a._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},aa=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},$a=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},mR=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Jg=function(e,t,n,i){return e._startAt&&(ti?e._startAt.revert(zh):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},gR=function r(e){return!e||e._ts&&r(e.parent)},R_=function(e){return e._repeat?Cl(e._tTime,e=e.duration()+e._rDelay)*e:0},Cl=function(e,t){var n=Math.floor(e=Fn(e/t));return e&&n===e?n-1:n},ef=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},wf=function(e){return e._end=Fn(e._start+(e._tDur/Math.abs(e._ts||e._rts||sn)||0))},Sf=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Fn(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),wf(e),n._dirty||$a(n,e)),e},AS=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=ef(e.rawTime(),t),(!t._dur||Tu(0,t.totalDuration(),n)-t._tTime>sn)&&t.render(n,!0)),$a(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-sn}},Hr=function(e,t,n,i){return t.parent&&aa(t),t._start=Fn((Es(n)?n:n||e!==_n?ur(e,n,t):e._time)+t._delay),t._end=Fn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),TS(e,t,"_first","_last",e._sort?"_start":0),Qg(t)||(e._recent=t),i||AS(e,t),e._ts<0&&Sf(e,e._tTime),e},CS=function(e,t){return($i.ScrollTrigger||vv("scrollTrigger",t))&&$i.ScrollTrigger.create(t,e)},RS=function(e,t,n,i,s){if(Sv(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!ti&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&bS!==Wi.frame)return ta.push(e),e._lazy=[s,i],1},vR=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},Qg=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},xR=function(e,t,n,i){var s=e.ratio,a=t<0||!t&&(!e._start&&vR(e)&&!(!e._initted&&Qg(e))||(e._ts<0||e._dp._ts<0)&&!Qg(e))?0:1,o=e._rDelay,l=0,d,h,f;if(o&&e._repeat&&(l=Tu(0,e._tDur,t),h=Cl(l,o),e._yoyo&&h&1&&(a=1-a),h!==Cl(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||ti||i||e._zTime===sn||!t&&e._zTime){if(!e._initted&&RS(e,t,i,n,l))return;for(f=e._zTime,e._zTime=t||(n?sn:0),n||(n=t&&!f),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,d=e._pt;d;)d.r(a,d.d),d=d._next;t<0&&Jg(e,t,n,!0),e._onUpdate&&!n&&qi(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&qi(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&aa(e,1),!n&&!ti&&(qi(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},yR=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Rl=function(e,t,n,i){var s=e._repeat,a=Fn(t)||0,o=e._tTime/e._tDur;return o&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:Fn(a*(s+1)+e._rDelay*s):a,o>0&&!i&&Sf(e,e._tTime=e._tDur*o),e.parent&&wf(e),n||$a(e.parent,e),e},P_=function(e){return e instanceof bi?$a(e):Rl(e,e._dur)},_R={_start:0,endTime:Xc,totalDuration:Xc},ur=function r(e,t,n){var i=e.labels,s=e._recent||_R,a=e.duration()>=hr?s.endTime(!1):e._dur,o,l,d;return Jn(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),d=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(d?(o<0?s:n).totalDuration()/100:1)):o<0?(t in i||(i[t]=a),i[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),d&&n&&(l=l/100*(di(n)?n[0]:n).totalDuration()),o>1?r(e,t.substr(0,o-1),n)+l:a+l)):t==null?a:+t},Oc=function(e,t,n){var i=Es(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s],o,l;if(i&&(a.duration=t[1]),a.parent=n,e){for(o=a,l=n;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=Pi(l.vars.inherit)&&l.parent;a.immediateRender=Pi(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Un(t[0],a,t[s+1])},fa=function(e,t){return e||e===0?t(e):t},Tu=function(e,t,n){return n<e?e:n>t?t:n},ui=function(e,t){return!Jn(e)||!(t=cR.exec(e))?"":t[1]},bR=function(e,t,n){return fa(n,function(i){return Tu(e,t,i)})},e0=[].slice,PS=function(e,t){return e&&Zr(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Zr(e[0]))&&!e.nodeType&&e!==Br},wR=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return Jn(i)&&!t||PS(i,1)?(s=n).push.apply(s,fr(i)):n.push(i)})||n},fr=function(e,t,n){return gn&&!t&&gn.selector?gn.selector(e):Jn(e)&&!n&&(Kg||!Pl())?e0.call((t||gv).querySelectorAll(e),0):di(e)?wR(e,n):PS(e)?e0.call(e,0):e?[e]:[]},t0=function(e){return e=fr(e)[0]||Wc("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return fr(t,n.querySelectorAll?n:n===e?Wc("Invalid scope")||gv.createElement("div"):e)}},NS=function(e){return e.sort(function(){return .5-Math.random()})},IS=function(e){if(Tn(e))return e;var t=Zr(e)?e:{each:e},n=Ja(t.ease),i=t.from||0,s=parseFloat(t.base)||0,a={},o=i>0&&i<1,l=isNaN(i)||o,d=t.axis,h=i,f=i;return Jn(i)?h=f={center:.5,edges:.5,end:1}[i]||0:!o&&l&&(h=i[0],f=i[1]),function(p,g,y){var b=(y||t).length,_=a[b],x,M,S,E,T,P,I,k,R;if(!_){if(R=t.grid==="auto"?0:(t.grid||[1,hr])[1],!R){for(I=-hr;I<(I=y[R++].getBoundingClientRect().left)&&R<b;);R<b&&R--}for(_=a[b]=[],x=l?Math.min(R,b)*h-.5:i%R,M=R===hr?0:l?b*f/R-.5:i/R|0,I=0,k=hr,P=0;P<b;P++)S=P%R-x,E=M-(P/R|0),_[P]=T=d?Math.abs(d==="y"?E:S):fS(S*S+E*E),T>I&&(I=T),T<k&&(k=T);i==="random"&&NS(_),_.max=I-k,_.min=k,_.v=b=(parseFloat(t.amount)||parseFloat(t.each)*(R>b?b-1:d?d==="y"?b/R:R:Math.max(R,b/R))||0)*(i==="edges"?-1:1),_.b=b<0?s-b:s,_.u=ui(t.amount||t.each)||0,n=n&&b<0?HS(n):n}return b=(_[p]-_.min)/_.max||0,Fn(_.b+(n?n(b):b)*_.v)+_.u}},n0=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=Fn(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(Es(n)?0:ui(n))}},LS=function(e,t){var n=di(e),i,s;return!n&&Zr(e)&&(i=n=e.radius||hr,e.values?(e=fr(e.values),(s=!Es(e[0]))&&(i*=i)):e=n0(e.increment)),fa(t,n?Tn(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),d=hr,h=0,f=e.length,p,g;f--;)s?(p=e[f].x-o,g=e[f].y-l,p=p*p+g*g):p=Math.abs(e[f]-o),p<d&&(d=p,h=f);return h=!i||d<=i?e[h]:a,s||h===a||Es(a)?h:h+ui(a)}:n0(e))},kS=function(e,t,n,i){return fa(di(e)?!t:n===!0?!!(n=0):!i,function(){return di(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},SR=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(s,a){return a(s)},i)}},MR=function(e,t){return function(n){return e(parseFloat(n))+(t||ui(n))}},ER=function(e,t,n){return OS(e,t,0,1,n)},DS=function(e,t,n){return fa(n,function(i){return e[~~t(i)]})},TR=function r(e,t,n){var i=t-e;return di(e)?DS(e,r(0,e.length),t):fa(n,function(s){return(i+(s-e)%i)%i+e})},AR=function r(e,t,n){var i=t-e,s=i*2;return di(e)?DS(e,r(0,e.length-1),t):fa(n,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},qc=function(e){for(var t=0,n="",i,s,a,o;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),o=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(o?vS:Zg),n+=e.substr(t,i-t)+kS(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return n+e.substr(t,e.length-t)},OS=function(e,t,n,i,s){var a=t-e,o=i-n;return fa(s,function(l){return n+((l-e)/a*o||0)})},CR=function r(e,t,n,i){var s=isNaN(e+t)?0:function(g){return(1-g)*e+g*t};if(!s){var a=Jn(e),o={},l,d,h,f,p;if(n===!0&&(i=1)&&(n=null),a)e={p:e},t={p:t};else if(di(e)&&!di(t)){for(h=[],f=e.length,p=f-2,d=1;d<f;d++)h.push(r(e[d-1],e[d]));f--,s=function(y){y*=f;var b=Math.min(p,~~y);return h[b](y-b)},n=t}else i||(e=Al(di(e)?[]:{},e));if(!h){for(l in t)wv.call(o,e,l,"get",t[l]);s=function(y){return Tv(y,o)||(a?e.p:e)}}}return fa(n,s)},N_=function(e,t,n){var i=e.labels,s=hr,a,o,l;for(a in i)o=i[a]-t,o<0==!!n&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},qi=function(e,t,n){var i=e.vars,s=i[t],a=gn,o=e._ctx,l,d,h;if(s)return l=i[t+"Params"],d=i.callbackScope||e,n&&ta.length&&Jh(),o&&(gn=o),h=l?s.apply(d,l):s.call(d),gn=a,h},Rc=function(e){return aa(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ti),e.progress()<1&&qi(e,"onInterrupt"),e},fl,US=[],FS=function(e){if(e)if(e=!e.name&&e.default||e,mv()||e.headless){var t=e.name,n=Tn(e),i=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Xc,render:Tv,add:wv,kill:GR,modifier:VR,rawVars:0},a={targetTest:0,get:0,getSetter:Ev,aliases:{},register:0};if(Pl(),e!==i){if(Gi[t])return;Ji(i,Ji(Qh(e,s),a)),Al(i.prototype,Al(s,Qh(e,a))),Gi[i.prop=t]=i,e.targetTest&&(jh.push(i),xv[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}_S(t,i),e.register&&e.register(Di,i,Ii)}else US.push(e)},rn=255,Pc={aqua:[0,rn,rn],lime:[0,rn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,rn],navy:[0,0,128],white:[rn,rn,rn],olive:[128,128,0],yellow:[rn,rn,0],orange:[rn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[rn,0,0],pink:[rn,192,203],cyan:[0,rn,rn],transparent:[rn,rn,rn,0]},hm=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*rn+.5|0},zS=function(e,t,n){var i=e?Es(e)?[e>>16,e>>8&rn,e&rn]:0:Pc.black,s,a,o,l,d,h,f,p,g,y;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Pc[e])i=Pc[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&rn,i&rn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&rn,e&rn]}else if(e.substr(0,3)==="hsl"){if(i=y=e.match(Zg),!t)l=+i[0]%360/360,d=+i[1]/100,h=+i[2]/100,a=h<=.5?h*(d+1):h+d-h*d,s=h*2-a,i.length>3&&(i[3]*=1),i[0]=hm(l+1/3,s,a),i[1]=hm(l,s,a),i[2]=hm(l-1/3,s,a);else if(~e.indexOf("="))return i=e.match(mS),n&&i.length<4&&(i[3]=1),i}else i=e.match(Zg)||Pc.transparent;i=i.map(Number)}return t&&!y&&(s=i[0]/rn,a=i[1]/rn,o=i[2]/rn,f=Math.max(s,a,o),p=Math.min(s,a,o),h=(f+p)/2,f===p?l=d=0:(g=f-p,d=h>.5?g/(2-f-p):g/(f+p),l=f===s?(a-o)/g+(a<o?6:0):f===a?(o-s)/g+2:(s-a)/g+4,l*=60),i[0]=~~(l+.5),i[1]=~~(d*100+.5),i[2]=~~(h*100+.5)),n&&i.length<4&&(i[3]=1),i},jS=function(e){var t=[],n=[],i=-1;return e.split(na).forEach(function(s){var a=s.match(hl)||[];t.push.apply(t,a),n.push(i+=a.length+1)}),t.c=n,t},I_=function(e,t,n){var i="",s=(e+i).match(na),a=t?"hsla(":"rgba(",o=0,l,d,h,f;if(!s)return e;if(s=s.map(function(p){return(p=zS(p,t,1))&&a+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),n&&(h=jS(e),l=n.c,l.join(i)!==h.c.join(i)))for(d=e.replace(na,"1").split(hl),f=d.length-1;o<f;o++)i+=d[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!d)for(d=e.split(na),f=d.length-1;o<f;o++)i+=d[o]+s[o];return i+d[f]},na=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Pc)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),RR=/hsl[a]?\(/,BS=function(e){var t=e.join(" "),n;if(na.lastIndex=0,na.test(t))return n=RR.test(t),e[1]=I_(e[1],n),e[0]=I_(e[0],n,jS(e[1])),!0},Yc,Wi=function(){var r=Date.now,e=500,t=33,n=r(),i=n,s=1e3/240,a=s,o=[],l,d,h,f,p,g,y=function b(_){var x=r()-i,M=_===!0,S,E,T,P;if((x>e||x<0)&&(n+=x-t),i+=x,T=i-n,S=T-a,(S>0||M)&&(P=++f.frame,p=T-f.time*1e3,f.time=T=T/1e3,a+=S+(S>=s?4:s-S),E=1),M||(l=d(b)),E)for(g=0;g<o.length;g++)o[g](T,p,P,_)};return f={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(_){return p/(1e3/(_||60))},wake:function(){xS&&(!Kg&&mv()&&(Br=Kg=window,gv=Br.document||{},$i.gsap=Di,(Br.gsapVersions||(Br.gsapVersions=[])).push(Di.version),yS($h||Br.GreenSockGlobals||!Br.gsap&&Br||{}),US.forEach(FS)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),d=h||function(_){return setTimeout(_,a-f.time*1e3+1|0)},Yc=1,y(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),Yc=0,d=Xc},lagSmoothing:function(_,x){e=_||1/0,t=Math.min(x||33,e)},fps:function(_){s=1e3/(_||240),a=f.time*1e3+s},add:function(_,x,M){var S=x?function(E,T,P,I){_(E,T,P,I),f.remove(S)}:_;return f.remove(_),o[M?"unshift":"push"](S),Pl(),S},remove:function(_,x){~(x=o.indexOf(_))&&o.splice(x,1)&&g>=x&&g--},_listeners:o},f}(),Pl=function(){return!Yc&&Wi.wake()},Bt={},PR=/^[\d.\-M][\d.\-,\s]/,NR=/["']/g,IR=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,a=n.length,o,l,d;s<a;s++)l=n[s],o=s!==a-1?l.lastIndexOf(","):l.length,d=l.substr(0,o),t[i]=isNaN(d)?d.replace(NR,"").trim():+d,i=l.substr(o+1).trim();return t},LR=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},kR=function(e){var t=(e+"").split("("),n=Bt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[IR(t[1])]:LR(e).split(",").map(MS)):Bt._CE&&PR.test(e)?Bt._CE("",e):n},HS=function(e){return function(t){return 1-e(1-t)}},VS=function r(e,t){for(var n=e._first,i;n;)n instanceof bi?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},Ja=function(e,t){return e&&(Tn(e)?e:Bt[e]||kR(e))||t},mo=function(e,t,n,i){n===void 0&&(n=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:i},a;return Ni(e,function(o){Bt[o]=$i[o]=s,Bt[a=o.toLowerCase()]=n;for(var l in s)Bt[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Bt[o+"."+l]=s[l]}),s},GS=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},fm=function r(e,t,n){var i=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),a=s/Yg*(Math.asin(1/i)||0),o=function(h){return h===1?1:i*Math.pow(2,-10*h)*lR((h-a)*s)+1},l=e==="out"?o:e==="in"?function(d){return 1-o(1-d)}:GS(o);return s=Yg/s,l.config=function(d,h){return r(e,d,h)},l},pm=function r(e,t){t===void 0&&(t=1.70158);var n=function(a){return a?--a*a*((t+1)*a+t)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:GS(n);return i.config=function(s){return r(e,s)},i};Ni("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;mo(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Bt.Linear.easeNone=Bt.none=Bt.Linear.easeIn;mo("Elastic",fm("in"),fm("out"),fm());(function(r,e){var t=1/e,n=2*t,i=2.5*t,s=function(o){return o<t?r*o*o:o<n?r*Math.pow(o-1.5/e,2)+.75:o<i?r*(o-=2.25/e)*o+.9375:r*Math.pow(o-2.625/e,2)+.984375};mo("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);mo("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});mo("Circ",function(r){return-(fS(1-r*r)-1)});mo("Sine",function(r){return r===1?1:-oR(r*sR)+1});mo("Back",pm("in"),pm("out"),pm());Bt.SteppedEase=Bt.steps=$i.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),s=t?1:0,a=1-sn;return function(o){return((i*Tu(0,a,o)|0)+s)*n}}};Tl.ease=Bt["quad.out"];Ni("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return yv+=r+","+r+"Params,"});var WS=function(e,t){this.id=aR++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:wS,this.set=t?t.getSetter:Ev},Zc=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Rl(this,+t.duration,1,1),this.data=t.data,gn&&(this._ctx=gn,gn.data.push(this)),Yc||Wi.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Rl(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(Pl(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Sf(this,n),!s._dp||s.parent||AS(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Hr(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===sn||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),SS(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+R_(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+R_(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?Cl(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-sn?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?ef(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-sn?0:this._rts,this.totalTime(Tu(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),wf(this),mR(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pl(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==sn&&(this._tTime-=sn)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Hr(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Pi(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ef(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=dR);var i=ti;return ti=n,bv(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ti=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,P_(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,P_(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(ur(this,n),Pi(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,Pi(i)),this._dur||(this._zTime=-sn),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-sn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-sn,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-sn)},e.eventCallback=function(n,i,s){var a=this.vars;return arguments.length>1?(i?(a[n]=i,s&&(a[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete a[n],this):a[n]},e.then=function(n){var i=this;return new Promise(function(s){var a=Tn(n)?n:ES,o=function(){var d=i.then;i.then=null,Tn(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=d),s(a),i.then=d};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},e.kill=function(){Rc(this)},r}();Ji(Zc.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-sn,_prom:0,_ps:!1,_rts:1});var bi=function(r){hS(e,r);function e(n,i){var s;return n===void 0&&(n={}),s=r.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Pi(n.sortChildren),_n&&Hr(n.parent||_n,xs(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&CS(xs(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,a){return Oc(0,arguments,this),this},t.from=function(i,s,a){return Oc(1,arguments,this),this},t.fromTo=function(i,s,a,o){return Oc(2,arguments,this),this},t.set=function(i,s,a){return s.duration=0,s.parent=this,Dc(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Un(i,s,ur(this,a),1),this},t.call=function(i,s,a){return Hr(this,Un.delayedCall(0,i,s),a)},t.staggerTo=function(i,s,a,o,l,d,h){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=d,a.onCompleteParams=h,a.parent=this,new Un(i,a,ur(this,l)),this},t.staggerFrom=function(i,s,a,o,l,d,h){return a.runBackwards=1,Dc(a).immediateRender=Pi(a.immediateRender),this.staggerTo(i,s,a,o,l,d,h)},t.staggerFromTo=function(i,s,a,o,l,d,h,f){return o.startAt=a,Dc(o).immediateRender=Pi(o.immediateRender),this.staggerTo(i,s,o,l,d,h,f)},t.render=function(i,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,d=this._dur,h=i<=0?0:Fn(i),f=this._zTime<0!=i<0&&(this._initted||!d),p,g,y,b,_,x,M,S,E,T,P,I;if(this!==_n&&h>l&&i>=0&&(h=l),h!==this._tTime||a||f){if(o!==this._time&&d&&(h+=this._time-o,i+=this._time-o),p=h,E=this._start,S=this._ts,x=!S,f&&(d||(o=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(P=this._yoyo,_=d+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(_*100+i,s,a);if(p=Fn(h%_),h===l?(b=this._repeat,p=d):(T=Fn(h/_),b=~~T,b&&b===T&&(p=d,b--),p>d&&(p=d)),T=Cl(this._tTime,_),!o&&this._tTime&&T!==b&&this._tTime-T*_-this._dur<=0&&(T=b),P&&b&1&&(p=d-p,I=1),b!==T&&!this._lock){var k=P&&T&1,R=k===(P&&b&1);if(b<T&&(k=!k),o=k?0:h%d?d:h,this._lock=1,this.render(o||(I?0:Fn(b*_)),s,!d)._lock=0,this._tTime=h,!s&&this.parent&&qi(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),o&&o!==this._time||x!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(d=this._dur,l=this._tDur,R&&(this._lock=2,o=k?d:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!x)return this;VS(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=yR(this,Fn(o),Fn(p)),M&&(h-=p-(p=M._start))),this._tTime=h,this._time=p,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&h&&!s&&!T&&(qi(this,"onStart"),this._tTime!==h))return this;if(p>=o&&i>=0)for(g=this._first;g;){if(y=g._next,(g._act||p>=g._start)&&g._ts&&M!==g){if(g.parent!==this)return this.render(i,s,a);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,s,a),p!==this._time||!this._ts&&!x){M=0,y&&(h+=this._zTime=-sn);break}}g=y}else{g=this._last;for(var L=i<0?i:p;g;){if(y=g._prev,(g._act||L<=g._end)&&g._ts&&M!==g){if(g.parent!==this)return this.render(i,s,a);if(g.render(g._ts>0?(L-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(L-g._start)*g._ts,s,a||ti&&bv(g)),p!==this._time||!this._ts&&!x){M=0,y&&(h+=this._zTime=L?-sn:sn);break}}g=y}}if(M&&!s&&(this.pause(),M.render(p>=o?0:-sn)._zTime=p>=o?1:-1,this._ts))return this._start=E,wf(this),this.render(i,s,a);this._onUpdate&&!s&&qi(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&o)&&(E===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((i||!d)&&(h===l&&this._ts>0||!h&&this._ts<0)&&aa(this,1),!s&&!(i<0&&!o)&&(h||o||!l)&&(qi(this,h===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var a=this;if(Es(s)||(s=ur(this,s,i)),!(i instanceof Zc)){if(di(i))return i.forEach(function(o){return a.add(o,s)}),this;if(Jn(i))return this.addLabel(i,s);if(Tn(i))i=Un.delayedCall(0,i);else return this}return this!==i?Hr(this,i,s):this},t.getChildren=function(i,s,a,o){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-hr);for(var l=[],d=this._first;d;)d._start>=o&&(d instanceof Un?s&&l.push(d):(a&&l.push(d),i&&l.push.apply(l,d.getChildren(!0,s,a)))),d=d._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},t.remove=function(i){return Jn(i)?this.removeLabel(i):Tn(i)?this.killTweensOf(i):(i.parent===this&&bf(this,i),i===this._recent&&(this._recent=this._last),$a(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Fn(Wi.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=ur(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,a){var o=Un.delayedCall(0,s||Xc,a);return o.data="isPause",this._hasPause=1,Hr(this,o,ur(this,i))},t.removePause=function(i){var s=this._first;for(i=ur(this,i);s;)s._start===i&&s.data==="isPause"&&aa(s),s=s._next},t.killTweensOf=function(i,s,a){for(var o=this.getTweensOf(i,a),l=o.length;l--;)$s!==o[l]&&o[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var a=[],o=fr(i),l=this._first,d=Es(s),h;l;)l instanceof Un?hR(l._targets,o)&&(d?(!$s||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(h=l.getTweensOf(o,s)).length&&a.push.apply(a,h),l=l._next;return a},t.tweenTo=function(i,s){s=s||{};var a=this,o=ur(a,i),l=s,d=l.startAt,h=l.onStart,f=l.onStartParams,p=l.immediateRender,g,y=Un.to(a,Ji({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(d&&"time"in d?d.time:a._time))/a.timeScale())||sn,onStart:function(){if(a.pause(),!g){var _=s.duration||Math.abs((o-(d&&"time"in d?d.time:a._time))/a.timeScale());y._dur!==_&&Rl(y,_,0,1).render(y._time,!0,!0),g=1}h&&h.apply(y,f||[])}},s));return p?y.render(0):y},t.tweenFromTo=function(i,s,a){return this.tweenTo(s,Ji({startAt:{time:ur(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),N_(this,ur(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),N_(this,ur(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+sn)},t.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,d;o;)o._start>=a&&(o._start+=i,o._end+=i),o=o._next;if(s)for(d in l)l[d]>=a&&(l[d]+=i);return $a(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),$a(this)},t.totalDuration=function(i){var s=0,a=this,o=a._last,l=hr,d,h,f;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(f=a.parent;o;)d=o._prev,o._dirty&&o.totalDuration(),h=o._start,h>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,Hr(a,o,h-o._delay,1)._lock=0):l=h,h<0&&o._ts&&(s-=h,(!f&&!a._dp||f&&f.smoothChildTiming)&&(a._start+=h/a._ts,a._time-=h,a._tTime-=h),a.shiftChildren(-h,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=d;Rl(a,a===_n&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(_n._ts&&(SS(_n,ef(i,_n)),bS=Wi.frame),Wi.frame>=A_){A_+=Yi.autoSleep||120;var s=_n._first;if((!s||!s._ts)&&Yi.autoSleep&&Wi._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Wi.sleep()}}},e}(Zc);Ji(bi.prototype,{_lock:0,_hasPause:0,_forcing:0});var DR=function(e,t,n,i,s,a,o){var l=new Ii(this._pt,e,t,0,1,$S,null,s),d=0,h=0,f,p,g,y,b,_,x,M;for(l.b=n,l.e=i,n+="",i+="",(x=~i.indexOf("random("))&&(i=qc(i)),a&&(M=[n,i],a(M,e,t),n=M[0],i=M[1]),p=n.match(um)||[];f=um.exec(i);)y=f[0],b=i.substring(d,f.index),g?g=(g+1)%5:b.substr(-5)==="rgba("&&(g=1),y!==p[h++]&&(_=parseFloat(p[h-1])||0,l._pt={_next:l._pt,p:b||h===1?b:",",s:_,c:y.charAt(1)==="="?_l(_,y)-_:parseFloat(y)-_,m:g&&g<4?Math.round:0},d=um.lastIndex);return l.c=d<i.length?i.substring(d,i.length):"",l.fp=o,(gS.test(i)||x)&&(l.e=0),this._pt=l,l},wv=function(e,t,n,i,s,a,o,l,d,h){Tn(i)&&(i=i(s||0,e,a));var f=e[t],p=n!=="get"?n:Tn(f)?d?e[t.indexOf("set")||!Tn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](d):e[t]():f,g=Tn(f)?d?jR:ZS:Mv,y;if(Jn(i)&&(~i.indexOf("random(")&&(i=qc(i)),i.charAt(1)==="="&&(y=_l(p,i)+(ui(p)||0),(y||y===0)&&(i=y))),!h||p!==i||i0)return!isNaN(p*i)&&i!==""?(y=new Ii(this._pt,e,t,+p||0,i-(p||0),typeof f=="boolean"?HR:KS,0,g),d&&(y.fp=d),o&&y.modifier(o,this,e),this._pt=y):(!f&&!(t in e)&&vv(t,i),DR.call(this,e,t,p,i,g,l||Yi.stringFilter,d))},OR=function(e,t,n,i,s){if(Tn(e)&&(e=Uc(e,s,t,n,i)),!Zr(e)||e.style&&e.nodeType||di(e)||pS(e))return Jn(e)?Uc(e,s,t,n,i):e;var a={},o;for(o in e)a[o]=Uc(e[o],s,t,n,i);return a},XS=function(e,t,n,i,s,a){var o,l,d,h;if(Gi[e]&&(o=new Gi[e]).init(s,o.rawVars?t[e]:OR(t[e],i,s,a,n),n,i,a)!==!1&&(n._pt=l=new Ii(n._pt,s,e,0,1,o.render,o,0,o.priority),n!==fl))for(d=n._ptLookup[n._targets.indexOf(s)],h=o._props.length;h--;)d[o._props[h]]=l;return o},$s,i0,Sv=function r(e,t,n){var i=e.vars,s=i.ease,a=i.startAt,o=i.immediateRender,l=i.lazy,d=i.onUpdate,h=i.runBackwards,f=i.yoyoEase,p=i.keyframes,g=i.autoRevert,y=e._dur,b=e._startAt,_=e._targets,x=e.parent,M=x&&x.data==="nested"?x.vars.targets:_,S=e._overwrite==="auto"&&!fv,E=e.timeline,T,P,I,k,R,L,F,W,J,z,Q,ne,oe;if(E&&(!p||!s)&&(s="none"),e._ease=Ja(s,Tl.ease),e._yEase=f?HS(Ja(f===!0?s:f,Tl.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!E&&!!i.runBackwards,!E||p&&!i.stagger){if(W=_[0]?Ka(_[0]).harness:0,ne=W&&i[W.prop],T=Qh(i,xv),b&&(b._zTime<0&&b.progress(1),t<0&&h&&o&&!g?b.render(-1,!0):b.revert(h&&y?zh:uR),b._lazy=0),a){if(aa(e._startAt=Un.set(_,Ji({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!b&&Pi(l),startAt:null,delay:0,onUpdate:d&&function(){return qi(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ti||!o&&!g)&&e._startAt.revert(zh),o&&y&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(h&&y&&!b){if(t&&(o=!1),I=Ji({overwrite:!1,data:"isFromStart",lazy:o&&!b&&Pi(l),immediateRender:o,stagger:0,parent:x},T),ne&&(I[W.prop]=ne),aa(e._startAt=Un.set(_,I)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ti?e._startAt.revert(zh):e._startAt.render(-1,!0)),e._zTime=t,!o)r(e._startAt,sn,sn);else if(!t)return}for(e._pt=e._ptCache=0,l=y&&Pi(l)||l&&!y,P=0;P<_.length;P++){if(R=_[P],F=R._gsap||_v(_)[P]._gsap,e._ptLookup[P]=z={},$g[F.id]&&ta.length&&Jh(),Q=M===_?P:M.indexOf(R),W&&(J=new W).init(R,ne||T,e,Q,M)!==!1&&(e._pt=k=new Ii(e._pt,R,J.name,0,1,J.render,J,0,J.priority),J._props.forEach(function(te){z[te]=k}),J.priority&&(L=1)),!W||ne)for(I in T)Gi[I]&&(J=XS(I,T,e,Q,R,M))?J.priority&&(L=1):z[I]=k=wv.call(e,R,I,"get",T[I],Q,M,0,i.stringFilter);e._op&&e._op[P]&&e.kill(R,e._op[P]),S&&e._pt&&($s=e,_n.killTweensOf(R,z,e.globalTime(t)),oe=!e.parent,$s=0),e._pt&&l&&($g[F.id]=1)}L&&JS(e),e._onInit&&e._onInit(e)}e._onUpdate=d,e._initted=(!e._op||e._pt)&&!oe,p&&t<=0&&E.render(hr,!0,!0)},UR=function(e,t,n,i,s,a,o,l){var d=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,f,p,g;if(!d)for(d=e._ptCache[t]=[],p=e._ptLookup,g=e._targets.length;g--;){if(h=p[g][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return i0=1,e.vars[t]="+=0",Sv(e,o),i0=0,l?Wc(t+" not eligible for reset"):1;d.push(h)}for(g=d.length;g--;)f=d[g],h=f._pt||f,h.s=(i||i===0)&&!s?i:h.s+(i||0)+a*h.c,h.c=n-h.s,f.e&&(f.e=Nn(n)+ui(f.e)),f.b&&(f.b=h.s+ui(f.b))},FR=function(e,t){var n=e[0]?Ka(e[0]).harness:0,i=n&&n.aliases,s,a,o,l;if(!i)return t;s=Al({},t);for(a in i)if(a in s)for(l=i[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},zR=function(e,t,n,i){var s=t.ease||i||"power1.inOut",a,o;if(di(t))o=n[e]||(n[e]=[]),t.forEach(function(l,d){return o.push({t:d/(t.length-1)*100,v:l,e:s})});else for(a in t)o=n[a]||(n[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},Uc=function(e,t,n,i,s){return Tn(e)?e.call(t,n,i,s):Jn(e)&&~e.indexOf("random(")?qc(e):e},qS=yv+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",YS={};Ni(qS+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return YS[r]=1});var Un=function(r){hS(e,r);function e(n,i,s,a){var o;typeof i=="number"&&(s.duration=i,i=s,s=null),o=r.call(this,a?i:Dc(i))||this;var l=o.vars,d=l.duration,h=l.delay,f=l.immediateRender,p=l.stagger,g=l.overwrite,y=l.keyframes,b=l.defaults,_=l.scrollTrigger,x=l.yoyoEase,M=i.parent||_n,S=(di(n)||pS(n)?Es(n[0]):"length"in i)?[n]:fr(n),E,T,P,I,k,R,L,F;if(o._targets=S.length?_v(S):Wc("GSAP target "+n+" not found. https://gsap.com",!Yi.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=g,y||p||kd(d)||kd(h)){if(i=o.vars,E=o.timeline=new bi({data:"nested",defaults:b||{},targets:M&&M.data==="nested"?M.vars.targets:S}),E.kill(),E.parent=E._dp=xs(o),E._start=0,p||kd(d)||kd(h)){if(I=S.length,L=p&&IS(p),Zr(p))for(k in p)~qS.indexOf(k)&&(F||(F={}),F[k]=p[k]);for(T=0;T<I;T++)P=Qh(i,YS),P.stagger=0,x&&(P.yoyoEase=x),F&&Al(P,F),R=S[T],P.duration=+Uc(d,xs(o),T,R,S),P.delay=(+Uc(h,xs(o),T,R,S)||0)-o._delay,!p&&I===1&&P.delay&&(o._delay=h=P.delay,o._start+=h,P.delay=0),E.to(R,P,L?L(T,R,S):0),E._ease=Bt.none;E.duration()?d=h=0:o.timeline=0}else if(y){Dc(Ji(E.vars.defaults,{ease:"none"})),E._ease=Ja(y.ease||i.ease||"none");var W=0,J,z,Q;if(di(y))y.forEach(function(ne){return E.to(S,ne,">")}),E.duration();else{P={};for(k in y)k==="ease"||k==="easeEach"||zR(k,y[k],P,y.easeEach);for(k in P)for(J=P[k].sort(function(ne,oe){return ne.t-oe.t}),W=0,T=0;T<J.length;T++)z=J[T],Q={ease:z.e,duration:(z.t-(T?J[T-1].t:0))/100*d},Q[k]=z.v,E.to(S,Q,W),W+=Q.duration;E.duration()<d&&E.to({},{duration:d-E.duration()})}}d||o.duration(d=E.duration())}else o.timeline=0;return g===!0&&!fv&&($s=xs(o),_n.killTweensOf(S),$s=0),Hr(M,xs(o),s),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(f||!d&&!y&&o._start===Fn(M._time)&&Pi(f)&&gR(xs(o))&&M.data!=="nested")&&(o._tTime=-sn,o.render(Math.max(0,-h)||0)),_&&CS(xs(o),_),o}var t=e.prototype;return t.render=function(i,s,a){var o=this._time,l=this._tDur,d=this._dur,h=i<0,f=i>l-sn&&!h?l:i<sn?0:i,p,g,y,b,_,x,M,S,E;if(!d)xR(this,i,s,a);else if(f!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(p=f,S=this.timeline,this._repeat){if(b=d+this._rDelay,this._repeat<-1&&h)return this.totalTime(b*100+i,s,a);if(p=Fn(f%b),f===l?(y=this._repeat,p=d):(_=Fn(f/b),y=~~_,y&&y===_?(p=d,y--):p>d&&(p=d)),x=this._yoyo&&y&1,x&&(E=this._yEase,p=d-p),_=Cl(this._tTime,b),p===o&&!a&&this._initted&&y===_)return this._tTime=f,this;y!==_&&(S&&this._yEase&&VS(S,x),this.vars.repeatRefresh&&!x&&!this._lock&&p!==b&&this._initted&&(this._lock=a=1,this.render(Fn(b*y),!0).invalidate()._lock=0))}if(!this._initted){if(RS(this,h?i:p,a,s,f))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&y!==_))return this;if(d!==this._dur)return this.render(i,s,a)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(E||this._ease)(p/d),this._from&&(this.ratio=M=1-M),!o&&f&&!s&&!_&&(qi(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(M,g.d),g=g._next;S&&S.render(i<0?i:S._dur*S._ease(p/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(h&&Jg(this,i,s,a),qi(this,"onUpdate")),this._repeat&&y!==_&&this.vars.onRepeat&&!s&&this.parent&&qi(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(h&&!this._onUpdate&&Jg(this,i,!0,!0),(i||!d)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&aa(this,1),!s&&!(h&&!o)&&(f||o||x)&&(qi(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,a,o,l){Yc||Wi.wake(),this._ts||this.play();var d=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||Sv(this,d),h=this._ease(d/this._dur),UR(this,i,s,a,o,h,d,l)?this.resetTo(i,s,a,o,1):(Sf(this,0),this.parent||TS(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Rc(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ti),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,$s&&$s.vars.overwrite!==!0)._first||Rc(this),this.parent&&a!==this.timeline.totalDuration()&&Rl(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=i?fr(i):o,d=this._ptLookup,h=this._pt,f,p,g,y,b,_,x;if((!s||s==="all")&&pR(o,l))return s==="all"&&(this._pt=0),Rc(this);for(f=this._op=this._op||[],s!=="all"&&(Jn(s)&&(b={},Ni(s,function(M){return b[M]=1}),s=b),s=FR(o,s)),x=o.length;x--;)if(~l.indexOf(o[x])){p=d[x],s==="all"?(f[x]=s,y=p,g={}):(g=f[x]=f[x]||{},y=s);for(b in y)_=p&&p[b],_&&((!("kill"in _.d)||_.d.kill(b)===!0)&&bf(this,_,"_pt"),delete p[b]),g!=="all"&&(g[b]=1)}return this._initted&&!this._pt&&h&&Rc(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Oc(1,arguments)},e.delayedCall=function(i,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(i,s,a){return Oc(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return _n.killTweensOf(i,s,a)},e}(Zc);Ji(Un.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ni("staggerTo,staggerFrom,staggerFromTo",function(r){Un[r]=function(){var e=new bi,t=e0.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var Mv=function(e,t,n){return e[t]=n},ZS=function(e,t,n){return e[t](n)},jR=function(e,t,n,i){return e[t](i.fp,n)},BR=function(e,t,n){return e.setAttribute(t,n)},Ev=function(e,t){return Tn(e[t])?ZS:pv(e[t])&&e.setAttribute?BR:Mv},KS=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},HR=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},$S=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},Tv=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},VR=function(e,t,n,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,t,n),s=a},GR=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?bf(this,t,"_pt"):t.dep||(n=1),t=i;return!n},WR=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},JS=function(e){for(var t=e._pt,n,i,s,a;t;){for(n=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:a=t,t=n}e._pt=s},Ii=function(){function r(t,n,i,s,a,o,l,d,h){this.t=n,this.s=s,this.c=a,this.p=i,this.r=o||KS,this.d=l||this,this.set=d||Mv,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=WR,this.m=n,this.mt=s,this.tween=i},r}();Ni(yv+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return xv[r]=1});$i.TweenMax=$i.TweenLite=Un;$i.TimelineLite=$i.TimelineMax=bi;_n=new bi({sortChildren:!1,defaults:Tl,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Yi.stringFilter=BS;var Qa=[],Bh={},XR=[],L_=0,qR=0,mm=function(e){return(Bh[e]||XR).map(function(t){return t()})},r0=function(){var e=Date.now(),t=[];e-L_>2&&(mm("matchMediaInit"),Qa.forEach(function(n){var i=n.queries,s=n.conditions,a,o,l,d;for(o in i)a=Br.matchMedia(i[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,d=1);d&&(n.revert(),l&&t.push(n))}),mm("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),L_=e,mm("matchMedia"))},QS=function(){function r(t,n){this.selector=n&&t0(n),this.data=[],this._r=[],this.isReverted=!1,this.id=qR++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,s){Tn(n)&&(s=i,i=n,n=Tn);var a=this,o=function(){var d=gn,h=a.selector,f;return d&&d!==a&&d.data.push(a),s&&(a.selector=t0(s)),gn=a,f=i.apply(a,arguments),Tn(f)&&a._r.push(f),gn=d,a.selector=h,a.isReverted=!1,f};return a.last=o,n===Tn?o(a,function(l){return a.add(null,l)}):n?a[n]=o:o},e.ignore=function(n){var i=gn;gn=null,n(this),gn=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof Un&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?function(){for(var o=s.getTweens(),l=s.data.length,d;l--;)d=s.data[l],d.data==="isFlip"&&(d.revert(),d.getChildren(!0,!0,!1).forEach(function(h){return o.splice(o.indexOf(h),1)}));for(o.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,f){return f.g-h.g||-1/0}).forEach(function(h){return h.t.revert(n)}),l=s.data.length;l--;)d=s.data[l],d instanceof bi?d.data!=="nested"&&(d.scrollTrigger&&d.scrollTrigger.revert(),d.kill()):!(d instanceof Un)&&d.revert&&d.revert(n);s._r.forEach(function(h){return h(n,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var a=Qa.length;a--;)Qa[a].id===this.id&&Qa.splice(a,1)},e.revert=function(n){this.kill(n||{})},r}(),YR=function(){function r(t){this.contexts=[],this.scope=t,gn&&gn.data.push(this)}var e=r.prototype;return e.add=function(n,i,s){Zr(n)||(n={matches:n});var a=new QS(0,s||this.scope),o=a.conditions={},l,d,h;gn&&!a.selector&&(a.selector=gn.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=n;for(d in n)d==="all"?h=1:(l=Br.matchMedia(n[d]),l&&(Qa.indexOf(a)<0&&Qa.push(a),(o[d]=l.matches)&&(h=1),l.addListener?l.addListener(r0):l.addEventListener("change",r0)));return h&&i(a,function(f){return a.add(null,f)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r}(),tf={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return FS(i)})},timeline:function(e){return new bi(e)},getTweensOf:function(e,t){return _n.getTweensOf(e,t)},getProperty:function(e,t,n,i){Jn(e)&&(e=fr(e)[0]);var s=Ka(e||{}).get,a=n?ES:MS;return n==="native"&&(n=""),e&&(t?a((Gi[t]&&Gi[t].get||s)(e,t,n,i)):function(o,l,d){return a((Gi[o]&&Gi[o].get||s)(e,o,l,d))})},quickSetter:function(e,t,n){if(e=fr(e),e.length>1){var i=e.map(function(h){return Di.quickSetter(h,t,n)}),s=i.length;return function(h){for(var f=s;f--;)i[f](h)}}e=e[0]||{};var a=Gi[t],o=Ka(e),l=o.harness&&(o.harness.aliases||{})[t]||t,d=a?function(h){var f=new a;fl._pt=0,f.init(e,n?h+n:h,fl,0,[e]),f.render(1,f),fl._pt&&Tv(1,fl)}:o.set(e,l);return a?d:function(h){return d(e,l,n?h+n:h,o,1)}},quickTo:function(e,t,n){var i,s=Di.to(e,Ji((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),a=function(l,d,h){return s.resetTo(t,l,d,h)};return a.tween=s,a},isTweening:function(e){return _n.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ja(e.ease,Tl.ease)),C_(Tl,e||{})},config:function(e){return C_(Yi,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!Gi[o]&&!$i[o]&&Wc(t+" effect requires "+o+" plugin.")}),dm[t]=function(o,l,d){return n(fr(o),Ji(l||{},s),d)},a&&(bi.prototype[t]=function(o,l,d){return this.add(dm[t](o,Zr(l)?l:(d=l)&&{},this),d)})},registerEase:function(e,t){Bt[e]=Ja(t)},parseEase:function(e,t){return arguments.length?Ja(e,t):Bt},getById:function(e){return _n.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new bi(e),i,s;for(n.smoothChildTiming=Pi(e.smoothChildTiming),_n.remove(n),n._dp=0,n._time=n._tTime=_n._time,i=_n._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Un&&i.vars.onComplete===i._targets[0]))&&Hr(n,i,i._start-i._delay),i=s;return Hr(_n,n,0),n},context:function(e,t){return e?new QS(e,t):gn},matchMedia:function(e){return new YR(e)},matchMediaRefresh:function(){return Qa.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||r0()},addEventListener:function(e,t){var n=Bh[e]||(Bh[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Bh[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:TR,wrapYoyo:AR,distribute:IS,random:kS,snap:LS,normalize:ER,getUnit:ui,clamp:bR,splitColor:zS,toArray:fr,selector:t0,mapRange:OS,pipe:SR,unitize:MR,interpolate:CR,shuffle:NS},install:yS,effects:dm,ticker:Wi,updateRoot:bi.updateRoot,plugins:Gi,globalTimeline:_n,core:{PropTween:Ii,globals:_S,Tween:Un,Timeline:bi,Animation:Zc,getCache:Ka,_removeLinkedListItem:bf,reverting:function(){return ti},context:function(e){return e&&gn&&(gn.data.push(e),e._ctx=gn),gn},suppressOverwrites:function(e){return fv=e}}};Ni("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return tf[r]=Un[r]});Wi.add(bi.updateRoot);fl=tf.to({},{duration:0});var ZR=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},KR=function(e,t){var n=e._targets,i,s,a;for(i in t)for(s=n.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=ZR(a,i)),a&&a.modifier&&a.modifier(t[i],e,n[s],i))},gm=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,s,a){a._onInit=function(o){var l,d;if(Jn(s)&&(l={},Ni(s,function(h){return l[h]=1}),s=l),t){l={};for(d in s)l[d]=t(s[d]);s=l}KR(o,s)}}}},Di=tf.registerPlugin({name:"attr",init:function(e,t,n,i,s){var a,o,l;this.tween=n;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],i,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)ti?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},gm("roundProps",n0),gm("modifiers"),gm("snap",LS))||tf;Un.version=bi.version=Di.version="3.13.0";xS=1;mv()&&Pl();Bt.Power0;Bt.Power1;Bt.Power2;Bt.Power3;Bt.Power4;Bt.Linear;Bt.Quad;Bt.Cubic;Bt.Quart;Bt.Quint;Bt.Strong;Bt.Elastic;Bt.Back;Bt.SteppedEase;Bt.Bounce;Bt.Sine;Bt.Expo;Bt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var k_,Js,bl,Av,Va,D_,Cv,$R=function(){return typeof window<"u"},Ts={},Ua=180/Math.PI,wl=Math.PI/180,Uo=Math.atan2,O_=1e8,Rv=/([A-Z])/g,JR=/(left|right|width|margin|padding|x)/i,QR=/[\s,\(]\S/,Vr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},s0=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},eP=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},tP=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},nP=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},e2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},t2=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},iP=function(e,t,n){return e.style[t]=n},rP=function(e,t,n){return e.style.setProperty(t,n)},sP=function(e,t,n){return e._gsap[t]=n},aP=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},oP=function(e,t,n,i,s){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(s,a)},lP=function(e,t,n,i,s){var a=e._gsap;a[t]=n,a.renderTransform(s,a)},bn="transform",Li=bn+"Origin",cP=function r(e,t){var n=this,i=this.target,s=i.style,a=i._gsap;if(e in Ts&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Vr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=ys(i,o)}):this.tfm[e]=a.x?a[e]:ys(i,e),e===Li&&(this.tfm.zOrigin=a.zOrigin);else return Vr.transform.split(",").forEach(function(o){return r.call(n,o,t)});if(this.props.indexOf(bn)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Li,t,"")),e=bn}(s||t)&&this.props.push(e,t,s[e])},n2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},uP=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Rv,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Cv(),(!s||!s.isStart)&&!n[bn]&&(n2(n),i.zOrigin&&n[Li]&&(n[Li]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},i2=function(e,t){var n={target:e,props:[],revert:uP,save:cP};return e._gsap||Di.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return n.save(i)}),n},r2,a0=function(e,t){var n=Js.createElementNS?Js.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Js.createElement(e);return n&&n.style?n:Js.createElement(e)},pr=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(Rv,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,Nl(t)||t,1)||""},U_="O,Moz,ms,Ms,Webkit".split(","),Nl=function(e,t,n){var i=t||Va,s=i.style,a=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(U_[a]+e in s););return a<0?null:(a===3?"ms":a>=0?U_[a]:"")+e},o0=function(){$R()&&window.document&&(k_=window,Js=k_.document,bl=Js.documentElement,Va=a0("div")||{style:{}},a0("div"),bn=Nl(bn),Li=bn+"Origin",Va.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",r2=!!Nl("perspective"),Cv=Di.core.reverting,Av=1)},F_=function(e){var t=e.ownerSVGElement,n=a0("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",n.appendChild(i),bl.appendChild(n);try{s=i.getBBox()}catch{}return n.removeChild(i),bl.removeChild(n),s},z_=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},s2=function(e){var t,n;try{t=e.getBBox()}catch{t=F_(e),n=1}return t&&(t.width||t.height)||n||(t=F_(e)),t&&!t.width&&!t.x&&!t.y?{x:+z_(e,["x","cx","x1"])||0,y:+z_(e,["y","cy","y1"])||0,width:0,height:0}:t},a2=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&s2(e))},ao=function(e,t){if(t){var n=e.style,i;t in Ts&&t!==Li&&(t=bn),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(Rv,"-$1").toLowerCase())):n.removeAttribute(t)}},Qs=function(e,t,n,i,s,a){var o=new Ii(e._pt,t,n,0,1,a?t2:e2);return e._pt=o,o.b=i,o.e=s,e._props.push(n),o},j_={deg:1,rad:1,turn:1},dP={grid:1,flex:1},oa=function r(e,t,n,i){var s=parseFloat(n)||0,a=(n+"").trim().substr((s+"").length)||"px",o=Va.style,l=JR.test(t),d=e.tagName.toLowerCase()==="svg",h=(d?"client":"offset")+(l?"Width":"Height"),f=100,p=i==="px",g=i==="%",y,b,_,x;if(i===a||!s||j_[i]||j_[a])return s;if(a!=="px"&&!p&&(s=r(e,t,n,"px")),x=e.getCTM&&a2(e),(g||a==="%")&&(Ts[t]||~t.indexOf("adius")))return y=x?e.getBBox()[l?"width":"height"]:e[h],Nn(g?s/y*f:s/100*y);if(o[l?"width":"height"]=f+(p?a:i),b=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!d?e:e.parentNode,x&&(b=(e.ownerSVGElement||{}).parentNode),(!b||b===Js||!b.appendChild)&&(b=Js.body),_=b._gsap,_&&g&&_.width&&l&&_.time===Wi.time&&!_.uncache)return Nn(s/_.width*f);if(g&&(t==="height"||t==="width")){var M=e.style[t];e.style[t]=f+i,y=e[h],M?e.style[t]=M:ao(e,t)}else(g||a==="%")&&!dP[pr(b,"display")]&&(o.position=pr(e,"position")),b===e&&(o.position="static"),b.appendChild(Va),y=Va[h],b.removeChild(Va),o.position="absolute";return l&&g&&(_=Ka(b),_.time=Wi.time,_.width=b[h]),Nn(p?y*s/f:y&&s?f/y*s:0)},ys=function(e,t,n,i){var s;return Av||o0(),t in Vr&&t!=="transform"&&(t=Vr[t],~t.indexOf(",")&&(t=t.split(",")[0])),Ts[t]&&t!=="transform"?(s=$c(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:rf(pr(e,Li))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=nf[t]&&nf[t](e,t,n)||pr(e,t)||wS(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?oa(e,t,s,n)+n:s},hP=function(e,t,n,i){if(!n||n==="none"){var s=Nl(t,e,1),a=s&&pr(e,s,1);a&&a!==n?(t=s,n=a):t==="borderColor"&&(n=pr(e,"borderTopColor"))}var o=new Ii(this._pt,e.style,t,0,1,$S),l=0,d=0,h,f,p,g,y,b,_,x,M,S,E,T;if(o.b=n,o.e=i,n+="",i+="",i.substring(0,6)==="var(--"&&(i=pr(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(b=e.style[t],e.style[t]=i,i=pr(e,t)||i,b?e.style[t]=b:ao(e,t)),h=[n,i],BS(h),n=h[0],i=h[1],p=n.match(hl)||[],T=i.match(hl)||[],T.length){for(;f=hl.exec(i);)_=f[0],M=i.substring(l,f.index),y?y=(y+1)%5:(M.substr(-5)==="rgba("||M.substr(-5)==="hsla(")&&(y=1),_!==(b=p[d++]||"")&&(g=parseFloat(b)||0,E=b.substr((g+"").length),_.charAt(1)==="="&&(_=_l(g,_)+E),x=parseFloat(_),S=_.substr((x+"").length),l=hl.lastIndex-S.length,S||(S=S||Yi.units[t]||E,l===i.length&&(i+=S,o.e+=S)),E!==S&&(g=oa(e,t,b,S)||0),o._pt={_next:o._pt,p:M||d===1?M:",",s:g,c:x-g,m:y&&y<4||t==="zIndex"?Math.round:0});o.c=l<i.length?i.substring(l,i.length):""}else o.r=t==="display"&&i==="none"?t2:e2;return gS.test(i)&&(o.e=0),this._pt=o,o},B_={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},fP=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=B_[n]||n,t[1]=B_[i]||i,t.join(" ")},pP=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,s=t.u,a=n._gsap,o,l,d;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),d=s.length;--d>-1;)o=s[d],Ts[o]&&(l=1,o=o==="transformOrigin"?Li:bn),ao(n,o);l&&(ao(n,bn),a&&(a.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",$c(n,1),a.uncache=1,n2(i)))}},nf={clearProps:function(e,t,n,i,s){if(s.data!=="isFromStart"){var a=e._pt=new Ii(e._pt,t,n,0,0,pP);return a.u=i,a.pr=-10,a.tween=s,e._props.push(n),1}}},Kc=[1,0,0,1,0,0],o2={},l2=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},H_=function(e){var t=pr(e,bn);return l2(t)?Kc:t.substr(7).match(mS).map(Nn)},Pv=function(e,t){var n=e._gsap||Ka(e),i=e.style,s=H_(e),a,o,l,d;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Kc:s):(s===Kc&&!e.offsetParent&&e!==bl&&!n.svg&&(l=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(d=1,o=e.nextElementSibling,bl.appendChild(e)),s=H_(e),l?i.display=l:ao(e,"display"),d&&(o?a.insertBefore(e,o):a?a.appendChild(e):bl.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},l0=function(e,t,n,i,s,a){var o=e._gsap,l=s||Pv(e,!0),d=o.xOrigin||0,h=o.yOrigin||0,f=o.xOffset||0,p=o.yOffset||0,g=l[0],y=l[1],b=l[2],_=l[3],x=l[4],M=l[5],S=t.split(" "),E=parseFloat(S[0])||0,T=parseFloat(S[1])||0,P,I,k,R;n?l!==Kc&&(I=g*_-y*b)&&(k=E*(_/I)+T*(-b/I)+(b*M-_*x)/I,R=E*(-y/I)+T*(g/I)-(g*M-y*x)/I,E=k,T=R):(P=s2(e),E=P.x+(~S[0].indexOf("%")?E/100*P.width:E),T=P.y+(~(S[1]||S[0]).indexOf("%")?T/100*P.height:T)),i||i!==!1&&o.smooth?(x=E-d,M=T-h,o.xOffset=f+(x*g+M*b)-x,o.yOffset=p+(x*y+M*_)-M):o.xOffset=o.yOffset=0,o.xOrigin=E,o.yOrigin=T,o.smooth=!!i,o.origin=t,o.originIsAbsolute=!!n,e.style[Li]="0px 0px",a&&(Qs(a,o,"xOrigin",d,E),Qs(a,o,"yOrigin",h,T),Qs(a,o,"xOffset",f,o.xOffset),Qs(a,o,"yOffset",p,o.yOffset)),e.setAttribute("data-svg-origin",E+" "+T)},$c=function(e,t){var n=e._gsap||new WS(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,a="px",o="deg",l=getComputedStyle(e),d=pr(e,Li)||"0",h,f,p,g,y,b,_,x,M,S,E,T,P,I,k,R,L,F,W,J,z,Q,ne,oe,te,ie,ee,Z,re,pe,Ee,Le;return h=f=p=b=_=x=M=S=E=0,g=y=1,n.svg=!!(e.getCTM&&a2(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[bn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[bn]!=="none"?l[bn]:"")),i.scale=i.rotate=i.translate="none"),I=Pv(e,n.svg),n.svg&&(n.uncache?(te=e.getBBox(),d=n.xOrigin-te.x+"px "+(n.yOrigin-te.y)+"px",oe=""):oe=!t&&e.getAttribute("data-svg-origin"),l0(e,oe||d,!!oe||n.originIsAbsolute,n.smooth!==!1,I)),T=n.xOrigin||0,P=n.yOrigin||0,I!==Kc&&(F=I[0],W=I[1],J=I[2],z=I[3],h=Q=I[4],f=ne=I[5],I.length===6?(g=Math.sqrt(F*F+W*W),y=Math.sqrt(z*z+J*J),b=F||W?Uo(W,F)*Ua:0,M=J||z?Uo(J,z)*Ua+b:0,M&&(y*=Math.abs(Math.cos(M*wl))),n.svg&&(h-=T-(T*F+P*J),f-=P-(T*W+P*z))):(Le=I[6],pe=I[7],ee=I[8],Z=I[9],re=I[10],Ee=I[11],h=I[12],f=I[13],p=I[14],k=Uo(Le,re),_=k*Ua,k&&(R=Math.cos(-k),L=Math.sin(-k),oe=Q*R+ee*L,te=ne*R+Z*L,ie=Le*R+re*L,ee=Q*-L+ee*R,Z=ne*-L+Z*R,re=Le*-L+re*R,Ee=pe*-L+Ee*R,Q=oe,ne=te,Le=ie),k=Uo(-J,re),x=k*Ua,k&&(R=Math.cos(-k),L=Math.sin(-k),oe=F*R-ee*L,te=W*R-Z*L,ie=J*R-re*L,Ee=z*L+Ee*R,F=oe,W=te,J=ie),k=Uo(W,F),b=k*Ua,k&&(R=Math.cos(k),L=Math.sin(k),oe=F*R+W*L,te=Q*R+ne*L,W=W*R-F*L,ne=ne*R-Q*L,F=oe,Q=te),_&&Math.abs(_)+Math.abs(b)>359.9&&(_=b=0,x=180-x),g=Nn(Math.sqrt(F*F+W*W+J*J)),y=Nn(Math.sqrt(ne*ne+Le*Le)),k=Uo(Q,ne),M=Math.abs(k)>2e-4?k*Ua:0,E=Ee?1/(Ee<0?-Ee:Ee):0),n.svg&&(oe=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!l2(pr(e,bn)),oe&&e.setAttribute("transform",oe))),Math.abs(M)>90&&Math.abs(M)<270&&(s?(g*=-1,M+=b<=0?180:-180,b+=b<=0?180:-180):(y*=-1,M+=M<=0?180:-180)),t=t||n.uncache,n.x=h-((n.xPercent=h&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,n.y=f-((n.yPercent=f&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+a,n.z=p+a,n.scaleX=Nn(g),n.scaleY=Nn(y),n.rotation=Nn(b)+o,n.rotationX=Nn(_)+o,n.rotationY=Nn(x)+o,n.skewX=M+o,n.skewY=S+o,n.transformPerspective=E+a,(n.zOrigin=parseFloat(d.split(" ")[2])||!t&&n.zOrigin||0)&&(i[Li]=rf(d)),n.xOffset=n.yOffset=0,n.force3D=Yi.force3D,n.renderTransform=n.svg?gP:r2?c2:mP,n.uncache=0,n},rf=function(e){return(e=e.split(" "))[0]+" "+e[1]},vm=function(e,t,n){var i=ui(t);return Nn(parseFloat(t)+parseFloat(oa(e,"x",n+"px",i)))+i},mP=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,c2(e,t)},Ta="0deg",fc="0px",Aa=") ",c2=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.z,d=n.rotation,h=n.rotationY,f=n.rotationX,p=n.skewX,g=n.skewY,y=n.scaleX,b=n.scaleY,_=n.transformPerspective,x=n.force3D,M=n.target,S=n.zOrigin,E="",T=x==="auto"&&e&&e!==1||x===!0;if(S&&(f!==Ta||h!==Ta)){var P=parseFloat(h)*wl,I=Math.sin(P),k=Math.cos(P),R;P=parseFloat(f)*wl,R=Math.cos(P),a=vm(M,a,I*R*-S),o=vm(M,o,-Math.sin(P)*-S),l=vm(M,l,k*R*-S+S)}_!==fc&&(E+="perspective("+_+Aa),(i||s)&&(E+="translate("+i+"%, "+s+"%) "),(T||a!==fc||o!==fc||l!==fc)&&(E+=l!==fc||T?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+Aa),d!==Ta&&(E+="rotate("+d+Aa),h!==Ta&&(E+="rotateY("+h+Aa),f!==Ta&&(E+="rotateX("+f+Aa),(p!==Ta||g!==Ta)&&(E+="skew("+p+", "+g+Aa),(y!==1||b!==1)&&(E+="scale("+y+", "+b+Aa),M.style[bn]=E||"translate(0, 0)"},gP=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.rotation,d=n.skewX,h=n.skewY,f=n.scaleX,p=n.scaleY,g=n.target,y=n.xOrigin,b=n.yOrigin,_=n.xOffset,x=n.yOffset,M=n.forceCSS,S=parseFloat(a),E=parseFloat(o),T,P,I,k,R;l=parseFloat(l),d=parseFloat(d),h=parseFloat(h),h&&(h=parseFloat(h),d+=h,l+=h),l||d?(l*=wl,d*=wl,T=Math.cos(l)*f,P=Math.sin(l)*f,I=Math.sin(l-d)*-p,k=Math.cos(l-d)*p,d&&(h*=wl,R=Math.tan(d-h),R=Math.sqrt(1+R*R),I*=R,k*=R,h&&(R=Math.tan(h),R=Math.sqrt(1+R*R),T*=R,P*=R)),T=Nn(T),P=Nn(P),I=Nn(I),k=Nn(k)):(T=f,k=p,P=I=0),(S&&!~(a+"").indexOf("px")||E&&!~(o+"").indexOf("px"))&&(S=oa(g,"x",a,"px"),E=oa(g,"y",o,"px")),(y||b||_||x)&&(S=Nn(S+y-(y*T+b*I)+_),E=Nn(E+b-(y*P+b*k)+x)),(i||s)&&(R=g.getBBox(),S=Nn(S+i/100*R.width),E=Nn(E+s/100*R.height)),R="matrix("+T+","+P+","+I+","+k+","+S+","+E+")",g.setAttribute("transform",R),M&&(g.style[bn]=R)},vP=function(e,t,n,i,s){var a=360,o=Jn(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?Ua:1),d=l-i,h=i+d+"deg",f,p;return o&&(f=s.split("_")[1],f==="short"&&(d%=a,d!==d%(a/2)&&(d+=d<0?a:-a)),f==="cw"&&d<0?d=(d+a*O_)%a-~~(d/a)*a:f==="ccw"&&d>0&&(d=(d-a*O_)%a-~~(d/a)*a)),e._pt=p=new Ii(e._pt,t,n,i,d,eP),p.e=h,p.u="deg",e._props.push(n),p},V_=function(e,t){for(var n in t)e[n]=t[n];return e},xP=function(e,t,n){var i=V_({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=n.style,o,l,d,h,f,p,g,y;i.svg?(d=n.getAttribute("transform"),n.setAttribute("transform",""),a[bn]=t,o=$c(n,1),ao(n,bn),n.setAttribute("transform",d)):(d=getComputedStyle(n)[bn],a[bn]=t,o=$c(n,1),a[bn]=d);for(l in Ts)d=i[l],h=o[l],d!==h&&s.indexOf(l)<0&&(g=ui(d),y=ui(h),f=g!==y?oa(n,l,d,y):parseFloat(d),p=parseFloat(h),e._pt=new Ii(e._pt,o,l,f,p-f,s0),e._pt.u=y||0,e._props.push(l));V_(o,i)};Ni("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",s="Left",a=(e<3?[t,n,i,s]:[t+s,t+n,i+n,i+s]).map(function(o){return e<2?r+o:"border"+o+r});nf[e>1?"border"+r:r]=function(o,l,d,h,f){var p,g;if(arguments.length<4)return p=a.map(function(y){return ys(o,y,d)}),g=p.join(" "),g.split(p[0]).length===5?p[0]:g;p=(h+"").split(" "),g={},a.forEach(function(y,b){return g[y]=p[b]=p[b]||p[(b-1)/2|0]}),o.init(l,g,f)}});var u2={name:"css",register:o0,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,s){var a=this._props,o=e.style,l=n.vars.startAt,d,h,f,p,g,y,b,_,x,M,S,E,T,P,I,k;Av||o0(),this.styles=this.styles||i2(e),k=this.styles.props,this.tween=n;for(b in t)if(b!=="autoRound"&&(h=t[b],!(Gi[b]&&XS(b,t,n,i,e,s)))){if(g=typeof h,y=nf[b],g==="function"&&(h=h.call(n,i,e,s),g=typeof h),g==="string"&&~h.indexOf("random(")&&(h=qc(h)),y)y(this,e,b,h,n)&&(I=1);else if(b.substr(0,2)==="--")d=(getComputedStyle(e).getPropertyValue(b)+"").trim(),h+="",na.lastIndex=0,na.test(d)||(_=ui(d),x=ui(h)),x?_!==x&&(d=oa(e,b,d,x)+x):_&&(h+=_),this.add(o,"setProperty",d,h,i,s,0,0,b),a.push(b),k.push(b,0,o[b]);else if(g!=="undefined"){if(l&&b in l?(d=typeof l[b]=="function"?l[b].call(n,i,e,s):l[b],Jn(d)&&~d.indexOf("random(")&&(d=qc(d)),ui(d+"")||d==="auto"||(d+=Yi.units[b]||ui(ys(e,b))||""),(d+"").charAt(1)==="="&&(d=ys(e,b))):d=ys(e,b),p=parseFloat(d),M=g==="string"&&h.charAt(1)==="="&&h.substr(0,2),M&&(h=h.substr(2)),f=parseFloat(h),b in Vr&&(b==="autoAlpha"&&(p===1&&ys(e,"visibility")==="hidden"&&f&&(p=0),k.push("visibility",0,o.visibility),Qs(this,o,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),b!=="scale"&&b!=="transform"&&(b=Vr[b],~b.indexOf(",")&&(b=b.split(",")[0]))),S=b in Ts,S){if(this.styles.save(b),g==="string"&&h.substring(0,6)==="var(--"&&(h=pr(e,h.substring(4,h.indexOf(")"))),f=parseFloat(h)),E||(T=e._gsap,T.renderTransform&&!t.parseTransform||$c(e,t.parseTransform),P=t.smoothOrigin!==!1&&T.smooth,E=this._pt=new Ii(this._pt,o,bn,0,1,T.renderTransform,T,0,-1),E.dep=1),b==="scale")this._pt=new Ii(this._pt,T,"scaleY",T.scaleY,(M?_l(T.scaleY,M+f):f)-T.scaleY||0,s0),this._pt.u=0,a.push("scaleY",b),b+="X";else if(b==="transformOrigin"){k.push(Li,0,o[Li]),h=fP(h),T.svg?l0(e,h,0,P,0,this):(x=parseFloat(h.split(" ")[2])||0,x!==T.zOrigin&&Qs(this,T,"zOrigin",T.zOrigin,x),Qs(this,o,b,rf(d),rf(h)));continue}else if(b==="svgOrigin"){l0(e,h,1,P,0,this);continue}else if(b in o2){vP(this,T,b,p,M?_l(p,M+h):h);continue}else if(b==="smoothOrigin"){Qs(this,T,"smooth",T.smooth,h);continue}else if(b==="force3D"){T[b]=h;continue}else if(b==="transform"){xP(this,h,e);continue}}else b in o||(b=Nl(b)||b);if(S||(f||f===0)&&(p||p===0)&&!QR.test(h)&&b in o)_=(d+"").substr((p+"").length),f||(f=0),x=ui(h)||(b in Yi.units?Yi.units[b]:_),_!==x&&(p=oa(e,b,d,x)),this._pt=new Ii(this._pt,S?T:o,b,p,(M?_l(p,M+f):f)-p,!S&&(x==="px"||b==="zIndex")&&t.autoRound!==!1?nP:s0),this._pt.u=x||0,_!==x&&x!=="%"&&(this._pt.b=d,this._pt.r=tP);else if(b in o)hP.call(this,e,b,d,M?M+h:h);else if(b in e)this.add(e,b,d||e[b],M?M+h:h,i,s);else if(b!=="parseTransform"){vv(b,h);continue}S||(b in o?k.push(b,0,o[b]):typeof e[b]=="function"?k.push(b,2,e[b]()):k.push(b,1,d||e[b])),a.push(b)}}I&&JS(this)},render:function(e,t){if(t.tween._time||!Cv())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:ys,aliases:Vr,getSetter:function(e,t,n){var i=Vr[t];return i&&i.indexOf(",")<0&&(t=i),t in Ts&&t!==Li&&(e._gsap.x||ys(e,"x"))?n&&D_===n?t==="scale"?aP:sP:(D_=n||{})&&(t==="scale"?oP:lP):e.style&&!pv(e.style[t])?iP:~t.indexOf("-")?rP:Ev(e,t)},core:{_removeProperty:ao,_getMatrix:Pv}};Di.utils.checkPrefix=Nl;Di.core.getStyleSaver=i2;(function(r,e,t,n){var i=Ni(r+","+e+","+t,function(s){Ts[s]=1});Ni(e,function(s){Yi.units[s]="deg",o2[s]=1}),Vr[i[13]]=r+","+e,Ni(n,function(s){var a=s.split(":");Vr[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ni("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Yi.units[r]="px"});Di.registerPlugin(u2);var vs=Di.registerPlugin(u2)||Di;vs.core.Tween;const Nv=({title:r,subtitle:e,ctaText:t="Get Started",onCtaClick:n,backgroundImages:i=[],className:s=""})=>{B.useMemo(()=>{if(!i.length)return;const p=Math.floor(Math.random()*i.length);return i[p]},[i]);const a=B.useRef(null),o=B.useRef(null),l=B.useRef(null),d=B.useRef(null),h=B.useRef(null);B.useEffect(()=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const g=o.current,y=l.current,b=d.current,_=a.current,x=()=>{b&&vs.to(b,{scale:1.03,duration:.3,ease:"power2.out"})},M=()=>{b&&vs.to(b,{scale:1,duration:.3,ease:"power2.out"})},S=()=>{g&&(g.classList.remove("opacity-0","translate-y-8"),vs.to(g,{duration:.8,delay:.2,onComplete:()=>{g==null||g.classList.add("animate-float")}}))},E=()=>{y&&(y.classList.remove("opacity-0","translate-y-5"),vs.to(y,{duration:.8,delay:.4}))},T=()=>{b&&(b.classList.remove("opacity-0","translate-y-5","scale-95"),vs.to(b,{duration:.8,delay:.6,scale:.95}),b.addEventListener("mouseenter",x),b.addEventListener("mouseleave",M))},P=()=>{_&&vs.to(_,{stagger:.15,duration:.6,delay:.3,y:20,opacity:0,ease:"back.out(1.7)"})},I=()=>{if(!_||!g||!y||!b)return;const k=vs.timeline({paused:!0});k.to(g,{opacity:1,y:0,duration:.8,delay:.2,ease:"power2.out"},0),k.to(y,{opacity:1,y:0,duration:.8,delay:.4,ease:"power2.out"},0),k.to(b,{opacity:1,y:0,scale:1,duration:.8,delay:.6,ease:"power2.out"},0),ScrollTrigger.create({trigger:_,start:"top bottom-=100",onEnter:()=>k.play(),onEnterBack:()=>k.play(),onLeave:()=>k.pause(0),onLeaveBack:()=>k.pause(0)})};return S(),E(),T(),P(),I(),()=>{var k;b==null||b.removeEventListener("mouseenter",x),b==null||b.removeEventListener("mouseleave",M),(k=h.current)==null||k.kill(),vs.killTweensOf([g,y,b].filter(Boolean))}},[]);function f(...p){return p.filter(Boolean).join(" ")}return m.jsxs("section",{ref:a,className:f("relative flex h-[40vh] min-h-[350px] items-center justify-center overflow-hidden bg-gray-50 dark:bg-gray-900",s),children:[m.jsxs("div",{className:"absolute inset-0 z-0",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/40 to-black/70 dark:via-black/60 dark:to-black/80"}),i==null?void 0:i.map((p,g)=>m.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-opacity duration-1000 ${g===0?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${p})`,backgroundPosition:"center",backgroundSize:"cover",transition:"opacity 1s ease-in-out",filter:"brightness(0.7) contrast(1.1)"}},`bg-${g}`))]}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/30 via-background/70 to-background dark:from-dark-background/50 dark:via-dark-background/80 dark:to-dark-background"}),m.jsxs("div",{className:"relative z-10 max-w-4xl px-4 text-center",children:[r&&m.jsx("h1",{ref:o,className:"mb-4 text-4xl font-bold tracking-tight text-white dark:text-gray-100 sm:text-5xl lg:text-6xl drop-shadow-md",children:r}),e&&m.jsx("p",{ref:l,className:"mx-auto mb-8 max-w-2xl text-lg text-gray-100 dark:text-gray-200 sm:text-xl md:mb-12 drop-shadow",children:e}),t&&n&&m.jsxs("button",{type:"button",ref:d,onClick:n,className:"group relative bg-accent hover:bg-accent/90 dark:bg-dark-accent dark:hover:bg-dark-accent/90 text-white font-semibold py-3 px-8 rounded-full transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-accent/40 dark:focus:ring-dark-accent/40 flex items-center mx-auto shadow-lg hover:shadow-accent/30 dark:hover:shadow-dark-accent/30 opacity-0 translate-y-5 scale-95",children:[m.jsx("span",{className:"relative z-10",children:t}),m.jsx("svg",{className:"ml-2 -mr-1 w-5 h-5 inline-block transition-transform duration-300 group-hover:translate-x-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]})},yP=["https://images.unsplash.com/photo-1543269664-7e6d8a8352ac?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1516321318423-f06a85f50459?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.pexels.com/photos/3183150/pexels-photo-3183150.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/3183197/pexels-photo-3183197.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/1779487/pexels-photo-1779487.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/3861969/pexels-photo-3861969.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"],_P=()=>{kw();const r=B.useMemo(()=>[...yP].sort(()=>.5-Math.random()).slice(0,2),[]);return m.jsxs("div",{className:"relative dark:bg-gray-900",children:[m.jsx(Nv,{title:"",subtitle:"",backgroundImages:r,className:"min-h-[40vh] dark:brightness-100"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/60 dark:from-black/70 dark:via-black/50 dark:to-black/70",children:m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center px-4",children:[m.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white dark:text-white mb-4",children:"Crafting Digital Experiences"}),m.jsx("p",{className:"text-xl md:text-2xl text-gray-200 dark:text-gray-200 mb-8 max-w-2xl mx-auto",children:"Passionate about creating elegant solutions to complex problems through code and design."}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[m.jsxs(wi,{variant:"primary",size:"lg",className:"px-6 py-3 text-lg font-medium w-full sm:w-auto transition-all duration-200 ease-out hover:scale-[1.02] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary/50",onClick:()=>{const e=document.getElementById("about-content");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},children:["Learn More",m.jsx(mf,{className:"ml-2 w-4 h-4 transition-transform duration-200 group-hover:translate-x-1"})]}),m.jsx(wi,{variant:"outline",size:"lg",icon:"download",iconPosition:"left",onClick:()=>window.open("/assets/Sahil_Ali_Cv.pdf","_blank"),className:"px-8 py-3 text-lg border-white text-white hover:bg-white hover:text-gray-900 dark:border-gray-300 dark:text-gray-200 dark:hover:bg-gray-800 dark:hover:text-white transition-colors w-full sm:w-auto",children:"Download CV"})]})]})})})]})},sf=({name:r,icon:e,className:t="",variant:n="default",size:i="md",children:s})=>{const a={sm:"text-xs px-2.5 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},o={default:"bg-primary/10 text-primary hover:bg-primary/20",outline:"border border-border bg-transparent hover:border-primary/50",ghost:"bg-transparent hover:bg-muted/50"};return m.jsxs(ve.span,{whileHover:{y:-2},className:`inline-flex items-center gap-1.5 rounded-full font-medium transition-all ${a[i]} ${o[n]} ${t}`,children:[e&&m.jsx("span",{className:"text-base",children:e}),s||r]})},bP={grow:{hover:{y:-4,scale:1.02,transition:{duration:.2}}},float:{hover:{y:-8,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",transition:{duration:.3}}},none:{}},oo=({title:r,description:e,icon:t,className:n="",variant:i="default",hoverEffect:s="grow",children:a})=>{const o={default:"bg-background/50 border-border hover:border-primary/30",outline:"border border-border/50 bg-transparent hover:border-primary/50",elevated:"bg-background/80 shadow-sm border border-border/20 hover:shadow-md"};return m.jsxs(ve.div,{initial:!1,whileHover:s!=="none"?"hover":void 0,variants:bP[s],className:`group relative overflow-hidden rounded-xl p-6 transition-all ${o[i]} ${n}`,children:[i==="default"&&m.jsx("div",{className:"absolute -right-4 -top-4 h-24 w-24 rounded-full bg-gradient-to-br from-primary/10 to-accent/10 opacity-0 transition-opacity group-hover:opacity-100"}),m.jsxs("div",{className:"relative z-10",children:[t&&m.jsx("div",{className:"mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-accent text-white",children:t}),r&&m.jsx("h3",{className:"mb-2 text-xl font-semibold text-foreground",children:r}),e&&m.jsx("div",{className:"text-muted-foreground",children:e}),a]})]})},wP=()=>{const[r,e]=B.useState(0),t=[{id:1,year:"2017",title:"Field Executive & Accounts Assistant",description:"Visited clients for EMI collections, processed transactions in Tally & Excel, verified KYC documents, and supported financial ledger reconciliation.",icon:Ks,location:"Deewakar Finance Pvt. Ltd.",tags:["Tally","MS Excel","Loan Recovery","Compliance"]},{id:2,year:"2021",title:"Warehouse Supervisor Certification",description:"Earned certification in Warehouse Operations & Logistics Management under DDUGKY and learned process optimization and stock control.",icon:so,location:"Aayna Agrifarm Pvt. Ltd.",tags:["Stock Logs","Inventory Audit","FIFO"]},{id:3,year:"2022",title:"Warehouse Supervisor",description:"Oversaw warehouse operations, led staff coordination, and maintained accurate stock documentation for training materials.",icon:Ks,location:"Arzt Health & Private Limited",tags:["Inventory Control","Process Optimization","Team Leadership"]},{id:4,year:"2022–2023",title:"GRN Officer",description:"Managed GRNs, MRP changes, SKU control, and ensured FIFO and register accuracy for 500+ items in a busy supermarket environment.",icon:Ks,location:"Bansal Supermarket, Surat",tags:["Goods Receipt","SKU Management","FIFO","Excel"]},{id:5,year:"2023–Present",title:"Inventory Specialist",description:"Handled invoices, cash flow tracking, ERP entries, and supplier reconciliations across dual stores while automating reporting.",icon:Ks,location:"Ekam Indian Groceries, Australia",tags:["ERP Software","Financial Reconciliation","Inventory Management"]},{id:6,year:"2024–Present",title:"Data Analyst & Automation Specialist",description:"Built a portfolio site, automated tasks using AI tools, created dashboards with Tableau & Notion, and streamlined workflows using Python and SQL.",icon:El,location:"Self-Employed",tags:["AI Tools","Python","SQL","Automation"]}],n=i=>{e(r===i?null:i)};return m.jsx(Mu,{className:"py-16 bg-muted/10",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx(Er,{title:"My Professional Journey",subtitle:"Key milestones and experiences that shaped my career"}),m.jsxs("div",{className:"mt-12 max-w-3xl mx-auto",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary/20 via-primary/40 to-primary/20","aria-hidden":"true"}),m.jsx("div",{className:"space-y-8",children:t.map((i,s)=>{const a=i.icon,o=r===i.id,l=s===t.length-1;return m.jsxs(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4,delay:s*.1},className:"relative pl-12",children:[m.jsx("div",{className:"absolute left-0 flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 ring-8 ring-background",children:m.jsx("div",{className:"h-3 w-3 rounded-full bg-primary"})}),m.jsxs(oo,{className:`overflow-hidden transition-all duration-300 ${o?"ring-2 ring-primary/20":"hover:ring-1 hover:ring-border"}`,variant:o?"elevated":"outline",children:[m.jsx("button",{onClick:()=>n(i.id),className:"w-full text-left focus:outline-none","aria-expanded":o,"aria-controls":`milestone-${i.id}-content`,children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsx("div",{children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10 text-primary",children:m.jsx(a,{className:"h-5 w-5"})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:i.title}),m.jsxs("div",{className:"mt-1 flex items-center text-sm text-muted-foreground",children:[m.jsx("span",{className:"font-medium",children:i.year}),i.location&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"mx-2",children:"•"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Gw,{className:"mr-1 h-3.5 w-3.5 flex-shrink-0"}),m.jsx("span",{children:i.location})]})]})]})]})]})}),m.jsx("div",{className:"ml-4 flex-shrink-0",children:o?m.jsx(kA,{className:"h-5 w-5 text-muted-foreground"}):m.jsx(IA,{className:"h-5 w-5 text-muted-foreground"})})]})}),m.jsx(mr,{initial:!1,children:o&&m.jsxs(ve.div,{id:`milestone-${i.id}-content`,initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3,ease:"easeInOut"},className:"mt-4 pt-4 border-t border-border",children:[m.jsx("div",{className:"prose prose-sm prose-muted dark:prose-invert max-w-none",children:m.jsx("p",{className:"text-muted-foreground",children:i.description})}),i.tags&&i.tags.length>0&&m.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[m.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Key Skills:"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map(d=>m.jsx(sf,{name:d,variant:"outline",size:"sm",className:"text-xs",children:d},d))})]})]})})]}),!l&&m.jsx("div",{className:"absolute left-4 top-full h-8 w-0.5 bg-gradient-to-b from-primary/20 via-primary/40 to-primary/20"})]},i.id)})})]}),m.jsxs(ve.div,{className:"mt-16 text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},children:[m.jsx("p",{className:"text-muted-foreground mb-6",children:"Want to know more about my professional background?"}),m.jsx("a",{href:"/resume.pdf",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/50",children:"Download My Resume"})]})]})]})})},SP=()=>{const r=[{id:"inventory",title:"Inventory Specialist",description:"End-to-end inventory and warehouse management, ensuring optimal stock levels, reduced wastage, and efficient vendor coordination.",icon:zw,skills:["Stock Level Monitoring","FIFO/LIFO Strategies","Vendor Management","ERP Tools (Zoho, Marg)","Excel Automation","Barcode Scanning Systems","Supply Chain Coordination"],accentColor:"bg-blue-500"},{id:"data",title:"Data Analyst",description:"Transforming raw data into dashboards, reports, and business intelligence using modern tools for informed decision-making.",icon:Fw,skills:["Excel + Advanced Formulas","Looker Studio / Google Sheets","Power BI / Tableau","SQL & Relational Databases","Dashboarding & Reporting","Statistical Trend Analysis","KPI Tracking & Optimization"],accentColor:"bg-purple-500"},{id:"ai",title:"AI Generalist",description:"Applying AI and automation to solve real business problems, streamline workflows, and integrate smart tools with operations.",icon:Bw,skills:["AI Workflow Automation","ChatGPT + Prompt Engineering","No-Code AI Tools (Zapier, Pabbly)","OpenAI API Integration","Custom AI Dashboards","Data Mining & Forecasting","Machine Learning (Basic Models)"],accentColor:"bg-emerald-500"}],e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},t={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:15}}};return m.jsx(Mu,{className:"py-16 bg-muted/30",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx(Er,{title:"My Expertise Areas",subtitle:"Specialized skills and knowledge across multiple domains"}),m.jsx(ve.div,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:r.map(n=>{const i=n.icon;return m.jsx(ve.div,{variants:t,className:"h-full",children:m.jsxs(oo,{className:"h-full flex flex-col",variant:"elevated",hoverEffect:"grow",children:[m.jsx("div",{className:`w-12 h-1.5 ${n.accentColor} rounded-full mb-4`}),m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("div",{className:"p-2.5 rounded-lg bg-primary/10 text-primary",children:m.jsx(i,{className:"h-6 w-6"})}),m.jsx("h3",{className:"ml-3 text-xl font-semibold text-foreground",children:n.title})]}),m.jsx("p",{className:"text-muted-foreground mb-4 flex-grow",children:n.description}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[m.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Key Skills:"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.skills.slice(0,5).map(s=>m.jsx(sf,{name:s,variant:"outline",size:"sm",className:"text-xs",children:s},s)),n.skills.length>5&&m.jsxs("span",{className:"text-xs text-muted-foreground self-center",children:["+",n.skills.length-5," more"]})]})]})]})},n.id)})}),m.jsx(ve.div,{className:"mt-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},children:m.jsx(oo,{className:"bg-background",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"And many more skills..."}),m.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto mb-6",children:"I'm constantly learning and expanding my skill set. Here are some additional tools and technologies I work with:"}),m.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["Microsoft Office Suite","Google Workspace","Project Management","Team Leadership","Process Improvement","Data Entry","Customer Service","Training & Development"].map(n=>m.jsx(sf,{name:n,variant:"ghost",size:"sm",className:"text-xs",children:n},n))})]})})})]})})},MP=[{id:"cert1",institution:"Aayna Agrifarm Pvt. Ltd. (Under DDUGKY)",period:"June 2021 – November 2021",fieldOfStudy:"Warehouse Operations & Logistics Management",imageUrl:"/images/certifications/warehouse.jpg",description:["Completed a certified training program under the Deen Dayal Upadhyaya Grameen Kaushalya Yojana (DDUGKY), focusing on warehouse operations and logistics management.","Gained practical exposure in warehouse supervision, inventory handling, and stock reconciliation.","Learned logistics coordination, dispatch planning, and storage protocols.","Understood safety standards, FIFO/LIFO inventory methods, and warehouse layout optimization.","Participated in hands-on sessions for Excel-based stock reporting and manual register maintenance."],location:"Skill Development Training (Certified)"}],EP=()=>{const[r,e]=B.useState("all"),[t,n]=B.useState(null),i=MP.map(o=>{var l,d,h;return{id:o.id,title:o.fieldOfStudy||"Professional Certification",issuer:o.institution,issueDate:((d=(l=o.period)==null?void 0:l.split("–")[0])==null?void 0:d.trim())||"",credentialUrl:o.institutionUrl,imageUrl:o.imageUrl||"/images/certifications/default-cert.jpg",tags:["professional","certification",(h=o.fieldOfStudy)!=null&&h.toLowerCase().includes("warehouse")?"warehouse":""].filter(Boolean)}}),s=["all",...new Set(i.flatMap(o=>o.tags))],a=r==="all"?i:i.filter(o=>o.tags.includes(r));return m.jsx(Mu,{className:"py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx(Er,{title:"Certifications",subtitle:"Professional credentials and achievements"}),m.jsx(ve.div,{className:"flex flex-wrap justify-center gap-2 mb-10",initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},children:s.map(o=>m.jsx(wi,{variant:r===o?"primary":"outline",size:"sm",onClick:()=>e(o==="all"?"all":o),className:"capitalize",children:o.replace("-"," ")},o))}),m.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(o=>m.jsx(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:m.jsxs(oo,{className:"h-full",variant:"elevated",children:[o.imageUrl&&m.jsx("div",{className:"mb-4 overflow-hidden rounded-lg",children:m.jsx(ov,{src:o.imageUrl,alt:`${o.title} certificate`,className:"w-full h-auto max-h-80 object-contain rounded-lg"})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold",children:o.title}),m.jsx("p",{className:"text-sm text-muted-foreground",children:o.issuer})]}),m.jsx("div",{className:"p-1.5 rounded-full bg-primary/10 text-primary",children:m.jsx(so,{className:"h-5 w-5"})})]}),m.jsxs("div",{className:"text-sm space-y-2",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"text-muted-foreground mr-2",children:"Issued:"}),m.jsx("span",{children:"April 2022"})]}),o.credentialUrl&&m.jsxs("a",{href:o.credentialUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-primary hover:underline",children:[m.jsx(ws,{className:"mr-1.5 h-4 w-4"}),"View Credential"]})]})]})]})},o.id))}),a.length===0&&m.jsxs(ve.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:[m.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:m.jsx(so,{className:"h-6 w-6 text-muted-foreground"})}),m.jsx("h3",{className:"mt-2 text-lg font-medium",children:"No certifications found"}),m.jsx(wi,{variant:"outline",className:"mt-4",onClick:()=>e("all"),children:"Clear filters"})]})]})})},TP=[{id:"bsc-physics",degree:"Bachelor of Science (B.Sc.) – Physics, Chemistry, Mathematics",institution:"MDSU University",institutionUrl:"https://www.mdsuajmer.ac.in/",period:"January 2018 – January 2021",fieldOfStudy:"Physics, Chemistry, Mathematics",location:"Rajasthan, India",imageUrl:"/images/education/mdsu-university.jpg",description:["Built a strong academic foundation in analytical thinking, problem-solving, and data interpretation through core science subjects.","Developed logical reasoning and quantitative analysis skills, which later supported my transition into data analytics and AI automation."]},{id:"self-learning",degree:"Self-Learning & Professional Skill Development",institution:"Online Learning Platforms",period:"2023 – Present",fieldOfStudy:"AI, Automation & Data Analysis",imageUrl:"/images/education/online-learning.jpg",description:["Passionately transitioned into tech by self-learning AI tools, automation platforms, and data analysis techniques.","Gained hands-on experience in ChatGPT, Notion AI, Make.com (Integromat), Google Sheets automation, and other AI-powered workflows.","Actively upskilled through curated online programs by @Outskills, learning practical applications of AI in real-world business environments.","Continuously explore new tools to automate tasks, optimize workflows, and enhance productivity using AI."]}],AP=r=>r.map(e=>{const t=e.period.match(/(\d{4})/g),n=t?t[0]:"",i=t&&t[1]?t[1]:"Present",s=Array.isArray(e.description)?e.description:[e.description];return{id:e.id,degree:e.degree,institution:e.institution,fieldOfStudy:e.fieldOfStudy,startDate:n,endDate:i,location:e.location||"",description:s,institutionUrl:e.institutionUrl}}),CP=({education:r,title:e="Education",className:t="",useDefaultData:n=!0})=>{const i=r||(n?AP(TP):[]),s=B.useRef(null);return!i||i.length===0?null:m.jsx(Mu,{className:`py-16 ${t}`,children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx(Er,{title:e,subtitle:"My academic background and professional certifications"}),m.jsx(ve.div,{ref:s,className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{hidden:{},visible:{transition:{staggerChildren:.1}}},children:i.map((a,o)=>m.jsx(ve.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},className:"h-full",children:m.jsxs(oo,{className:"h-full flex flex-col",variant:"outline",hoverEffect:"grow",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground",children:a.degree}),m.jsx("h4",{className:"text-md font-medium text-muted-foreground",children:a.institution})]}),a.institutionUrl&&m.jsx("a",{href:a.institutionUrl,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":`Visit ${a.institution} website`,children:m.jsx(ws,{className:"h-5 w-5"})})]}),m.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[m.jsxs("div",{className:"flex items-center text-muted-foreground",children:[m.jsx(so,{className:"h-4 w-4 mr-2 text-primary"}),m.jsx("span",{children:a.fieldOfStudy})]}),m.jsxs("div",{className:"flex items-center text-muted-foreground",children:[m.jsx(PA,{className:"h-4 w-4 mr-2 text-primary"}),m.jsxs("span",{children:[a.startDate," - ",a.endDate]})]}),a.location&&m.jsxs("div",{className:"flex items-center text-muted-foreground",children:[m.jsx(Gw,{className:"h-4 w-4 mr-2 text-primary"}),m.jsx("span",{children:a.location})]})]}),a.description&&m.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:Array.isArray(a.description)?m.jsx("ul",{className:"space-y-2",children:a.description.map((l,d)=>m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:l})]},d))}):m.jsx("p",{children:a.description})}),a.achievements&&a.achievements.length>0&&m.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[m.jsx("h5",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Key Achievements:"}),m.jsx("ul",{className:"space-y-1.5 text-sm",children:a.achievements.map((l,d)=>m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{className:"text-muted-foreground",children:l})]},d))})]}),a.gpa&&m.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:m.jsxs("p",{className:"text-sm font-medium text-muted-foreground",children:["GPA: ",m.jsx("span",{className:"text-foreground",children:a.gpa})]})})]})},a.id||o))}),m.jsxs(ve.div,{className:"mt-12 text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},children:[m.jsx("p",{className:"text-muted-foreground mb-6",children:"Want to see more details about my education and certifications?"}),m.jsx(wi,{variant:"outline",onClick:()=>{var a;(a=document.getElementById("certifications"))==null||a.scrollIntoView({behavior:"smooth"})},children:"View My Certifications"})]})]})})},RP=[{id:1,name:"Years of Experience",value:"4+",icon:Ks},{id:2,name:"Projects Completed",value:"15+",icon:El},{id:3,name:"Clients Served",value:"10+",icon:WA},{id:4,name:"Certifications",value:"5+",icon:so}],PP=["Data Analysis","Power BI","SQL","Python","Inventory Optimization","AI Research","Machine Learning","Data Visualization","Excel","Looker Studio","Tableau","Process Automation"],NP=()=>m.jsx("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:m.jsx(Mu,{className:"py-16 md:py-24 bg-background",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{id:"about-content",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"About Me"}),m.jsx("p",{className:"mt-2 text-muted-foreground max-w-2xl",children:"A passionate professional with expertise in data analysis, inventory management, and AI research"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[m.jsxs(ve.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"space-y-6",children:[m.jsxs("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[m.jsx("p",{children:"Hey there! I'm a multi-disciplinary professional with expertise in Data Analysis, Inventory Management, and Artificial Intelligence research."}),m.jsx("p",{children:"With over 4+ years of experience, I've optimized inventory systems, delivered insights through data, and explored cutting-edge AI applications to streamline operations across industries."}),m.jsx("p",{children:"I'm a lifelong learner who thrives on solving real-world problems. Outside of work, I enjoy tech blogging, nerdy podcasts, and the occasional game of chess."})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Core Skills"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:PP.slice(0,8).map(r=>m.jsx(sf,{name:r,variant:"outline",size:"sm",children:r},r))})]})]}),m.jsx(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:RP.map(r=>{const e=r.icon;return m.jsx(oo,{variant:"outline",hoverEffect:"grow",className:"h-full",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"p-2.5 rounded-lg bg-primary/10 text-primary",children:m.jsx(e,{className:"h-5 w-5"})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r.name}),m.jsx("p",{className:"text-2xl font-semibold text-foreground",children:r.value})]})]})},r.id)})})]}),m.jsx(ve.div,{className:"mt-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.4},children:m.jsx(oo,{className:"bg-muted/30",children:m.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"What I Do"}),m.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Data Analysis & Visualization"})]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Inventory Optimization"})]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Process Automation"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"My Approach"}),m.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Data-Driven Decision Making"})]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Continuous Learning"})]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Collaborative Problem Solving"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"My Values"}),m.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Integrity & Transparency"})]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Innovation & Creativity"})]}),m.jsxs("li",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary mr-2",children:"•"}),m.jsx("span",{children:"Continuous Improvement"})]})]})]})]})})})]})})}),IP=()=>m.jsxs("div",{className:"min-h-screen",children:[m.jsx(_P,{}),m.jsx(Kn,{}),m.jsx(wP,{}),m.jsx(Kn,{}),m.jsx(SP,{}),m.jsx(Kn,{}),m.jsx(EP,{}),m.jsx(Kn,{}),m.jsx(CP,{}),m.jsx(Kn,{}),m.jsx(NP,{})]}),LP=[{id:"exp1",role:"Field Executive & Accounts Assistant",company:"Deewakar Finance Pvt. Ltd.",companyUrl:"https://www.deewakargroup.com",logo:"/Company/Deewakar_logo.png",period:"Dec 2017 – Nov 2020",description:["Visited clients for EMI collections, loan follow-ups, and settlement discussions to ensure timely recoveries","Maintained daily transaction records and processed account entries using Tally and MS Excel","Verified loan application forms and collected KYC documents ensuring regulatory compliance","Provided post-loan customer support and addressed payment-related queries","Managed multiple client locations daily and submitted regular recovery reports","Supported reconciliation of ledgers and maintained accurate financial records"],achievements:["Successfully recovered 95% of overdue EMIs through effective follow-up strategies","Reduced documentation errors by 30% by implementing a verification checklist"],technologies:["Loan Recovery","Financial Services","Tally","MS Excel","Client Relationship Management","Regulatory Compliance"],startDate:"2017-12-01",endDate:"2020-11-30",isCurrent:!1},{id:"exp2",role:"Inventory Specialist & Cash Flow",company:"Ekam Indian Groceries",companyUrl:"#",logo:"/Company/Ekam_logo.png",period:"Dec 2023 – Present",description:["Managed daily purchase entries, invoice verification, attendance tracking, and supplier coordination across dual store locations","Automated reporting processes and supported cash flow documentation during manager absence","Handled purchase data and fruit and vegetable invoices using ERP software and advanced Excel functions","Cross-checked supplier invoices and reconciled statements to prevent overbilling, ensuring financial accuracy","Maintained staff attendance and created daily cash reports","Collaborated with the team to support inventory accuracy and operational flow, reducing stock issues significantly"],achievements:["Reduced stock discrepancies by 40% through improved inventory tracking","Automated daily reporting, saving 5+ hours per week"],technologies:["Inventory Management","ERP Software","Excel","Data Analysis","Process Automation","Financial Reconciliation"],startDate:"2023-12-01",endDate:null,isCurrent:!0},{id:"exp3",role:"GRN Officer",company:"Bansal Supermarket",companyUrl:"#",logo:"/Company/Bansal_logo.png",period:"Dec 2022 – Nov 2023",description:["Managed GRNs, MRP/offer changes, and 10-item register maintenance with precision","Conducted regular floor walks and enforced FIFO practices across departments to reduce waste","Handled PI management, rate updates, and price accuracy for fast-moving items","Maintained operational registers including Top 100/200 item reports","Reduced stock discrepancies by 30% through enhanced GRN practices","Improved offer accuracy and register organization across 500+ SKUs"],achievements:["Reduced stock discrepancies by 30% through enhanced GRN practices","Improved offer accuracy and register organization across 500+ SKUs"],technologies:["Goods Receipt","Inventory Control","FIFO Management","SKU Management","Process Improvement"],startDate:"2022-12-01",endDate:"2023-11-30",isCurrent:!1},{id:"exp4",role:"Warehouse Supervisor",company:"Arzt Health & Private Limited",companyUrl:"#",logo:"/Company/Arzt_logo.png",period:"June 2022 – Nov 2022",description:["Oversaw stock control, warehouse documentation, and physical inventory across training material storage","Led day-to-day warehouse operations and staff coordination with a strong focus on efficiency","Maintained accurate bin cards, stock logs, and conducted warehouse audits","Implemented FIFO principles and organized material flow for training batches","Achieved 100% stock availability across training cycles","Streamlined warehouse layout and improved stock handling speed"],achievements:["Achieved 100% stock availability across training cycles","Streamlined warehouse layout and improved stock handling speed by 20%"],technologies:["Warehouse Management","Inventory Control","Team Leadership","Process Optimization","FIFO Implementation"],startDate:"2022-06-01",endDate:"2022-11-30",isCurrent:!1},{id:"exp5",role:"Data Analyst & Automation Specialist",company:"Self-Employed",companyUrl:"#",logo:"/Company/AIGernalist_logo.png",period:"2024 – Present",description:["Designed and developed a professional portfolio website to showcase data analytics, automation, and inventory management expertise","Leveraged AI tools for code generation, SQL query optimization, and automating routine analysis tasks","Utilized Perplexity AI for real-time data insights and research","Automated data processing workflows using Python, reducing manual work by 80%","Created interactive dashboards and visualizations to present complex data insights","Developed custom scripts to automate repetitive tasks and improve efficiency"],achievements:["Automated data processing workflows, reducing manual work by 80%","Developed custom scripts that improved operational efficiency by 50%"],technologies:["Data Analysis","Python","SQL","Automation","AI Tools","Data Visualization"],startDate:"2024-01-01",endDate:null,isCurrent:!0}],kP=[{id:"skill1",name:"Inventory Management",level:90,category:"other",icon:"📦"},{id:"skill2",name:"Process Automation",level:85,category:"other",icon:"⚙️"},{id:"skill3",name:"ERP Software",level:85,category:"other",icon:"💻"},{id:"skill4",name:"FIFO Implementation",level:90,category:"other",icon:"🔄"},{id:"skill5",name:"Warehouse Management",level:90,category:"other",icon:"🏭"},{id:"skill6",name:"Data Analysis",level:90,category:"database",icon:"📊"},{id:"skill7",name:"Financial Reporting",level:85,category:"database",icon:"📈"},{id:"skill8",name:"Excel & Google Sheets",level:95,category:"database",icon:"📋"},{id:"skill9",name:"SQL",level:80,category:"database",icon:"🗃️"},{id:"skill10",name:"Data Visualization",level:85,category:"database",icon:"📉"},{id:"skill11",name:"Data Analysis",level:8,category:"backend",icon:"📊"},{id:"skill12",name:"Loan Recovery",level:8,category:"backend",icon:"📈"},{id:"skill13",name:"Financial Reporting",level:8,category:"backend",icon:"📋"},{id:"skill19",name:"Microsoft Excel",level:9,category:"database",icon:"📊"},{id:"skill20",name:"Tally",level:8,category:"database",icon:"🧮"},{id:"skill21",name:"Google Sheets",level:8,category:"database",icon:"📝"},{id:"skill22",name:"Google Apps Script",level:7,category:"backend",icon:"✍️"},{id:"skill14",name:"Client Relationship Management",level:9,category:"other",icon:"🤝"},{id:"skill15",name:"Team Leadership",level:8,category:"other",icon:"👥"},{id:"skill16",name:"Process Improvement",level:9,category:"other",icon:"📈"},{id:"skill17",name:"Regulatory Compliance",level:8,category:"other",icon:"📜"},{id:"skill18",name:"Documentation",level:9,category:"other",icon:"📄"}];function DP(r,e={}){const t=lA(),{yOffset:n=10,staggerDelay:i=.1,initialDelay:s=.2}=e;return B.useEffect(()=>{if(!r.current)return;const a=r.current;let o=null;function l(d){d.forEach(h=>{h.isIntersecting&&(t.start("visible"),o&&o.disconnect())})}return o=new IntersectionObserver(l,{threshold:.1}),o.observe(a),t.set("hidden"),()=>{o&&o.disconnect()}},[t,r]),{controls:t}}const OP=({metrics:r,title:e="Impact Metrics",description:t="Key achievements and professional growth",className:n=""})=>{const i=B.useRef(null),{controls:s}=DP(i,{yOffset:10,staggerDelay:.1,initialDelay:.2}),a={hidden:{opacity:0,y:20},visible:o=>({opacity:1,y:0,transition:{delay:o*.1}})};return!r||r.length===0?null:m.jsxs(ve.div,{ref:i,initial:"hidden",animate:s,className:`mt-16 ${n}`,children:[m.jsx(Er,{title:e,subtitle:t}),m.jsx(ve.div,{variants:a,className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((o,l)=>m.jsxs(ve.div,{variants:a,custom:l+1,className:"bg-card text-card-foreground rounded border border-border p-6 shadow-sm",children:[m.jsx("div",{className:"flex items-center justify-center mb-4",children:o.icon||m.jsx(so,{className:"h-6 w-6"})}),m.jsx("h3",{className:"text-3xl font-bold mb-2",children:o.value}),m.jsx("p",{className:"text-lg mb-2",children:o.label}),o.description&&m.jsx("p",{className:"text-muted-foreground",children:o.description})]},o.id))})]})},G_={database:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",framework:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",language:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",tool:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",other:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"},UP=r=>G_[r.toLowerCase()]||G_.other,FP=({skills:r,className:e})=>{const n=r.map(o=>({...o,level:95})).reduce((o,l)=>{const d=l.category||"other";return o[d]||(o[d]=[]),o[d].push(l),o},{}),i=Object.keys(n).sort(),s={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return m.jsx("div",{className:po("w-full",e),children:i.map(o=>m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"mb-4 text-xl font-semibold capitalize text-foreground/90",children:o}),m.jsx(ve.div,{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",variants:s,initial:"hidden",animate:"show",children:n[o].sort((l,d)=>d.level-l.level).map(l=>m.jsxs(ve.div,{className:"overflow-hidden rounded-lg border bg-card p-4 shadow-sm transition-all hover:shadow-md",variants:a,whileHover:{y:-2},children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[l.icon&&m.jsx("span",{className:"text-lg",children:l.icon}),m.jsx("span",{className:"font-medium text-foreground",children:l.name})]}),m.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[l.level,"%"]})]}),m.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-muted",children:m.jsx(ve.div,{className:`h-full ${UP(o).split(" ")[0]}`,initial:{width:0},animate:{width:`${l.level}%`},transition:{duration:1,ease:"easeOut"}})})]},l.id))})]},o))})},zP=B.lazy(()=>wu(()=>import("./ExperienceSection.CfYKZunu.js"),__vite__mapDeps([0,1,2]))),jP=B.lazy(()=>wu(()=>import("./ExperienceHero.BwO6VK69.js"),__vite__mapDeps([3,1,2]))),xm=({children:r})=>{const[e,t]=Lc.useState(!1),[n,i]=Lc.useState(null),s=a=>{var o,l;a instanceof ErrorEvent?i(((o=a.error)==null?void 0:o.message)??"An unexpected error occurred"):a instanceof PromiseRejectionEvent?i(((l=a.reason)==null?void 0:l.message)??"A promise was rejected"):i("An unknown error occurred"),t(!0)};return Lc.useEffect(()=>(window.addEventListener("error",s),window.addEventListener("unhandledrejection",s),()=>{window.removeEventListener("error",s),window.removeEventListener("unhandledrejection",s)}),[]),e?m.jsxs("div",{className:"relative dark:bg-gray-900 min-h-screen flex items-center justify-center",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/60 dark:from-black/70 dark:via-black/50 dark:to-black/70"}),m.jsxs("div",{className:"relative z-10 text-center px-4 py-20 max-w-lg mx-auto",children:[m.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4",children:"Something went wrong"}),m.jsx("p",{className:"text-xl md:text-2xl text-gray-200 mb-8",children:n}),m.jsx("button",{onClick:()=>{t(!1),i(null)},className:"inline-flex items-center px-8 py-3 rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200",type:"button",children:"Try Again"})]})]}):m.jsx(m.Fragment,{children:r})},BP=({className:r=""})=>{const e=LP.map(n=>({id:n.id,role:n.role,company:n.company,period:n.period,description:Array.isArray(n.description)?n.description:[n.description||""],technologies:n.technologies||[],achievements:n.achievements||[],logo:n.logo||"/images/company-logo.png",companyUrl:n.companyUrl||"",startDate:n.startDate,endDate:n.endDate,isCurrent:n.isCurrent||!1})),t=[{id:"1",value:"4+",label:"Years of Experience",description:"Building scalable web applications",icon:m.jsx(Ks,{className:"h-6 w-6"})},{id:"2",value:"15+",label:"Projects Completed",description:"For clients across various industries",icon:m.jsx(El,{className:"h-6 w-6"})},{id:"3",value:"20+",label:"Technologies",description:"In my development stack",icon:m.jsx(Ww,{className:"h-6 w-6"})},{id:"4",value:"8+",label:"Awards Won",description:"For technical excellence",icon:m.jsx(so,{className:"h-6 w-6"})},{id:"5",value:"100%",label:"Client Satisfaction",description:"Consistently positive feedback",icon:m.jsx(RA,{className:"h-6 w-6"})}];return m.jsx("div",{className:`min-h-screen bg-background text-foreground ${r}`,children:m.jsx(B.Suspense,{fallback:m.jsxs("div",{className:"relative dark:bg-gray-900 min-h-screen flex items-center justify-center",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/60 dark:from-black/70 dark:via-black/50 dark:to-black/70"}),m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500 relative",children:m.jsx(Ks,{className:"absolute inset-0 h-8 w-8 m-auto"})})]}),children:m.jsxs("div",{className:"relative",children:[m.jsx(xm,{children:m.jsx(jP,{})}),m.jsxs("main",{className:"container mx-auto px-4 py-12 max-w-7xl space-y-20",children:[m.jsx("section",{children:m.jsx(OP,{metrics:t,title:"By The Numbers",description:"Key metrics that highlight my professional journey and impact",className:"mb-16"})}),m.jsx("section",{id:"experience-timeline",children:m.jsx(xm,{children:m.jsx(zP,{experiences:e,title:"Work Experience",subtitle:"My professional work history and key contributions",showAchievements:!1,className:"mb-16"})})}),m.jsxs("section",{id:"skills-matrix",className:"py-12",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-3",children:"Technical Skills"}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"A visual representation of my technical expertise across various domains"})]}),m.jsx(xm,{children:m.jsx(FP,{skills:kP,className:"max-w-6xl mx-auto"})})]})]})]})})})},HP=B.createContext(void 0),VP=({children:r,initialProjects:e})=>{const[t,n]=B.useState(null),i={projects:e,selectedProject:t,setSelectedProject:n};return m.jsx(HP.Provider,{value:i,children:r})},GP=r=>{const[e,t]=B.useState(""),[n,i]=B.useState([]),[s,a]=B.useState("newest"),o=B.useMemo(()=>{const h=r.flatMap(f=>f.technologies||[]);return[...new Set(h)].filter(Boolean).sort()},[r]),l=B.useMemo(()=>{let h=[...r];if(e){const f=e.toLowerCase();h=h.filter(p=>p.title.toLowerCase().includes(f)||p.description.toLowerCase().includes(f)||(p.technologies||[]).some(g=>g.toLowerCase().includes(f)))}return n.length>0&&(h=h.filter(f=>n.every(p=>(f.technologies||[]).includes(p)))),h.sort((f,p)=>{switch(s){case"newest":return new Date(p.date).getTime()-new Date(f.date).getTime();case"oldest":return new Date(f.date).getTime()-new Date(p.date).getTime();case"name":return f.title.localeCompare(p.title);default:return 0}}),h},[r,e,n,s]);return{search:e,setSearch:t,selectedTags:n,setSelectedTags:i,sort:s,setSort:a,allTechnologies:o,filteredProjects:l,clearFilters:()=>{t(""),i([]),a("newest")}}};function lo(...r){return oS(cv(r))}const WP=({project:r,onClick:e,className:t})=>{const{title:n,subtitle:i,description:s,image:a,technologies:o=[],date:l}=r;return m.jsx("article",{className:lo("bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden border border-border","group h-full flex flex-col",t),onClick:e,children:m.jsxs("div",{className:"block focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2",role:"button",tabIndex:0,onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),e==null||e())},children:[m.jsx("div",{className:"relative w-full h-56 sm:h-64 md:h-72 overflow-hidden",children:m.jsx("img",{src:a.src,alt:a.alt||`${n} preview`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy",decoding:"async",sizes:"(max-width: 639px) 100vw, (max-width: 1023px) 50vw, 33vw"})}),m.jsxs("div",{className:"p-4 sm:p-5 flex-1 flex flex-col",children:[m.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-foreground mb-1 sm:mb-1.5",children:n}),i&&m.jsx("p",{className:"text-muted-foreground mb-2 sm:mb-3 text-xs sm:text-sm",children:i}),m.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 mb-3 sm:mb-4 line-clamp-3 leading-relaxed",children:s}),o.length>0&&m.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[o.slice(0,3).map(d=>m.jsx("span",{className:"bg-primary/10 text-primary px-2 py-0.5 sm:py-1 rounded text-[10px] sm:text-xs font-medium whitespace-nowrap",children:d},d)),o.length>3&&m.jsxs("span",{className:"bg-muted text-muted-foreground px-2 py-0.5 sm:py-1 rounded text-[10px] sm:text-xs font-medium",children:["+",o.length-3]})]}),l&&m.jsx("time",{dateTime:l,className:"text-xs text-muted-foreground",children:new Date(l).toLocaleDateString(void 0,{year:"numeric",month:"short"})})]})]})})},XP=({projects:r,onProjectClick:e,className:t=""})=>!r||r.length===0?m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-muted-foreground",children:"No projects found. Try adjusting your filters."})}):m.jsx("div",{className:lo("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",t),children:r.map(n=>m.jsx(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.3},children:m.jsx(WP,{project:{...n,image:n.image||{src:"",alt:n.title},links:n.links||[],technologies:n.technologies||[],highlights:n.highlights||[]},onClick:()=>e(n)})},n.id))}),W_=[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"featured",label:"Featured"},{value:"a-z",label:"A-Z"},{value:"z-a",label:"Z-A"}],qP=({search:r,onSearchChange:e,tags:t,selectedTags:n,onTagToggle:i,sort:s,onSortChange:a,onClearFilters:o,className:l=""})=>{var S;const[d,h]=B.useState(!1),[f,p]=B.useState(!1),[g,y]=B.useState(""),b=B.useRef(null),_=((S=W_.find(E=>E.value===s))==null?void 0:S.label)||"Sort",M=Array.from(new Set(t)).filter(E=>E.toLowerCase().includes(g.toLowerCase()));return B.useEffect(()=>{const E=P=>{b.current&&!b.current.contains(P.target)&&(h(!1),p(!1))},T=P=>{P.key==="Escape"&&(h(!1),p(!1))};return document.addEventListener("mousedown",E),document.addEventListener("keydown",T),()=>{document.removeEventListener("mousedown",E),document.removeEventListener("keydown",T)}},[]),m.jsxs("div",{className:lo("flex flex-col sm:flex-row items-stretch sm:items-center gap-3 relative",l),ref:b,children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx(jA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),m.jsx("input",{type:"text",value:r,onChange:E=>e(E.target.value),placeholder:"Search projects...",className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-background border border-border focus:outline-none focus:ring-2 focus:ring-primary transition-all placeholder:text-muted-foreground"})]}),m.jsxs(wi,{variant:"outline",size:"sm",className:"flex items-center gap-1.5 min-w-[110px]",onClick:()=>{h(E=>!E),p(!1)},"aria-expanded":d,"aria-haspopup":"true",children:["Filter",m.jsx(OA,{className:"w-4 h-4"})]}),m.jsxs(wi,{variant:"outline",size:"sm",className:"flex items-center gap-1.5 min-w-[110px]",onClick:()=>{p(E=>!E),h(!1)},"aria-expanded":f,"aria-haspopup":"true",children:[_,m.jsx(HA,{className:"w-4 h-4"})]}),d&&m.jsx("div",{className:"absolute top-full right-0 mt-2 w-80 bg-background rounded-xl border border-border shadow-xl z-50 animate-in fade-in slide-in-from-top-2",children:m.jsxs("div",{className:"p-4 space-y-6",children:[(n.length>0||g)&&m.jsxs(wi,{variant:"outline",size:"sm",className:"w-full text-destructive hover:bg-destructive/10",onClick:()=>{o(),y("")},children:[m.jsx(Xw,{className:"w-4 h-4 mr-1"}),"Clear Filters"]}),m.jsx("div",{children:m.jsx("input",{type:"text",value:g,onChange:E=>y(E.target.value),placeholder:"Search tags...",className:"w-full px-3 py-2 rounded-lg border border-border focus:outline-none focus:ring-2 focus:ring-primary"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"Filter by Technology"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[M.map(E=>m.jsx(wi,{variant:n.includes(E)?"secondary":"outline",size:"sm",className:"justify-center text-sm font-medium",onClick:()=>i(E),children:E},E)),M.length===0&&m.jsx("p",{className:"text-sm text-muted-foreground col-span-2 text-center",children:"No matching tags"})]})]})]})}),f&&m.jsx("div",{className:"absolute top-full right-0 mt-2 w-56 bg-background rounded-xl border border-border shadow-xl z-50 animate-in fade-in slide-in-from-top-2",children:m.jsx("div",{className:"p-3 space-y-1",children:W_.map(E=>m.jsxs("button",{onClick:()=>{a(E.value),p(!1)},className:lo("w-full px-3 py-2 rounded-lg flex items-center justify-between transition-colors",s===E.value?"bg-primary text-white":"hover:bg-primary/10 hover:text-primary"),children:[m.jsx("span",{children:E.label}),s===E.value&&m.jsx(NA,{className:"w-4 h-4"})]},E.value))})})]})},YP=B.lazy(()=>wu(()=>import("./ProjectHero.C-3Bka26.js"),__vite__mapDeps([4,1,2]))),ZP=B.lazy(()=>wu(()=>import("./ProjectModal.B_SkKzM3.js"),__vite__mapDeps([5,1,2]))),KP=({className:r})=>{const[e,t]=B.useState(null),{search:n,setSearch:i,selectedTags:s,setSelectedTags:a,sort:o,setSort:l,allTechnologies:d,filteredProjects:h,clearFilters:f}=GP(Gg),p=B.useCallback(y=>{t(y)},[]),g=B.useCallback(y=>l(y),[l]);return m.jsx(VP,{initialProjects:Gg,children:m.jsx("div",{className:r,children:m.jsxs(B.Suspense,{fallback:m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:[m.jsx(YP,{}),m.jsx("main",{className:"container mx-auto px-4 py-12 space-y-12",children:m.jsxs("div",{id:"projects",className:"scroll-mt-20",children:[m.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6 mb-8",children:[m.jsx(Er,{title:"My Projects",subtitle:"A curated selection of my professional work, showcasing skills, creativity, and impact.",className:"mb-0"}),m.jsx(qP,{tags:d,selectedTags:s,onTagToggle:y=>a(b=>b.includes(y)?b.filter(_=>_!==y):[...b,y]),search:n,onSearchChange:i,sort:o,onSortChange:g,onClearFilters:f,className:"w-full md:w-auto"})]}),m.jsx(XP,{projects:h,onProjectClick:p,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"})]})}),m.jsx(B.Suspense,{fallback:null,children:e&&m.jsx(ZP,{isOpen:!!e,project:e,onClose:()=>t(null),projectId:e.id})})]})})})};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JP=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),X_=r=>{const e=JP(r);return e.charAt(0).toUpperCase()+e.slice(1)},d2=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),QP=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=B.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>B.createElement("svg",{ref:l,...eN,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:d2("lucide",i),...!s&&!QP(o)&&{"aria-hidden":"true"},...o},[...a.map(([d,h])=>B.createElement(d,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=(r,e)=>{const t=B.forwardRef(({className:n,...i},s)=>B.createElement(tN,{ref:s,iconNode:e,className:d2(`lucide-${$P(X_(r))}`,`lucide-${r}`,n),...i}));return t.displayName=X_(r),t};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],iN=un("arrow-right",nN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],sN=un("box",rN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],oN=un("chart-line",aN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cN=un("check",lN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],h2=un("chevron-down",uN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hN=un("chevron-up",dN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Fo=un("circle-alert",fN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mN=un("circle-check-big",pN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],f2=un("circle-question-mark",gN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xN=un("clock",vN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_N=un("database",yN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wN=un("download",bN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],MN=un("external-link",SN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],TN=un("file-spreadsheet",EN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],CN=un("git-branch",AN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],PN=un("github",RN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],IN=un("linkedin",NN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],kN=un("mail",LN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ON=un("map-pin",DN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],FN=un("message-square",UN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],jN=un("navigation",zN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],HN=un("phone",BN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],GN=un("send",VN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XN=un("settings",WN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],YN=un("share-2",qN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M12 10v2.2l1.6 1",key:"n3r21l"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}]],KN=un("watch",ZN);function $N({initialValues:r,onSubmit:e,validate:t,validationRules:n,onError:i}){const[s,a]=B.useState(r),[o,l]=B.useState({}),[d,h]=B.useState(!1),[f,p]=B.useState({}),g=B.useCallback(()=>{a(r),l({}),p({})},[r]),y=B.useCallback((T,P)=>{if(!n||!n[T])return;const I=n[T]||[];for(const k of I){const R=k.validator(P,s);if(R!==!0)return typeof R=="string"?R:k.message}},[n,s]),b=B.useCallback(()=>{let T=!0;const P={};if(t){const I=t(s);Object.assign(P,I),T=Object.keys(I).length===0}return n&&Object.keys(n).forEach(I=>{const k=y(I,s[I]);k&&(P[I]=k,T=!1)}),l(P),T},[t,y,n,s]),_=B.useCallback(T=>{const{name:P,value:I,type:k}=T.target;let R=I;k==="checkbox"?R=T.target.checked:k==="number"?R=I===""?"":Number(I):k==="file"&&(R=T.target.files);const L={...s,[P]:R};if(a(L),f[P]){const F=y(P,R);l(W=>({...W,[P]:F}))}},[f,y,s]),x=B.useCallback(T=>{const{name:P}=T.target;p(k=>({...k,[P]:!0}));const I=y(P,s[P]);l(k=>({...k,[P]:I}))},[y,s]),M=B.useCallback(async T=>{if(T.preventDefault(),p(Object.keys(s).reduce((I,k)=>({...I,[k]:!0}),{})),!b()){i==null||i(o);return}try{h(!0),await e(s)}catch(I){console.error("Form submission error:",I)}finally{h(!1)}},[o,e,i,b,s]),S=B.useCallback((T,P)=>{a(I=>({...I,[T]:P})),p(I=>{if(I[T]){const k=y(T,P);l(R=>({...R,[T]:k}))}return I})},[y]),E=B.useCallback(T=>{a(k=>({...k,...T}));const P={...o};let I=!1;Object.keys(T).forEach(k=>{if(f[k]){const R=y(k,T[k]);R!==o[k]&&(P[k]=R,I=!0)}}),I&&l(P)},[o,f,y]);return{values:s,errors:o,touched:f,isSubmitting:d,handleChange:_,handleBlur:x,handleSubmit:M,setFieldValue:S,setValues:E,resetForm:g,validate:b}}const zr={minLength:(r,e,t)=>r.trim().length<e?{isValid:!1,error:`${t} must be at least ${e} characters long`}:{isValid:!0},maxLength:(r,e,t)=>r.length>e?{isValid:!1,error:`${t} must be less than ${e} characters`}:{isValid:!0},email:r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?{isValid:!0}:{isValid:!1,error:"Please enter a valid email address"},composeValidators:(...r)=>e=>{for(const t of r){const n=t(e);if(!n.isValid)return n}return{isValid:!0}}};function JN(){const[r,e]=B.useState(!1),[t,n]=B.useState(null),i=async()=>{try{n(null),await new Promise(x=>setTimeout(x,1e3)),e(!0)}catch(x){throw console.error("Form submission error:",x),n("Failed to send message. Please try again later."),x}},{values:s,errors:a,touched:o,isSubmitting:l,handleChange:d,handleBlur:h,handleSubmit:f,resetForm:p}=$N({initialValues:{name:"",email:"",subject:"",message:""},validationRules:{name:[{validator:x=>{const M=zr.composeValidators(S=>zr.minLength(S,2,"Name"),S=>zr.maxLength(S,50,"Name"))(x);return M.isValid?!0:M.error||""},message:"Name must be between 2-50 characters"}],email:[{validator:x=>{const M=zr.email(x);return M.isValid?!0:M.error||""},message:"Please enter a valid email address"}],subject:[{validator:x=>{const M=zr.composeValidators(S=>zr.minLength(S,3,"Subject"),S=>zr.maxLength(S,100,"Subject"))(x);return M.isValid?!0:M.error||""},message:"Subject must be between 3-100 characters"}],message:[{validator:x=>{const M=zr.composeValidators(S=>zr.minLength(S,10,"Message"),S=>zr.maxLength(S,1e3,"Message"))(x);return M.isValid?!0:M.error||""},message:"Message must be between 10-1000 characters"}]},onSubmit:i});return{formData:s,errors:a,isSubmitting:l,submitSuccess:r,touched:o,formError:t,handleChange:x=>M=>{d({target:{...M.target,name:x,value:M.target.value}})},handleBlur:x=>{h({target:{name:x,value:s[x]}})},handleSubmit:x=>{x.preventDefault(),f(x)},resetForm:()=>{p(),e(!1),n(null)}}}const QN=()=>{const{formData:r,errors:e,isSubmitting:t,submitSuccess:n,touched:i,formError:s,handleChange:a,handleBlur:o,handleSubmit:l}=JN(),d=B.useRef(null);B.useEffect(()=>{var g;const p=(g=d.current)==null?void 0:g.querySelector("textarea");p&&(p.style.height="auto",p.style.height=`${p.scrollHeight}px`)},[r.message]);const h=p=>`w-full px-4 py-2.5 rounded-lg border bg-background transition-colors duration-200 focus:outline-none focus:ring-1 focus:ring-opacity-50 text-foreground ${e[p]&&i[p]?"border-destructive/80 focus:ring-destructive/20 focus:border-destructive/80":"border-border/60 hover:border-primary/60 focus:ring-primary/30 focus:border-primary/80 dark:border-gray-700/60 dark:hover:border-primary/60"}`,f=p=>`block text-sm font-medium mb-1.5 transition-colors ${e[p]&&i[p]?"text-destructive":"text-foreground/80 hover:text-foreground dark:text-gray-300/90 dark:hover:text-white"}`;return m.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.16,1,.3,1]},className:"w-full",children:m.jsxs("form",{ref:d,onSubmit:l,className:"space-y-5",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Get In Touch"}),m.jsx("p",{className:"mt-1 text-muted-foreground",children:"Have a question or want to work together? Send me a message!"})]}),m.jsxs(mr,{children:[s&&m.jsx(ve.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(Fo,{className:"w-4 h-4 mt-0.5 mr-2 flex-shrink-0"}),m.jsx("p",{children:s})]})}),n&&m.jsx(ve.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-3 text-sm rounded-lg bg-green-50 border border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800/50 dark:text-green-300",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(mN,{className:"w-4 h-4 mt-0.5 mr-2 flex-shrink-0"}),m.jsx("p",{children:"Your message has been sent successfully! I'll get back to you soon."})]})}),e.name||e.email||e.subject||e.message&&m.jsx(ve.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-3 text-sm rounded-lg bg-red-50 border border-red-200 text-red-700 dark:bg-red-900/20 dark:border-red-800/50 dark:text-red-300",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(Fo,{className:"w-4 h-4 mt-0.5 mr-2 flex-shrink-0"}),m.jsx("p",{children:e.name})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsxs("label",{htmlFor:"name",className:f("name"),children:["Name ",e.name&&i.name&&m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"name",name:"name",type:"text",value:r.name,onChange:a("name"),onBlur:()=>o("name"),className:`${h("name")} peer placeholder-transparent focus:placeholder-muted-foreground/40`,placeholder:"John Doe",disabled:t}),e.name&&i.name&&m.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:m.jsx(Fo,{className:"w-4 h-4 text-red-500"})})]}),e.name&&i.name&&m.jsx("p",{className:"mt-1 text-xs text-red-500",children:e.name})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("label",{htmlFor:"email",className:f("email"),children:["Email ",e.email&&i.email&&m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"email",name:"email",type:"email",value:r.email,onChange:a("email"),onBlur:()=>o("email"),className:`${h("email")} peer placeholder-transparent focus:placeholder-muted-foreground/40`,placeholder:"john@example.com",disabled:t}),e.email&&i.email&&m.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:m.jsx(Fo,{className:"w-4 h-4 text-red-500"})})]}),e.email&&i.email&&m.jsx("p",{className:"mt-1 text-xs text-red-500",children:e.email})]}),m.jsxs("div",{className:"md:col-span-2 space-y-1",children:[m.jsxs("label",{htmlFor:"subject",className:f("subject"),children:["Subject ",e.subject&&i.subject&&m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"subject",name:"subject",type:"text",value:r.subject,onChange:a("subject"),onBlur:()=>o("subject"),className:`${h("subject")} peer placeholder-transparent focus:placeholder-muted-foreground/40`,placeholder:"How can we help?",disabled:t}),e.subject&&i.subject&&m.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:m.jsx(Fo,{className:"w-4 h-4 text-red-500"})})]}),e.subject&&i.subject&&m.jsx("p",{className:"mt-1 text-xs text-red-500",children:e.subject})]}),m.jsxs("div",{className:"md:col-span-2 space-y-1",children:[m.jsxs("label",{htmlFor:"message",className:f("message"),children:["Message ",e.message&&i.message&&m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("textarea",{id:"message",name:"message",value:r.message,onChange:a("message"),onBlur:()=>o("message"),className:`${h("message")} min-h-[140px] resize-none placeholder-transparent focus:placeholder-muted-foreground/40`,placeholder:"Your message here...",disabled:t}),e.message&&i.message&&m.jsx("div",{className:"absolute right-3 top-3",children:m.jsx(Fo,{className:"w-4 h-4 text-red-500"})})]}),e.message&&i.message&&m.jsx("p",{className:"mt-1 text-xs text-red-500",children:e.message})]}),m.jsx("div",{className:"md:col-span-2 pt-1",children:m.jsx("button",{type:"submit",disabled:t,className:"group inline-flex items-center justify-center gap-2 px-6 py-2.5 text-sm font-medium transition-colors rounded-md bg-primary text-primary-foreground hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 w-full md:w-auto",children:t?m.jsx("div",{className:"flex items-center",children:"Sending..."}):m.jsxs(m.Fragment,{children:[m.jsx(GN,{className:"w-5 h-5 mr-2"}),"Send Message"]})})})]})]})})},eI=["https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.pexels.com/photos/380769/pexels-photo-380769.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/3183150/pexels-photo-3183150.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/3184296/pexels-photo-3184296.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/3184339/pexels-photo-3184339.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"],tI=()=>{const r=B.useMemo(()=>[...eI].sort(()=>.5-Math.random()).slice(0,2),[]);return m.jsxs("div",{className:"relative dark:bg-gray-900",children:[m.jsx(Nv,{title:"",subtitle:"",backgroundImages:r,className:"min-h-[40vh] dark:brightness-100"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/60 dark:from-black/70 dark:via-black/50 dark:to-black/70",children:m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center px-4",children:[m.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white dark:text-white mb-4",children:"Get In Touch"}),m.jsx("p",{className:"text-xl md:text-2xl text-gray-200 dark:text-gray-200 mb-8 max-w-2xl mx-auto",children:"I'm always open to discussing new projects, creative ideas, or opportunities"}),m.jsx(wi,{onClick:()=>{const e=document.getElementById("contact-form");e==null||e.scrollIntoView({behavior:"smooth"})},variant:"primary",size:"lg",icon:"mail",iconPosition:"right",children:"Send Message"})]})})})]})};var c0={exports:{}},Mf={};function p2(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(p2=function(n){return n?t:e})(r)}function nI(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=p2(e);if(t&&t.has(r))return t.get(r);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var a=i?Object.getOwnPropertyDescriptor(r,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=r[s]}return n.default=r,t&&t.set(r,n),n}Mf._=nI;var Dd={exports:{}},ym={},q_;function m2(){return q_||(q_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(a,o){for(var l in o)Object.defineProperty(a,l,{enumerable:!0,get:o[l]})}e(r,{assign:function(){return s},searchParamsToUrlQuery:function(){return t},urlQueryToSearchParams:function(){return i}});function t(a){const o={};for(const[l,d]of a.entries()){const h=o[l];typeof h>"u"?o[l]=d:Array.isArray(h)?h.push(d):o[l]=[h,d]}return o}function n(a){return typeof a=="string"?a:typeof a=="number"&&!isNaN(a)||typeof a=="boolean"?String(a):""}function i(a){const o=new URLSearchParams;for(const[l,d]of Object.entries(a))if(Array.isArray(d))for(const h of d)o.append(l,n(h));else o.set(l,n(d));return o}function s(a){for(var o=arguments.length,l=new Array(o>1?o-1:0),d=1;d<o;d++)l[d-1]=arguments[d];for(const h of l){for(const f of h.keys())a.delete(f);for(const[f,p]of h.entries())a.append(f,p)}return a}}(ym)),ym}var _m={},Y_;function g2(){return Y_||(Y_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(l,d){for(var h in d)Object.defineProperty(l,h,{enumerable:!0,get:d[h]})}e(r,{formatUrl:function(){return s},formatWithValidation:function(){return o},urlObjectKeys:function(){return a}});const n=Mf._(m2()),i=/https?|ftp|gopher|file/;function s(l){let{auth:d,hostname:h}=l,f=l.protocol||"",p=l.pathname||"",g=l.hash||"",y=l.query||"",b=!1;d=d?encodeURIComponent(d).replace(/%3A/i,":")+"@":"",l.host?b=d+l.host:h&&(b=d+(~h.indexOf(":")?"["+h+"]":h),l.port&&(b+=":"+l.port)),y&&typeof y=="object"&&(y=String(n.urlQueryToSearchParams(y)));let _=l.search||y&&"?"+y||"";return f&&!f.endsWith(":")&&(f+=":"),l.slashes||(!f||i.test(f))&&b!==!1?(b="//"+(b||""),p&&p[0]!=="/"&&(p="/"+p)):b||(b=""),g&&g[0]!=="#"&&(g="#"+g),_&&_[0]!=="?"&&(_="?"+_),p=p.replace(/[?#]/g,encodeURIComponent),_=_.replace("#","%23"),""+f+b+p+_+g}const a=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function o(l){return s(l)}}(_m)),_m}var bm={},Z_;function iI(){return Z_||(Z_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"omit",{enumerable:!0,get:function(){return e}});function e(t,n){const i={};return Object.keys(t).forEach(s=>{n.includes(s)||(i[s]=t[s])}),i}}(bm)),bm}var wm={},K_;function Ef(){return K_||(K_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(E,T){for(var P in T)Object.defineProperty(E,P,{enumerable:!0,get:T[P]})}e(r,{DecodeError:function(){return y},MiddlewareNotFoundError:function(){return M},MissingStaticPage:function(){return x},NormalizeError:function(){return b},PageNotFoundError:function(){return _},SP:function(){return p},ST:function(){return g},WEB_VITALS:function(){return t},execOnce:function(){return n},getDisplayName:function(){return l},getLocationOrigin:function(){return a},getURL:function(){return o},isAbsoluteUrl:function(){return s},isResSent:function(){return d},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return S}});const t=["CLS","FCP","FID","INP","LCP","TTFB"];function n(E){let T=!1,P;return function(){for(var I=arguments.length,k=new Array(I),R=0;R<I;R++)k[R]=arguments[R];return T||(T=!0,P=E(...k)),P}}const i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=E=>i.test(E);function a(){const{protocol:E,hostname:T,port:P}=window.location;return E+"//"+T+(P?":"+P:"")}function o(){const{href:E}=window.location,T=a();return E.substring(T.length)}function l(E){return typeof E=="string"?E:E.displayName||E.name||"Unknown"}function d(E){return E.finished||E.headersSent}function h(E){const T=E.split("?");return T[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(T[1]?"?"+T.slice(1).join("?"):"")}async function f(E,T){const P=T.res||T.ctx&&T.ctx.res;if(!E.getInitialProps)return T.ctx&&T.Component?{pageProps:await f(T.Component,T.ctx)}:{};const I=await E.getInitialProps(T);if(P&&d(P))return I;if(!I){const k='"'+l(E)+'.getInitialProps()" should resolve to an object. But found "'+I+'" instead.';throw Object.defineProperty(new Error(k),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}return I}const p=typeof performance<"u",g=p&&["mark","measure","getEntriesByName"].every(E=>typeof performance[E]=="function");class y extends Error{}class b extends Error{}class _ extends Error{constructor(T){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+T}}class x extends Error{constructor(T,P){super(),this.message="Failed to load static file for page: "+T+" "+P}}class M extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function S(E){return JSON.stringify({message:E.message,stack:E.stack})}}(wm)),wm}var Od={exports:{}},Sm={},$_;function v2(){return $_||($_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removeTrailingSlash",{enumerable:!0,get:function(){return e}});function e(t){return t.replace(/\/$/,"")||"/"}}(Sm)),Sm}var Mm={},J_;function Iv(){return J_||(J_=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parsePath",{enumerable:!0,get:function(){return e}});function e(t){const n=t.indexOf("#"),i=t.indexOf("?"),s=i>-1&&(n<0||i<n);return s||n>-1?{pathname:t.substring(0,s?i:n),query:s?t.substring(i,n>-1?n:void 0):"",hash:n>-1?t.slice(n):""}:{pathname:t,query:"",hash:""}}}(Mm)),Mm}var Q_;function Tf(){return Q_||(Q_=1,function(r,e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return s}});const n=v2(),i=Iv(),s=a=>{if(!a.startsWith("/")||t.__NEXT_MANUAL_TRAILING_SLASH)return a;const{pathname:o,query:l,hash:d}=(0,i.parsePath)(a);return t.__NEXT_TRAILING_SLASH?/\.[^/]+\/?$/.test(o)?""+(0,n.removeTrailingSlash)(o)+l+d:o.endsWith("/")?""+o+l+d:o+"/"+l+d:""+(0,n.removeTrailingSlash)(o)+l+d};(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Od,Od.exports)),Od.exports}var Em={},Ud={exports:{}},Tm={},e1;function x2(){return e1||(e1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"pathHasPrefix",{enumerable:!0,get:function(){return t}});const e=Iv();function t(n,i){if(typeof n!="string")return!1;const{pathname:s}=(0,e.parsePath)(n);return s===i||s.startsWith(i+"/")}}(Tm)),Tm}var t1;function rI(){return t1||(t1=1,function(r,e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"hasBasePath",{enumerable:!0,get:function(){return s}});const n=x2(),i=t.__NEXT_ROUTER_BASEPATH||"";function s(a){return(0,n.pathHasPrefix)(a,i)}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Ud,Ud.exports)),Ud.exports}var n1;function y2(){return n1||(n1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});const e=Ef(),t=rI();function n(i){if(!(0,e.isAbsoluteUrl)(i))return!0;try{const s=(0,e.getLocationOrigin)(),a=new URL(i,s);return a.origin===s&&(0,t.hasBasePath)(a.pathname)}catch{return!1}}}(Em)),Em}var Am={},Cm={},i1;function sI(){return i1||(i1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(s,a){for(var o in a)Object.defineProperty(s,o,{enumerable:!0,get:a[o]})}e(r,{getSortedRouteObjects:function(){return i},getSortedRoutes:function(){return n}});class t{insert(a){this._insert(a.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(a){a===void 0&&(a="/");const o=[...this.children.keys()].sort();this.slugName!==null&&o.splice(o.indexOf("[]"),1),this.restSlugName!==null&&o.splice(o.indexOf("[...]"),1),this.optionalRestSlugName!==null&&o.splice(o.indexOf("[[...]]"),1);const l=o.map(d=>this.children.get(d)._smoosh(""+a+d+"/")).reduce((d,h)=>[...d,...h],[]);if(this.slugName!==null&&l.push(...this.children.get("[]")._smoosh(a+"["+this.slugName+"]/")),!this.placeholder){const d=a==="/"?"/":a.slice(0,-1);if(this.optionalRestSlugName!=null)throw Object.defineProperty(new Error('You cannot define a route with the same specificity as a optional catch-all route ("'+d+'" and "'+d+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});l.unshift(d)}return this.restSlugName!==null&&l.push(...this.children.get("[...]")._smoosh(a+"[..."+this.restSlugName+"]/")),this.optionalRestSlugName!==null&&l.push(...this.children.get("[[...]]")._smoosh(a+"[[..."+this.optionalRestSlugName+"]]/")),l}_insert(a,o,l){if(a.length===0){this.placeholder=!1;return}if(l)throw Object.defineProperty(new Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let d=a[0];if(d.startsWith("[")&&d.endsWith("]")){let p=function(g,y){if(g!==null&&g!==y)throw Object.defineProperty(new Error("You cannot use different slug names for the same dynamic path ('"+g+"' !== '"+y+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});o.forEach(b=>{if(b===y)throw Object.defineProperty(new Error('You cannot have the same slug name "'+y+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(b.replace(/\W/g,"")===d.replace(/\W/g,""))throw Object.defineProperty(new Error('You cannot have the slug names "'+b+'" and "'+y+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),o.push(y)},h=d.slice(1,-1),f=!1;if(h.startsWith("[")&&h.endsWith("]")&&(h=h.slice(1,-1),f=!0),h.startsWith("…"))throw Object.defineProperty(new Error("Detected a three-dot character ('…') at ('"+h+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(h.startsWith("...")&&(h=h.substring(3),l=!0),h.startsWith("[")||h.endsWith("]"))throw Object.defineProperty(new Error("Segment names may not start or end with extra brackets ('"+h+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(h.startsWith("."))throw Object.defineProperty(new Error("Segment names may not start with erroneous periods ('"+h+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});if(l)if(f){if(this.restSlugName!=null)throw Object.defineProperty(new Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+a[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});p(this.optionalRestSlugName,h),this.optionalRestSlugName=h,d="[[...]]"}else{if(this.optionalRestSlugName!=null)throw Object.defineProperty(new Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+a[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});p(this.restSlugName,h),this.restSlugName=h,d="[...]"}else{if(f)throw Object.defineProperty(new Error('Optional route parameters are not yet supported ("'+a[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});p(this.slugName,h),this.slugName=h,d="[]"}}this.children.has(d)||this.children.set(d,new t),this.children.get(d)._insert(a.slice(1),o,l)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(s){const a=new t;return s.forEach(o=>a.insert(o)),a.smoosh()}function i(s,a){const o={},l=[];for(let h=0;h<s.length;h++){const f=a(s[h]);o[f]=h,l[h]=f}return n(l).map(h=>s[o[h]])}}(Cm)),Cm}var Rm={},Pm={},Nm={},Im={},r1;function aI(){return r1||(r1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ensureLeadingSlash",{enumerable:!0,get:function(){return e}});function e(t){return t.startsWith("/")?t:"/"+t}}(Im)),Im}var Lm={},s1;function oI(){return s1||(s1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(o,l){for(var d in l)Object.defineProperty(o,d,{enumerable:!0,get:l[d]})}e(r,{DEFAULT_SEGMENT_KEY:function(){return a},PAGE_SEGMENT_KEY:function(){return s},addSearchParamsIfPageSegment:function(){return i},isGroupSegment:function(){return t},isParallelRouteSegment:function(){return n}});function t(o){return o[0]==="("&&o.endsWith(")")}function n(o){return o.startsWith("@")&&o!=="@children"}function i(o,l){if(o.includes(s)){const h=JSON.stringify(l);return h!=="{}"?s+"?"+h:s}return o}const s="__PAGE__",a="__DEFAULT__"}(Lm)),Lm}var a1;function lI(){return a1||(a1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(a,o){for(var l in o)Object.defineProperty(a,l,{enumerable:!0,get:o[l]})}e(r,{normalizeAppPath:function(){return i},normalizeRscURL:function(){return s}});const t=aI(),n=oI();function i(a){return(0,t.ensureLeadingSlash)(a.split("/").reduce((o,l,d,h)=>!l||(0,n.isGroupSegment)(l)||l[0]==="@"||(l==="page"||l==="route")&&d===h.length-1?o:o+"/"+l,""))}function s(a){return a.replace(/\.rsc($|\?)/,"$1")}}(Nm)),Nm}var o1;function _2(){return o1||(o1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(a,o){for(var l in o)Object.defineProperty(a,l,{enumerable:!0,get:o[l]})}e(r,{INTERCEPTION_ROUTE_MARKERS:function(){return n},extractInterceptionRouteInformation:function(){return s},isInterceptionRouteAppPath:function(){return i}});const t=lI(),n=["(..)(..)","(.)","(..)","(...)"];function i(a){return a.split("/").find(o=>n.find(l=>o.startsWith(l)))!==void 0}function s(a){let o,l,d;for(const h of a.split("/"))if(l=n.find(f=>h.startsWith(f)),l){[o,d]=a.split(l,2);break}if(!o||!l||!d)throw Object.defineProperty(new Error("Invalid interception route: "+a+". Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>"),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(o=(0,t.normalizeAppPath)(o),l){case"(.)":o==="/"?d="/"+d:d=o+"/"+d;break;case"(..)":if(o==="/")throw Object.defineProperty(new Error("Invalid interception route: "+a+". Cannot use (..) marker at the root level, use (.) instead."),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});d=o.split("/").slice(0,-1).concat(d).join("/");break;case"(...)":d="/"+d;break;case"(..)(..)":const h=o.split("/");if(h.length<=2)throw Object.defineProperty(new Error("Invalid interception route: "+a+". Cannot use (..)(..) marker at the root level or one level up."),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});d=h.slice(0,-2).concat(d).join("/");break;default:throw Object.defineProperty(new Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:o,interceptedRoute:d}}}(Pm)),Pm}var l1;function cI(){return l1||(l1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isDynamicRoute",{enumerable:!0,get:function(){return i}});const e=_2(),t=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,n=/\/\[[^/]+\](?=\/|$)/;function i(s,a){return a===void 0&&(a=!0),(0,e.isInterceptionRouteAppPath)(s)&&(s=(0,e.extractInterceptionRouteInformation)(s).interceptedRoute),a?n.test(s):t.test(s)}}(Rm)),Rm}var c1;function uI(){return c1||(c1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(i,s){for(var a in s)Object.defineProperty(i,a,{enumerable:!0,get:s[a]})}e(r,{getSortedRouteObjects:function(){return t.getSortedRouteObjects},getSortedRoutes:function(){return t.getSortedRoutes},isDynamicRoute:function(){return n.isDynamicRoute}});const t=sI(),n=cI()}(Am)),Am}var km={},Dm={},u1;function dI(){return u1||(u1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getRouteMatcher",{enumerable:!0,get:function(){return t}});const e=Ef();function t(n){let{re:i,groups:s}=n;return a=>{const o=i.exec(a);if(!o)return!1;const l=h=>{try{return decodeURIComponent(h)}catch{throw Object.defineProperty(new e.DecodeError("failed to decode param"),"__NEXT_ERROR_CODE",{value:"E528",enumerable:!1,configurable:!0})}},d={};for(const[h,f]of Object.entries(s)){const p=o[f.pos];p!==void 0&&(f.repeat?d[h]=p.split("/").map(g=>l(g)):d[h]=l(p))}return d}}}(Dm)),Dm}var Om={},Um={},d1;function hI(){return d1||(d1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(ct,_t){for(var Ut in _t)Object.defineProperty(ct,Ut,{enumerable:!0,get:_t[Ut]})}e(r,{ACTION_SUFFIX:function(){return f},APP_DIR_ALIAS:function(){return Q},CACHE_ONE_YEAR:function(){return I},DOT_NEXT_ALIAS:function(){return J},ESLINT_DEFAULT_DIRS:function(){return Te},GSP_NO_RETURNED_VALUE:function(){return nt},GSSP_COMPONENT_MEMBER_ERROR:function(){return K},GSSP_NO_RETURNED_VALUE:function(){return Ot},INFINITE_CACHE:function(){return k},INSTRUMENTATION_HOOK_FILENAME:function(){return F},MATCHED_PATH_HEADER:function(){return i},MIDDLEWARE_FILENAME:function(){return R},MIDDLEWARE_LOCATION_REGEXP:function(){return L},NEXT_BODY_SUFFIX:function(){return y},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return P},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return _},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return x},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return T},NEXT_CACHE_TAGS_HEADER:function(){return b},NEXT_CACHE_TAG_MAX_ITEMS:function(){return S},NEXT_CACHE_TAG_MAX_LENGTH:function(){return E},NEXT_DATA_SUFFIX:function(){return p},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return n},NEXT_META_SUFFIX:function(){return g},NEXT_QUERY_PARAM_PREFIX:function(){return t},NEXT_RESUME_HEADER:function(){return M},NON_STANDARD_NODE_ENV:function(){return Ce},PAGES_DIR_ALIAS:function(){return W},PRERENDER_REVALIDATE_HEADER:function(){return s},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return a},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return pe},ROOT_DIR_ALIAS:function(){return z},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return re},RSC_ACTION_ENCRYPTION_ALIAS:function(){return Z},RSC_ACTION_PROXY_ALIAS:function(){return te},RSC_ACTION_VALIDATE_ALIAS:function(){return oe},RSC_CACHE_WRAPPER_ALIAS:function(){return ie},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return ee},RSC_MOD_REF_PROXY_ALIAS:function(){return ne},RSC_PREFETCH_SUFFIX:function(){return o},RSC_SEGMENTS_DIR_SUFFIX:function(){return l},RSC_SEGMENT_SUFFIX:function(){return d},RSC_SUFFIX:function(){return h},SERVER_PROPS_EXPORT_ERROR:function(){return Qe},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return Le},SERVER_PROPS_SSG_CONFLICT:function(){return ke},SERVER_RUNTIME:function(){return Ae},SSG_FALLBACK_EXPORT_ERROR:function(){return be},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return Ee},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return je},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return We},WEBPACK_LAYERS:function(){return Xe},WEBPACK_RESOURCE_QUERIES:function(){return Ke}});const t="nxtP",n="nxtI",i="x-matched-path",s="x-prerender-revalidate",a="x-prerender-revalidate-if-generated",o=".prefetch.rsc",l=".segments",d=".segment.rsc",h=".rsc",f=".action",p=".json",g=".meta",y=".body",b="x-next-cache-tags",_="x-next-revalidated-tags",x="x-next-revalidate-tag-token",M="next-resume",S=128,E=256,T=1024,P="_N_T_",I=31536e3,k=4294967294,R="middleware",L=`(?:src/)?${R}`,F="instrumentation",W="private-next-pages",J="private-dot-next",z="private-next-root-dir",Q="private-next-app-dir",ne="private-next-rsc-mod-ref-proxy",oe="private-next-rsc-action-validate",te="private-next-rsc-server-reference",ie="private-next-rsc-cache-wrapper",ee="private-next-rsc-track-dynamic-import",Z="private-next-rsc-action-encryption",re="private-next-rsc-action-client-wrapper",pe="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",Ee="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",Le="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",ke="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",je="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",Qe="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",nt="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",Ot="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",We="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",K="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",Ce='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',be="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",Te=["app","pages","components","lib","src"],Ae={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ze={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},Xe={...ze,GROUP:{builtinReact:[ze.reactServerComponents,ze.actionBrowser],serverOnly:[ze.reactServerComponents,ze.actionBrowser,ze.instrument,ze.middleware],neutralTarget:[ze.apiNode,ze.apiEdge],clientOnly:[ze.serverSideRendering,ze.appPagesBrowser],bundled:[ze.reactServerComponents,ze.actionBrowser,ze.serverSideRendering,ze.appPagesBrowser,ze.shared,ze.instrument,ze.middleware],appPages:[ze.reactServerComponents,ze.serverSideRendering,ze.appPagesBrowser,ze.actionBrowser]}},Ke={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}}(Um)),Um}var Fm={},h1;function fI(){return h1||(h1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"escapeStringRegexp",{enumerable:!0,get:function(){return n}});const e=/[|\\{}()[\]^$+*?.-]/,t=/[|\\{}()[\]^$+*?.-]/g;function n(i){return e.test(i)?i.replace(t,"\\$&"):i}}(Fm)),Fm}var f1;function pI(){return f1||(f1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(_,x){for(var M in x)Object.defineProperty(_,M,{enumerable:!0,get:x[M]})}e(r,{getNamedMiddlewareRegex:function(){return b},getNamedRouteRegex:function(){return y},getRouteRegex:function(){return h},parseParameter:function(){return o}});const t=hI(),n=_2(),i=fI(),s=v2(),a=/^([^[]*)\[((?:\[[^\]]*\])|[^\]]+)\](.*)$/;function o(_){const x=_.match(a);return l(x?x[2]:_)}function l(_){const x=_.startsWith("[")&&_.endsWith("]");x&&(_=_.slice(1,-1));const M=_.startsWith("...");return M&&(_=_.slice(3)),{key:_,repeat:M,optional:x}}function d(_,x,M){const S={};let E=1;const T=[];for(const P of(0,s.removeTrailingSlash)(_).slice(1).split("/")){const I=n.INTERCEPTION_ROUTE_MARKERS.find(R=>P.startsWith(R)),k=P.match(a);if(I&&k&&k[2]){const{key:R,optional:L,repeat:F}=l(k[2]);S[R]={pos:E++,repeat:F,optional:L},T.push("/"+(0,i.escapeStringRegexp)(I)+"([^/]+?)")}else if(k&&k[2]){const{key:R,repeat:L,optional:F}=l(k[2]);S[R]={pos:E++,repeat:L,optional:F},M&&k[1]&&T.push("/"+(0,i.escapeStringRegexp)(k[1]));let W=L?F?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)";M&&k[1]&&(W=W.substring(1)),T.push(W)}else T.push("/"+(0,i.escapeStringRegexp)(P));x&&k&&k[3]&&T.push((0,i.escapeStringRegexp)(k[3]))}return{parameterizedRoute:T.join(""),groups:S}}function h(_,x){let{includeSuffix:M=!1,includePrefix:S=!1,excludeOptionalTrailingSlash:E=!1}=x===void 0?{}:x;const{parameterizedRoute:T,groups:P}=d(_,M,S);let I=T;return E||(I+="(?:/)?"),{re:new RegExp("^"+I+"$"),groups:P}}function f(){let _=0;return()=>{let x="",M=++_;for(;M>0;)x+=String.fromCharCode(97+(M-1)%26),M=Math.floor((M-1)/26);return x}}function p(_){let{interceptionMarker:x,getSafeRouteKey:M,segment:S,routeKeys:E,keyPrefix:T,backreferenceDuplicateKeys:P}=_;const{key:I,optional:k,repeat:R}=l(S);let L=I.replace(/\W/g,"");T&&(L=""+T+L);let F=!1;(L.length===0||L.length>30)&&(F=!0),isNaN(parseInt(L.slice(0,1)))||(F=!0),F&&(L=M());const W=L in E;T?E[L]=""+T+I:E[L]=I;const J=x?(0,i.escapeStringRegexp)(x):"";let z;return W&&P?z="\\k<"+L+">":R?z="(?<"+L+">.+?)":z="(?<"+L+">[^/]+?)",k?"(?:/"+J+z+")?":"/"+J+z}function g(_,x,M,S,E){const T=f(),P={},I=[];for(const k of(0,s.removeTrailingSlash)(_).slice(1).split("/")){const R=n.INTERCEPTION_ROUTE_MARKERS.some(F=>k.startsWith(F)),L=k.match(a);if(R&&L&&L[2])I.push(p({getSafeRouteKey:T,interceptionMarker:L[1],segment:L[2],routeKeys:P,keyPrefix:x?t.NEXT_INTERCEPTION_MARKER_PREFIX:void 0,backreferenceDuplicateKeys:E}));else if(L&&L[2]){S&&L[1]&&I.push("/"+(0,i.escapeStringRegexp)(L[1]));let F=p({getSafeRouteKey:T,segment:L[2],routeKeys:P,keyPrefix:x?t.NEXT_QUERY_PARAM_PREFIX:void 0,backreferenceDuplicateKeys:E});S&&L[1]&&(F=F.substring(1)),I.push(F)}else I.push("/"+(0,i.escapeStringRegexp)(k));M&&L&&L[3]&&I.push((0,i.escapeStringRegexp)(L[3]))}return{namedParameterizedRoute:I.join(""),routeKeys:P}}function y(_,x){var M,S,E;const T=g(_,x.prefixRouteKeys,(M=x.includeSuffix)!=null?M:!1,(S=x.includePrefix)!=null?S:!1,(E=x.backreferenceDuplicateKeys)!=null?E:!1);let P=T.namedParameterizedRoute;return x.excludeOptionalTrailingSlash||(P+="(?:/)?"),{...h(_,x),namedRegex:"^"+P+"$",routeKeys:T.routeKeys}}function b(_,x){const{parameterizedRoute:M}=d(_,!1,!1),{catchAll:S=!0}=x;if(M==="/")return{namedRegex:"^/"+(S?".*":"")+"$"};const{namedParameterizedRoute:E}=g(_,!1,!1,!1,!1);let T=S?"(?:(/.*)?)":"";return{namedRegex:"^"+E+T+"$"}}}(Om)),Om}var p1;function mI(){return p1||(p1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"interpolateAs",{enumerable:!0,get:function(){return n}});const e=dI(),t=pI();function n(i,s,a){let o="";const l=(0,t.getRouteRegex)(i),d=l.groups,h=(s!==i?(0,e.getRouteMatcher)(l)(s):"")||a;o=i;const f=Object.keys(d);return f.every(p=>{let g=h[p]||"";const{repeat:y,optional:b}=d[p];let _="["+(y?"...":"")+p+"]";return b&&(_=(g?"":"/")+"["+_+"]"),y&&!Array.isArray(g)&&(g=[g]),(b||p in h)&&(o=o.replace(_,y?g.map(x=>encodeURIComponent(x)).join("/"):encodeURIComponent(g))||"/")})||(o=""),{params:f,result:o}}}(km)),km}var m1;function gI(){return m1||(m1=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"resolveHref",{enumerable:!0,get:function(){return h}});const t=m2(),n=g2(),i=iI(),s=Ef(),a=Tf(),o=y2(),l=uI(),d=mI();function h(f,p,g){let y,b=typeof p=="string"?p:(0,n.formatWithValidation)(p);const _=b.match(/^[a-z][a-z0-9+.-]*:\/\//i),x=_?b.slice(_[0].length):b;if((x.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+b+"' passed to next/router in page: '"+f.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");const S=(0,s.normalizeRepeatedSlashes)(x);b=(_?_[0]:"")+S}if(!(0,o.isLocalURL)(b))return g?[b]:b;try{y=new URL(b.startsWith("#")?f.asPath:f.pathname,"http://n")}catch{y=new URL("/","http://n")}try{const S=new URL(b,y);S.pathname=(0,a.normalizePathTrailingSlash)(S.pathname);let E="";if((0,l.isDynamicRoute)(S.pathname)&&S.searchParams&&g){const P=(0,t.searchParamsToUrlQuery)(S.searchParams),{result:I,params:k}=(0,d.interpolateAs)(S.pathname,S.pathname,P);I&&(E=(0,n.formatWithValidation)({pathname:I,hash:S.hash,query:(0,i.omit)(P,k)}))}const T=S.origin===y.origin?S.href.slice(S.origin.length):S.href;return g?[T,E||T]:T}catch{return g?[b]:b}}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Dd,Dd.exports)),Dd.exports}var Fd={exports:{}},zm={},jm={},g1;function b2(){return g1||(g1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathPrefix",{enumerable:!0,get:function(){return t}});const e=Iv();function t(n,i){if(!n.startsWith("/")||!i)return n;const{pathname:s,query:a,hash:o}=(0,e.parsePath)(n);return""+i+s+a+o}}(jm)),jm}var v1;function vI(){return v1||(v1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLocale",{enumerable:!0,get:function(){return n}});const e=b2(),t=x2();function n(i,s,a,o){if(!s||s===a)return i;const l=i.toLowerCase();return!o&&((0,t.pathHasPrefix)(l,"/api")||(0,t.pathHasPrefix)(l,"/"+s.toLowerCase()))?i:(0,e.addPathPrefix)(i,"/"+s)}}(zm)),zm}var x1;function xI(){return x1||(x1=1,function(r,e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addLocale",{enumerable:!0,get:function(){return i}});const n=Tf(),i=function(s){for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return t.__NEXT_I18N_SUPPORT?(0,n.normalizePathTrailingSlash)(vI().addLocale(s,...o)):s};(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Fd,Fd.exports)),Fd.exports}var Bm={},Au={};function yI(r){return r&&r.__esModule?r:{default:r}}Au._=yI;var y1;function _I(){return y1||(y1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RouterContext",{enumerable:!0,get:function(){return n}});const n=Au._(B).default.createContext(null)}(Bm)),Bm}var zd={exports:{}},jd={exports:{}},_1;function bI(){return _1||(_1=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,a){for(var o in a)Object.defineProperty(s,o,{enumerable:!0,get:a[o]})}t(e,{cancelIdleCallback:function(){return i},requestIdleCallback:function(){return n}});const n=typeof self<"u"&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(s){let a=Date.now();return self.setTimeout(function(){s({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-a))}})},1)},i=typeof self<"u"&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(s){return clearTimeout(s)};(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(jd,jd.exports)),jd.exports}var b1;function wI(){return b1||(b1=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useIntersection",{enumerable:!0,get:function(){return d}});const t=B,n=bI(),i=typeof IntersectionObserver=="function",s=new Map,a=[];function o(h){const f={root:h.root||null,margin:h.rootMargin||""},p=a.find(_=>_.root===f.root&&_.margin===f.margin);let g;if(p&&(g=s.get(p),g))return g;const y=new Map,b=new IntersectionObserver(_=>{_.forEach(x=>{const M=y.get(x.target),S=x.isIntersecting||x.intersectionRatio>0;M&&S&&M(S)})},h);return g={id:f,observer:b,elements:y},a.push(f),s.set(f,g),g}function l(h,f,p){const{id:g,observer:y,elements:b}=o(p);return b.set(h,f),y.observe(h),function(){if(b.delete(h),y.unobserve(h),b.size===0){y.disconnect(),s.delete(g);const x=a.findIndex(M=>M.root===g.root&&M.margin===g.margin);x>-1&&a.splice(x,1)}}}function d(h){let{rootRef:f,rootMargin:p,disabled:g}=h;const y=g||!i,[b,_]=(0,t.useState)(!1),x=(0,t.useRef)(null),M=(0,t.useCallback)(E=>{x.current=E},[]);(0,t.useEffect)(()=>{if(i){if(y||b)return;const E=x.current;if(E&&E.tagName)return l(E,P=>P&&_(P),{root:f==null?void 0:f.current,rootMargin:p})}else if(!b){const E=(0,n.requestIdleCallback)(()=>_(!0));return()=>(0,n.cancelIdleCallback)(E)}},[y,p,f,b,x.current]);const S=(0,t.useCallback)(()=>{_(!1)},[]);return[M,b,S]}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(zd,zd.exports)),zd.exports}var Bd={exports:{}},Hd={exports:{}},Hm={},w1;function SI(){return w1||(w1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeLocalePath",{enumerable:!0,get:function(){return t}});const e=new WeakMap;function t(n,i){if(!i)return{pathname:n};let s=e.get(i);s||(s=i.map(h=>h.toLowerCase()),e.set(i,s));let a;const o=n.split("/",2);if(!o[1])return{pathname:n};const l=o[1].toLowerCase(),d=s.indexOf(l);return d<0?{pathname:n}:(a=i[d],n=n.slice(a.length+1)||"/",{pathname:n,detectedLocale:a})}}(Hm)),Hm}var S1;function MI(){return S1||(S1=1,function(r,e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"normalizeLocalePath",{enumerable:!0,get:function(){return n}});const n=(i,s)=>t.__NEXT_I18N_SUPPORT?SI().normalizeLocalePath(i,s):{pathname:i,detectedLocale:void 0};(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Hd,Hd.exports)),Hd.exports}var Vd={exports:{}},Vm={},M1;function EI(){return M1||(M1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"detectDomainLocale",{enumerable:!0,get:function(){return e}});function e(t,n,i){if(t){i&&(i=i.toLowerCase());for(const o of t){var s,a;const l=(s=o.domain)==null?void 0:s.split(":",1)[0].toLowerCase();if(n===l||i===o.defaultLocale.toLowerCase()||(a=o.locales)!=null&&a.some(d=>d.toLowerCase()===i))return o}}}}(Vm)),Vm}var E1;function TI(){return E1||(E1=1,function(r,e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"detectDomainLocale",{enumerable:!0,get:function(){return n}});const n=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];if(t.__NEXT_I18N_SUPPORT)return EI().detectDomainLocale(...s)};(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Vd,Vd.exports)),Vd.exports}var T1;function AI(){return T1||(T1=1,function(r,e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getDomainLocale",{enumerable:!0,get:function(){return s}});const n=Tf(),i=t.__NEXT_ROUTER_BASEPATH||"";function s(a,o,l,d){if(t.__NEXT_I18N_SUPPORT){const h=MI().normalizeLocalePath,f=TI().detectDomainLocale,p=o||h(a,l).detectedLocale,g=f(d,void 0,p);if(g){const y="http"+(g.http?"":"s")+"://",b=p===g.defaultLocale?"":"/"+p;return""+y+g.domain+(0,n.normalizePathTrailingSlash)(""+i+b+a)}return!1}else return!1}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Bd,Bd.exports)),Bd.exports}var Gd={exports:{}},A1;function CI(){return A1||(A1=1,function(r,e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addBasePath",{enumerable:!0,get:function(){return a}});const n=b2(),i=Tf(),s=t.__NEXT_ROUTER_BASEPATH||"";function a(o,l){return(0,i.normalizePathTrailingSlash)(t.__NEXT_MANUAL_CLIENT_BASE_PATH&&!l?o:(0,n.addPathPrefix)(o,s))}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Gd,Gd.exports)),Gd.exports}var Wd={exports:{}},C1;function RI(){return C1||(C1=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useMergedRef",{enumerable:!0,get:function(){return n}});const t=B;function n(s,a){const o=(0,t.useRef)(null),l=(0,t.useRef)(null);return(0,t.useCallback)(d=>{if(d===null){const h=o.current;h&&(o.current=null,h());const f=l.current;f&&(l.current=null,f())}else s&&(o.current=i(s,d)),a&&(l.current=i(a,d))},[s,a])}function i(s,a){if(typeof s=="function"){const o=s(a);return typeof o=="function"?o:()=>s(null)}else return s.current=a,()=>{s.current=null}}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)}(Wd,Wd.exports)),Wd.exports}var Gm={},R1;function PI(){return R1||(R1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return e}});let e=t=>{}}(Gm)),Gm}(function(r,e){"use client";var t={};Object.defineProperty(e,"__esModule",{value:!0});function n(L,F){for(var W in F)Object.defineProperty(L,W,{enumerable:!0,get:F[W]})}n(e,{default:function(){return R},useLinkStatus:function(){return k}});const i=Mf,s=m,a=i._(B),o=gI(),l=y2(),d=g2(),h=Ef(),f=xI(),p=_I(),g=wI(),y=AI(),b=CI(),_=RI();PI();const x=new Set;function M(L,F,W,J){if(!(typeof window>"u")&&(0,l.isLocalURL)(F)){if(!J.bypassPrefetchedCheck){const z=typeof J.locale<"u"?J.locale:"locale"in L?L.locale:void 0,Q=F+"%"+W+"%"+z;if(x.has(Q))return;x.add(Q)}L.prefetch(F,W,J).catch(z=>{})}}function S(L){const W=L.currentTarget.getAttribute("target");return W&&W!=="_self"||L.metaKey||L.ctrlKey||L.shiftKey||L.altKey||L.nativeEvent&&L.nativeEvent.which===2}function E(L,F,W,J,z,Q,ne,oe,te){const{nodeName:ie}=L.currentTarget;if(ie.toUpperCase()==="A"&&S(L)||L.currentTarget.hasAttribute("download"))return;if(!(0,l.isLocalURL)(W)){z&&(L.preventDefault(),location.replace(W));return}L.preventDefault(),(()=>{if(te){let pe=!1;if(te({preventDefault:()=>{pe=!0}}),pe)return}const re=ne??!0;"beforePopState"in F?F[z?"replace":"push"](W,J,{shallow:Q,locale:oe,scroll:re}):F[z?"replace":"push"](J||W,{scroll:re})})()}function T(L){return typeof L=="string"?L:(0,d.formatUrl)(L)}const P=a.default.forwardRef(function(F,W){let J;const{href:z,as:Q,children:ne,prefetch:oe=null,passHref:te,replace:ie,shallow:ee,scroll:Z,locale:re,onClick:pe,onNavigate:Ee,onMouseEnter:Le,onTouchStart:ke,legacyBehavior:je=!1,...Qe}=F;J=ne,je&&(typeof J=="string"||typeof J=="number")&&(J=(0,s.jsx)("a",{children:J}));const nt=a.default.useContext(p.RouterContext),Ot=oe!==!1,{href:We,as:K}=a.default.useMemo(()=>{if(!nt){const ce=T(z);return{href:ce,as:Q?T(Q):ce}}const[V,U]=(0,o.resolveHref)(nt,z,!0);return{href:V,as:Q?(0,o.resolveHref)(nt,Q):U||V}},[nt,z,Q]),Ce=a.default.useRef(We),be=a.default.useRef(K);let Te;je&&(Te=a.default.Children.only(J));const Ae=je?Te&&typeof Te=="object"&&Te.ref:W,[ze,Xe,Ke]=(0,g.useIntersection)({rootMargin:"200px"}),ct=a.default.useCallback(V=>{(be.current!==K||Ce.current!==We)&&(Ke(),be.current=K,Ce.current=We),ze(V)},[K,We,Ke,ze]),_t=(0,_.useMergedRef)(ct,Ae);a.default.useEffect(()=>{nt&&(!Xe||!Ot||M(nt,We,K,{locale:re}))},[K,We,Xe,re,Ot,nt==null?void 0:nt.locale,nt]);const Ut={ref:_t,onClick(V){!je&&typeof pe=="function"&&pe(V),je&&Te.props&&typeof Te.props.onClick=="function"&&Te.props.onClick(V),nt&&(V.defaultPrevented||E(V,nt,We,K,ie,ee,Z,re,Ee))},onMouseEnter(V){!je&&typeof Le=="function"&&Le(V),je&&Te.props&&typeof Te.props.onMouseEnter=="function"&&Te.props.onMouseEnter(V),nt&&M(nt,We,K,{locale:re,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:t.__NEXT_LINK_NO_TOUCH_START?void 0:function(U){!je&&typeof ke=="function"&&ke(U),je&&Te.props&&typeof Te.props.onTouchStart=="function"&&Te.props.onTouchStart(U),nt&&M(nt,We,K,{locale:re,priority:!0,bypassPrefetchedCheck:!0})}};if((0,h.isAbsoluteUrl)(K))Ut.href=K;else if(!je||te||Te.type==="a"&&!("href"in Te.props)){const V=typeof re<"u"?re:nt==null?void 0:nt.locale,U=(nt==null?void 0:nt.isLocaleDomain)&&(0,y.getDomainLocale)(K,V,nt==null?void 0:nt.locales,nt==null?void 0:nt.domainLocales);Ut.href=U||(0,b.addBasePath)((0,f.addLocale)(K,V,nt==null?void 0:nt.defaultLocale))}return je?a.default.cloneElement(Te,Ut):(0,s.jsx)("a",{...Qe,...Ut,children:J})}),I=(0,a.createContext)({pending:!1}),k=()=>(0,a.useContext)(I),R=P;(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)})(c0,c0.exports);var NI=c0.exports,II=NI;const af=rv(II),Wm={coordinates:{lat:27.2038,lng:74.8565,zoom:12},address:{line1:"Kuchaman City",line2:"Nagaur District",city:"Kuchaman",state:"Rajasthan",country:"India",postalCode:"341708"},mapSettings:{width:"100%",height:"100%",zoom:12,markerColor:"#3b82f6",mapType:"roadmap"}},LI=r=>{const{lat:e,lng:t,zoom:n}=r.coordinates,{mapType:i}=r.mapSettings;return`https://www.google.com/maps/embed/v1/view?key=AIzaSyAvKabvczBnBoDKLCEAy2Pp1RRBGarh5qE&center=${e},${t}&zoom=${n}&maptype=${i}`},kI=r=>{const{lat:e,lng:t}=r.coordinates,{address:n}=r;return`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(`${n.line1}, ${n.city}, ${n.state} ${n.postalCode}, ${n.country}`)}`},DI=({className:r="",showMap:e=!0,showAddress:t=!0,showDirectionsButton:n=!0})=>{const[i,s]=B.useState(!1),[a,o]=B.useState(""),[l,d]=B.useState(""),{address:h}=Wm,f=`${h.line1}, ${h.city}, ${h.state} ${h.postalCode}, ${h.country}`;return B.useEffect(()=>{s(!0),o(LI(Wm)),d(kI(Wm))},[]),i?m.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1,ease:[.16,1,.3,1]},className:lo("w-full group",r),children:m.jsxs(gf,{className:"overflow-hidden h-full flex flex-col bg-card border border-border/50 hover:border-primary/30 transition-colors duration-200",children:[e&&m.jsxs("div",{className:"relative h-56 md:h-64 w-full overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-0"}),m.jsx("iframe",{title:"Location on Google Maps",src:a,width:"100%",height:"100%",allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"w-full h-full border-0 scale-100 group-hover:scale-[1.02] transition-transform duration-500 ease-out","aria-label":"Google Maps location"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 via-background/10 to-transparent pointer-events-none"})]}),t&&m.jsx(vf,{className:"pb-3",children:m.jsxs(xf,{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-lg group-hover:bg-primary/20 transition-colors duration-200",children:m.jsx(ON,{className:"w-4 h-4"})}),m.jsx("span",{className:"text-foreground text-lg",children:"My Location"})]})}),m.jsx(yf,{className:"flex-1",children:t&&m.jsxs("div",{className:"space-y-2.5",children:[m.jsxs("p",{className:"text-foreground font-medium flex items-center text-sm",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-primary mr-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),h.line1]}),h.line2&&m.jsx("p",{className:"text-muted-foreground text-sm pl-3.5 border-l border-border/30",children:h.line2}),m.jsxs("p",{className:"text-muted-foreground text-sm pl-3.5 border-l border-border/30",children:[h.city,", ",h.state," ",h.postalCode]}),m.jsx("p",{className:"text-muted-foreground text-sm pl-3.5 border-l border-border/30",children:h.country})]})}),n&&m.jsx(dv,{className:"pt-2",children:m.jsxs(af,{href:l,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full h-9 px-4 py-2 text-sm font-medium transition-colors rounded-md border border-border/50 hover:border-primary/50 hover:bg-accent/50 text-foreground","aria-label":`Get directions to ${f}`,children:[m.jsx(jN,{className:"w-3.5 h-3.5 mr-2"}),"Get Directions",m.jsx(MN,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})}):null},OI=[{id:"1",question:"How can I get started with your services?",answer:"You can get started by contacting us through our contact form or by sending us an email. We'll schedule a consultation to discuss your project requirements.",category:"general"},{id:"2",question:"What technologies do you work with?",answer:"We specialize in modern web technologies including React, Next.js, TypeScript, Node.js, and various databases. We stay updated with the latest industry standards.",category:"technical"},{id:"3",question:"What are your rates?",answer:"Our rates vary depending on the project scope and requirements. We offer competitive pricing and can work on both hourly and fixed-price projects.",category:"pricing"}],UI=(...r)=>r.filter(Boolean).join(" "),FI=({question:r,answer:e,index:t})=>{const[n,i]=B.useState(t===0);return m.jsxs(ve.div,{className:"bg-card/50 backdrop-blur-sm rounded-xl border border-border/50 hover:border-primary/30 transition-all duration-300 mb-4 last:mb-0 overflow-hidden",initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{delay:t*.05,type:"spring",stiffness:300,damping:20},children:[m.jsxs("button",{className:"w-full py-4 px-5 text-left flex justify-between items-center group focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50",onClick:()=>i(!n),"aria-expanded":n,"aria-controls":`faq-${t}`,"aria-label":`${n?"Collapse":"Expand"} question: ${r}`,children:[m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"p-1.5 mr-3.5 mt-0.5 rounded-lg bg-primary/10 text-primary",children:m.jsx(f2,{className:"w-4.5 h-4.5"})}),m.jsx("h3",{className:"text-base font-medium text-foreground group-hover:text-primary transition-colors duration-200 text-left",children:r})]}),m.jsx("div",{className:"ml-4 flex-shrink-0 p-1 rounded-md group-hover:bg-accent/30 transition-colors duration-200",children:n?m.jsx(hN,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors duration-200"}):m.jsx(h2,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors duration-200"})})]}),m.jsx(mr,{children:n&&m.jsx(ve.div,{id:`faq-${t}`,initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto",transition:{opacity:{duration:.2,ease:"easeInOut"},height:{duration:.3,ease:[.16,1,.3,1]}}},collapsed:{opacity:0,height:0,transition:{opacity:{duration:.15,ease:"easeInOut"},height:{duration:.2,ease:[.16,1,.3,1]}}}},className:"overflow-hidden",children:m.jsx("div",{className:"px-5 pb-5 pt-1 border-t border-border/30",children:m.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e})})})})]})},zI=()=>{const[r,e]=B.useState("general"),t=[{id:"general",name:"General",icon:"💡"},{id:"technical",name:"Technical",icon:"⚙️"},{id:"pricing",name:"Pricing",icon:"💰"}],n=OI.filter(i=>i.category===r||r==="general");return m.jsx("section",{children:m.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:[m.jsxs(ve.div,{className:"text-center mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6,ease:[.16,1,.3,1]},children:[m.jsxs("span",{className:"inline-flex items-center justify-center px-3.5 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-4",children:[m.jsx(f2,{className:"w-3.5 h-3.5 mr-2"}),"Common Questions"]}),m.jsx("h2",{className:"text-3xl font-bold text-foreground sm:text-4xl mb-4",children:"Frequently Asked Questions"}),m.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Get quick answers to common questions about our services and how we can help bring your ideas to life."})]}),m.jsx(ve.div,{className:"flex flex-wrap justify-center gap-2.5 mb-10",initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{staggerChildren:.1},children:t.map(i=>m.jsxs(ve.button,{onClick:()=>e(i.id),className:UI("px-4 py-2 text-sm font-medium rounded-lg transition-all flex items-center","border border-border/50","hover:bg-accent/30","focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50",r===i.id?"bg-primary/10 text-primary border-primary/30":"bg-card/50 text-foreground/80 hover:text-foreground"),whileHover:{y:-1},whileTap:{scale:.97},transition:{type:"spring",stiffness:500,damping:20},children:[m.jsx("span",{className:"mr-2 text-base",children:i.icon}),i.name,r===i.id&&m.jsx("span",{className:"ml-2 w-1.5 h-1.5 rounded-full bg-primary"})]},i.id))}),m.jsx(ve.div,{className:"space-y-3 mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{staggerChildren:.05},children:n.map((i,s)=>m.jsx(FI,{question:i.question,answer:i.answer,index:s},i.id))})]})})},pc=(...r)=>r.filter(Boolean).join(" "),jI=()=>{const[r,e]=B.useState(new Date),[t,n]=B.useState(""),[i,s]=B.useState(!1);B.useEffect(()=>{const h=setInterval(()=>{e(new Date)},6e4);return n(Intl.DateTimeFormat().resolvedOptions().timeZone),()=>clearInterval(h)},[]);const a=()=>{const h=r.getDay(),f=r.getHours(),p=r.getMinutes(),g=f*60+p;return h>=1&&h<=5?g>=540&&g<1080:h===6?g>=600&&g<840:!1},o=[{day:"Monday",hours:"9:00 AM - 6:00 PM",isWorkingDay:!0},{day:"Tuesday",hours:"9:00 AM - 6:00 PM",isWorkingDay:!0},{day:"Wednesday",hours:"9:00 AM - 6:00 PM",isWorkingDay:!0},{day:"Thursday",hours:"9:00 AM - 6:00 PM",isWorkingDay:!0},{day:"Friday",hours:"9:00 AM - 6:00 PM",isWorkingDay:!0},{day:"Saturday",hours:"10:00 AM - 2:00 PM",isWorkingDay:!0},{day:"Sunday",hours:"Closed",isWorkingDay:!1}],l=(r.getDay()+6)%7,d=a();return m.jsx(ve.div,{className:"bg-card rounded-xl border border-border/50 w-full overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1,ease:[.16,1,.3,1]},children:m.jsxs("div",{className:"p-5",children:[m.jsxs("div",{className:"flex items-start justify-between mb-5",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary mr-3",children:m.jsx(xN,{className:"w-4 h-4"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Working Hours"}),m.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:d?"We're currently open!":"We're currently closed"})]})]}),m.jsx("div",{className:pc("px-2.5 py-1 rounded-md text-xs font-medium flex items-center",d?"bg-green-500/10 text-green-600 dark:text-green-400":"bg-muted text-muted-foreground"),children:d?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 mr-1.5 animate-pulse"}),m.jsx("span",{children:"Open Now"})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-muted-foreground/60 mr-1.5"}),m.jsx("span",{children:"Closed Now"})]})})]}),m.jsx("div",{className:"space-y-2",children:o.map((h,f)=>{const p=f===l;return m.jsxs(ve.div,{className:pc("flex items-center justify-between py-2 px-3 rounded-lg text-sm transition-colors",p?"bg-accent/10 text-foreground":"text-muted-foreground hover:bg-accent/5",!h.isWorkingDay&&"opacity-60"),whileHover:p?{}:{x:2},children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:pc("w-1.5 h-1.5 rounded-full mr-2.5",p?"bg-primary":"bg-muted-foreground/40",!h.isWorkingDay&&"bg-muted-foreground/20")}),m.jsx("span",{className:pc(p&&"font-medium",!h.isWorkingDay&&"text-muted-foreground/70"),children:h.day})]}),m.jsx("span",{className:pc(p?"font-medium":"",!h.isWorkingDay&&"text-muted-foreground/70"),children:h.hours})]},h.day)})}),m.jsxs("div",{className:"mt-5 pt-4 border-t border-border/50",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[m.jsx(KN,{className:"w-3.5 h-3.5 mr-2 text-foreground/60"}),m.jsx("span",{children:t})]}),m.jsxs("button",{onClick:()=>s(!i),className:"text-xs font-medium text-foreground/70 hover:text-foreground transition-colors flex items-center group","aria-expanded":i,"aria-controls":"working-hours-details",children:[i?"Show less":"Show more",m.jsx(ve.span,{animate:{rotate:i?180:0},transition:{duration:.2},className:"ml-1",children:m.jsx(h2,{className:"w-3.5 h-3.5 group-hover:translate-y-0.5 transition-transform"})})]})]}),m.jsx(mr,{children:i&&m.jsx(ve.div,{id:"working-hours-details",initial:{opacity:0,height:0,marginTop:0},animate:{opacity:1,height:"auto",marginTop:"0.75rem"},exit:{opacity:0,height:0,marginTop:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[m.jsx("p",{children:"We're available during our working hours for meetings, calls, and support. Feel free to reach out during these times, and we'll get back to you as soon as possible."}),m.jsxs("p",{className:"text-xs text-muted-foreground/80",children:[m.jsx("span",{className:"font-medium",children:"Note:"})," Response times may vary during holidays and weekends."]})]}),m.jsxs("div",{className:"flex items-center text-sm text-muted-foreground pt-2 border-t border-border/20",children:[m.jsx("span",{className:"w-2 h-2 rounded-full bg-accent mr-2 animate-pulse"}),"Current time: ",r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})})})]})]})})},BI={blue:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",green:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400",purple:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400",amber:"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400",red:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",indigo:"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400"},HI=[{title:"Inventory Management",description:"Expert in managing stock levels, implementing FIFO principles, and optimizing warehouse operations.",icon:sN,features:["Stock Control & Optimization","FIFO Implementation","Warehouse Optimization","Inventory Auditing"],color:"blue"},{title:"Data Analysis & Reporting",description:"Transforming raw data into actionable insights and comprehensive reports.",icon:oN,features:["Financial Reporting","Data Visualization","Performance Metrics","KPI Tracking"],color:"green"},{title:"Process Automation",description:"Streamlining operations through automation of repetitive tasks and workflows.",icon:XN,features:["Workflow Optimization","Excel Automation","Process Mapping","Efficiency Improvement"],color:"purple"},{title:"ERP & System Management",description:"Proficient in managing and optimizing ERP systems for business operations.",icon:_N,features:["System Implementation","User Training","Data Migration","Troubleshooting"],color:"amber"},{title:"Financial Management",description:"Expertise in financial record keeping, reconciliation, and analysis.",icon:TN,features:["Accounts Management","Financial Reporting","Budget Tracking","Expense Analysis"],color:"red"},{title:"Supply Chain Optimization",description:"Enhancing supply chain efficiency through strategic planning and execution.",icon:CN,features:["Vendor Management","Logistics Coordination","Demand Forecasting","Cost Reduction"],color:"indigo"}],VI=({service:r,isSelected:e,onMouseEnter:t,onMouseLeave:n})=>{const{title:i,description:s,icon:a,features:o,color:l}=r,d=BI[l],[h,f]=d.split(" ").filter(p=>p.startsWith("text-")||p.startsWith("bg-"));return m.jsx("div",{className:"relative h-full group",onMouseEnter:t,onMouseLeave:n,children:m.jsxs(gf,{className:lo("h-full flex flex-col transition-all duration-500 border border-border/50 bg-card/50 backdrop-blur-sm",e?"ring-2 ring-primary/50 ring-offset-2 -translate-y-1 shadow-xl":"hover:shadow-lg hover:border-primary/30 hover:bg-card/70"),children:[m.jsx(vf,{className:"pb-4",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:lo("p-2.5 rounded-xl transition-all duration-300 group-hover:scale-110",f,h),children:B.createElement(a,{className:"w-5 h-5"})}),m.jsx(xf,{className:"text-xl font-bold bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text text-transparent",children:i})]})}),m.jsxs(yf,{className:"flex-1",children:[m.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:s}),m.jsx("ul",{className:"space-y-3",children:o.map((p,g)=>m.jsxs(ve.li,{className:"flex items-start group/item",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:g*.05},children:[m.jsx("div",{className:"p-0.5 mr-3 mt-0.5 rounded-full bg-primary/10 group-hover/item:bg-primary/20 transition-colors",children:m.jsx(cN,{className:"w-3.5 h-3.5 text-primary"})}),m.jsx("span",{className:"text-sm text-foreground/90 group-hover/item:text-foreground transition-colors",children:p})]},g))})]}),m.jsx(dv,{className:"pt-0",children:m.jsx(af,{href:"#contact",className:"relative z-10 w-full",children:m.jsxs(wi,{variant:"outline",className:"w-full group border-border/50 hover:border-primary/50 hover:bg-accent/20 transition-all duration-300 overflow-hidden",children:[m.jsx("span",{className:"relative",children:"Get Started"}),m.jsx(iN,{className:"ml-2 h-4 w-4 transition-transform duration-300 group-hover:translate-x-1"}),m.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"})]})})})]})})},GI=()=>{const[r,e]=B.useState(null),t=n=>{e(n)};return m.jsxs("section",{id:"services",className:"w-full pb-16 md:pb-24 lg:pb-32 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 -z-10",children:m.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,var(--tw-gradient-stops))] from-primary/5 via-background to-background"})}),m.jsxs("div",{className:"w-full max-w-[95rem] mx-auto px-4 md:px-8 relative",children:[m.jsxs(ve.div,{className:"flex flex-col items-center text-center space-y-6 mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:[m.jsx("div",{className:"inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium transition-colors bg-primary/10 text-primary",children:"What We Offer"}),m.jsx("h2",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl bg-clip-text text-transparent bg-gradient-to-r from-foreground to-foreground/70",children:"Our Services"}),m.jsx("p",{className:"max-w-[700px] text-muted-foreground md:text-lg",children:"We offer a comprehensive suite of services designed to elevate your digital presence and drive business growth."})]}),m.jsx(ve.div,{className:"mt-16",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,margin:"0px 0px -10% 0px"},transition:{duration:.5,delay:.2},children:m.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 w-full",children:HI.map((n,i)=>m.jsx(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.5,delay:i*.1,ease:[.16,1,.3,1]},className:"relative",children:m.jsx(VI,{service:n,isSelected:r===i,onMouseEnter:()=>t(i),onMouseLeave:()=>t(null)})},n.title))})}),m.jsx(ve.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.2},className:"mt-12 text-center",children:m.jsx("p",{className:"text-muted-foreground",children:"Let's optimize your operations and drive efficiency through data-driven solutions."})})]})]})},cs={email:"sahilkhan36985@gmail.com",phone:"+91 98757 71550",workingHours:"Mon - Fri: 9:00 AM - 6:00 PM IST",socialLinks:{whatsapp:"https://wa.me/919857771550",github:"https://github.com/Sahilthecoder",linkedin:"https://linkedin.com/in/sahilkhan36985"}},WI=()=>{const r=`BEGIN:VCARD
VERSION:3.0
FN:Sahil Ali
TEL;type=CELL;type=VOICE;waid=918824054425:${cs.phone}
EMAIL:${cs.email}
END:VCARD`,e=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(r)}`,t=()=>{const i=document.createElement("a");i.href=e,i.download="contact-qr-code.png",document.body.appendChild(i),i.click(),document.body.removeChild(i)},n=async()=>{try{navigator.share&&await navigator.share({title:"Contact Me",text:"Get in touch with me!",url:cs.email})}catch(i){console.error("Error sharing contact info:",i)}};return m.jsx(ve.div,{className:"bg-card rounded-xl shadow-sm overflow-hidden w-full border border-border/50 hover:border-primary/30 transition-all duration-300 hover:shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.16,1,.3,1]},children:m.jsxs("div",{className:"p-6",children:[m.jsxs("h3",{className:"text-xl font-bold text-foreground mb-6 flex items-center",children:[m.jsx("div",{className:"p-2 mr-3 rounded-lg bg-primary/10 text-primary",children:m.jsx(FN,{className:"w-5 h-5"})}),"Contact Information"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("a",{href:`mailto:${cs.email}`,className:"group flex items-center p-3 -mx-3 rounded-lg transition-colors hover:bg-accent/50",children:[m.jsx("div",{className:"p-2 mr-3 rounded-lg bg-amber-500/10 text-amber-500 group-hover:bg-amber-500/20 transition-colors",children:m.jsx(kN,{className:"w-5 h-5"})}),m.jsx("span",{className:"text-foreground group-hover:text-primary",children:cs.email})]}),m.jsxs("a",{href:`tel:${cs.phone}`,className:"group flex items-center p-3 -mx-3 rounded-lg transition-colors hover:bg-accent/50",children:[m.jsx("div",{className:"p-2 mr-3 rounded-lg bg-blue-500/10 text-blue-500 group-hover:bg-blue-500/20 transition-colors",children:m.jsx(HN,{className:"w-5 h-5"})}),m.jsx("span",{className:"text-foreground group-hover:text-primary",children:cs.phone})]}),m.jsxs("div",{className:"pt-4 border-t border-border/50",children:[m.jsx("h4",{className:"text-sm font-medium text-foreground mb-3",children:"Connect with me"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("a",{href:cs.socialLinks.github,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-background hover:bg-accent text-foreground/80 hover:text-foreground transition-colors hover:shadow-sm","aria-label":"GitHub",children:m.jsx(PN,{className:"w-5 h-5"})}),m.jsx("a",{href:cs.socialLinks.linkedin,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-background hover:bg-accent text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:shadow-sm","aria-label":"LinkedIn",children:m.jsx(IN,{className:"w-5 h-5"})})]})]}),m.jsx("div",{className:"pt-4",children:m.jsxs("div",{className:"relative bg-background/50 p-5 rounded-xl border border-border/50 flex flex-col items-center group",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),m.jsx("img",{src:e,alt:"Contact QR Code",className:"w-36 h-36 mb-4 rounded-lg border-2 border-border/50 group-hover:border-primary/30 transition-all duration-300"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{onClick:t,className:"flex items-center justify-center px-4 py-2 text-sm font-medium rounded-lg bg-primary/5 hover:bg-primary/10 text-primary hover:shadow-sm transition-all duration-200",children:[m.jsx(wN,{className:"w-4 h-4 mr-2"}),"Save"]}),m.jsxs("button",{onClick:n,className:"flex items-center justify-center px-4 py-2 text-sm font-medium rounded-lg bg-background border border-border hover:bg-accent/50 hover:shadow-sm transition-all duration-200",children:[m.jsx(YN,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})})]})]})})},P1=()=>{const[r,e]=B.useState(!1);return B.useEffect(()=>{const t=window.matchMedia("(prefers-reduced-motion: reduce)");e(t.matches);const n=()=>e(t.matches);return t.addEventListener("change",n),()=>t.removeEventListener("change",n)},[]),m.jsx(ve.div,{initial:{width:0},animate:{width:r?"100%":96},transition:{duration:r?0:.5,ease:"easeOut"},className:"w-24 h-1 bg-gradient-to-r from-primary to-accent rounded-full mx-auto my-12 md:my-16",role:"separator","aria-label":"Section divider"})},XI="bg-gradient-to-r from-primary via-primary/80 to-primary/60 bg-clip-text text-transparent font-bold",qI=()=>{const r=bu();return B.useEffect(()=>{if(r.hash){const e=document.querySelector(r.hash);e&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[r.hash]),m.jsxs("div",{className:"min-h-screen w-full bg-background",children:[m.jsx("title",{children:"Contact | Sahil Ali"}),m.jsx("meta",{name:"description",content:"Get in touch with Sahil Ali for professional collaborations, project discussions, and technical consultations."}),m.jsx("section",{className:"w-full",children:m.jsx(tI,{})}),m.jsx("section",{className:"py-12 md:py-16 px-4 sm:px-6 text-center",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsx("span",{className:"inline-block px-4 py-1.5 text-xs font-medium rounded-full bg-primary/10 text-primary mb-4",children:"Let's Connect"}),m.jsxs("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold tracking-tight text-foreground mb-4",children:["Start a ",m.jsx("span",{className:XI,children:"Conversation"})]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"Whether it's a project, consultation, or collaboration – I'd love to hear from you! Let's create something amazing together."})]})}),m.jsx("main",{className:"w-full py-8",children:m.jsxs("div",{className:"w-full max-w-[95rem] mx-auto px-4 sm:px-6 lg:px-8 space-y-16",children:[m.jsx("section",{id:"contact-form",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12",children:[m.jsxs("div",{className:"lg:col-span-7 space-y-8",children:[m.jsxs("div",{className:"bg-card p-6 rounded-xl shadow-sm border border-border/50",children:[m.jsxs("div",{className:"space-y-1 mb-8 text-center",children:[m.jsx("h2",{className:"text-3xl font-bold mb-2 text-primary",children:"Send Me a Message"}),m.jsx("p",{className:"text-muted-foreground",children:"Fill out the form and I'll get back to you as soon as possible"})]}),m.jsx(QN,{})]}),m.jsx("div",{className:"rounded-2xl overflow-hidden",children:m.jsx(DI,{})})]}),m.jsxs("div",{className:"lg:col-span-5 space-y-8",children:[m.jsx(WI,{}),m.jsx("div",{className:"bg-card p-6 rounded-xl shadow-sm border border-border/50",children:m.jsx(jI,{})})]})]})}),m.jsx(P1,{}),m.jsx("section",{id:"services",children:m.jsx(GI,{})}),m.jsx(P1,{}),m.jsx("section",{id:"faq",children:m.jsx(zI,{})})]})})]})},YI=["https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.pexels.com/photos/1591056/pexels-photo-1591056.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/261662/pexels-photo-261662.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/262508/pexels-photo-262508.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260","https://images.pexels.com/photos/270360/pexels-photo-270360.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"],ZI=()=>{const r=B.useMemo(()=>[...YI].sort(()=>.5-Math.random()).slice(0,2),[]);return m.jsxs("div",{className:"relative bg-white dark:bg-gray-900",children:[m.jsx(Nv,{title:"",subtitle:"",backgroundImages:r,className:"min-h-[40vh]"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/60 dark:from-black/80 dark:via-black/60 dark:to-black/80",children:m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center px-4",children:[m.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white dark:text-white mb-4",children:"Blog & Articles"}),m.jsx("p",{className:"text-xl md:text-2xl text-gray-200 dark:text-gray-200 mb-8 max-w-2xl mx-auto",children:"Sharing insights, tutorials, and thoughts on technology and beyond"}),m.jsx("div",{className:"flex justify-center",children:m.jsx("a",{href:"#about",onClick:e=>{e.preventDefault();const t=document.getElementById("about");if(t){const s=t.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:s,behavior:"smooth"})}},className:"inline-flex items-center justify-center w-full sm:w-auto",children:m.jsx(wi,{variant:"primary",size:"lg",icon:"arrow-right",iconPosition:"right",className:"px-8 py-3 text-lg w-full sm:w-auto",children:"Read Latest Post"})})})]})})})]})},KI={type:"spring",duration:1.25,stiffness:100},zo=(r,e)=>({hidden:{y:r==="up"?40:r==="down"?-40:0,x:r==="left"?40:r==="right"?-40:0,opacity:0},show:{y:0,x:0,opacity:1,transition:{...KI,delay:e}}}),N1=(r,e)=>({hidden:{},show:{transition:{staggerChildren:r,delayChildren:e}}}),jo={title:"About Me & My Journey",description:`I'm Sahil Ali — a Data Analyst, Inventory Specialist, and AI Generalist who thrives on blending technology with real-world problem solving. 
  Over the past 4+ years, I've worked across retail, warehousing, and analytics, mastering tools like Excel, Tableau, SQL, and AI automation to streamline operations and deliver measurable results.
  
  Beyond my professional roles, I use this blog to share insights on data analysis, AI tools, productivity, and career growth. My goal is simple — to turn complex concepts into practical, easy-to-apply knowledge that helps others improve their work and life.`,stats:[{label:"Articles",value:"50+"},{label:"Years Experience",value:"5+"},{label:"Happy Readers",value:"10K+"}],ctaText:"Read My Story",imageUrl:"/Sahil-Ali-Portfolio/images/profile/profile.webp",imageAlt:"Sahil - AI Generalist"},$I=({id:r,className:e="",title:t=jo.title,description:n=jo.description,stats:i=jo.stats,ctaText:s=jo.ctaText,onCtaClick:a,imageUrl:o=jo.imageUrl,imageAlt:l=jo.imageAlt})=>m.jsx("section",{id:r,className:`py-12 md:py-16 bg-background ${e}`,children:m.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl",children:m.jsxs(ve.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-10 md:gap-16 items-center text-center lg:text-left",variants:N1(.1,.2),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.2},children:[o&&m.jsxs(ve.div,{className:"relative rounded-xl overflow-hidden shadow-lg max-w-[380px] mx-auto",variants:zo("right",.2),children:[m.jsx("img",{src:o,alt:l,className:"w-full h-auto object-cover aspect-square scale-100 hover:scale-105 transition-transform duration-300",loading:"lazy"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-end p-4",children:m.jsx("span",{className:"text-white text-xs",children:l})})]}),m.jsxs(ve.div,{variants:zo("left",.4),children:[m.jsx(ve.h2,{className:"text-3xl font-bold text-foreground mb-5",variants:zo("up",.3),children:t}),m.jsx(ve.p,{className:"prose dark:prose-invert max-w-2xl mx-auto lg:mx-0 text-muted-foreground mb-7 text-base leading-relaxed",variants:zo("up",.4),children:n}),m.jsx(ve.div,{className:"grid grid-cols-3 gap-4 max-w-md mx-auto lg:mx-0 mb-7",variants:N1(.1,.2),children:i.map((d,h)=>m.jsxs(ve.div,{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",variants:zo("up",.3+h*.1),whileHover:{y:-5,transition:{duration:.2}},children:[m.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:d.value}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.label})]},d.label))}),a&&m.jsxs(ve.button,{onClick:a,"aria-label":s,className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors duration-200 flex items-center",variants:zo("up",.5),whileHover:{scale:1.03},whileTap:{scale:.98},children:[s,m.jsx(mf,{className:"ml-2 w-4 h-4"})]})]})]})})}),JI=()=>{const[r,e]=B.useState(!1),t="c881c4238c235d4099256fb56a8b81e5";return B.useEffect(()=>{const n=window.matchMedia("(prefers-color-scheme: dark)"),i=s=>e(s.matches);return e(n.matches),n.addEventListener("change",i),()=>n.removeEventListener("change",i)},[]),B.useEffect(()=>{const n=document.createElement("script");return n.src="https://cdn.lightwidget.com/widgets/lightwidget.js",n.async=!0,document.body.appendChild(n),()=>{document.body.contains(n)&&document.body.removeChild(n)}},[]),m.jsx("div",{className:"w-full",children:m.jsx("iframe",{src:`//lightwidget.com/widgets/${t}.html?theme=${r?"dark":"light"}`,scrolling:"no",className:"lightwidget-widget rounded-lg shadow-sm border border-border",style:{width:"100%",border:0,overflow:"hidden",minHeight:"400px",background:"transparent"},title:"Instagram Feed"})})},QI=({id:r,className:e=""})=>{const t="Follow Me on Instagram",n="Check out my latest updates, behind-the-scenes, and more",i="hey___sahilll",s=`Follow @${i}`,a=()=>{window.open(`https://instagram.com/${i}`,"_blank")};return m.jsx("section",{id:r,className:`py-16 bg-muted/30 ${e}`,children:m.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs(ve.div,{className:"text-center mb-12",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-4",children:t}),m.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:n})]}),m.jsx(ve.div,{className:"mb-12",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:.2,duration:.6},children:m.jsx(JI,{})}),m.jsx(ve.div,{className:"text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4,duration:.6},children:m.jsx("button",{onClick:a,className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-primary-foreground bg-primary hover:bg-primary/90 md:py-4 md:text-lg md:px-8 transition-colors duration-200 transform hover:scale-105",children:s})})]})})},Xm=(r,e)=>({hidden:{y:r==="up"?40:r==="down"?-40:0,x:r==="left"?40:r==="right"?-40:0,opacity:0},show:{y:0,x:0,opacity:1,transition:{type:"spring",duration:1.25,delay:e}}}),eL=(r,e)=>({hidden:{},show:{transition:{staggerChildren:r,delayChildren:e}}}),I1=(r,e=0)=>r.toFixed(e),tL=[{id:"1",title:'"Kyun Main Jaagoon" Full Song Patiala House | Akshay Kumar',description:"Dil Hai Kahin Aur Dhadkan Hai Kahin, Saansen Hai Magar Kyun Zinda Main Nahin",thumbnailUrl:"https://i.ytimg.com/vi/lN1m7zLBbSU/hqdefault.jpg",viewCount:"150000000",publishedAt:"2023-06-10T15:30:00Z",duration:"5:34",videoUrl:"https://youtu.be/lN1m7zLBbSU?si=uvvLuxWo8MTC6kSn"},{id:"2",title:"Tune Jo Na Kaha Song | New York",description:"Tune Jo Na Kaha Song | New York",thumbnailUrl:"https://i.ytimg.com/vi/dTu5dTEzVM4/hqdefault.jpg",viewCount:"150000000",publishedAt:"2023-06-10T15:30:00Z",duration:"3:34",videoUrl:"https://youtu.be/dTu5dTEzVM4?si=dCvWSESkUA1y2KpS"},{id:"3",title:"Nishan ( Official Video ) Khushi Baliyan | Krrish Rao | 8 Saal Ka Tha Pyar",description:"Nishan ( Official Video ) Khushi Baliyan | Krrish Rao | 8 Saal Ka Tha Pyar",thumbnailUrl:"https://i.ytimg.com/vi/da5p0sMVUDI/hqdefault.jpg",viewCount:"150000000",publishedAt:"2023-06-10T15:30:00Z",duration:"4:34",videoUrl:"https://youtu.be/da5p0sMVUDI?si=AXBQUjZk16AAXK3V"}],nL=({id:r,className:e="",title:t="Latest Videos",subtitle:n="Watch my latest tutorials and tech reviews",videos:i=tL,channelName:s="King OP",channelUrl:a="https://www.youtube.com/channel/UC3sxEdd8JnaZjTdbMJd1qCA",ctaText:o="Subscribe to My Channel",onCtaClick:l=()=>{window.open("https://www.youtube.com/channel/UC3sxEdd8JnaZjTdbMJd1qCA?sub_confirmation=1","_blank")}})=>{const d=f=>{const p=parseInt(f.replace(/\D/g,""),10);return isNaN(p)?f:p>=1e6?`${I1(p/1e6,1)}M views`:p>=1e3?`${I1(p/1e3,1)}K views`:`${p} views`},h=f=>{try{return new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(p){return console.error("Error formatting date:",p),f}};return m.jsx("section",{id:r,className:`py-16 md:py-24 bg-background ${e}`,children:m.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs(ve.div,{className:"text-center mb-12",variants:Xm("up",.2),initial:"hidden",whileInView:"show",viewport:{once:!0},children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-red-500 to-red-700 text-primary-foreground mb-4",children:m.jsx(v_,{className:"w-7 h-7"})}),m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-3",children:t}),n&&m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:n})]}),m.jsx(ve.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",variants:eL(.1,.2),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.2},children:i.map((f,p)=>m.jsxs(ve.article,{className:"overflow-hidden rounded-xl shadow-lg bg-card text-card-foreground transition-all duration-300 hover:shadow-xl hover:-translate-y-1 h-full flex flex-col border border-border",variants:Xm("up",.1*p),whileHover:{y:-5},children:[m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"aspect-w-16 aspect-h-9 w-full",children:[m.jsx("img",{src:f.thumbnailUrl,alt:f.title,className:"w-full h-full object-cover",loading:"lazy"}),m.jsx("div",{className:"absolute inset-0 bg-black/30 opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:m.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center transform hover:scale-110 transition-transform",children:m.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),m.jsx("span",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded dark:bg-white/20",children:f.duration})]}),m.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2 line-clamp-2",children:f.title}),m.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-3",children:[m.jsx("span",{children:d(f.viewCount)}),m.jsx("span",{className:"mx-2",children:"•"}),m.jsx("span",{children:h(f.publishedAt)})]}),f.description&&m.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2 flex-grow",children:f.description}),m.jsxs("a",{href:f.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm font-medium text-red-600 hover:text-red-500 dark:text-red-400 dark:hover:text-red-300",children:["Watch on YouTube",m.jsx("svg",{className:"ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]},f.id))}),a&&m.jsxs(ve.div,{className:"text-center",variants:Xm("up",.4),initial:"hidden",whileInView:"show",viewport:{once:!0},children:[m.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",onClick:l,className:"group inline-flex items-center justify-center px-6 py-3 space-x-2 text-base font-medium text-white transition-all duration-200 bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transform hover:scale-105",children:[m.jsx(v_,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),m.jsx("span",{className:"group-hover:scale-105 transition-transform duration-200",children:o})]}),s&&m.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[s," • ",d("1500000")," subscribers"]})]})]})})},iL=()=>m.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-sm border border-border hover:shadow-md transition-shadow duration-300",children:[m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsx("img",{src:"/Sahil-Ali-Portfolio/images/profile/profile-300w.webp",alt:"Sahil Ali",className:"w-16 h-16 rounded-full object-cover border-2 border-primary/20",width:64,height:64,srcSet:"/Sahil-Ali-Portfolio/images/profile/profile-300w.webp 300w",sizes:"(max-width: 640px) 150px, 300px"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-foreground",children:"Sahil Ali"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Data Analyst & AI Generalist"})]})]}),m.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Helping businesses make data-driven decisions through analytics and AI solutions."}),m.jsxs("a",{href:"https://linkedin.com/in/sahil-ali-714867242/",target:"_blank",rel:"noopener noreferrer",className:"mt-4 inline-flex items-center text-sm text-primary hover:text-primary/80 transition-colors",children:["Connect on LinkedIn ",m.jsx(ws,{className:"ml-1.5",size:14})]})]}),rL=()=>m.jsxs("div",{className:"bg-primary/5 rounded-xl p-6 border border-border",children:[m.jsxs("h3",{className:"font-medium text-foreground mb-3 flex items-center",children:[m.jsx(mf,{className:"mr-2 text-primary"})," Want to know more about me?"]}),m.jsxs("div",{className:"flex flex-wrap gap-3",children:[m.jsxs(af,{href:"/about",className:"px-4 py-2 bg-card rounded-lg text-sm font-medium text-foreground hover:bg-accent transition-colors flex items-center border border-border hover:border-primary/30",children:["About Me ",m.jsx(ws,{className:"ml-1.5 opacity-70",size:14})]}),m.jsxs(af,{href:"/experience",className:"px-4 py-2 bg-card rounded-lg text-sm font-medium text-foreground hover:bg-accent transition-colors flex items-center border border-border hover:border-primary/30",children:["Experience ",m.jsx(ws,{className:"ml-1.5 opacity-70",size:14})]}),m.jsxs("a",{href:"https://linkedin.com/in/sahil-ali-714867242/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-card rounded-lg text-sm font-medium text-foreground hover:bg-accent transition-colors flex items-center border border-border hover:border-primary/30",children:["Resume ",m.jsx(ws,{className:"ml-1.5 opacity-70",size:14})]})]})]}),sL=()=>m.jsx("section",{className:"py-12 md:py-16 bg-background",children:m.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:m.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.jsx(iL,{}),m.jsx(rL,{})]})})}),aL=()=>m.jsx("section",{className:"py-12 md:py-16 bg-background",children:m.jsx("div",{className:"container mx-auto px-4 max-w-4xl",children:m.jsxs("div",{className:"bg-card rounded-xl p-8 md:p-10 shadow-sm border border-border hover:shadow-md transition-shadow duration-300",children:[m.jsxs("div",{className:"flex items-center mb-6",children:[m.jsx("div",{className:"w-1 h-8 bg-primary rounded-full mr-3"}),m.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Why I Write"})]}),m.jsxs("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:[m.jsx("p",{className:"text-muted-foreground mb-6",children:"I believe in the power of shared knowledge. Through my writing, I aim to bridge the gap between complex technical concepts and practical, actionable insights."}),m.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[{icon:"🧠",title:"Demystify",description:"Breaking down complex data concepts into understandable insights"},{icon:"🛠️",title:"Empower",description:"Providing practical tools and techniques for real-world challenges"},{icon:"🚀",title:"Inspire",description:"Encouraging continuous learning and growth in data & AI"}].map((r,e)=>m.jsxs("div",{className:"bg-muted/30 rounded-lg p-5 border border-border",children:[m.jsx("div",{className:"text-3xl mb-3",children:r.icon}),m.jsx("h3",{className:"font-semibold text-foreground mb-2",children:r.title}),m.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]},e))}),m.jsx("p",{className:"text-muted-foreground",children:"Whether you're a data professional, business leader, or tech enthusiast, I hope my writing helps you on your journey. Let's learn and grow together in this exciting field of data and AI."})]})]})})}),w2=()=>({fadeInUp:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.16,1,.3,1]}}},staggerContainer:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},hoverScale:{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}}}),oL=()=>{const r=[{id:1,title:"AI-Powered Analytics Dashboard",description:"Interactive dashboard for real-time business insights using React and D3.js",tags:["React","D3.js","Node.js","MongoDB"],projectUrl:"#"},{id:2,title:"Inventory Optimization System",description:"Machine learning model to predict optimal stock levels and reduce waste",tags:["Python","Scikit-learn","FastAPI","PostgreSQL"],projectUrl:"#"},{id:3,title:"Data Visualization Library",description:"Custom React components for creating beautiful, interactive data visualizations",tags:["TypeScript","React","D3.js","Storybook"],projectUrl:"#"}],{fadeInUp:e,staggerContainer:t,hoverScale:n}=w2();return m.jsx("section",{className:"py-12 md:py-16 bg-background",children:m.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[m.jsx(ve.h2,{className:"text-3xl font-bold text-center mb-12 text-foreground",initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:e,children:"Featured Projects"}),m.jsx(ve.div,{className:"space-y-6",initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:t,children:r.map((i,s)=>m.jsx(ve.div,{className:"group relative p-6 bg-card rounded-lg border border-border hover:border-primary/30 transition-colors duration-300",variants:e,whileHover:n,transition:{duration:.3},children:m.jsx("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:m.jsxs("div",{className:"flex-1",children:[m.jsxs("h3",{className:"text-xl font-semibold text-foreground mb-2 flex items-center",children:[i.title,m.jsx("a",{href:i.projectUrl,className:"ml-2 text-muted-foreground hover:text-primary transition-colors","aria-label":`View ${i.title}`,children:m.jsx(ws,{size:18})})]}),m.jsx("p",{className:"text-muted-foreground mb-4",children:i.description}),m.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map(a=>m.jsx("span",{className:"px-3 py-1 bg-accent/30 text-foreground/80 text-xs font-medium rounded-full",children:a},a))})]})})},i.id))})]})})},lL=()=>{const r=[{quote:"Sahil's data analysis transformed our inventory management. His insights helped us reduce waste by 25% while maintaining optimal stock levels.",author:"Sarah Johnson",role:"Operations Manager",rating:5},{quote:"Working with Sahil was a game-changer for our analytics team. His expertise in Python and data visualization helped us uncover hidden patterns in our sales data.",author:"Michael Chen",role:"Head of Analytics",rating:5},{quote:"Clear, actionable advice that's immediately applicable. Sahil makes complex topics accessible to everyone.",author:"David Kim",role:"Data Analyst",rating:5}];return m.jsx("section",{className:"py-12 md:py-16 bg-muted/30",children:m.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h2",{className:"text-3xl font-bold text-foreground mb-3",children:"What People Are Saying"}),m.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Don't just take my word for it. Here's what colleagues and clients have to say about working with me."})]}),m.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:r.map((e,t)=>m.jsxs("div",{className:"bg-card rounded-xl p-6 border border-border hover:shadow-md transition-shadow duration-300",children:[m.jsx("div",{className:"flex mb-4",children:[...Array(e.rating)].map((n,i)=>m.jsx(VA,{className:"text-yellow-400 w-5 h-5"},i))}),m.jsxs("p",{className:"text-muted-foreground italic mb-6",children:['"',e.quote,'"']}),m.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-foreground",children:e.author}),m.jsx("p",{className:"text-sm text-muted-foreground",children:e.role})]}),m.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:e.author.charAt(0)})]})]},t))})]})})},cL=()=>{const{fadeInUp:r,staggerContainer:e}=w2(),t={hero:B.useRef(null),bio:B.useRef(null),whyIWrite:B.useRef(null),about:B.useRef(null),videos:B.useRef(null),instagram:B.useRef(null),portfolio:B.useRef(null),testimonials:B.useRef(null)},n=Fs(t.hero,{once:!0,amount:.3}),i=Fs(t.bio,{once:!0,amount:.2}),s=Fs(t.whyIWrite,{once:!0,amount:.2}),a=Fs(t.about,{once:!0,amount:.2}),o=Fs(t.videos,{once:!0,amount:.2}),l=Fs(t.instagram,{once:!0,amount:.2}),d=Fs(t.portfolio,{once:!0,amount:.2}),h=Fs(t.testimonials,{once:!0,amount:.2});return m.jsxs(ve.main,{className:"w-full",initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}},exit:{opacity:0}},"aria-label":"Blog page main content",children:[m.jsx(ve.div,{ref:t.hero,variants:r,children:m.jsx(ZI,{})}),m.jsx(ve.div,{initial:{opacity:0},animate:{opacity:n?1:.3},transition:{duration:.5},children:m.jsx(Kn,{})}),m.jsx(ve.div,{ref:t.bio,variants:e,initial:"hidden",animate:i?"visible":"hidden",children:m.jsx(sL,{})}),m.jsx(ve.div,{initial:{opacity:0},animate:{opacity:i?1:.3},transition:{duration:.5},children:m.jsx(Kn,{})}),m.jsx(ve.div,{ref:t.whyIWrite,variants:e,initial:"hidden",animate:s?"visible":"hidden",children:m.jsx(aL,{})}),m.jsx(ve.div,{initial:{opacity:0},animate:{opacity:s?1:.3},transition:{duration:.5},children:m.jsx(Kn,{})}),m.jsx(ve.div,{ref:t.about,variants:e,initial:"hidden",animate:a?"visible":"hidden",children:m.jsx($I,{id:"about",className:"py-12"})}),m.jsx(ve.div,{initial:{opacity:0},animate:{opacity:a?1:.3},transition:{duration:.5},children:m.jsx(Kn,{})}),m.jsx(ve.div,{ref:t.videos,variants:e,initial:"hidden",animate:o?"visible":"hidden",children:m.jsx(nL,{id:"videos",className:"py-12"})}),m.jsx(ve.div,{initial:{opacity:0},animate:{opacity:o?1:.3},transition:{duration:.5},children:m.jsx(Kn,{})}),m.jsx(ve.div,{ref:t.instagram,variants:e,initial:"hidden",animate:l?"visible":"hidden",children:m.jsx(QI,{id:"instagram",className:"py-12"})}),m.jsx(ve.div,{initial:{opacity:0},animate:{opacity:l?1:.3},transition:{duration:.5},children:m.jsx(Kn,{})}),m.jsx(ve.div,{ref:t.portfolio,variants:e,initial:"hidden",animate:d?"visible":"hidden",children:m.jsx(oL,{})}),m.jsx(ve.div,{initial:{opacity:0},animate:{opacity:d?1:.3},transition:{duration:.5},children:m.jsx(Kn,{})}),m.jsx(ve.div,{ref:t.testimonials,variants:e,initial:"hidden",animate:h?"visible":"hidden",children:m.jsx(lL,{})})]})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const zl="157",Fa={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},za={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},S2=0,u0=1,M2=2,uL=3,E2=0,Af=1,Fc=2,wr=3,As=0,hi=1,Mr=2,dL=2,Xr=0,eo=1,of=2,d0=3,h0=4,T2=5,Ba=100,A2=101,C2=102,f0=103,p0=104,R2=200,P2=201,N2=202,I2=203,Lv=204,kv=205,L2=206,k2=207,D2=208,O2=209,U2=210,F2=0,z2=1,j2=2,lf=3,B2=4,H2=5,V2=6,G2=7,Cu=0,W2=1,X2=2,qr=0,q2=1,Y2=2,Z2=3,Dv=4,K2=5,la=300,Kr=301,ca=302,Il=303,Jc=304,jl=306,Qc=1e3,vn=1001,eu=1002,In=1003,cf=1004,hL=1004,zc=1005,fL=1005,Zt=1006,Ov=1007,pL=1007,ua=1008,m0=1008,Zi=1009,Uv=1010,Fv=1011,Cf=1012,Rf=1013,Gr=1014,Vn=1015,$n=1016,zv=1017,jv=1018,ia=1020,$2=1021,Hn=1023,J2=1024,Q2=1025,ra=1026,co=1027,Bv=1028,Hv=1029,eM=1030,Vv=1031,Gv=1033,Hh=33776,Vh=33777,Gh=33778,Wh=33779,g0=35840,v0=35841,x0=35842,y0=35843,tM=36196,_0=37492,b0=37496,w0=37808,S0=37809,M0=37810,E0=37811,T0=37812,A0=37813,C0=37814,R0=37815,P0=37816,N0=37817,I0=37818,L0=37819,k0=37820,D0=37821,Xh=36492,O0=36494,U0=36495,nM=36283,F0=36284,z0=36285,j0=36286,iM=2200,rM=2201,sM=2202,tu=2300,nu=2301,qh=2302,Ga=2400,Wa=2401,iu=2402,Pf=2500,Wv=2501,mL=0,gL=1,vL=2,Xv=3e3,sa=3001,aM=3200,oM=3201,pa=0,lM=1,Xi="",zn="srgb",Qi="srgb-linear",Nf="display-p3",Ru="display-p3-linear",ru="linear",ln="srgb",su="rec709",au="p3",xL=0,Yh=7680,yL=7681,_L=7682,bL=7683,wL=34055,SL=34056,ML=5386,EL=512,TL=513,AL=514,CL=515,RL=516,PL=517,NL=518,cM=519,uM=512,dM=513,hM=514,fM=515,pM=516,mM=517,gM=518,vM=519,ou=35044,IL=35048,LL=35040,kL=35045,DL=35049,OL=35041,UL=35046,FL=35050,zL=35042,jL="100",B0="300 es",uf=1035,Wr=2e3,lu=2001;let Cs=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}};const oi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let L1=1234567;const to=Math.PI/180,Ll=180/Math.PI;function Ki(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(oi[r&255]+oi[r>>8&255]+oi[r>>16&255]+oi[r>>24&255]+"-"+oi[e&255]+oi[e>>8&255]+"-"+oi[e>>16&15|64]+oi[e>>24&255]+"-"+oi[t&63|128]+oi[t>>8&255]+"-"+oi[t>>16&255]+oi[t>>24&255]+oi[n&255]+oi[n>>8&255]+oi[n>>16&255]+oi[n>>24&255]).toLowerCase()}function En(r,e,t){return Math.max(e,Math.min(t,r))}function qv(r,e){return(r%e+e)%e}function BL(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function HL(r,e,t){return r!==e?(t-r)/(e-r):0}function jc(r,e,t){return(1-t)*r+t*e}function VL(r,e,t,n){return jc(r,e,1-Math.exp(-t*n))}function GL(r,e=1){return e-Math.abs(qv(r,e*2)-e)}function WL(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function XL(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function qL(r,e){return r+Math.floor(Math.random()*(e-r+1))}function YL(r,e){return r+Math.random()*(e-r)}function ZL(r){return r*(.5-Math.random())}function KL(r){r!==void 0&&(L1=r);let e=L1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function $L(r){return r*to}function JL(r){return r*Ll}function H0(r){return(r&r-1)===0&&r!==0}function xM(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function df(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function QL(r,e,t,n,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),d=s((e+n)/2),h=a((e+n)/2),f=s((e-n)/2),p=a((e-n)/2),g=s((n-e)/2),y=a((n-e)/2);switch(i){case"XYX":r.set(o*h,l*f,l*p,o*d);break;case"YZY":r.set(l*p,o*h,l*f,o*d);break;case"ZXZ":r.set(l*f,l*p,o*h,o*d);break;case"XZX":r.set(o*h,l*y,l*g,o*d);break;case"YXY":r.set(l*g,o*h,l*y,o*d);break;case"ZYZ":r.set(l*y,l*g,o*h,o*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ri(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Pt(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const e4={DEG2RAD:to,RAD2DEG:Ll,generateUUID:Ki,clamp:En,euclideanModulo:qv,mapLinear:BL,inverseLerp:HL,lerp:jc,damp:VL,pingpong:GL,smoothstep:WL,smootherstep:XL,randInt:qL,randFloat:YL,randFloatSpread:ZL,seededRandom:KL,degToRad:$L,radToDeg:JL,isPowerOfTwo:H0,ceilPowerOfTwo:xM,floorPowerOfTwo:df,setQuaternionFromProperEuler:QL,normalize:Pt,denormalize:Ri};class Se{constructor(e=0,t=0){Se.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(En(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*i+e.x,this.y=s*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Lt{constructor(e,t,n,i,s,a,o,l,d){Lt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,o,l,d)}set(e,t,n,i,s,a,o,l,d){const h=this.elements;return h[0]=e,h[1]=i,h[2]=o,h[3]=t,h[4]=s,h[5]=l,h[6]=n,h[7]=a,h[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],d=n[1],h=n[4],f=n[7],p=n[2],g=n[5],y=n[8],b=i[0],_=i[3],x=i[6],M=i[1],S=i[4],E=i[7],T=i[2],P=i[5],I=i[8];return s[0]=a*b+o*M+l*T,s[3]=a*_+o*S+l*P,s[6]=a*x+o*E+l*I,s[1]=d*b+h*M+f*T,s[4]=d*_+h*S+f*P,s[7]=d*x+h*E+f*I,s[2]=p*b+g*M+y*T,s[5]=p*_+g*S+y*P,s[8]=p*x+g*E+y*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],d=e[7],h=e[8];return t*a*h-t*o*d-n*s*h+n*o*l+i*s*d-i*a*l}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],d=e[7],h=e[8],f=h*a-o*d,p=o*l-h*s,g=d*s-a*l,y=t*f+n*p+i*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/y;return e[0]=f*b,e[1]=(i*d-h*n)*b,e[2]=(o*n-i*a)*b,e[3]=p*b,e[4]=(h*t-i*l)*b,e[5]=(i*s-o*t)*b,e[6]=g*b,e[7]=(n*l-d*t)*b,e[8]=(a*t-n*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,a,o){const l=Math.cos(s),d=Math.sin(s);return this.set(n*l,n*d,-n*(l*a+d*o)+a+e,-i*d,i*l,-i*(-d*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(qm.makeScale(e,t)),this}rotate(e){return this.premultiply(qm.makeRotation(-e)),this}translate(e,t){return this.premultiply(qm.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const qm=new Lt;function yM(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const t4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function pl(r,e){return new t4[r](e)}function cu(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function _M(){const r=cu("canvas");return r.style.display="block",r}const k1={};function Bc(r){r in k1||(k1[r]=!0,console.warn(r))}const D1=new Lt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),O1=new Lt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Xd={[Qi]:{transfer:ru,primaries:su,toReference:r=>r,fromReference:r=>r},[zn]:{transfer:ln,primaries:su,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[Ru]:{transfer:ru,primaries:au,toReference:r=>r.applyMatrix3(O1),fromReference:r=>r.applyMatrix3(D1)},[Nf]:{transfer:ln,primaries:au,toReference:r=>r.convertSRGBToLinear().applyMatrix3(O1),fromReference:r=>r.applyMatrix3(D1).convertLinearToSRGB()}},n4=new Set([Qi,Ru]),Jt={enabled:!0,_workingColorSpace:Qi,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(r){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!r},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!n4.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=Xd[e].toReference,i=Xd[t].fromReference;return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return Xd[r].primaries},getTransfer:function(r){return r===Xi?ru:Xd[r].transfer}};function Sl(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Ym(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Bo;class Yv{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Bo===void 0&&(Bo=cu("canvas")),Bo.width=e.width,Bo.height=e.height;const n=Bo.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Bo}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=cu("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Sl(s[a]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Sl(t[n]/255)*255):t[n]=Sl(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let i4=0;class Xa{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:i4++}),this.uuid=Ki(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(Zm(i[a].image)):s.push(Zm(i[a]))}else s=Zm(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function Zm(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?Yv.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let r4=0;class an extends Cs{constructor(e=an.DEFAULT_IMAGE,t=an.DEFAULT_MAPPING,n=vn,i=vn,s=Zt,a=ua,o=Hn,l=Zi,d=an.DEFAULT_ANISOTROPY,h=Xi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:r4++}),this.uuid=Ki(),this.name="",this.source=new Xa(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Se(0,0),this.repeat=new Se(1,1),this.center=new Se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Bc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===sa?zn:Xi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==la)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qc:e.x=e.x-Math.floor(e.x);break;case vn:e.x=e.x<0?0:1;break;case eu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Qc:e.y=e.y-Math.floor(e.y);break;case vn:e.y=e.y<0?0:1;break;case eu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Bc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===zn?sa:Xv}set encoding(e){Bc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===sa?zn:Xi}}an.DEFAULT_IMAGE=null;an.DEFAULT_MAPPING=la;an.DEFAULT_ANISOTROPY=1;class Qt{constructor(e=0,t=0,n=0,i=1){Qt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const l=e.elements,d=l[0],h=l[4],f=l[8],p=l[1],g=l[5],y=l[9],b=l[2],_=l[6],x=l[10];if(Math.abs(h-p)<.01&&Math.abs(f-b)<.01&&Math.abs(y-_)<.01){if(Math.abs(h+p)<.1&&Math.abs(f+b)<.1&&Math.abs(y+_)<.1&&Math.abs(d+g+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(d+1)/2,E=(g+1)/2,T=(x+1)/2,P=(h+p)/4,I=(f+b)/4,k=(y+_)/4;return S>E&&S>T?S<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(S),i=P/n,s=I/n):E>T?E<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),n=P/i,s=k/i):T<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(T),n=I/s,i=k/s),this.set(n,i,s,t),this}let M=Math.sqrt((_-y)*(_-y)+(f-b)*(f-b)+(p-h)*(p-h));return Math.abs(M)<.001&&(M=1),this.x=(_-y)/M,this.y=(f-b)/M,this.z=(p-h)/M,this.w=Math.acos((d+g+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bM extends Cs{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Qt(0,0,e,t),this.scissorTest=!1,this.viewport=new Qt(0,0,e,t);const i={width:e,height:t,depth:1};n.encoding!==void 0&&(Bc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===sa?zn:Xi),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Zt,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new an(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Xa(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class er extends bM{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class If extends an{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=In,this.minFilter=In,this.wrapR=vn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class s4 extends er{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new If(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Zv extends an{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=In,this.minFilter=In,this.wrapR=vn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class a4 extends er{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Zv(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class o4 extends er{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class fi{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,a,o){let l=n[i+0],d=n[i+1],h=n[i+2],f=n[i+3];const p=s[a+0],g=s[a+1],y=s[a+2],b=s[a+3];if(o===0){e[t+0]=l,e[t+1]=d,e[t+2]=h,e[t+3]=f;return}if(o===1){e[t+0]=p,e[t+1]=g,e[t+2]=y,e[t+3]=b;return}if(f!==b||l!==p||d!==g||h!==y){let _=1-o;const x=l*p+d*g+h*y+f*b,M=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){const T=Math.sqrt(S),P=Math.atan2(T,x*M);_=Math.sin(_*P)/T,o=Math.sin(o*P)/T}const E=o*M;if(l=l*_+p*E,d=d*_+g*E,h=h*_+y*E,f=f*_+b*E,_===1-o){const T=1/Math.sqrt(l*l+d*d+h*h+f*f);l*=T,d*=T,h*=T,f*=T}}e[t]=l,e[t+1]=d,e[t+2]=h,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,i,s,a){const o=n[i],l=n[i+1],d=n[i+2],h=n[i+3],f=s[a],p=s[a+1],g=s[a+2],y=s[a+3];return e[t]=o*y+h*f+l*g-d*p,e[t+1]=l*y+h*p+d*f-o*g,e[t+2]=d*y+h*g+o*p-l*f,e[t+3]=h*y-o*f-l*p-d*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,d=o(n/2),h=o(i/2),f=o(s/2),p=l(n/2),g=l(i/2),y=l(s/2);switch(a){case"XYZ":this._x=p*h*f+d*g*y,this._y=d*g*f-p*h*y,this._z=d*h*y+p*g*f,this._w=d*h*f-p*g*y;break;case"YXZ":this._x=p*h*f+d*g*y,this._y=d*g*f-p*h*y,this._z=d*h*y-p*g*f,this._w=d*h*f+p*g*y;break;case"ZXY":this._x=p*h*f-d*g*y,this._y=d*g*f+p*h*y,this._z=d*h*y+p*g*f,this._w=d*h*f-p*g*y;break;case"ZYX":this._x=p*h*f-d*g*y,this._y=d*g*f+p*h*y,this._z=d*h*y-p*g*f,this._w=d*h*f+p*g*y;break;case"YZX":this._x=p*h*f+d*g*y,this._y=d*g*f+p*h*y,this._z=d*h*y-p*g*f,this._w=d*h*f-p*g*y;break;case"XZY":this._x=p*h*f-d*g*y,this._y=d*g*f-p*h*y,this._z=d*h*y+p*g*f,this._w=d*h*f+p*g*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],d=t[2],h=t[6],f=t[10],p=n+o+f;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(h-l)*g,this._y=(s-d)*g,this._z=(a-i)*g}else if(n>o&&n>f){const g=2*Math.sqrt(1+n-o-f);this._w=(h-l)/g,this._x=.25*g,this._y=(i+a)/g,this._z=(s+d)/g}else if(o>f){const g=2*Math.sqrt(1+o-n-f);this._w=(s-d)/g,this._x=(i+a)/g,this._y=.25*g,this._z=(l+h)/g}else{const g=2*Math.sqrt(1+f-n-o);this._w=(a-i)/g,this._x=(s+d)/g,this._y=(l+h)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(En(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,d=t._z,h=t._w;return this._x=n*h+a*o+i*d-s*l,this._y=i*h+a*l+s*o-n*d,this._z=s*h+a*d+n*l-i*o,this._w=a*h-n*o-i*l-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const g=1-t;return this._w=g*a+t*this._w,this._x=g*n+t*this._x,this._y=g*i+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(l),h=Math.atan2(d,o),f=Math.sin((1-t)*h)/d,p=Math.sin(t*h)/d;return this._w=a*f+this._w*p,this._x=n*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(s),n*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,n=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(U1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(U1.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,d=l*t+a*i-o*n,h=l*n+o*t-s*i,f=l*i+s*n-a*t,p=-s*t-a*n-o*i;return this.x=d*l+p*-s+h*-o-f*-a,this.y=h*l+p*-a+f*-s-d*-o,this.z=f*l+p*-o+d*-a-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-n*l,this.z=n*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Km.copy(this).projectOnVector(e),this.sub(Km)}reflect(e){return this.sub(Km.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(En(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Km=new j,U1=new fi;class $r{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ds.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ds.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ds.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Ho.copy(e.boundingBox),Ho.applyMatrix4(e.matrixWorld),this.union(Ho);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let a=0,o=s.count;a<o;a++)ds.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(ds)}else i.boundingBox===null&&i.computeBoundingBox(),Ho.copy(i.boundingBox),Ho.applyMatrix4(e.matrixWorld),this.union(Ho)}const n=e.children;for(let i=0,s=n.length;i<s;i++)this.expandByObject(n[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ds),ds.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(mc),qd.subVectors(this.max,mc),Vo.subVectors(e.a,mc),Go.subVectors(e.b,mc),Wo.subVectors(e.c,mc),Bs.subVectors(Go,Vo),Hs.subVectors(Wo,Go),Ca.subVectors(Vo,Wo);let t=[0,-Bs.z,Bs.y,0,-Hs.z,Hs.y,0,-Ca.z,Ca.y,Bs.z,0,-Bs.x,Hs.z,0,-Hs.x,Ca.z,0,-Ca.x,-Bs.y,Bs.x,0,-Hs.y,Hs.x,0,-Ca.y,Ca.x,0];return!$m(t,Vo,Go,Wo,qd)||(t=[1,0,0,0,1,0,0,0,1],!$m(t,Vo,Go,Wo,qd))?!1:(Yd.crossVectors(Bs,Hs),t=[Yd.x,Yd.y,Yd.z],$m(t,Vo,Go,Wo,qd))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ds).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ds).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(us[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),us[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),us[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),us[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),us[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),us[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),us[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),us[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(us),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const us=[new j,new j,new j,new j,new j,new j,new j,new j],ds=new j,Ho=new $r,Vo=new j,Go=new j,Wo=new j,Bs=new j,Hs=new j,Ca=new j,mc=new j,qd=new j,Yd=new j,Ra=new j;function $m(r,e,t,n,i){for(let s=0,a=r.length-3;s<=a;s+=3){Ra.fromArray(r,s);const o=i.x*Math.abs(Ra.x)+i.y*Math.abs(Ra.y)+i.z*Math.abs(Ra.z),l=e.dot(Ra),d=t.dot(Ra),h=n.dot(Ra);if(Math.max(-Math.max(l,d,h),Math.min(l,d,h))>o)return!1}return!0}const l4=new $r,gc=new j,Jm=new j;class Tr{constructor(e=new j,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):l4.setFromPoints(e).getCenter(n);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;gc.subVectors(e,this.center);const t=gc.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(gc,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Jm.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(gc.copy(e.center).add(Jm)),this.expandByPoint(gc.copy(e.center).sub(Jm))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const hs=new j,Qm=new j,Zd=new j,Vs=new j,eg=new j,Kd=new j,tg=new j;class go{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,hs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=hs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(hs.copy(this.origin).addScaledVector(this.direction,t),hs.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Qm.copy(e).add(t).multiplyScalar(.5),Zd.copy(t).sub(e).normalize(),Vs.copy(this.origin).sub(Qm);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Zd),o=Vs.dot(this.direction),l=-Vs.dot(Zd),d=Vs.lengthSq(),h=Math.abs(1-a*a);let f,p,g,y;if(h>0)if(f=a*l-o,p=a*o-l,y=s*h,f>=0)if(p>=-y)if(p<=y){const b=1/h;f*=b,p*=b,g=f*(f+a*p+2*o)+p*(a*f+p+2*l)+d}else p=s,f=Math.max(0,-(a*p+o)),g=-f*f+p*(p+2*l)+d;else p=-s,f=Math.max(0,-(a*p+o)),g=-f*f+p*(p+2*l)+d;else p<=-y?(f=Math.max(0,-(-a*s+o)),p=f>0?-s:Math.min(Math.max(-s,-l),s),g=-f*f+p*(p+2*l)+d):p<=y?(f=0,p=Math.min(Math.max(-s,-l),s),g=p*(p+2*l)+d):(f=Math.max(0,-(a*s+o)),p=f>0?s:Math.min(Math.max(-s,-l),s),g=-f*f+p*(p+2*l)+d);else p=a>0?-s:s,f=Math.max(0,-(a*p+o)),g=-f*f+p*(p+2*l)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(Qm).addScaledVector(Zd,p),g}intersectSphere(e,t){hs.subVectors(e.center,this.origin);const n=hs.dot(this.direction),i=hs.dot(hs)-n*n,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,a,o,l;const d=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return d>=0?(n=(e.min.x-p.x)*d,i=(e.max.x-p.x)*d):(n=(e.max.x-p.x)*d,i=(e.min.x-p.x)*d),h>=0?(s=(e.min.y-p.y)*h,a=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,a=(e.min.y-p.y)*h),n>a||s>i||((s>n||isNaN(n))&&(n=s),(a<i||isNaN(i))&&(i=a),f>=0?(o=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(o=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),n>l||o>i)||((o>n||n!==n)&&(n=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,hs)!==null}intersectTriangle(e,t,n,i,s){eg.subVectors(t,e),Kd.subVectors(n,e),tg.crossVectors(eg,Kd);let a=this.direction.dot(tg),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Vs.subVectors(this.origin,e);const l=o*this.direction.dot(Kd.crossVectors(Vs,Kd));if(l<0)return null;const d=o*this.direction.dot(eg.cross(Vs));if(d<0||l+d>a)return null;const h=-o*Vs.dot(tg);return h<0?null:this.at(h/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Tt{constructor(e,t,n,i,s,a,o,l,d,h,f,p,g,y,b,_){Tt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,o,l,d,h,f,p,g,y,b,_)}set(e,t,n,i,s,a,o,l,d,h,f,p,g,y,b,_){const x=this.elements;return x[0]=e,x[4]=t,x[8]=n,x[12]=i,x[1]=s,x[5]=a,x[9]=o,x[13]=l,x[2]=d,x[6]=h,x[10]=f,x[14]=p,x[3]=g,x[7]=y,x[11]=b,x[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Tt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Xo.setFromMatrixColumn(e,0).length(),s=1/Xo.setFromMatrixColumn(e,1).length(),a=1/Xo.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(i),d=Math.sin(i),h=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=a*h,g=a*f,y=o*h,b=o*f;t[0]=l*h,t[4]=-l*f,t[8]=d,t[1]=g+y*d,t[5]=p-b*d,t[9]=-o*l,t[2]=b-p*d,t[6]=y+g*d,t[10]=a*l}else if(e.order==="YXZ"){const p=l*h,g=l*f,y=d*h,b=d*f;t[0]=p+b*o,t[4]=y*o-g,t[8]=a*d,t[1]=a*f,t[5]=a*h,t[9]=-o,t[2]=g*o-y,t[6]=b+p*o,t[10]=a*l}else if(e.order==="ZXY"){const p=l*h,g=l*f,y=d*h,b=d*f;t[0]=p-b*o,t[4]=-a*f,t[8]=y+g*o,t[1]=g+y*o,t[5]=a*h,t[9]=b-p*o,t[2]=-a*d,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const p=a*h,g=a*f,y=o*h,b=o*f;t[0]=l*h,t[4]=y*d-g,t[8]=p*d+b,t[1]=l*f,t[5]=b*d+p,t[9]=g*d-y,t[2]=-d,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const p=a*l,g=a*d,y=o*l,b=o*d;t[0]=l*h,t[4]=b-p*f,t[8]=y*f+g,t[1]=f,t[5]=a*h,t[9]=-o*h,t[2]=-d*h,t[6]=g*f+y,t[10]=p-b*f}else if(e.order==="XZY"){const p=a*l,g=a*d,y=o*l,b=o*d;t[0]=l*h,t[4]=-f,t[8]=d*h,t[1]=p*f+b,t[5]=a*h,t[9]=g*f-y,t[2]=y*f-g,t[6]=o*h,t[10]=b*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(c4,e,u4)}lookAt(e,t,n){const i=this.elements;return Bi.subVectors(e,t),Bi.lengthSq()===0&&(Bi.z=1),Bi.normalize(),Gs.crossVectors(n,Bi),Gs.lengthSq()===0&&(Math.abs(n.z)===1?Bi.x+=1e-4:Bi.z+=1e-4,Bi.normalize(),Gs.crossVectors(n,Bi)),Gs.normalize(),$d.crossVectors(Bi,Gs),i[0]=Gs.x,i[4]=$d.x,i[8]=Bi.x,i[1]=Gs.y,i[5]=$d.y,i[9]=Bi.y,i[2]=Gs.z,i[6]=$d.z,i[10]=Bi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],d=n[12],h=n[1],f=n[5],p=n[9],g=n[13],y=n[2],b=n[6],_=n[10],x=n[14],M=n[3],S=n[7],E=n[11],T=n[15],P=i[0],I=i[4],k=i[8],R=i[12],L=i[1],F=i[5],W=i[9],J=i[13],z=i[2],Q=i[6],ne=i[10],oe=i[14],te=i[3],ie=i[7],ee=i[11],Z=i[15];return s[0]=a*P+o*L+l*z+d*te,s[4]=a*I+o*F+l*Q+d*ie,s[8]=a*k+o*W+l*ne+d*ee,s[12]=a*R+o*J+l*oe+d*Z,s[1]=h*P+f*L+p*z+g*te,s[5]=h*I+f*F+p*Q+g*ie,s[9]=h*k+f*W+p*ne+g*ee,s[13]=h*R+f*J+p*oe+g*Z,s[2]=y*P+b*L+_*z+x*te,s[6]=y*I+b*F+_*Q+x*ie,s[10]=y*k+b*W+_*ne+x*ee,s[14]=y*R+b*J+_*oe+x*Z,s[3]=M*P+S*L+E*z+T*te,s[7]=M*I+S*F+E*Q+T*ie,s[11]=M*k+S*W+E*ne+T*ee,s[15]=M*R+S*J+E*oe+T*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],d=e[13],h=e[2],f=e[6],p=e[10],g=e[14],y=e[3],b=e[7],_=e[11],x=e[15];return y*(+s*l*f-i*d*f-s*o*p+n*d*p+i*o*g-n*l*g)+b*(+t*l*g-t*d*p+s*a*p-i*a*g+i*d*h-s*l*h)+_*(+t*d*f-t*o*g-s*a*f+n*a*g+s*o*h-n*d*h)+x*(-i*o*h-t*l*f+t*o*p+i*a*f-n*a*p+n*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],d=e[7],h=e[8],f=e[9],p=e[10],g=e[11],y=e[12],b=e[13],_=e[14],x=e[15],M=f*_*d-b*p*d+b*l*g-o*_*g-f*l*x+o*p*x,S=y*p*d-h*_*d-y*l*g+a*_*g+h*l*x-a*p*x,E=h*b*d-y*f*d+y*o*g-a*b*g-h*o*x+a*f*x,T=y*f*l-h*b*l-y*o*p+a*b*p+h*o*_-a*f*_,P=t*M+n*S+i*E+s*T;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/P;return e[0]=M*I,e[1]=(b*p*s-f*_*s-b*i*g+n*_*g+f*i*x-n*p*x)*I,e[2]=(o*_*s-b*l*s+b*i*d-n*_*d-o*i*x+n*l*x)*I,e[3]=(f*l*s-o*p*s-f*i*d+n*p*d+o*i*g-n*l*g)*I,e[4]=S*I,e[5]=(h*_*s-y*p*s+y*i*g-t*_*g-h*i*x+t*p*x)*I,e[6]=(y*l*s-a*_*s-y*i*d+t*_*d+a*i*x-t*l*x)*I,e[7]=(a*p*s-h*l*s+h*i*d-t*p*d-a*i*g+t*l*g)*I,e[8]=E*I,e[9]=(y*f*s-h*b*s-y*n*g+t*b*g+h*n*x-t*f*x)*I,e[10]=(a*b*s-y*o*s+y*n*d-t*b*d-a*n*x+t*o*x)*I,e[11]=(h*o*s-a*f*s-h*n*d+t*f*d+a*n*g-t*o*g)*I,e[12]=T*I,e[13]=(h*b*i-y*f*i+y*n*p-t*b*p-h*n*_+t*f*_)*I,e[14]=(y*o*i-a*b*i-y*n*l+t*b*l+a*n*_-t*o*_)*I,e[15]=(a*f*i-h*o*i+h*n*l-t*f*l-a*n*p+t*o*p)*I,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,d=s*a,h=s*o;return this.set(d*a+n,d*o-i*l,d*l+i*o,0,d*o+i*l,h*o+n,h*l-i*a,0,d*l-i*o,h*l+i*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,a){return this.set(1,n,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,d=s+s,h=a+a,f=o+o,p=s*d,g=s*h,y=s*f,b=a*h,_=a*f,x=o*f,M=l*d,S=l*h,E=l*f,T=n.x,P=n.y,I=n.z;return i[0]=(1-(b+x))*T,i[1]=(g+E)*T,i[2]=(y-S)*T,i[3]=0,i[4]=(g-E)*P,i[5]=(1-(p+x))*P,i[6]=(_+M)*P,i[7]=0,i[8]=(y+S)*I,i[9]=(_-M)*I,i[10]=(1-(p+b))*I,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Xo.set(i[0],i[1],i[2]).length();const a=Xo.set(i[4],i[5],i[6]).length(),o=Xo.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],yr.copy(this);const d=1/s,h=1/a,f=1/o;return yr.elements[0]*=d,yr.elements[1]*=d,yr.elements[2]*=d,yr.elements[4]*=h,yr.elements[5]*=h,yr.elements[6]*=h,yr.elements[8]*=f,yr.elements[9]*=f,yr.elements[10]*=f,t.setFromRotationMatrix(yr),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,i,s,a,o=Wr){const l=this.elements,d=2*s/(t-e),h=2*s/(n-i),f=(t+e)/(t-e),p=(n+i)/(n-i);let g,y;if(o===Wr)g=-(a+s)/(a-s),y=-2*a*s/(a-s);else if(o===lu)g=-a/(a-s),y=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=d,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,s,a,o=Wr){const l=this.elements,d=1/(t-e),h=1/(n-i),f=1/(a-s),p=(t+e)*d,g=(n+i)*h;let y,b;if(o===Wr)y=(a+s)*f,b=-2*f;else if(o===lu)y=s*f,b=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*d,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=b,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Xo=new j,yr=new Tt,c4=new j(0,0,0),u4=new j(1,1,1),Gs=new j,$d=new j,Bi=new j,F1=new Tt,z1=new fi;class Pu{constructor(e=0,t=0,n=0,i=Pu.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],d=i[5],h=i[9],f=i[2],p=i[6],g=i[10];switch(t){case"XYZ":this._y=Math.asin(En(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,g),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(p,d),this._z=0);break;case"YXZ":this._x=Math.asin(-En(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,g),this._z=Math.atan2(l,d)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(En(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-En(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(En(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,d),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,g));break;case"XZY":this._z=Math.asin(-En(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,d),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-h,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return F1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(F1,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return z1.setFromEuler(this),this.setFromQuaternion(z1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Pu.DEFAULT_ORDER="XYZ";class no{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let d4=0;const j1=new j,qo=new fi,fs=new Tt,Jd=new j,vc=new j,h4=new j,f4=new fi,B1=new j(1,0,0),H1=new j(0,1,0),V1=new j(0,0,1),p4={type:"added"},m4={type:"removed"};class qt extends Cs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:d4++}),this.uuid=Ki(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qt.DEFAULT_UP.clone();const e=new j,t=new Pu,n=new fi,i=new j(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Tt},normalMatrix:{value:new Lt}}),this.matrix=new Tt,this.matrixWorld=new Tt,this.matrixAutoUpdate=qt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new no,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qo.setFromAxisAngle(e,t),this.quaternion.multiply(qo),this}rotateOnWorldAxis(e,t){return qo.setFromAxisAngle(e,t),this.quaternion.premultiply(qo),this}rotateX(e){return this.rotateOnAxis(B1,e)}rotateY(e){return this.rotateOnAxis(H1,e)}rotateZ(e){return this.rotateOnAxis(V1,e)}translateOnAxis(e,t){return j1.copy(e).applyQuaternion(this.quaternion),this.position.add(j1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(B1,e)}translateY(e){return this.translateOnAxis(H1,e)}translateZ(e){return this.translateOnAxis(V1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(fs.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Jd.copy(e):Jd.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),vc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fs.lookAt(vc,Jd,this.up):fs.lookAt(Jd,vc,this.up),this.quaternion.setFromRotationMatrix(fs),i&&(fs.extractRotation(i.matrixWorld),qo.setFromRotationMatrix(fs),this.quaternion.premultiply(qo.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(p4)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(m4)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),fs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),fs.multiply(e.parent.matrixWorld)),e.applyMatrix4(fs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,s=this.children.length;i<s;i++){const a=this.children[i].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vc,e,h4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vc,f4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++){const o=i[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let d=0,h=l.length;d<h;d++){const f=l[d];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,d=this.material.length;l<d;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),d=a(e.textures),h=a(e.images),f=a(e.shapes),p=a(e.skeletons),g=a(e.animations),y=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),d.length>0&&(n.textures=d),h.length>0&&(n.images=h),f.length>0&&(n.shapes=f),p.length>0&&(n.skeletons=p),g.length>0&&(n.animations=g),y.length>0&&(n.nodes=y)}return n.object=i,n;function a(o){const l=[];for(const d in o){const h=o[d];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}qt.DEFAULT_UP=new j(0,1,0);qt.DEFAULT_MATRIX_AUTO_UPDATE=!0;qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _r=new j,ps=new j,ng=new j,ms=new j,Yo=new j,Zo=new j,G1=new j,ig=new j,rg=new j,sg=new j;let Qd=!1;class Ci{constructor(e=new j,t=new j,n=new j){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),_r.subVectors(e,t),i.cross(_r);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){_r.subVectors(i,t),ps.subVectors(n,t),ng.subVectors(e,t);const a=_r.dot(_r),o=_r.dot(ps),l=_r.dot(ng),d=ps.dot(ps),h=ps.dot(ng),f=a*d-o*o;if(f===0)return s.set(-2,-1,-1);const p=1/f,g=(d*l-o*h)*p,y=(a*h-o*l)*p;return s.set(1-g-y,y,g)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,ms),ms.x>=0&&ms.y>=0&&ms.x+ms.y<=1}static getUV(e,t,n,i,s,a,o,l){return Qd===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Qd=!0),this.getInterpolation(e,t,n,i,s,a,o,l)}static getInterpolation(e,t,n,i,s,a,o,l){return this.getBarycoord(e,t,n,i,ms),l.setScalar(0),l.addScaledVector(s,ms.x),l.addScaledVector(a,ms.y),l.addScaledVector(o,ms.z),l}static isFrontFacing(e,t,n,i){return _r.subVectors(n,t),ps.subVectors(e,t),_r.cross(ps).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _r.subVectors(this.c,this.b),ps.subVectors(this.a,this.b),_r.cross(ps).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ci.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ci.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,s){return Qd===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Qd=!0),Ci.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}getInterpolation(e,t,n,i,s){return Ci.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Ci.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ci.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let a,o;Yo.subVectors(i,n),Zo.subVectors(s,n),ig.subVectors(e,n);const l=Yo.dot(ig),d=Zo.dot(ig);if(l<=0&&d<=0)return t.copy(n);rg.subVectors(e,i);const h=Yo.dot(rg),f=Zo.dot(rg);if(h>=0&&f<=h)return t.copy(i);const p=l*f-h*d;if(p<=0&&l>=0&&h<=0)return a=l/(l-h),t.copy(n).addScaledVector(Yo,a);sg.subVectors(e,s);const g=Yo.dot(sg),y=Zo.dot(sg);if(y>=0&&g<=y)return t.copy(s);const b=g*d-l*y;if(b<=0&&d>=0&&y<=0)return o=d/(d-y),t.copy(n).addScaledVector(Zo,o);const _=h*y-g*f;if(_<=0&&f-h>=0&&g-y>=0)return G1.subVectors(s,i),o=(f-h)/(f-h+(g-y)),t.copy(i).addScaledVector(G1,o);const x=1/(_+b+p);return a=b*x,o=p*x,t.copy(n).addScaledVector(Yo,a).addScaledVector(Zo,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let g4=0;class pi extends Cs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:g4++}),this.uuid=Ki(),this.name="",this.type="Material",this.blending=eo,this.side=As,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Lv,this.blendDst=kv,this.blendEquation=Ba,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=lf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=cM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yh,this.stencilZFail=Yh,this.stencilZPass=Yh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==eo&&(n.blending=this.blending),this.side!==As&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const wM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ws={h:0,s:0,l:0},eh={h:0,s:0,l:0};function ag(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class rt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=zn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jt.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Jt.workingColorSpace){return this.r=e,this.g=t,this.b=n,Jt.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Jt.workingColorSpace){if(e=qv(e,1),t=En(t,0,1),n=En(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=ag(a,s,e+1/3),this.g=ag(a,s,e),this.b=ag(a,s,e-1/3)}return Jt.toWorkingColorSpace(this,i),this}setStyle(e,t=zn){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=zn){const n=wM[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sl(e.r),this.g=Sl(e.g),this.b=Sl(e.b),this}copyLinearToSRGB(e){return this.r=Ym(e.r),this.g=Ym(e.g),this.b=Ym(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=zn){return Jt.fromWorkingColorSpace(li.copy(this),e),Math.round(En(li.r*255,0,255))*65536+Math.round(En(li.g*255,0,255))*256+Math.round(En(li.b*255,0,255))}getHexString(e=zn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jt.workingColorSpace){Jt.fromWorkingColorSpace(li.copy(this),t);const n=li.r,i=li.g,s=li.b,a=Math.max(n,i,s),o=Math.min(n,i,s);let l,d;const h=(o+a)/2;if(o===a)l=0,d=0;else{const f=a-o;switch(d=h<=.5?f/(a+o):f/(2-a-o),a){case n:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-n)/f+2;break;case s:l=(n-i)/f+4;break}l/=6}return e.h=l,e.s=d,e.l=h,e}getRGB(e,t=Jt.workingColorSpace){return Jt.fromWorkingColorSpace(li.copy(this),t),e.r=li.r,e.g=li.g,e.b=li.b,e}getStyle(e=zn){Jt.fromWorkingColorSpace(li.copy(this),e);const t=li.r,n=li.g,i=li.b;return e!==zn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Ws),this.setHSL(Ws.h+e,Ws.s+t,Ws.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ws),e.getHSL(eh);const n=jc(Ws.h,eh.h,t),i=jc(Ws.s,eh.s,t),s=jc(Ws.l,eh.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const li=new rt;rt.NAMES=wM;class Rs extends pi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const bs=v4();function v4(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const d=l-127;d<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):d<-14?(n[l]=1024>>-d-14,n[l|256]=1024>>-d-14|32768,i[l]=-d-1,i[l|256]=-d-1):d<=15?(n[l]=d+15<<10,n[l|256]=d+15<<10|32768,i[l]=13,i[l|256]=13):d<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let d=l<<13,h=0;for(;!(d&8388608);)d<<=1,h-=8388608;d&=-8388609,h+=947912704,s[l]=d|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function Ai(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=En(r,-65504,65504),bs.floatView[0]=r;const e=bs.uint32View[0],t=e>>23&511;return bs.baseTable[t]+((e&8388607)>>bs.shiftTable[t])}function Nc(r){const e=r>>10;return bs.uint32View[0]=bs.mantissaTable[bs.offsetTable[e]+(r&1023)]+bs.exponentTable[e],bs.floatView[0]}const qa={toHalfFloat:Ai,fromHalfFloat:Nc},On=new j,th=new Se;class en{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=ou,this.updateRange={offset:0,count:-1},this.gpuType=Vn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)th.fromBufferAttribute(this,t),th.applyMatrix3(e),this.setXY(t,th.x,th.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)On.fromBufferAttribute(this,t),On.applyMatrix3(e),this.setXYZ(t,On.x,On.y,On.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)On.fromBufferAttribute(this,t),On.applyMatrix4(e),this.setXYZ(t,On.x,On.y,On.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)On.fromBufferAttribute(this,t),On.applyNormalMatrix(e),this.setXYZ(t,On.x,On.y,On.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)On.fromBufferAttribute(this,t),On.transformDirection(e),this.setXYZ(t,On.x,On.y,On.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ri(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Pt(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ri(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ri(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ri(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ri(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array),i=Pt(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array),i=Pt(i,this.array),s=Pt(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ou&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class x4 extends en{constructor(e,t,n){super(new Int8Array(e),t,n)}}class y4 extends en{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class _4 extends en{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class b4 extends en{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Kv extends en{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class w4 extends en{constructor(e,t,n){super(new Int32Array(e),t,n)}}class $v extends en{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class S4 extends en{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Nc(this.array[e*this.itemSize]);return this.normalized&&(t=Ri(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize]=Ai(t),this}getY(e){let t=Nc(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ri(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+1]=Ai(t),this}getZ(e){let t=Nc(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ri(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+2]=Ai(t),this}getW(e){let t=Nc(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ri(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.array[e*this.itemSize+3]=Ai(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array)),this.array[e+0]=Ai(t),this.array[e+1]=Ai(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array),i=Pt(i,this.array)),this.array[e+0]=Ai(t),this.array[e+1]=Ai(n),this.array[e+2]=Ai(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array),i=Pt(i,this.array),s=Pt(s,this.array)),this.array[e+0]=Ai(t),this.array[e+1]=Ai(n),this.array[e+2]=Ai(i),this.array[e+3]=Ai(s),this}}class ot extends en{constructor(e,t,n){super(new Float32Array(e),t,n)}}class M4 extends en{constructor(e,t,n){super(new Float64Array(e),t,n)}}let E4=0;const cr=new Tt,og=new qt,Ko=new j,Hi=new $r,xc=new $r,Zn=new j;class Dt extends Cs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:E4++}),this.uuid=Ki(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(yM(e)?$v:Kv)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Lt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return cr.makeRotationFromQuaternion(e),this.applyMatrix4(cr),this}rotateX(e){return cr.makeRotationX(e),this.applyMatrix4(cr),this}rotateY(e){return cr.makeRotationY(e),this.applyMatrix4(cr),this}rotateZ(e){return cr.makeRotationZ(e),this.applyMatrix4(cr),this}translate(e,t,n){return cr.makeTranslation(e,t,n),this.applyMatrix4(cr),this}scale(e,t,n){return cr.makeScale(e,t,n),this.applyMatrix4(cr),this}lookAt(e){return og.lookAt(e),og.updateMatrix(),this.applyMatrix4(og.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ko).negate(),this.translate(Ko.x,Ko.y,Ko.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $r);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Hi.setFromBufferAttribute(s),this.morphTargetsRelative?(Zn.addVectors(this.boundingBox.min,Hi.min),this.boundingBox.expandByPoint(Zn),Zn.addVectors(this.boundingBox.max,Hi.max),this.boundingBox.expandByPoint(Zn)):(this.boundingBox.expandByPoint(Hi.min),this.boundingBox.expandByPoint(Hi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Tr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new j,1/0);return}if(e){const n=this.boundingSphere.center;if(Hi.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];xc.setFromBufferAttribute(o),this.morphTargetsRelative?(Zn.addVectors(Hi.min,xc.min),Hi.expandByPoint(Zn),Zn.addVectors(Hi.max,xc.max),Hi.expandByPoint(Zn)):(Hi.expandByPoint(xc.min),Hi.expandByPoint(xc.max))}Hi.getCenter(n);let i=0;for(let s=0,a=e.count;s<a;s++)Zn.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Zn));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let d=0,h=o.count;d<h;d++)Zn.fromBufferAttribute(o,d),l&&(Ko.fromBufferAttribute(e,d),Zn.add(Ko)),i=Math.max(i,n.distanceToSquared(Zn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,s=t.normal.array,a=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new en(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,d=[],h=[];for(let L=0;L<o;L++)d[L]=new j,h[L]=new j;const f=new j,p=new j,g=new j,y=new Se,b=new Se,_=new Se,x=new j,M=new j;function S(L,F,W){f.fromArray(i,L*3),p.fromArray(i,F*3),g.fromArray(i,W*3),y.fromArray(a,L*2),b.fromArray(a,F*2),_.fromArray(a,W*2),p.sub(f),g.sub(f),b.sub(y),_.sub(y);const J=1/(b.x*_.y-_.x*b.y);isFinite(J)&&(x.copy(p).multiplyScalar(_.y).addScaledVector(g,-b.y).multiplyScalar(J),M.copy(g).multiplyScalar(b.x).addScaledVector(p,-_.x).multiplyScalar(J),d[L].add(x),d[F].add(x),d[W].add(x),h[L].add(M),h[F].add(M),h[W].add(M))}let E=this.groups;E.length===0&&(E=[{start:0,count:n.length}]);for(let L=0,F=E.length;L<F;++L){const W=E[L],J=W.start,z=W.count;for(let Q=J,ne=J+z;Q<ne;Q+=3)S(n[Q+0],n[Q+1],n[Q+2])}const T=new j,P=new j,I=new j,k=new j;function R(L){I.fromArray(s,L*3),k.copy(I);const F=d[L];T.copy(F),T.sub(I.multiplyScalar(I.dot(F))).normalize(),P.crossVectors(k,F);const J=P.dot(h[L])<0?-1:1;l[L*4]=T.x,l[L*4+1]=T.y,l[L*4+2]=T.z,l[L*4+3]=J}for(let L=0,F=E.length;L<F;++L){const W=E[L],J=W.start,z=W.count;for(let Q=J,ne=J+z;Q<ne;Q+=3)R(n[Q+0]),R(n[Q+1]),R(n[Q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new en(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let p=0,g=n.count;p<g;p++)n.setXYZ(p,0,0,0);const i=new j,s=new j,a=new j,o=new j,l=new j,d=new j,h=new j,f=new j;if(e)for(let p=0,g=e.count;p<g;p+=3){const y=e.getX(p+0),b=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(t,y),s.fromBufferAttribute(t,b),a.fromBufferAttribute(t,_),h.subVectors(a,s),f.subVectors(i,s),h.cross(f),o.fromBufferAttribute(n,y),l.fromBufferAttribute(n,b),d.fromBufferAttribute(n,_),o.add(h),l.add(h),d.add(h),n.setXYZ(y,o.x,o.y,o.z),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(_,d.x,d.y,d.z)}else for(let p=0,g=t.count;p<g;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),a.fromBufferAttribute(t,p+2),h.subVectors(a,s),f.subVectors(i,s),h.cross(f),n.setXYZ(p+0,h.x,h.y,h.z),n.setXYZ(p+1,h.x,h.y,h.z),n.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Zn.fromBufferAttribute(e,t),Zn.normalize(),e.setXYZ(t,Zn.x,Zn.y,Zn.z)}toNonIndexed(){function e(o,l){const d=o.array,h=o.itemSize,f=o.normalized,p=new d.constructor(l.length*h);let g=0,y=0;for(let b=0,_=l.length;b<_;b++){o.isInterleavedBufferAttribute?g=l[b]*o.data.stride+o.offset:g=l[b]*h;for(let x=0;x<h;x++)p[y++]=d[g++]}return new en(p,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Dt,n=this.index.array,i=this.attributes;for(const o in i){const l=i[o],d=e(l,n);t.setAttribute(o,d)}const s=this.morphAttributes;for(const o in s){const l=[],d=s[o];for(let h=0,f=d.length;h<f;h++){const p=d[h],g=e(p,n);l.push(g)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const d=a[o];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const d in l)l[d]!==void 0&&(e[d]=l[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const d=n[l];e.data.attributes[l]=d.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const d=this.morphAttributes[l],h=[];for(let f=0,p=d.length;f<p;f++){const g=d[f];h.push(g.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const d in i){const h=i[d];this.setAttribute(d,h.clone(t))}const s=e.morphAttributes;for(const d in s){const h=[],f=s[d];for(let p=0,g=f.length;p<g;p++)h.push(f[p].clone(t));this.morphAttributes[d]=h}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let d=0,h=a.length;d<h;d++){const f=a[d];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const W1=new Tt,Pa=new go,nh=new Tr,X1=new j,$o=new j,Jo=new j,Qo=new j,lg=new j,ih=new j,rh=new Se,sh=new Se,ah=new Se,q1=new j,Y1=new j,Z1=new j,oh=new j,lh=new j;class jn extends qt{constructor(e=new Dt,t=new Rs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){ih.set(0,0,0);for(let l=0,d=s.length;l<d;l++){const h=o[l],f=s[l];h!==0&&(lg.fromBufferAttribute(f,e),a?ih.addScaledVector(lg,h):ih.addScaledVector(lg.sub(t),h))}t.add(ih)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),nh.copy(n.boundingSphere),nh.applyMatrix4(s),Pa.copy(e.ray).recast(e.near),!(nh.containsPoint(Pa.origin)===!1&&(Pa.intersectSphere(nh,X1)===null||Pa.origin.distanceToSquared(X1)>(e.far-e.near)**2))&&(W1.copy(s).invert(),Pa.copy(e.ray).applyMatrix4(W1),!(n.boundingBox!==null&&Pa.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Pa)))}_computeIntersections(e,t,n){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,d=s.attributes.uv,h=s.attributes.uv1,f=s.attributes.normal,p=s.groups,g=s.drawRange;if(o!==null)if(Array.isArray(a))for(let y=0,b=p.length;y<b;y++){const _=p[y],x=a[_.materialIndex],M=Math.max(_.start,g.start),S=Math.min(o.count,Math.min(_.start+_.count,g.start+g.count));for(let E=M,T=S;E<T;E+=3){const P=o.getX(E),I=o.getX(E+1),k=o.getX(E+2);i=ch(this,x,e,n,d,h,f,P,I,k),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const y=Math.max(0,g.start),b=Math.min(o.count,g.start+g.count);for(let _=y,x=b;_<x;_+=3){const M=o.getX(_),S=o.getX(_+1),E=o.getX(_+2);i=ch(this,a,e,n,d,h,f,M,S,E),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let y=0,b=p.length;y<b;y++){const _=p[y],x=a[_.materialIndex],M=Math.max(_.start,g.start),S=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let E=M,T=S;E<T;E+=3){const P=E,I=E+1,k=E+2;i=ch(this,x,e,n,d,h,f,P,I,k),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const y=Math.max(0,g.start),b=Math.min(l.count,g.start+g.count);for(let _=y,x=b;_<x;_+=3){const M=_,S=_+1,E=_+2;i=ch(this,a,e,n,d,h,f,M,S,E),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function T4(r,e,t,n,i,s,a,o){let l;if(e.side===hi?l=n.intersectTriangle(a,s,i,!0,o):l=n.intersectTriangle(i,s,a,e.side===As,o),l===null)return null;lh.copy(o),lh.applyMatrix4(r.matrixWorld);const d=t.ray.origin.distanceTo(lh);return d<t.near||d>t.far?null:{distance:d,point:lh.clone(),object:r}}function ch(r,e,t,n,i,s,a,o,l,d){r.getVertexPosition(o,$o),r.getVertexPosition(l,Jo),r.getVertexPosition(d,Qo);const h=T4(r,e,t,n,$o,Jo,Qo,oh);if(h){i&&(rh.fromBufferAttribute(i,o),sh.fromBufferAttribute(i,l),ah.fromBufferAttribute(i,d),h.uv=Ci.getInterpolation(oh,$o,Jo,Qo,rh,sh,ah,new Se)),s&&(rh.fromBufferAttribute(s,o),sh.fromBufferAttribute(s,l),ah.fromBufferAttribute(s,d),h.uv1=Ci.getInterpolation(oh,$o,Jo,Qo,rh,sh,ah,new Se),h.uv2=h.uv1),a&&(q1.fromBufferAttribute(a,o),Y1.fromBufferAttribute(a,l),Z1.fromBufferAttribute(a,d),h.normal=Ci.getInterpolation(oh,$o,Jo,Qo,q1,Y1,Z1,new j),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const f={a:o,b:l,c:d,normal:new j,materialIndex:0};Ci.getNormal($o,Jo,Qo,f.normal),h.face=f}return h}class vo extends Dt{constructor(e=1,t=1,n=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],d=[],h=[],f=[];let p=0,g=0;y("z","y","x",-1,-1,n,t,e,a,s,0),y("z","y","x",1,-1,n,t,-e,a,s,1),y("x","z","y",1,1,e,n,t,i,a,2),y("x","z","y",1,-1,e,n,-t,i,a,3),y("x","y","z",1,-1,e,t,n,i,s,4),y("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(l),this.setAttribute("position",new ot(d,3)),this.setAttribute("normal",new ot(h,3)),this.setAttribute("uv",new ot(f,2));function y(b,_,x,M,S,E,T,P,I,k,R){const L=E/I,F=T/k,W=E/2,J=T/2,z=P/2,Q=I+1,ne=k+1;let oe=0,te=0;const ie=new j;for(let ee=0;ee<ne;ee++){const Z=ee*F-J;for(let re=0;re<Q;re++){const pe=re*L-W;ie[b]=pe*M,ie[_]=Z*S,ie[x]=z,d.push(ie.x,ie.y,ie.z),ie[b]=0,ie[_]=0,ie[x]=P>0?1:-1,h.push(ie.x,ie.y,ie.z),f.push(re/I),f.push(1-ee/k),oe+=1}}for(let ee=0;ee<k;ee++)for(let Z=0;Z<I;Z++){const re=p+Z+Q*ee,pe=p+Z+Q*(ee+1),Ee=p+(Z+1)+Q*(ee+1),Le=p+(Z+1)+Q*ee;l.push(re,pe,Le),l.push(pe,Ee,Le),te+=6}o.addGroup(g,te,R),g+=te,p+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kl(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function _i(r){const e={};for(let t=0;t<r.length;t++){const n=kl(r[t]);for(const i in n)e[i]=n[i]}return e}function A4(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function SM(r){return r.getRenderTarget()===null?r.outputColorSpace:Jt.workingColorSpace}const MM={clone:kl,merge:_i};var C4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,R4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Oi extends pi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=C4,this.fragmentShader=R4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kl(e.uniforms),this.uniformsGroups=A4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Nu extends qt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Tt,this.projectionMatrix=new Tt,this.projectionMatrixInverse=new Tt,this.coordinateSystem=Wr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ln extends Nu{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ll*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(to*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ll*2*Math.atan(Math.tan(to*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(to*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,d=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*n/d,i*=a.width/l,n*=a.height/d}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const el=-90,tl=1;class EM extends qt{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ln(el,tl,e,t);i.layers=this.layers,this.add(i);const s=new Ln(el,tl,e,t);s.layers=this.layers,this.add(s);const a=new Ln(el,tl,e,t);a.layers=this.layers,this.add(a);const o=new Ln(el,tl,e,t);o.layers=this.layers,this.add(o);const l=new Ln(el,tl,e,t);l.layers=this.layers,this.add(l);const d=new Ln(el,tl,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,a,o,l]=t;for(const d of t)this.remove(d);if(e===Wr)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===lu)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,d,h]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const b=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,o),e.setRenderTarget(n,3,i),e.render(t,l),e.setRenderTarget(n,4,i),e.render(t,d),n.texture.generateMipmaps=b,e.setRenderTarget(n,5,i),e.render(t,h),e.setRenderTarget(f,p,g),e.xr.enabled=y,n.texture.needsPMREMUpdate=!0}}class Iu extends an{constructor(e,t,n,i,s,a,o,l,d,h){e=e!==void 0?e:[],t=t!==void 0?t:Kr,super(e,t,n,i,s,a,o,l,d,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Jv extends er{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];t.encoding!==void 0&&(Bc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===sa?zn:Xi),this.texture=new Iu(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Zt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new vo(5,5,5),s=new Oi({name:"CubemapFromEquirect",uniforms:kl(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:hi,blending:Xr});s.uniforms.tEquirect.value=t;const a=new jn(i,s),o=t.minFilter;return t.minFilter===ua&&(t.minFilter=Zt),new EM(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(s)}}const cg=new j,P4=new j,N4=new Lt;class _s{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=cg.subVectors(n,t).cross(P4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(cg),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||N4.getNormalMatrix(e),i=this.coplanarPoint(cg).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Na=new Tr,uh=new j;class Lf{constructor(e=new _s,t=new _s,n=new _s,i=new _s,s=new _s,a=new _s){this.planes=[e,t,n,i,s,a]}set(e,t,n,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Wr){const n=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],d=i[4],h=i[5],f=i[6],p=i[7],g=i[8],y=i[9],b=i[10],_=i[11],x=i[12],M=i[13],S=i[14],E=i[15];if(n[0].setComponents(l-s,p-d,_-g,E-x).normalize(),n[1].setComponents(l+s,p+d,_+g,E+x).normalize(),n[2].setComponents(l+a,p+h,_+y,E+M).normalize(),n[3].setComponents(l-a,p-h,_-y,E-M).normalize(),n[4].setComponents(l-o,p-f,_-b,E-S).normalize(),t===Wr)n[5].setComponents(l+o,p+f,_+b,E+S).normalize();else if(t===lu)n[5].setComponents(o,f,b,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Na.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Na.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Na)}intersectsSprite(e){return Na.center.set(0,0,0),Na.radius=.7071067811865476,Na.applyMatrix4(e.matrixWorld),this.intersectsSphere(Na)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(uh.x=i.normal.x>0?e.max.x:e.min.x,uh.y=i.normal.y>0?e.max.y:e.min.y,uh.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(uh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function TM(){let r=null,e=!1,t=null,n=null;function i(s,a){t(s,a),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function I4(r,e){const t=e.isWebGL2,n=new WeakMap;function i(d,h){const f=d.array,p=d.usage,g=r.createBuffer();r.bindBuffer(h,g),r.bufferData(h,f,p),d.onUploadCallback();let y;if(f instanceof Float32Array)y=r.FLOAT;else if(f instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)y=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=r.UNSIGNED_SHORT;else if(f instanceof Int16Array)y=r.SHORT;else if(f instanceof Uint32Array)y=r.UNSIGNED_INT;else if(f instanceof Int32Array)y=r.INT;else if(f instanceof Int8Array)y=r.BYTE;else if(f instanceof Uint8Array)y=r.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)y=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:g,type:y,bytesPerElement:f.BYTES_PER_ELEMENT,version:d.version}}function s(d,h,f){const p=h.array,g=h.updateRange;r.bindBuffer(f,d),g.count===-1?r.bufferSubData(f,0,p):(t?r.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):r.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1),h.onUploadCallback()}function a(d){return d.isInterleavedBufferAttribute&&(d=d.data),n.get(d)}function o(d){d.isInterleavedBufferAttribute&&(d=d.data);const h=n.get(d);h&&(r.deleteBuffer(h.buffer),n.delete(d))}function l(d,h){if(d.isGLBufferAttribute){const p=n.get(d);(!p||p.version<d.version)&&n.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const f=n.get(d);f===void 0?n.set(d,i(d,h)):f.version<d.version&&(s(f.buffer,d,h),f.version=d.version)}return{get:a,remove:o,update:l}}class xo extends Dt{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(i),d=o+1,h=l+1,f=e/o,p=t/l,g=[],y=[],b=[],_=[];for(let x=0;x<h;x++){const M=x*p-a;for(let S=0;S<d;S++){const E=S*f-s;y.push(E,-M,0),b.push(0,0,1),_.push(S/o),_.push(1-x/l)}}for(let x=0;x<l;x++)for(let M=0;M<o;M++){const S=M+d*x,E=M+d*(x+1),T=M+1+d*(x+1),P=M+1+d*x;g.push(S,E,P),g.push(E,T,P)}this.setIndex(g),this.setAttribute("position",new ot(y,3)),this.setAttribute("normal",new ot(b,3)),this.setAttribute("uv",new ot(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xo(e.width,e.height,e.widthSegments,e.heightSegments)}}var L4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,k4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,D4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,O4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,U4=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,F4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,z4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,j4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,B4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,H4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,V4=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,G4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,W4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,X4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,q4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Y4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Z4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,K4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,J4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Q4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,ek=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,tk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nk=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ik=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,sk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ak=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ok="gl_FragColor = linearToOutputTexel( gl_FragColor );",lk=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,ck=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,uk=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dk=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,hk=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,fk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,pk=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mk=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,gk=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,vk=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,xk=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,yk=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,_k=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bk=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wk=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Sk=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Mk=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ek=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Tk=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Ak=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ck=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Rk=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,Pk=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Nk=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal;
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Ik=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Lk=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,kk=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Dk=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ok=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Uk=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Fk=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,zk=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,jk=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Bk=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Hk=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Vk=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Gk=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Wk=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Xk=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,qk=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Yk=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Zk=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Kk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$k=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Jk=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Qk=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,eD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,tD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,nD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iD=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,rD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,sD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,aD=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,lD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,cD=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,uD=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,dD=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,hD=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,fD=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,pD=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,mD=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,gD=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,vD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,xD=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,yD=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_D=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,bD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,wD=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,SD=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,MD=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,ED=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,TD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,AD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,RD=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const PD=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ND=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ID=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,LD=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,DD=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OD=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,UD=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,FD=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zD=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,jD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,BD=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HD=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,VD=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GD=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,WD=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XD=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qD=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YD=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ZD=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KD=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$D=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,JD=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QD=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,t5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n5=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i5=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r5=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,s5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,a5=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o5=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,l5=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,c5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Rt={alphahash_fragment:L4,alphahash_pars_fragment:k4,alphamap_fragment:D4,alphamap_pars_fragment:O4,alphatest_fragment:U4,alphatest_pars_fragment:F4,aomap_fragment:z4,aomap_pars_fragment:j4,begin_vertex:B4,beginnormal_vertex:H4,bsdfs:V4,iridescence_fragment:G4,bumpmap_pars_fragment:W4,clipping_planes_fragment:X4,clipping_planes_pars_fragment:q4,clipping_planes_pars_vertex:Y4,clipping_planes_vertex:Z4,color_fragment:K4,color_pars_fragment:$4,color_pars_vertex:J4,color_vertex:Q4,common:ek,cube_uv_reflection_fragment:tk,defaultnormal_vertex:nk,displacementmap_pars_vertex:ik,displacementmap_vertex:rk,emissivemap_fragment:sk,emissivemap_pars_fragment:ak,colorspace_fragment:ok,colorspace_pars_fragment:lk,envmap_fragment:ck,envmap_common_pars_fragment:uk,envmap_pars_fragment:dk,envmap_pars_vertex:hk,envmap_physical_pars_fragment:Mk,envmap_vertex:fk,fog_vertex:pk,fog_pars_vertex:mk,fog_fragment:gk,fog_pars_fragment:vk,gradientmap_pars_fragment:xk,lightmap_fragment:yk,lightmap_pars_fragment:_k,lights_lambert_fragment:bk,lights_lambert_pars_fragment:wk,lights_pars_begin:Sk,lights_toon_fragment:Ek,lights_toon_pars_fragment:Tk,lights_phong_fragment:Ak,lights_phong_pars_fragment:Ck,lights_physical_fragment:Rk,lights_physical_pars_fragment:Pk,lights_fragment_begin:Nk,lights_fragment_maps:Ik,lights_fragment_end:Lk,logdepthbuf_fragment:kk,logdepthbuf_pars_fragment:Dk,logdepthbuf_pars_vertex:Ok,logdepthbuf_vertex:Uk,map_fragment:Fk,map_pars_fragment:zk,map_particle_fragment:jk,map_particle_pars_fragment:Bk,metalnessmap_fragment:Hk,metalnessmap_pars_fragment:Vk,morphcolor_vertex:Gk,morphnormal_vertex:Wk,morphtarget_pars_vertex:Xk,morphtarget_vertex:qk,normal_fragment_begin:Yk,normal_fragment_maps:Zk,normal_pars_fragment:Kk,normal_pars_vertex:$k,normal_vertex:Jk,normalmap_pars_fragment:Qk,clearcoat_normal_fragment_begin:eD,clearcoat_normal_fragment_maps:tD,clearcoat_pars_fragment:nD,iridescence_pars_fragment:iD,opaque_fragment:rD,packing:sD,premultiplied_alpha_fragment:aD,project_vertex:oD,dithering_fragment:lD,dithering_pars_fragment:cD,roughnessmap_fragment:uD,roughnessmap_pars_fragment:dD,shadowmap_pars_fragment:hD,shadowmap_pars_vertex:fD,shadowmap_vertex:pD,shadowmask_pars_fragment:mD,skinbase_vertex:gD,skinning_pars_vertex:vD,skinning_vertex:xD,skinnormal_vertex:yD,specularmap_fragment:_D,specularmap_pars_fragment:bD,tonemapping_fragment:wD,tonemapping_pars_fragment:SD,transmission_fragment:MD,transmission_pars_fragment:ED,uv_pars_fragment:TD,uv_pars_vertex:AD,uv_vertex:CD,worldpos_vertex:RD,background_vert:PD,background_frag:ND,backgroundCube_vert:ID,backgroundCube_frag:LD,cube_vert:kD,cube_frag:DD,depth_vert:OD,depth_frag:UD,distanceRGBA_vert:FD,distanceRGBA_frag:zD,equirect_vert:jD,equirect_frag:BD,linedashed_vert:HD,linedashed_frag:VD,meshbasic_vert:GD,meshbasic_frag:WD,meshlambert_vert:XD,meshlambert_frag:qD,meshmatcap_vert:YD,meshmatcap_frag:ZD,meshnormal_vert:KD,meshnormal_frag:$D,meshphong_vert:JD,meshphong_frag:QD,meshphysical_vert:e5,meshphysical_frag:t5,meshtoon_vert:n5,meshtoon_frag:i5,points_vert:r5,points_frag:s5,shadow_vert:a5,shadow_frag:o5,sprite_vert:l5,sprite_frag:c5},Ge={common:{diffuse:{value:new rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Lt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Lt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Lt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Lt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Lt},normalScale:{value:new Se(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Lt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Lt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Lt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Lt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0},uvTransform:{value:new Lt}},sprite:{diffuse:{value:new rt(16777215)},opacity:{value:1},center:{value:new Se(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}}},Sr={basic:{uniforms:_i([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.fog]),vertexShader:Rt.meshbasic_vert,fragmentShader:Rt.meshbasic_frag},lambert:{uniforms:_i([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new rt(0)}}]),vertexShader:Rt.meshlambert_vert,fragmentShader:Rt.meshlambert_frag},phong:{uniforms:_i([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new rt(0)},specular:{value:new rt(1118481)},shininess:{value:30}}]),vertexShader:Rt.meshphong_vert,fragmentShader:Rt.meshphong_frag},standard:{uniforms:_i([Ge.common,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.roughnessmap,Ge.metalnessmap,Ge.fog,Ge.lights,{emissive:{value:new rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rt.meshphysical_vert,fragmentShader:Rt.meshphysical_frag},toon:{uniforms:_i([Ge.common,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.gradientmap,Ge.fog,Ge.lights,{emissive:{value:new rt(0)}}]),vertexShader:Rt.meshtoon_vert,fragmentShader:Rt.meshtoon_frag},matcap:{uniforms:_i([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,{matcap:{value:null}}]),vertexShader:Rt.meshmatcap_vert,fragmentShader:Rt.meshmatcap_frag},points:{uniforms:_i([Ge.points,Ge.fog]),vertexShader:Rt.points_vert,fragmentShader:Rt.points_frag},dashed:{uniforms:_i([Ge.common,Ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rt.linedashed_vert,fragmentShader:Rt.linedashed_frag},depth:{uniforms:_i([Ge.common,Ge.displacementmap]),vertexShader:Rt.depth_vert,fragmentShader:Rt.depth_frag},normal:{uniforms:_i([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,{opacity:{value:1}}]),vertexShader:Rt.meshnormal_vert,fragmentShader:Rt.meshnormal_frag},sprite:{uniforms:_i([Ge.sprite,Ge.fog]),vertexShader:Rt.sprite_vert,fragmentShader:Rt.sprite_frag},background:{uniforms:{uvTransform:{value:new Lt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Rt.background_vert,fragmentShader:Rt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Rt.backgroundCube_vert,fragmentShader:Rt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rt.cube_vert,fragmentShader:Rt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Rt.equirect_vert,fragmentShader:Rt.equirect_frag},distanceRGBA:{uniforms:_i([Ge.common,Ge.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Rt.distanceRGBA_vert,fragmentShader:Rt.distanceRGBA_frag},shadow:{uniforms:_i([Ge.lights,Ge.fog,{color:{value:new rt(0)},opacity:{value:1}}]),vertexShader:Rt.shadow_vert,fragmentShader:Rt.shadow_frag}};Sr.physical={uniforms:_i([Sr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Lt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Lt},clearcoatNormalScale:{value:new Se(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Lt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Lt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Lt},sheen:{value:0},sheenColor:{value:new rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Lt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Lt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Lt},transmissionSamplerSize:{value:new Se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Lt},attenuationDistance:{value:0},attenuationColor:{value:new rt(0)},specularColor:{value:new rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Lt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Lt},anisotropyVector:{value:new Se},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Lt}}]),vertexShader:Rt.meshphysical_vert,fragmentShader:Rt.meshphysical_frag};const dh={r:0,b:0,g:0};function u5(r,e,t,n,i,s,a){const o=new rt(0);let l=s===!0?0:1,d,h,f=null,p=0,g=null;function y(_,x){let M=!1,S=x.isScene===!0?x.background:null;S&&S.isTexture&&(S=(x.backgroundBlurriness>0?t:e).get(S)),S===null?b(o,l):S&&S.isColor&&(b(S,1),M=!0);const E=r.xr.getEnvironmentBlendMode();E==="additive"?n.buffers.color.setClear(0,0,0,1,a):E==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(r.autoClear||M)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),S&&(S.isCubeTexture||S.mapping===jl)?(h===void 0&&(h=new jn(new vo(1,1,1),new Oi({name:"BackgroundCubeMaterial",uniforms:kl(Sr.backgroundCube.uniforms),vertexShader:Sr.backgroundCube.vertexShader,fragmentShader:Sr.backgroundCube.fragmentShader,side:hi,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(T,P,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=S,h.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,h.material.toneMapped=Jt.getTransfer(S.colorSpace)!==ln,(f!==S||p!==S.version||g!==r.toneMapping)&&(h.material.needsUpdate=!0,f=S,p=S.version,g=r.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null)):S&&S.isTexture&&(d===void 0&&(d=new jn(new xo(2,2),new Oi({name:"BackgroundMaterial",uniforms:kl(Sr.background.uniforms),vertexShader:Sr.background.vertexShader,fragmentShader:Sr.background.fragmentShader,side:As,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=S,d.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,d.material.toneMapped=Jt.getTransfer(S.colorSpace)!==ln,S.matrixAutoUpdate===!0&&S.updateMatrix(),d.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||p!==S.version||g!==r.toneMapping)&&(d.material.needsUpdate=!0,f=S,p=S.version,g=r.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null))}function b(_,x){_.getRGB(dh,SM(r)),n.buffers.color.setClear(dh.r,dh.g,dh.b,x,a)}return{getClearColor:function(){return o},setClearColor:function(_,x=1){o.set(_),l=x,b(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,b(o,l)},render:y}}function d5(r,e,t,n){const i=r.getParameter(r.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),a=n.isWebGL2||s!==null,o={},l=_(null);let d=l,h=!1;function f(z,Q,ne,oe,te){let ie=!1;if(a){const ee=b(oe,ne,Q);d!==ee&&(d=ee,g(d.object)),ie=x(z,oe,ne,te),ie&&M(z,oe,ne,te)}else{const ee=Q.wireframe===!0;(d.geometry!==oe.id||d.program!==ne.id||d.wireframe!==ee)&&(d.geometry=oe.id,d.program=ne.id,d.wireframe=ee,ie=!0)}te!==null&&t.update(te,r.ELEMENT_ARRAY_BUFFER),(ie||h)&&(h=!1,k(z,Q,ne,oe),te!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(te).buffer))}function p(){return n.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function g(z){return n.isWebGL2?r.bindVertexArray(z):s.bindVertexArrayOES(z)}function y(z){return n.isWebGL2?r.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function b(z,Q,ne){const oe=ne.wireframe===!0;let te=o[z.id];te===void 0&&(te={},o[z.id]=te);let ie=te[Q.id];ie===void 0&&(ie={},te[Q.id]=ie);let ee=ie[oe];return ee===void 0&&(ee=_(p()),ie[oe]=ee),ee}function _(z){const Q=[],ne=[],oe=[];for(let te=0;te<i;te++)Q[te]=0,ne[te]=0,oe[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:ne,attributeDivisors:oe,object:z,attributes:{},index:null}}function x(z,Q,ne,oe){const te=d.attributes,ie=Q.attributes;let ee=0;const Z=ne.getAttributes();for(const re in Z)if(Z[re].location>=0){const Ee=te[re];let Le=ie[re];if(Le===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(Le=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(Le=z.instanceColor)),Ee===void 0||Ee.attribute!==Le||Le&&Ee.data!==Le.data)return!0;ee++}return d.attributesNum!==ee||d.index!==oe}function M(z,Q,ne,oe){const te={},ie=Q.attributes;let ee=0;const Z=ne.getAttributes();for(const re in Z)if(Z[re].location>=0){let Ee=ie[re];Ee===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(Ee=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(Ee=z.instanceColor));const Le={};Le.attribute=Ee,Ee&&Ee.data&&(Le.data=Ee.data),te[re]=Le,ee++}d.attributes=te,d.attributesNum=ee,d.index=oe}function S(){const z=d.newAttributes;for(let Q=0,ne=z.length;Q<ne;Q++)z[Q]=0}function E(z){T(z,0)}function T(z,Q){const ne=d.newAttributes,oe=d.enabledAttributes,te=d.attributeDivisors;ne[z]=1,oe[z]===0&&(r.enableVertexAttribArray(z),oe[z]=1),te[z]!==Q&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,Q),te[z]=Q)}function P(){const z=d.newAttributes,Q=d.enabledAttributes;for(let ne=0,oe=Q.length;ne<oe;ne++)Q[ne]!==z[ne]&&(r.disableVertexAttribArray(ne),Q[ne]=0)}function I(z,Q,ne,oe,te,ie,ee){ee===!0?r.vertexAttribIPointer(z,Q,ne,te,ie):r.vertexAttribPointer(z,Q,ne,oe,te,ie)}function k(z,Q,ne,oe){if(n.isWebGL2===!1&&(z.isInstancedMesh||oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const te=oe.attributes,ie=ne.getAttributes(),ee=Q.defaultAttributeValues;for(const Z in ie){const re=ie[Z];if(re.location>=0){let pe=te[Z];if(pe===void 0&&(Z==="instanceMatrix"&&z.instanceMatrix&&(pe=z.instanceMatrix),Z==="instanceColor"&&z.instanceColor&&(pe=z.instanceColor)),pe!==void 0){const Ee=pe.normalized,Le=pe.itemSize,ke=t.get(pe);if(ke===void 0)continue;const je=ke.buffer,Qe=ke.type,nt=ke.bytesPerElement,Ot=n.isWebGL2===!0&&(Qe===r.INT||Qe===r.UNSIGNED_INT||pe.gpuType===Rf);if(pe.isInterleavedBufferAttribute){const We=pe.data,K=We.stride,Ce=pe.offset;if(We.isInstancedInterleavedBuffer){for(let be=0;be<re.locationSize;be++)T(re.location+be,We.meshPerAttribute);z.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=We.meshPerAttribute*We.count)}else for(let be=0;be<re.locationSize;be++)E(re.location+be);r.bindBuffer(r.ARRAY_BUFFER,je);for(let be=0;be<re.locationSize;be++)I(re.location+be,Le/re.locationSize,Qe,Ee,K*nt,(Ce+Le/re.locationSize*be)*nt,Ot)}else{if(pe.isInstancedBufferAttribute){for(let We=0;We<re.locationSize;We++)T(re.location+We,pe.meshPerAttribute);z.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let We=0;We<re.locationSize;We++)E(re.location+We);r.bindBuffer(r.ARRAY_BUFFER,je);for(let We=0;We<re.locationSize;We++)I(re.location+We,Le/re.locationSize,Qe,Ee,Le*nt,Le/re.locationSize*We*nt,Ot)}}else if(ee!==void 0){const Ee=ee[Z];if(Ee!==void 0)switch(Ee.length){case 2:r.vertexAttrib2fv(re.location,Ee);break;case 3:r.vertexAttrib3fv(re.location,Ee);break;case 4:r.vertexAttrib4fv(re.location,Ee);break;default:r.vertexAttrib1fv(re.location,Ee)}}}}P()}function R(){W();for(const z in o){const Q=o[z];for(const ne in Q){const oe=Q[ne];for(const te in oe)y(oe[te].object),delete oe[te];delete Q[ne]}delete o[z]}}function L(z){if(o[z.id]===void 0)return;const Q=o[z.id];for(const ne in Q){const oe=Q[ne];for(const te in oe)y(oe[te].object),delete oe[te];delete Q[ne]}delete o[z.id]}function F(z){for(const Q in o){const ne=o[Q];if(ne[z.id]===void 0)continue;const oe=ne[z.id];for(const te in oe)y(oe[te].object),delete oe[te];delete ne[z.id]}}function W(){J(),h=!0,d!==l&&(d=l,g(d.object))}function J(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:W,resetDefaultState:J,dispose:R,releaseStatesOfGeometry:L,releaseStatesOfProgram:F,initAttributes:S,enableAttribute:E,disableUnusedAttributes:P}}function h5(r,e,t,n){const i=n.isWebGL2;let s;function a(d){s=d}function o(d,h){r.drawArrays(s,d,h),t.update(h,s,1)}function l(d,h,f){if(f===0)return;let p,g;if(i)p=r,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](s,d,h,f),t.update(h,s,f)}this.setMode=a,this.render=o,this.renderInstances=l}function f5(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(I){if(I==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const d=a||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,f=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),p=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=r.getParameter(r.MAX_TEXTURE_SIZE),y=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),b=r.getParameter(r.MAX_VERTEX_ATTRIBS),_=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),x=r.getParameter(r.MAX_VARYING_VECTORS),M=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,E=a||e.has("OES_texture_float"),T=S&&E,P=a?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:d,getMaxAnisotropy:i,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:y,maxAttributes:b,maxVertexUniforms:_,maxVaryings:x,maxFragmentUniforms:M,vertexTextures:S,floatFragmentTextures:E,floatVertexTextures:T,maxSamples:P}}function p5(r){const e=this;let t=null,n=0,i=!1,s=!1;const a=new _s,o=new Lt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const g=f.length!==0||p||n!==0||i;return i=p,n=f.length,g},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=h(f,p,0)},this.setState=function(f,p,g){const y=f.clippingPlanes,b=f.clipIntersection,_=f.clipShadows,x=r.get(f);if(!i||y===null||y.length===0||s&&!_)s?h(null):d();else{const M=s?0:n,S=M*4;let E=x.clippingState||null;l.value=E,E=h(y,p,S,g);for(let T=0;T!==S;++T)E[T]=t[T];x.clippingState=E,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=M}};function d(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(f,p,g,y){const b=f!==null?f.length:0;let _=null;if(b!==0){if(_=l.value,y!==!0||_===null){const x=g+b*4,M=p.matrixWorldInverse;o.getNormalMatrix(M),(_===null||_.length<x)&&(_=new Float32Array(x));for(let S=0,E=g;S!==b;++S,E+=4)a.copy(f[S]).applyMatrix4(M,o),a.normal.toArray(_,E),_[E+3]=a.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,_}}function m5(r){let e=new WeakMap;function t(a,o){return o===Il?a.mapping=Kr:o===Jc&&(a.mapping=ca),a}function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===Il||o===Jc)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const d=new Jv(l.height/2);return d.fromEquirectangularTexture(r,a),e.set(a,d),a.addEventListener("dispose",i),t(d.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class Ss extends Nu{constructor(e=-1,t=1,n=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,a=s+d*this.view.width,o-=h*this.view.offsetY,l=o-h*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const ml=4,K1=[.125,.215,.35,.446,.526,.582],Ha=20,ug=new Ss,$1=new rt;let dg=null;const ja=(1+Math.sqrt(5))/2,nl=1/ja,J1=[new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,ja,nl),new j(0,ja,-nl),new j(nl,0,ja),new j(-nl,0,ja),new j(ja,nl,0),new j(-ja,nl,0)];class V0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){dg=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=tb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=eb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(dg),e.scissorTest=!1,hh(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Kr||e.mapping===ca?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),dg=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Zt,minFilter:Zt,generateMipmaps:!1,type:$n,format:Hn,colorSpace:Qi,depthBuffer:!1},i=Q1(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Q1(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=g5(s)),this._blurMaterial=v5(s,e,t)}return i}_compileMaterial(e){const t=new jn(this._lodPlanes[0],e);this._renderer.compile(t,ug)}_sceneToCubeUV(e,t,n,i){const o=new Ln(90,1,t,n),l=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor($1),h.toneMapping=qr,h.autoClear=!1;const g=new Rs({name:"PMREM.Background",side:hi,depthWrite:!1,depthTest:!1}),y=new jn(new vo,g);let b=!1;const _=e.background;_?_.isColor&&(g.color.copy(_),e.background=null,b=!0):(g.color.copy($1),b=!0);for(let x=0;x<6;x++){const M=x%3;M===0?(o.up.set(0,l[x],0),o.lookAt(d[x],0,0)):M===1?(o.up.set(0,0,l[x]),o.lookAt(0,d[x],0)):(o.up.set(0,l[x],0),o.lookAt(0,0,d[x]));const S=this._cubeSize;hh(i,M*S,x>2?S:0,S,S),h.setRenderTarget(i),b&&h.render(y,o),h.render(e,o)}y.geometry.dispose(),y.material.dispose(),h.toneMapping=p,h.autoClear=f,e.background=_}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Kr||e.mapping===ca;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=tb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=eb());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new jn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;hh(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,ug)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=J1[(i-1)%J1.length];this._blur(e,i-1,i,s,a)}t.autoClear=n}_blur(e,t,n,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",s),this._halfBlur(a,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,a,o){const l=this._renderer,d=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,f=new jn(this._lodPlanes[i],d),p=d.uniforms,g=this._sizeLods[n]-1,y=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*Ha-1),b=s/y,_=isFinite(s)?1+Math.floor(h*b):Ha;_>Ha&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Ha}`);const x=[];let M=0;for(let I=0;I<Ha;++I){const k=I/b,R=Math.exp(-k*k/2);x.push(R),I===0?M+=R:I<_&&(M+=2*R)}for(let I=0;I<x.length;I++)x[I]=x[I]/M;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=x,p.latitudinal.value=a==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:S}=this;p.dTheta.value=y,p.mipInt.value=S-n;const E=this._sizeLods[i],T=3*E*(i>S-ml?i-S+ml:0),P=4*(this._cubeSize-E);hh(t,T,P,3*E,2*E),l.setRenderTarget(t),l.render(f,ug)}}function g5(r){const e=[],t=[],n=[];let i=r;const s=r-ml+1+K1.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);t.push(o);let l=1/o;a>r-ml?l=K1[a-r+ml-1]:a===0&&(l=0),n.push(l);const d=1/(o-2),h=-d,f=1+d,p=[h,h,f,h,f,f,h,h,f,f,h,f],g=6,y=6,b=3,_=2,x=1,M=new Float32Array(b*y*g),S=new Float32Array(_*y*g),E=new Float32Array(x*y*g);for(let P=0;P<g;P++){const I=P%3*2/3-1,k=P>2?0:-1,R=[I,k,0,I+2/3,k,0,I+2/3,k+1,0,I,k,0,I+2/3,k+1,0,I,k+1,0];M.set(R,b*y*P),S.set(p,_*y*P);const L=[P,P,P,P,P,P];E.set(L,x*y*P)}const T=new Dt;T.setAttribute("position",new en(M,b)),T.setAttribute("uv",new en(S,_)),T.setAttribute("faceIndex",new en(E,x)),e.push(T),i>ml&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Q1(r,e,t){const n=new er(r,e,t);return n.texture.mapping=jl,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function hh(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function v5(r,e,t){const n=new Float32Array(Ha),i=new j(0,1,0);return new Oi({name:"SphericalGaussianBlur",defines:{n:Ha,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Qv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xr,depthTest:!1,depthWrite:!1})}function eb(){return new Oi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Qv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xr,depthTest:!1,depthWrite:!1})}function tb(){return new Oi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Qv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xr,depthTest:!1,depthWrite:!1})}function Qv(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function x5(r){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,d=l===Il||l===Jc,h=l===Kr||l===ca;if(d||h)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let f=e.get(o);return t===null&&(t=new V0(r)),f=d?t.fromEquirectangular(o,f):t.fromCubemap(o,f),e.set(o,f),f.texture}else{if(e.has(o))return e.get(o).texture;{const f=o.image;if(d&&f&&f.height>0||h&&f&&i(f)){t===null&&(t=new V0(r));const p=d?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,p),o.addEventListener("dispose",s),p.texture}else return null}}}return o}function i(o){let l=0;const d=6;for(let h=0;h<d;h++)o[h]!==void 0&&l++;return l===d}function s(o){const l=o.target;l.removeEventListener("dispose",s);const d=e.get(l);d!==void 0&&(e.delete(l),d.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function y5(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function _5(r,e,t,n){const i={},s=new WeakMap;function a(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const b=p.morphAttributes[y];for(let _=0,x=b.length;_<x;_++)e.remove(b[_])}p.removeEventListener("dispose",a),delete i[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),n.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function o(f,p){return i[p.id]===!0||(p.addEventListener("dispose",a),i[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const y in p)e.update(p[y],r.ARRAY_BUFFER);const g=f.morphAttributes;for(const y in g){const b=g[y];for(let _=0,x=b.length;_<x;_++)e.update(b[_],r.ARRAY_BUFFER)}}function d(f){const p=[],g=f.index,y=f.attributes.position;let b=0;if(g!==null){const M=g.array;b=g.version;for(let S=0,E=M.length;S<E;S+=3){const T=M[S+0],P=M[S+1],I=M[S+2];p.push(T,P,P,I,I,T)}}else if(y!==void 0){const M=y.array;b=y.version;for(let S=0,E=M.length/3-1;S<E;S+=3){const T=S+0,P=S+1,I=S+2;p.push(T,P,P,I,I,T)}}else return;const _=new(yM(p)?$v:Kv)(p,1);_.version=b;const x=s.get(f);x&&e.remove(x),s.set(f,_)}function h(f){const p=s.get(f);if(p){const g=f.index;g!==null&&p.version<g.version&&d(f)}else d(f);return s.get(f)}return{get:o,update:l,getWireframeAttribute:h}}function b5(r,e,t,n){const i=n.isWebGL2;let s;function a(p){s=p}let o,l;function d(p){o=p.type,l=p.bytesPerElement}function h(p,g){r.drawElements(s,g,o,p*l),t.update(g,s,1)}function f(p,g,y){if(y===0)return;let b,_;if(i)b=r,_="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",b===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[_](s,g,o,p*l,y),t.update(g,s,y)}this.setMode=a,this.setIndex=d,this.render=h,this.renderInstances=f}function w5(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case r.TRIANGLES:t.triangles+=o*(s/3);break;case r.LINES:t.lines+=o*(s/2);break;case r.LINE_STRIP:t.lines+=o*(s-1);break;case r.LINE_LOOP:t.lines+=o*s;break;case r.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function S5(r,e){return r[0]-e[0]}function M5(r,e){return Math.abs(e[1])-Math.abs(r[1])}function E5(r,e,t){const n={},i=new Float32Array(8),s=new WeakMap,a=new Qt,o=[];for(let d=0;d<8;d++)o[d]=[d,0];function l(d,h,f){const p=d.morphTargetInfluences;if(e.isWebGL2===!0){const g=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,y=g!==void 0?g.length:0;let b=s.get(h);if(b===void 0||b.count!==y){let z=function(){W.dispose(),s.delete(h),h.removeEventListener("dispose",z)};b!==void 0&&b.texture.dispose();const M=h.morphAttributes.position!==void 0,S=h.morphAttributes.normal!==void 0,E=h.morphAttributes.color!==void 0,T=h.morphAttributes.position||[],P=h.morphAttributes.normal||[],I=h.morphAttributes.color||[];let k=0;M===!0&&(k=1),S===!0&&(k=2),E===!0&&(k=3);let R=h.attributes.position.count*k,L=1;R>e.maxTextureSize&&(L=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const F=new Float32Array(R*L*4*y),W=new If(F,R,L,y);W.type=Vn,W.needsUpdate=!0;const J=k*4;for(let Q=0;Q<y;Q++){const ne=T[Q],oe=P[Q],te=I[Q],ie=R*L*4*Q;for(let ee=0;ee<ne.count;ee++){const Z=ee*J;M===!0&&(a.fromBufferAttribute(ne,ee),F[ie+Z+0]=a.x,F[ie+Z+1]=a.y,F[ie+Z+2]=a.z,F[ie+Z+3]=0),S===!0&&(a.fromBufferAttribute(oe,ee),F[ie+Z+4]=a.x,F[ie+Z+5]=a.y,F[ie+Z+6]=a.z,F[ie+Z+7]=0),E===!0&&(a.fromBufferAttribute(te,ee),F[ie+Z+8]=a.x,F[ie+Z+9]=a.y,F[ie+Z+10]=a.z,F[ie+Z+11]=te.itemSize===4?a.w:1)}}b={count:y,texture:W,size:new Se(R,L)},s.set(h,b),h.addEventListener("dispose",z)}let _=0;for(let M=0;M<p.length;M++)_+=p[M];const x=h.morphTargetsRelative?1:1-_;f.getUniforms().setValue(r,"morphTargetBaseInfluence",x),f.getUniforms().setValue(r,"morphTargetInfluences",p),f.getUniforms().setValue(r,"morphTargetsTexture",b.texture,t),f.getUniforms().setValue(r,"morphTargetsTextureSize",b.size)}else{const g=p===void 0?0:p.length;let y=n[h.id];if(y===void 0||y.length!==g){y=[];for(let S=0;S<g;S++)y[S]=[S,0];n[h.id]=y}for(let S=0;S<g;S++){const E=y[S];E[0]=S,E[1]=p[S]}y.sort(M5);for(let S=0;S<8;S++)S<g&&y[S][1]?(o[S][0]=y[S][0],o[S][1]=y[S][1]):(o[S][0]=Number.MAX_SAFE_INTEGER,o[S][1]=0);o.sort(S5);const b=h.morphAttributes.position,_=h.morphAttributes.normal;let x=0;for(let S=0;S<8;S++){const E=o[S],T=E[0],P=E[1];T!==Number.MAX_SAFE_INTEGER&&P?(b&&h.getAttribute("morphTarget"+S)!==b[T]&&h.setAttribute("morphTarget"+S,b[T]),_&&h.getAttribute("morphNormal"+S)!==_[T]&&h.setAttribute("morphNormal"+S,_[T]),i[S]=P,x+=P):(b&&h.hasAttribute("morphTarget"+S)===!0&&h.deleteAttribute("morphTarget"+S),_&&h.hasAttribute("morphNormal"+S)===!0&&h.deleteAttribute("morphNormal"+S),i[S]=0)}const M=h.morphTargetsRelative?1:1-x;f.getUniforms().setValue(r,"morphTargetBaseInfluence",M),f.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:l}}function T5(r,e,t,n){let i=new WeakMap;function s(l){const d=n.render.frame,h=l.geometry,f=e.get(l,h);if(i.get(f)!==d&&(e.update(f),i.set(f,d)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==d&&(t.update(l.instanceMatrix,r.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,r.ARRAY_BUFFER),i.set(l,d))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==d&&(p.update(),i.set(p,d))}return f}function a(){i=new WeakMap}function o(l){const d=l.target;d.removeEventListener("dispose",o),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:a}}const AM=new an,CM=new If,RM=new Zv,PM=new Iu,nb=[],ib=[],rb=new Float32Array(16),sb=new Float32Array(9),ab=new Float32Array(4);function Bl(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=nb[i];if(s===void 0&&(s=new Float32Array(i),nb[i]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,r[a].toArray(s,o)}return s}function Gn(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Wn(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function kf(r,e){let t=ib[e];t===void 0&&(t=new Int32Array(e),ib[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function A5(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function C5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gn(t,e))return;r.uniform2fv(this.addr,e),Wn(t,e)}}function R5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Gn(t,e))return;r.uniform3fv(this.addr,e),Wn(t,e)}}function P5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gn(t,e))return;r.uniform4fv(this.addr,e),Wn(t,e)}}function N5(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Gn(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Wn(t,e)}else{if(Gn(t,n))return;ab.set(n),r.uniformMatrix2fv(this.addr,!1,ab),Wn(t,n)}}function I5(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Gn(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Wn(t,e)}else{if(Gn(t,n))return;sb.set(n),r.uniformMatrix3fv(this.addr,!1,sb),Wn(t,n)}}function L5(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Gn(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Wn(t,e)}else{if(Gn(t,n))return;rb.set(n),r.uniformMatrix4fv(this.addr,!1,rb),Wn(t,n)}}function k5(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function D5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gn(t,e))return;r.uniform2iv(this.addr,e),Wn(t,e)}}function O5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Gn(t,e))return;r.uniform3iv(this.addr,e),Wn(t,e)}}function U5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gn(t,e))return;r.uniform4iv(this.addr,e),Wn(t,e)}}function F5(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function z5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Gn(t,e))return;r.uniform2uiv(this.addr,e),Wn(t,e)}}function j5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Gn(t,e))return;r.uniform3uiv(this.addr,e),Wn(t,e)}}function B5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Gn(t,e))return;r.uniform4uiv(this.addr,e),Wn(t,e)}}function H5(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||AM,i)}function V5(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||RM,i)}function G5(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||PM,i)}function W5(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||CM,i)}function X5(r){switch(r){case 5126:return A5;case 35664:return C5;case 35665:return R5;case 35666:return P5;case 35674:return N5;case 35675:return I5;case 35676:return L5;case 5124:case 35670:return k5;case 35667:case 35671:return D5;case 35668:case 35672:return O5;case 35669:case 35673:return U5;case 5125:return F5;case 36294:return z5;case 36295:return j5;case 36296:return B5;case 35678:case 36198:case 36298:case 36306:case 35682:return H5;case 35679:case 36299:case 36307:return V5;case 35680:case 36300:case 36308:case 36293:return G5;case 36289:case 36303:case 36311:case 36292:return W5}}function q5(r,e){r.uniform1fv(this.addr,e)}function Y5(r,e){const t=Bl(e,this.size,2);r.uniform2fv(this.addr,t)}function Z5(r,e){const t=Bl(e,this.size,3);r.uniform3fv(this.addr,t)}function K5(r,e){const t=Bl(e,this.size,4);r.uniform4fv(this.addr,t)}function $5(r,e){const t=Bl(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function J5(r,e){const t=Bl(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function Q5(r,e){const t=Bl(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function eO(r,e){r.uniform1iv(this.addr,e)}function tO(r,e){r.uniform2iv(this.addr,e)}function nO(r,e){r.uniform3iv(this.addr,e)}function iO(r,e){r.uniform4iv(this.addr,e)}function rO(r,e){r.uniform1uiv(this.addr,e)}function sO(r,e){r.uniform2uiv(this.addr,e)}function aO(r,e){r.uniform3uiv(this.addr,e)}function oO(r,e){r.uniform4uiv(this.addr,e)}function lO(r,e,t){const n=this.cache,i=e.length,s=kf(t,i);Gn(n,s)||(r.uniform1iv(this.addr,s),Wn(n,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||AM,s[a])}function cO(r,e,t){const n=this.cache,i=e.length,s=kf(t,i);Gn(n,s)||(r.uniform1iv(this.addr,s),Wn(n,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||RM,s[a])}function uO(r,e,t){const n=this.cache,i=e.length,s=kf(t,i);Gn(n,s)||(r.uniform1iv(this.addr,s),Wn(n,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||PM,s[a])}function dO(r,e,t){const n=this.cache,i=e.length,s=kf(t,i);Gn(n,s)||(r.uniform1iv(this.addr,s),Wn(n,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||CM,s[a])}function hO(r){switch(r){case 5126:return q5;case 35664:return Y5;case 35665:return Z5;case 35666:return K5;case 35674:return $5;case 35675:return J5;case 35676:return Q5;case 5124:case 35670:return eO;case 35667:case 35671:return tO;case 35668:case 35672:return nO;case 35669:case 35673:return iO;case 5125:return rO;case 36294:return sO;case 36295:return aO;case 36296:return oO;case 35678:case 36198:case 36298:case 36306:case 35682:return lO;case 35679:case 36299:case 36307:return cO;case 35680:case 36300:case 36308:case 36293:return uO;case 36289:case 36303:case 36311:case 36292:return dO}}class fO{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=X5(t.type)}}class pO{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=hO(t.type)}}class mO{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],n)}}}const hg=/(\w+)(\])?(\[|\.)?/g;function ob(r,e){r.seq.push(e),r.map[e.id]=e}function gO(r,e,t){const n=r.name,i=n.length;for(hg.lastIndex=0;;){const s=hg.exec(n),a=hg.lastIndex;let o=s[1];const l=s[2]==="]",d=s[3];if(l&&(o=o|0),d===void 0||d==="["&&a+2===i){ob(t,d===void 0?new fO(o,r,e):new pO(o,r,e));break}else{let f=t.map[o];f===void 0&&(f=new mO(o),ob(t,f)),t=f}}}class Zh{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);gO(s,a,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&n.push(a)}return n}}function lb(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}let vO=0;function xO(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}function yO(r){const e=Jt.getPrimaries(Jt.workingColorSpace),t=Jt.getPrimaries(r);let n;switch(e===t?n="":e===au&&t===su?n="LinearDisplayP3ToLinearSRGB":e===su&&t===au&&(n="LinearSRGBToLinearDisplayP3"),r){case Qi:case Ru:return[n,"LinearTransferOETF"];case zn:case Nf:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function cb(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+xO(r.getShaderSource(e),a)}else return i}function _O(r,e){const t=yO(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function bO(r,e){let t;switch(e){case q2:t="Linear";break;case Y2:t="Reinhard";break;case Z2:t="OptimizedCineon";break;case Dv:t="ACESFilmic";break;case K2:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function wO(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ic).join(`
`)}function SO(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function MO(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),a=s.name;let o=1;s.type===r.FLOAT_MAT2&&(o=2),s.type===r.FLOAT_MAT3&&(o=3),s.type===r.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:r.getAttribLocation(e,a),locationSize:o}}return t}function Ic(r){return r!==""}function ub(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function db(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const EO=/^[ \t]*#include +<([\w\d./]+)>/gm;function G0(r){return r.replace(EO,AO)}const TO=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function AO(r,e){let t=Rt[e];if(t===void 0){const n=TO.get(e);if(n!==void 0)t=Rt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return G0(t)}const CO=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hb(r){return r.replace(CO,RO)}function RO(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function fb(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function PO(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Af?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Fc?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===wr&&(e="SHADOWMAP_TYPE_VSM"),e}function NO(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Kr:case ca:e="ENVMAP_TYPE_CUBE";break;case jl:e="ENVMAP_TYPE_CUBE_UV";break}return e}function IO(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case ca:e="ENVMAP_MODE_REFRACTION";break}return e}function LO(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Cu:e="ENVMAP_BLENDING_MULTIPLY";break;case W2:e="ENVMAP_BLENDING_MIX";break;case X2:e="ENVMAP_BLENDING_ADD";break}return e}function kO(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function DO(r,e,t,n){const i=r.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=PO(t),d=NO(t),h=IO(t),f=LO(t),p=kO(t),g=t.isWebGL2?"":wO(t),y=SO(s),b=i.createProgram();let _,x,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Ic).join(`
`),_.length>0&&(_+=`
`),x=[g,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Ic).join(`
`),x.length>0&&(x+=`
`)):(_=[fb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ic).join(`
`),x=[g,fb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qr?"#define TONE_MAPPING":"",t.toneMapping!==qr?Rt.tonemapping_pars_fragment:"",t.toneMapping!==qr?bO("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Rt.colorspace_pars_fragment,_O("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ic).join(`
`)),a=G0(a),a=ub(a,t),a=db(a,t),o=G0(o),o=ub(o,t),o=db(o,t),a=hb(a),o=hb(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,x=["#define varying in",t.glslVersion===B0?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===B0?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const S=M+_+a,E=M+x+o,T=lb(i,i.VERTEX_SHADER,S),P=lb(i,i.FRAGMENT_SHADER,E);if(i.attachShader(b,T),i.attachShader(b,P),t.index0AttributeName!==void 0?i.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(b,0,"position"),i.linkProgram(b),r.debug.checkShaderErrors){const R=i.getProgramInfoLog(b).trim(),L=i.getShaderInfoLog(T).trim(),F=i.getShaderInfoLog(P).trim();let W=!0,J=!0;if(i.getProgramParameter(b,i.LINK_STATUS)===!1)if(W=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,b,T,P);else{const z=cb(i,T,"vertex"),Q=cb(i,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(b,i.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+z+`
`+Q)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(L===""||F==="")&&(J=!1);J&&(this.diagnostics={runnable:W,programLog:R,vertexShader:{log:L,prefix:_},fragmentShader:{log:F,prefix:x}})}i.deleteShader(T),i.deleteShader(P);let I;this.getUniforms=function(){return I===void 0&&(I=new Zh(i,b)),I};let k;return this.getAttributes=function(){return k===void 0&&(k=MO(i,b)),k},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=vO++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=T,this.fragmentShader=P,this}let OO=0;class UO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new FO(e),t.set(e,n)),n}}class FO{constructor(e){this.id=OO++,this.code=e,this.usedTimes=0}}function zO(r,e,t,n,i,s,a){const o=new no,l=new UO,d=[],h=i.isWebGL2,f=i.logarithmicDepthBuffer,p=i.vertexTextures;let g=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(R){return R===0?"uv":`uv${R}`}function _(R,L,F,W,J){const z=W.fog,Q=J.geometry,ne=R.isMeshStandardMaterial?W.environment:null,oe=(R.isMeshStandardMaterial?t:e).get(R.envMap||ne),te=oe&&oe.mapping===jl?oe.image.height:null,ie=y[R.type];R.precision!==null&&(g=i.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const ee=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,Z=ee!==void 0?ee.length:0;let re=0;Q.morphAttributes.position!==void 0&&(re=1),Q.morphAttributes.normal!==void 0&&(re=2),Q.morphAttributes.color!==void 0&&(re=3);let pe,Ee,Le,ke;if(ie){const zt=Sr[ie];pe=zt.vertexShader,Ee=zt.fragmentShader}else pe=R.vertexShader,Ee=R.fragmentShader,l.update(R),Le=l.getVertexShaderID(R),ke=l.getFragmentShaderID(R);const je=r.getRenderTarget(),Qe=J.isInstancedMesh===!0,nt=!!R.map,Ot=!!R.matcap,We=!!oe,K=!!R.aoMap,Ce=!!R.lightMap,be=!!R.bumpMap,Te=!!R.normalMap,Ae=!!R.displacementMap,ze=!!R.emissiveMap,Xe=!!R.metalnessMap,Ke=!!R.roughnessMap,ct=R.anisotropy>0,_t=R.clearcoat>0,Ut=R.iridescence>0,V=R.sheen>0,U=R.transmission>0,ce=ct&&!!R.anisotropyMap,Oe=_t&&!!R.clearcoatMap,Ne=_t&&!!R.clearcoatNormalMap,De=_t&&!!R.clearcoatRoughnessMap,it=Ut&&!!R.iridescenceMap,Ue=Ut&&!!R.iridescenceThicknessMap,qe=V&&!!R.sheenColorMap,xt=V&&!!R.sheenRoughnessMap,At=!!R.specularMap,Re=!!R.specularColorMap,Ft=!!R.specularIntensityMap,$=U&&!!R.transmissionMap,fe=U&&!!R.thicknessMap,Me=!!R.gradientMap,q=!!R.alphaMap,le=R.alphaTest>0,Ie=!!R.alphaHash,Ve=!!R.extensions,Ye=!!Q.attributes.uv1,Pe=!!Q.attributes.uv2,tt=!!Q.attributes.uv3;let ht=qr;return R.toneMapped&&(je===null||je.isXRRenderTarget===!0)&&(ht=r.toneMapping),{isWebGL2:h,shaderID:ie,shaderType:R.type,shaderName:R.name,vertexShader:pe,fragmentShader:Ee,defines:R.defines,customVertexShaderID:Le,customFragmentShaderID:ke,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:g,instancing:Qe,instancingColor:Qe&&J.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:je===null?r.outputColorSpace:je.isXRRenderTarget===!0?je.texture.colorSpace:Qi,map:nt,matcap:Ot,envMap:We,envMapMode:We&&oe.mapping,envMapCubeUVHeight:te,aoMap:K,lightMap:Ce,bumpMap:be,normalMap:Te,displacementMap:p&&Ae,emissiveMap:ze,normalMapObjectSpace:Te&&R.normalMapType===lM,normalMapTangentSpace:Te&&R.normalMapType===pa,metalnessMap:Xe,roughnessMap:Ke,anisotropy:ct,anisotropyMap:ce,clearcoat:_t,clearcoatMap:Oe,clearcoatNormalMap:Ne,clearcoatRoughnessMap:De,iridescence:Ut,iridescenceMap:it,iridescenceThicknessMap:Ue,sheen:V,sheenColorMap:qe,sheenRoughnessMap:xt,specularMap:At,specularColorMap:Re,specularIntensityMap:Ft,transmission:U,transmissionMap:$,thicknessMap:fe,gradientMap:Me,opaque:R.transparent===!1&&R.blending===eo,alphaMap:q,alphaTest:le,alphaHash:Ie,combine:R.combine,mapUv:nt&&b(R.map.channel),aoMapUv:K&&b(R.aoMap.channel),lightMapUv:Ce&&b(R.lightMap.channel),bumpMapUv:be&&b(R.bumpMap.channel),normalMapUv:Te&&b(R.normalMap.channel),displacementMapUv:Ae&&b(R.displacementMap.channel),emissiveMapUv:ze&&b(R.emissiveMap.channel),metalnessMapUv:Xe&&b(R.metalnessMap.channel),roughnessMapUv:Ke&&b(R.roughnessMap.channel),anisotropyMapUv:ce&&b(R.anisotropyMap.channel),clearcoatMapUv:Oe&&b(R.clearcoatMap.channel),clearcoatNormalMapUv:Ne&&b(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:De&&b(R.clearcoatRoughnessMap.channel),iridescenceMapUv:it&&b(R.iridescenceMap.channel),iridescenceThicknessMapUv:Ue&&b(R.iridescenceThicknessMap.channel),sheenColorMapUv:qe&&b(R.sheenColorMap.channel),sheenRoughnessMapUv:xt&&b(R.sheenRoughnessMap.channel),specularMapUv:At&&b(R.specularMap.channel),specularColorMapUv:Re&&b(R.specularColorMap.channel),specularIntensityMapUv:Ft&&b(R.specularIntensityMap.channel),transmissionMapUv:$&&b(R.transmissionMap.channel),thicknessMapUv:fe&&b(R.thicknessMap.channel),alphaMapUv:q&&b(R.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(Te||ct),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,vertexUv1s:Ye,vertexUv2s:Pe,vertexUv3s:tt,pointsUvs:J.isPoints===!0&&!!Q.attributes.uv&&(nt||q),fog:!!z,useFog:R.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:J.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:re,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:R.dithering,shadowMapEnabled:r.shadowMap.enabled&&F.length>0,shadowMapType:r.shadowMap.type,toneMapping:ht,useLegacyLights:r._useLegacyLights,decodeVideoTexture:nt&&R.map.isVideoTexture===!0&&Jt.getTransfer(R.map.colorSpace)===ln,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Mr,flipSided:R.side===hi,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:Ve&&R.extensions.derivatives===!0,extensionFragDepth:Ve&&R.extensions.fragDepth===!0,extensionDrawBuffers:Ve&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ve&&R.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function x(R){const L=[];if(R.shaderID?L.push(R.shaderID):(L.push(R.customVertexShaderID),L.push(R.customFragmentShaderID)),R.defines!==void 0)for(const F in R.defines)L.push(F),L.push(R.defines[F]);return R.isRawShaderMaterial===!1&&(M(L,R),S(L,R),L.push(r.outputColorSpace)),L.push(R.customProgramCacheKey),L.join()}function M(R,L){R.push(L.precision),R.push(L.outputColorSpace),R.push(L.envMapMode),R.push(L.envMapCubeUVHeight),R.push(L.mapUv),R.push(L.alphaMapUv),R.push(L.lightMapUv),R.push(L.aoMapUv),R.push(L.bumpMapUv),R.push(L.normalMapUv),R.push(L.displacementMapUv),R.push(L.emissiveMapUv),R.push(L.metalnessMapUv),R.push(L.roughnessMapUv),R.push(L.anisotropyMapUv),R.push(L.clearcoatMapUv),R.push(L.clearcoatNormalMapUv),R.push(L.clearcoatRoughnessMapUv),R.push(L.iridescenceMapUv),R.push(L.iridescenceThicknessMapUv),R.push(L.sheenColorMapUv),R.push(L.sheenRoughnessMapUv),R.push(L.specularMapUv),R.push(L.specularColorMapUv),R.push(L.specularIntensityMapUv),R.push(L.transmissionMapUv),R.push(L.thicknessMapUv),R.push(L.combine),R.push(L.fogExp2),R.push(L.sizeAttenuation),R.push(L.morphTargetsCount),R.push(L.morphAttributeCount),R.push(L.numDirLights),R.push(L.numPointLights),R.push(L.numSpotLights),R.push(L.numSpotLightMaps),R.push(L.numHemiLights),R.push(L.numRectAreaLights),R.push(L.numDirLightShadows),R.push(L.numPointLightShadows),R.push(L.numSpotLightShadows),R.push(L.numSpotLightShadowsWithMaps),R.push(L.numLightProbes),R.push(L.shadowMapType),R.push(L.toneMapping),R.push(L.numClippingPlanes),R.push(L.numClipIntersection),R.push(L.depthPacking)}function S(R,L){o.disableAll(),L.isWebGL2&&o.enable(0),L.supportsVertexTextures&&o.enable(1),L.instancing&&o.enable(2),L.instancingColor&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),R.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.skinning&&o.enable(4),L.morphTargets&&o.enable(5),L.morphNormals&&o.enable(6),L.morphColors&&o.enable(7),L.premultipliedAlpha&&o.enable(8),L.shadowMapEnabled&&o.enable(9),L.useLegacyLights&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),R.push(o.mask)}function E(R){const L=y[R.type];let F;if(L){const W=Sr[L];F=MM.clone(W.uniforms)}else F=R.uniforms;return F}function T(R,L){let F;for(let W=0,J=d.length;W<J;W++){const z=d[W];if(z.cacheKey===L){F=z,++F.usedTimes;break}}return F===void 0&&(F=new DO(r,L,R,s),d.push(F)),F}function P(R){if(--R.usedTimes===0){const L=d.indexOf(R);d[L]=d[d.length-1],d.pop(),R.destroy()}}function I(R){l.remove(R)}function k(){l.dispose()}return{getParameters:_,getProgramCacheKey:x,getUniforms:E,acquireProgram:T,releaseProgram:P,releaseShaderCache:I,programs:d,dispose:k}}function jO(){let r=new WeakMap;function e(s){let a=r.get(s);return a===void 0&&(a={},r.set(s,a)),a}function t(s){r.delete(s)}function n(s,a,o){r.get(s)[a]=o}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function BO(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function pb(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function mb(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function a(f,p,g,y,b,_){let x=r[e];return x===void 0?(x={id:f.id,object:f,geometry:p,material:g,groupOrder:y,renderOrder:f.renderOrder,z:b,group:_},r[e]=x):(x.id=f.id,x.object=f,x.geometry=p,x.material=g,x.groupOrder=y,x.renderOrder=f.renderOrder,x.z=b,x.group=_),e++,x}function o(f,p,g,y,b,_){const x=a(f,p,g,y,b,_);g.transmission>0?n.push(x):g.transparent===!0?i.push(x):t.push(x)}function l(f,p,g,y,b,_){const x=a(f,p,g,y,b,_);g.transmission>0?n.unshift(x):g.transparent===!0?i.unshift(x):t.unshift(x)}function d(f,p){t.length>1&&t.sort(f||BO),n.length>1&&n.sort(p||pb),i.length>1&&i.sort(p||pb)}function h(){for(let f=e,p=r.length;f<p;f++){const g=r[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:o,unshift:l,finish:h,sort:d}}function HO(){let r=new WeakMap;function e(n,i){const s=r.get(n);let a;return s===void 0?(a=new mb,r.set(n,[a])):i>=s.length?(a=new mb,s.push(a)):a=s[i],a}function t(){r=new WeakMap}return{get:e,dispose:t}}function VO(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new rt};break;case"SpotLight":t={position:new j,direction:new j,color:new rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new rt,groundColor:new rt};break;case"RectAreaLight":t={color:new rt,position:new j,halfWidth:new j,halfHeight:new j};break}return r[e.id]=t,t}}}function GO(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let WO=0;function XO(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function qO(r,e){const t=new VO,n=GO(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new j);const s=new j,a=new Tt,o=new Tt;function l(h,f){let p=0,g=0,y=0;for(let W=0;W<9;W++)i.probe[W].set(0,0,0);let b=0,_=0,x=0,M=0,S=0,E=0,T=0,P=0,I=0,k=0,R=0;h.sort(XO);const L=f===!0?Math.PI:1;for(let W=0,J=h.length;W<J;W++){const z=h[W],Q=z.color,ne=z.intensity,oe=z.distance,te=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)p+=Q.r*ne*L,g+=Q.g*ne*L,y+=Q.b*ne*L;else if(z.isLightProbe){for(let ie=0;ie<9;ie++)i.probe[ie].addScaledVector(z.sh.coefficients[ie],ne);R++}else if(z.isDirectionalLight){const ie=t.get(z);if(ie.color.copy(z.color).multiplyScalar(z.intensity*L),z.castShadow){const ee=z.shadow,Z=n.get(z);Z.shadowBias=ee.bias,Z.shadowNormalBias=ee.normalBias,Z.shadowRadius=ee.radius,Z.shadowMapSize=ee.mapSize,i.directionalShadow[b]=Z,i.directionalShadowMap[b]=te,i.directionalShadowMatrix[b]=z.shadow.matrix,E++}i.directional[b]=ie,b++}else if(z.isSpotLight){const ie=t.get(z);ie.position.setFromMatrixPosition(z.matrixWorld),ie.color.copy(Q).multiplyScalar(ne*L),ie.distance=oe,ie.coneCos=Math.cos(z.angle),ie.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),ie.decay=z.decay,i.spot[x]=ie;const ee=z.shadow;if(z.map&&(i.spotLightMap[I]=z.map,I++,ee.updateMatrices(z),z.castShadow&&k++),i.spotLightMatrix[x]=ee.matrix,z.castShadow){const Z=n.get(z);Z.shadowBias=ee.bias,Z.shadowNormalBias=ee.normalBias,Z.shadowRadius=ee.radius,Z.shadowMapSize=ee.mapSize,i.spotShadow[x]=Z,i.spotShadowMap[x]=te,P++}x++}else if(z.isRectAreaLight){const ie=t.get(z);ie.color.copy(Q).multiplyScalar(ne),ie.halfWidth.set(z.width*.5,0,0),ie.halfHeight.set(0,z.height*.5,0),i.rectArea[M]=ie,M++}else if(z.isPointLight){const ie=t.get(z);if(ie.color.copy(z.color).multiplyScalar(z.intensity*L),ie.distance=z.distance,ie.decay=z.decay,z.castShadow){const ee=z.shadow,Z=n.get(z);Z.shadowBias=ee.bias,Z.shadowNormalBias=ee.normalBias,Z.shadowRadius=ee.radius,Z.shadowMapSize=ee.mapSize,Z.shadowCameraNear=ee.camera.near,Z.shadowCameraFar=ee.camera.far,i.pointShadow[_]=Z,i.pointShadowMap[_]=te,i.pointShadowMatrix[_]=z.shadow.matrix,T++}i.point[_]=ie,_++}else if(z.isHemisphereLight){const ie=t.get(z);ie.skyColor.copy(z.color).multiplyScalar(ne*L),ie.groundColor.copy(z.groundColor).multiplyScalar(ne*L),i.hemi[S]=ie,S++}}M>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ge.LTC_FLOAT_1,i.rectAreaLTC2=Ge.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ge.LTC_HALF_1,i.rectAreaLTC2=Ge.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=g,i.ambient[2]=y;const F=i.hash;(F.directionalLength!==b||F.pointLength!==_||F.spotLength!==x||F.rectAreaLength!==M||F.hemiLength!==S||F.numDirectionalShadows!==E||F.numPointShadows!==T||F.numSpotShadows!==P||F.numSpotMaps!==I||F.numLightProbes!==R)&&(i.directional.length=b,i.spot.length=x,i.rectArea.length=M,i.point.length=_,i.hemi.length=S,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=P+I-k,i.spotLightMap.length=I,i.numSpotLightShadowsWithMaps=k,i.numLightProbes=R,F.directionalLength=b,F.pointLength=_,F.spotLength=x,F.rectAreaLength=M,F.hemiLength=S,F.numDirectionalShadows=E,F.numPointShadows=T,F.numSpotShadows=P,F.numSpotMaps=I,F.numLightProbes=R,i.version=WO++)}function d(h,f){let p=0,g=0,y=0,b=0,_=0;const x=f.matrixWorldInverse;for(let M=0,S=h.length;M<S;M++){const E=h[M];if(E.isDirectionalLight){const T=i.directional[p];T.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(x),p++}else if(E.isSpotLight){const T=i.spot[y];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(x),T.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(x),y++}else if(E.isRectAreaLight){const T=i.rectArea[b];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(x),o.identity(),a.copy(E.matrixWorld),a.premultiply(x),o.extractRotation(a),T.halfWidth.set(E.width*.5,0,0),T.halfHeight.set(0,E.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),b++}else if(E.isPointLight){const T=i.point[g];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(x),g++}else if(E.isHemisphereLight){const T=i.hemi[_];T.direction.setFromMatrixPosition(E.matrixWorld),T.direction.transformDirection(x),_++}}}return{setup:l,setupView:d,state:i}}function gb(r,e){const t=new qO(r,e),n=[],i=[];function s(){n.length=0,i.length=0}function a(f){n.push(f)}function o(f){i.push(f)}function l(f){t.setup(n,f)}function d(f){t.setupView(n,f)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:l,setupLightsView:d,pushLight:a,pushShadow:o}}function YO(r,e){let t=new WeakMap;function n(s,a=0){const o=t.get(s);let l;return o===void 0?(l=new gb(r,e),t.set(s,[l])):a>=o.length?(l=new gb(r,e),o.push(l)):l=o[a],l}function i(){t=new WeakMap}return{get:n,dispose:i}}class ex extends pi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aM,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tx extends pi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const ZO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,KO=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function $O(r,e,t){let n=new Lf;const i=new Se,s=new Se,a=new Qt,o=new ex({depthPacking:oM}),l=new tx,d={},h=t.maxTextureSize,f={[As]:hi,[hi]:As,[Mr]:Mr},p=new Oi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Se},radius:{value:4}},vertexShader:ZO,fragmentShader:KO}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const y=new Dt;y.setAttribute("position",new en(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new jn(y,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Af;let x=this.type;this.render=function(T,P,I){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||T.length===0)return;const k=r.getRenderTarget(),R=r.getActiveCubeFace(),L=r.getActiveMipmapLevel(),F=r.state;F.setBlending(Xr),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const W=x!==wr&&this.type===wr,J=x===wr&&this.type!==wr;for(let z=0,Q=T.length;z<Q;z++){const ne=T[z],oe=ne.shadow;if(oe===void 0){console.warn("THREE.WebGLShadowMap:",ne,"has no shadow.");continue}if(oe.autoUpdate===!1&&oe.needsUpdate===!1)continue;i.copy(oe.mapSize);const te=oe.getFrameExtents();if(i.multiply(te),s.copy(oe.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/te.x),i.x=s.x*te.x,oe.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/te.y),i.y=s.y*te.y,oe.mapSize.y=s.y)),oe.map===null||W===!0||J===!0){const ee=this.type!==wr?{minFilter:In,magFilter:In}:{};oe.map!==null&&oe.map.dispose(),oe.map=new er(i.x,i.y,ee),oe.map.texture.name=ne.name+".shadowMap",oe.camera.updateProjectionMatrix()}r.setRenderTarget(oe.map),r.clear();const ie=oe.getViewportCount();for(let ee=0;ee<ie;ee++){const Z=oe.getViewport(ee);a.set(s.x*Z.x,s.y*Z.y,s.x*Z.z,s.y*Z.w),F.viewport(a),oe.updateMatrices(ne,ee),n=oe.getFrustum(),E(P,I,oe.camera,ne,this.type)}oe.isPointLightShadow!==!0&&this.type===wr&&M(oe,I),oe.needsUpdate=!1}x=this.type,_.needsUpdate=!1,r.setRenderTarget(k,R,L)};function M(T,P){const I=e.update(b);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,g.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new er(i.x,i.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,r.setRenderTarget(T.mapPass),r.clear(),r.renderBufferDirect(P,null,I,p,b,null),g.uniforms.shadow_pass.value=T.mapPass.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,r.setRenderTarget(T.map),r.clear(),r.renderBufferDirect(P,null,I,g,b,null)}function S(T,P,I,k){let R=null;const L=I.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(L!==void 0)R=L;else if(R=I.isPointLight===!0?l:o,r.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const F=R.uuid,W=P.uuid;let J=d[F];J===void 0&&(J={},d[F]=J);let z=J[W];z===void 0&&(z=R.clone(),J[W]=z),R=z}if(R.visible=P.visible,R.wireframe=P.wireframe,k===wr?R.side=P.shadowSide!==null?P.shadowSide:P.side:R.side=P.shadowSide!==null?P.shadowSide:f[P.side],R.alphaMap=P.alphaMap,R.alphaTest=P.alphaTest,R.map=P.map,R.clipShadows=P.clipShadows,R.clippingPlanes=P.clippingPlanes,R.clipIntersection=P.clipIntersection,R.displacementMap=P.displacementMap,R.displacementScale=P.displacementScale,R.displacementBias=P.displacementBias,R.wireframeLinewidth=P.wireframeLinewidth,R.linewidth=P.linewidth,I.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const F=r.properties.get(R);F.light=I}return R}function E(T,P,I,k,R){if(T.visible===!1)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&R===wr)&&(!T.frustumCulled||n.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,T.matrixWorld);const W=e.update(T),J=T.material;if(Array.isArray(J)){const z=W.groups;for(let Q=0,ne=z.length;Q<ne;Q++){const oe=z[Q],te=J[oe.materialIndex];if(te&&te.visible){const ie=S(T,te,k,R);r.renderBufferDirect(I,null,W,ie,T,oe)}}}else if(J.visible){const z=S(T,J,k,R);r.renderBufferDirect(I,null,W,z,T,null)}}const F=T.children;for(let W=0,J=F.length;W<J;W++)E(F[W],P,I,k,R)}}function JO(r,e,t){const n=t.isWebGL2;function i(){let q=!1;const le=new Qt;let Ie=null;const Ve=new Qt(0,0,0,0);return{setMask:function(Ye){Ie!==Ye&&!q&&(r.colorMask(Ye,Ye,Ye,Ye),Ie=Ye)},setLocked:function(Ye){q=Ye},setClear:function(Ye,Pe,tt,ht,on){on===!0&&(Ye*=ht,Pe*=ht,tt*=ht),le.set(Ye,Pe,tt,ht),Ve.equals(le)===!1&&(r.clearColor(Ye,Pe,tt,ht),Ve.copy(le))},reset:function(){q=!1,Ie=null,Ve.set(-1,0,0,0)}}}function s(){let q=!1,le=null,Ie=null,Ve=null;return{setTest:function(Ye){Ye?je(r.DEPTH_TEST):Qe(r.DEPTH_TEST)},setMask:function(Ye){le!==Ye&&!q&&(r.depthMask(Ye),le=Ye)},setFunc:function(Ye){if(Ie!==Ye){switch(Ye){case F2:r.depthFunc(r.NEVER);break;case z2:r.depthFunc(r.ALWAYS);break;case j2:r.depthFunc(r.LESS);break;case lf:r.depthFunc(r.LEQUAL);break;case B2:r.depthFunc(r.EQUAL);break;case H2:r.depthFunc(r.GEQUAL);break;case V2:r.depthFunc(r.GREATER);break;case G2:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ie=Ye}},setLocked:function(Ye){q=Ye},setClear:function(Ye){Ve!==Ye&&(r.clearDepth(Ye),Ve=Ye)},reset:function(){q=!1,le=null,Ie=null,Ve=null}}}function a(){let q=!1,le=null,Ie=null,Ve=null,Ye=null,Pe=null,tt=null,ht=null,on=null;return{setTest:function(zt){q||(zt?je(r.STENCIL_TEST):Qe(r.STENCIL_TEST))},setMask:function(zt){le!==zt&&!q&&(r.stencilMask(zt),le=zt)},setFunc:function(zt,An,fn){(Ie!==zt||Ve!==An||Ye!==fn)&&(r.stencilFunc(zt,An,fn),Ie=zt,Ve=An,Ye=fn)},setOp:function(zt,An,fn){(Pe!==zt||tt!==An||ht!==fn)&&(r.stencilOp(zt,An,fn),Pe=zt,tt=An,ht=fn)},setLocked:function(zt){q=zt},setClear:function(zt){on!==zt&&(r.clearStencil(zt),on=zt)},reset:function(){q=!1,le=null,Ie=null,Ve=null,Ye=null,Pe=null,tt=null,ht=null,on=null}}}const o=new i,l=new s,d=new a,h=new WeakMap,f=new WeakMap;let p={},g={},y=new WeakMap,b=[],_=null,x=!1,M=null,S=null,E=null,T=null,P=null,I=null,k=null,R=!1,L=null,F=null,W=null,J=null,z=null;const Q=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ne=!1,oe=0;const te=r.getParameter(r.VERSION);te.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(te)[1]),ne=oe>=1):te.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(te)[1]),ne=oe>=2);let ie=null,ee={};const Z=r.getParameter(r.SCISSOR_BOX),re=r.getParameter(r.VIEWPORT),pe=new Qt().fromArray(Z),Ee=new Qt().fromArray(re);function Le(q,le,Ie,Ve){const Ye=new Uint8Array(4),Pe=r.createTexture();r.bindTexture(q,Pe),r.texParameteri(q,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(q,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let tt=0;tt<Ie;tt++)n&&(q===r.TEXTURE_3D||q===r.TEXTURE_2D_ARRAY)?r.texImage3D(le,0,r.RGBA,1,1,Ve,0,r.RGBA,r.UNSIGNED_BYTE,Ye):r.texImage2D(le+tt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Ye);return Pe}const ke={};ke[r.TEXTURE_2D]=Le(r.TEXTURE_2D,r.TEXTURE_2D,1),ke[r.TEXTURE_CUBE_MAP]=Le(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(ke[r.TEXTURE_2D_ARRAY]=Le(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),ke[r.TEXTURE_3D]=Le(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),d.setClear(0),je(r.DEPTH_TEST),l.setFunc(lf),Ae(!1),ze(u0),je(r.CULL_FACE),be(Xr);function je(q){p[q]!==!0&&(r.enable(q),p[q]=!0)}function Qe(q){p[q]!==!1&&(r.disable(q),p[q]=!1)}function nt(q,le){return g[q]!==le?(r.bindFramebuffer(q,le),g[q]=le,n&&(q===r.DRAW_FRAMEBUFFER&&(g[r.FRAMEBUFFER]=le),q===r.FRAMEBUFFER&&(g[r.DRAW_FRAMEBUFFER]=le)),!0):!1}function Ot(q,le){let Ie=b,Ve=!1;if(q)if(Ie=y.get(le),Ie===void 0&&(Ie=[],y.set(le,Ie)),q.isWebGLMultipleRenderTargets){const Ye=q.texture;if(Ie.length!==Ye.length||Ie[0]!==r.COLOR_ATTACHMENT0){for(let Pe=0,tt=Ye.length;Pe<tt;Pe++)Ie[Pe]=r.COLOR_ATTACHMENT0+Pe;Ie.length=Ye.length,Ve=!0}}else Ie[0]!==r.COLOR_ATTACHMENT0&&(Ie[0]=r.COLOR_ATTACHMENT0,Ve=!0);else Ie[0]!==r.BACK&&(Ie[0]=r.BACK,Ve=!0);Ve&&(t.isWebGL2?r.drawBuffers(Ie):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ie))}function We(q){return _!==q?(r.useProgram(q),_=q,!0):!1}const K={[Ba]:r.FUNC_ADD,[A2]:r.FUNC_SUBTRACT,[C2]:r.FUNC_REVERSE_SUBTRACT};if(n)K[f0]=r.MIN,K[p0]=r.MAX;else{const q=e.get("EXT_blend_minmax");q!==null&&(K[f0]=q.MIN_EXT,K[p0]=q.MAX_EXT)}const Ce={[R2]:r.ZERO,[P2]:r.ONE,[N2]:r.SRC_COLOR,[Lv]:r.SRC_ALPHA,[U2]:r.SRC_ALPHA_SATURATE,[D2]:r.DST_COLOR,[L2]:r.DST_ALPHA,[I2]:r.ONE_MINUS_SRC_COLOR,[kv]:r.ONE_MINUS_SRC_ALPHA,[O2]:r.ONE_MINUS_DST_COLOR,[k2]:r.ONE_MINUS_DST_ALPHA};function be(q,le,Ie,Ve,Ye,Pe,tt,ht){if(q===Xr){x===!0&&(Qe(r.BLEND),x=!1);return}if(x===!1&&(je(r.BLEND),x=!0),q!==T2){if(q!==M||ht!==R){if((S!==Ba||P!==Ba)&&(r.blendEquation(r.FUNC_ADD),S=Ba,P=Ba),ht)switch(q){case eo:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case of:r.blendFunc(r.ONE,r.ONE);break;case d0:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case h0:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case eo:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case of:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case d0:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case h0:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}E=null,T=null,I=null,k=null,M=q,R=ht}return}Ye=Ye||le,Pe=Pe||Ie,tt=tt||Ve,(le!==S||Ye!==P)&&(r.blendEquationSeparate(K[le],K[Ye]),S=le,P=Ye),(Ie!==E||Ve!==T||Pe!==I||tt!==k)&&(r.blendFuncSeparate(Ce[Ie],Ce[Ve],Ce[Pe],Ce[tt]),E=Ie,T=Ve,I=Pe,k=tt),M=q,R=!1}function Te(q,le){q.side===Mr?Qe(r.CULL_FACE):je(r.CULL_FACE);let Ie=q.side===hi;le&&(Ie=!Ie),Ae(Ie),q.blending===eo&&q.transparent===!1?be(Xr):be(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.premultipliedAlpha),l.setFunc(q.depthFunc),l.setTest(q.depthTest),l.setMask(q.depthWrite),o.setMask(q.colorWrite);const Ve=q.stencilWrite;d.setTest(Ve),Ve&&(d.setMask(q.stencilWriteMask),d.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),d.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),Ke(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?je(r.SAMPLE_ALPHA_TO_COVERAGE):Qe(r.SAMPLE_ALPHA_TO_COVERAGE)}function Ae(q){L!==q&&(q?r.frontFace(r.CW):r.frontFace(r.CCW),L=q)}function ze(q){q!==S2?(je(r.CULL_FACE),q!==F&&(q===u0?r.cullFace(r.BACK):q===M2?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):Qe(r.CULL_FACE),F=q}function Xe(q){q!==W&&(ne&&r.lineWidth(q),W=q)}function Ke(q,le,Ie){q?(je(r.POLYGON_OFFSET_FILL),(J!==le||z!==Ie)&&(r.polygonOffset(le,Ie),J=le,z=Ie)):Qe(r.POLYGON_OFFSET_FILL)}function ct(q){q?je(r.SCISSOR_TEST):Qe(r.SCISSOR_TEST)}function _t(q){q===void 0&&(q=r.TEXTURE0+Q-1),ie!==q&&(r.activeTexture(q),ie=q)}function Ut(q,le,Ie){Ie===void 0&&(ie===null?Ie=r.TEXTURE0+Q-1:Ie=ie);let Ve=ee[Ie];Ve===void 0&&(Ve={type:void 0,texture:void 0},ee[Ie]=Ve),(Ve.type!==q||Ve.texture!==le)&&(ie!==Ie&&(r.activeTexture(Ie),ie=Ie),r.bindTexture(q,le||ke[q]),Ve.type=q,Ve.texture=le)}function V(){const q=ee[ie];q!==void 0&&q.type!==void 0&&(r.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function U(){try{r.compressedTexImage2D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ce(){try{r.compressedTexImage3D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Oe(){try{r.texSubImage2D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ne(){try{r.texSubImage3D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function De(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function it(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ue(){try{r.texStorage2D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function qe(){try{r.texStorage3D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function xt(){try{r.texImage2D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function At(){try{r.texImage3D.apply(r,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Re(q){pe.equals(q)===!1&&(r.scissor(q.x,q.y,q.z,q.w),pe.copy(q))}function Ft(q){Ee.equals(q)===!1&&(r.viewport(q.x,q.y,q.z,q.w),Ee.copy(q))}function $(q,le){let Ie=f.get(le);Ie===void 0&&(Ie=new WeakMap,f.set(le,Ie));let Ve=Ie.get(q);Ve===void 0&&(Ve=r.getUniformBlockIndex(le,q.name),Ie.set(q,Ve))}function fe(q,le){const Ve=f.get(le).get(q);h.get(le)!==Ve&&(r.uniformBlockBinding(le,Ve,q.__bindingPointIndex),h.set(le,Ve))}function Me(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),n===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),p={},ie=null,ee={},g={},y=new WeakMap,b=[],_=null,x=!1,M=null,S=null,E=null,T=null,P=null,I=null,k=null,R=!1,L=null,F=null,W=null,J=null,z=null,pe.set(0,0,r.canvas.width,r.canvas.height),Ee.set(0,0,r.canvas.width,r.canvas.height),o.reset(),l.reset(),d.reset()}return{buffers:{color:o,depth:l,stencil:d},enable:je,disable:Qe,bindFramebuffer:nt,drawBuffers:Ot,useProgram:We,setBlending:be,setMaterial:Te,setFlipSided:Ae,setCullFace:ze,setLineWidth:Xe,setPolygonOffset:Ke,setScissorTest:ct,activeTexture:_t,bindTexture:Ut,unbindTexture:V,compressedTexImage2D:U,compressedTexImage3D:ce,texImage2D:xt,texImage3D:At,updateUBOMapping:$,uniformBlockBinding:fe,texStorage2D:Ue,texStorage3D:qe,texSubImage2D:Oe,texSubImage3D:Ne,compressedTexSubImage2D:De,compressedTexSubImage3D:it,scissor:Re,viewport:Ft,reset:Me}}function QO(r,e,t,n,i,s,a){const o=i.isWebGL2,l=i.maxTextures,d=i.maxCubemapSize,h=i.maxTextureSize,f=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let b;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(V,U){return x?new OffscreenCanvas(V,U):cu("canvas")}function S(V,U,ce,Oe){let Ne=1;if((V.width>Oe||V.height>Oe)&&(Ne=Oe/Math.max(V.width,V.height)),Ne<1||U===!0)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap){const De=U?df:Math.floor,it=De(Ne*V.width),Ue=De(Ne*V.height);b===void 0&&(b=M(it,Ue));const qe=ce?M(it,Ue):b;return qe.width=it,qe.height=Ue,qe.getContext("2d").drawImage(V,0,0,it,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+V.width+"x"+V.height+") to ("+it+"x"+Ue+")."),qe}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+V.width+"x"+V.height+")."),V;return V}function E(V){return H0(V.width)&&H0(V.height)}function T(V){return o?!1:V.wrapS!==vn||V.wrapT!==vn||V.minFilter!==In&&V.minFilter!==Zt}function P(V,U){return V.generateMipmaps&&U&&V.minFilter!==In&&V.minFilter!==Zt}function I(V){r.generateMipmap(V)}function k(V,U,ce,Oe,Ne=!1){if(o===!1)return U;if(V!==null){if(r[V]!==void 0)return r[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let De=U;if(U===r.RED&&(ce===r.FLOAT&&(De=r.R32F),ce===r.HALF_FLOAT&&(De=r.R16F),ce===r.UNSIGNED_BYTE&&(De=r.R8)),U===r.RED_INTEGER&&(ce===r.UNSIGNED_BYTE&&(De=r.R8UI),ce===r.UNSIGNED_SHORT&&(De=r.R16UI),ce===r.UNSIGNED_INT&&(De=r.R32UI),ce===r.BYTE&&(De=r.R8I),ce===r.SHORT&&(De=r.R16I),ce===r.INT&&(De=r.R32I)),U===r.RG&&(ce===r.FLOAT&&(De=r.RG32F),ce===r.HALF_FLOAT&&(De=r.RG16F),ce===r.UNSIGNED_BYTE&&(De=r.RG8)),U===r.RGBA){const it=Ne?ru:Jt.getTransfer(Oe);ce===r.FLOAT&&(De=r.RGBA32F),ce===r.HALF_FLOAT&&(De=r.RGBA16F),ce===r.UNSIGNED_BYTE&&(De=it===ln?r.SRGB8_ALPHA8:r.RGBA8),ce===r.UNSIGNED_SHORT_4_4_4_4&&(De=r.RGBA4),ce===r.UNSIGNED_SHORT_5_5_5_1&&(De=r.RGB5_A1)}return(De===r.R16F||De===r.R32F||De===r.RG16F||De===r.RG32F||De===r.RGBA16F||De===r.RGBA32F)&&e.get("EXT_color_buffer_float"),De}function R(V,U,ce){return P(V,ce)===!0||V.isFramebufferTexture&&V.minFilter!==In&&V.minFilter!==Zt?Math.log2(Math.max(U.width,U.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?U.mipmaps.length:1}function L(V){return V===In||V===cf||V===zc?r.NEAREST:r.LINEAR}function F(V){const U=V.target;U.removeEventListener("dispose",F),J(U),U.isVideoTexture&&y.delete(U)}function W(V){const U=V.target;U.removeEventListener("dispose",W),Q(U)}function J(V){const U=n.get(V);if(U.__webglInit===void 0)return;const ce=V.source,Oe=_.get(ce);if(Oe){const Ne=Oe[U.__cacheKey];Ne.usedTimes--,Ne.usedTimes===0&&z(V),Object.keys(Oe).length===0&&_.delete(ce)}n.remove(V)}function z(V){const U=n.get(V);r.deleteTexture(U.__webglTexture);const ce=V.source,Oe=_.get(ce);delete Oe[U.__cacheKey],a.memory.textures--}function Q(V){const U=V.texture,ce=n.get(V),Oe=n.get(U);if(Oe.__webglTexture!==void 0&&(r.deleteTexture(Oe.__webglTexture),a.memory.textures--),V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let Ne=0;Ne<6;Ne++){if(Array.isArray(ce.__webglFramebuffer[Ne]))for(let De=0;De<ce.__webglFramebuffer[Ne].length;De++)r.deleteFramebuffer(ce.__webglFramebuffer[Ne][De]);else r.deleteFramebuffer(ce.__webglFramebuffer[Ne]);ce.__webglDepthbuffer&&r.deleteRenderbuffer(ce.__webglDepthbuffer[Ne])}else{if(Array.isArray(ce.__webglFramebuffer))for(let Ne=0;Ne<ce.__webglFramebuffer.length;Ne++)r.deleteFramebuffer(ce.__webglFramebuffer[Ne]);else r.deleteFramebuffer(ce.__webglFramebuffer);if(ce.__webglDepthbuffer&&r.deleteRenderbuffer(ce.__webglDepthbuffer),ce.__webglMultisampledFramebuffer&&r.deleteFramebuffer(ce.__webglMultisampledFramebuffer),ce.__webglColorRenderbuffer)for(let Ne=0;Ne<ce.__webglColorRenderbuffer.length;Ne++)ce.__webglColorRenderbuffer[Ne]&&r.deleteRenderbuffer(ce.__webglColorRenderbuffer[Ne]);ce.__webglDepthRenderbuffer&&r.deleteRenderbuffer(ce.__webglDepthRenderbuffer)}if(V.isWebGLMultipleRenderTargets)for(let Ne=0,De=U.length;Ne<De;Ne++){const it=n.get(U[Ne]);it.__webglTexture&&(r.deleteTexture(it.__webglTexture),a.memory.textures--),n.remove(U[Ne])}n.remove(U),n.remove(V)}let ne=0;function oe(){ne=0}function te(){const V=ne;return V>=l&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+l),ne+=1,V}function ie(V){const U=[];return U.push(V.wrapS),U.push(V.wrapT),U.push(V.wrapR||0),U.push(V.magFilter),U.push(V.minFilter),U.push(V.anisotropy),U.push(V.internalFormat),U.push(V.format),U.push(V.type),U.push(V.generateMipmaps),U.push(V.premultiplyAlpha),U.push(V.flipY),U.push(V.unpackAlignment),U.push(V.colorSpace),U.join()}function ee(V,U){const ce=n.get(V);if(V.isVideoTexture&&_t(V),V.isRenderTargetTexture===!1&&V.version>0&&ce.__version!==V.version){const Oe=V.image;if(Oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{nt(ce,V,U);return}}t.bindTexture(r.TEXTURE_2D,ce.__webglTexture,r.TEXTURE0+U)}function Z(V,U){const ce=n.get(V);if(V.version>0&&ce.__version!==V.version){nt(ce,V,U);return}t.bindTexture(r.TEXTURE_2D_ARRAY,ce.__webglTexture,r.TEXTURE0+U)}function re(V,U){const ce=n.get(V);if(V.version>0&&ce.__version!==V.version){nt(ce,V,U);return}t.bindTexture(r.TEXTURE_3D,ce.__webglTexture,r.TEXTURE0+U)}function pe(V,U){const ce=n.get(V);if(V.version>0&&ce.__version!==V.version){Ot(ce,V,U);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ce.__webglTexture,r.TEXTURE0+U)}const Ee={[Qc]:r.REPEAT,[vn]:r.CLAMP_TO_EDGE,[eu]:r.MIRRORED_REPEAT},Le={[In]:r.NEAREST,[cf]:r.NEAREST_MIPMAP_NEAREST,[zc]:r.NEAREST_MIPMAP_LINEAR,[Zt]:r.LINEAR,[Ov]:r.LINEAR_MIPMAP_NEAREST,[ua]:r.LINEAR_MIPMAP_LINEAR},ke={[uM]:r.NEVER,[vM]:r.ALWAYS,[dM]:r.LESS,[fM]:r.LEQUAL,[hM]:r.EQUAL,[gM]:r.GEQUAL,[pM]:r.GREATER,[mM]:r.NOTEQUAL};function je(V,U,ce){if(ce?(r.texParameteri(V,r.TEXTURE_WRAP_S,Ee[U.wrapS]),r.texParameteri(V,r.TEXTURE_WRAP_T,Ee[U.wrapT]),(V===r.TEXTURE_3D||V===r.TEXTURE_2D_ARRAY)&&r.texParameteri(V,r.TEXTURE_WRAP_R,Ee[U.wrapR]),r.texParameteri(V,r.TEXTURE_MAG_FILTER,Le[U.magFilter]),r.texParameteri(V,r.TEXTURE_MIN_FILTER,Le[U.minFilter])):(r.texParameteri(V,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(V,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(V===r.TEXTURE_3D||V===r.TEXTURE_2D_ARRAY)&&r.texParameteri(V,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(U.wrapS!==vn||U.wrapT!==vn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(V,r.TEXTURE_MAG_FILTER,L(U.magFilter)),r.texParameteri(V,r.TEXTURE_MIN_FILTER,L(U.minFilter)),U.minFilter!==In&&U.minFilter!==Zt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),U.compareFunction&&(r.texParameteri(V,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(V,r.TEXTURE_COMPARE_FUNC,ke[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Oe=e.get("EXT_texture_filter_anisotropic");if(U.magFilter===In||U.minFilter!==zc&&U.minFilter!==ua||U.type===Vn&&e.has("OES_texture_float_linear")===!1||o===!1&&U.type===$n&&e.has("OES_texture_half_float_linear")===!1)return;(U.anisotropy>1||n.get(U).__currentAnisotropy)&&(r.texParameterf(V,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,i.getMaxAnisotropy())),n.get(U).__currentAnisotropy=U.anisotropy)}}function Qe(V,U){let ce=!1;V.__webglInit===void 0&&(V.__webglInit=!0,U.addEventListener("dispose",F));const Oe=U.source;let Ne=_.get(Oe);Ne===void 0&&(Ne={},_.set(Oe,Ne));const De=ie(U);if(De!==V.__cacheKey){Ne[De]===void 0&&(Ne[De]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,ce=!0),Ne[De].usedTimes++;const it=Ne[V.__cacheKey];it!==void 0&&(Ne[V.__cacheKey].usedTimes--,it.usedTimes===0&&z(U)),V.__cacheKey=De,V.__webglTexture=Ne[De].texture}return ce}function nt(V,U,ce){let Oe=r.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(Oe=r.TEXTURE_2D_ARRAY),U.isData3DTexture&&(Oe=r.TEXTURE_3D);const Ne=Qe(V,U),De=U.source;t.bindTexture(Oe,V.__webglTexture,r.TEXTURE0+ce);const it=n.get(De);if(De.version!==it.__version||Ne===!0){t.activeTexture(r.TEXTURE0+ce);const Ue=Jt.getPrimaries(Jt.workingColorSpace),qe=U.colorSpace===Xi?null:Jt.getPrimaries(U.colorSpace),xt=U.colorSpace===Xi||Ue===qe?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,U.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,U.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);const At=T(U)&&E(U.image)===!1;let Re=S(U.image,At,!1,h);Re=Ut(U,Re);const Ft=E(Re)||o,$=s.convert(U.format,U.colorSpace);let fe=s.convert(U.type),Me=k(U.internalFormat,$,fe,U.colorSpace,U.isVideoTexture);je(Oe,U,Ft);let q;const le=U.mipmaps,Ie=o&&U.isVideoTexture!==!0,Ve=it.__version===void 0||Ne===!0,Ye=R(U,Re,Ft);if(U.isDepthTexture)Me=r.DEPTH_COMPONENT,o?U.type===Vn?Me=r.DEPTH_COMPONENT32F:U.type===Gr?Me=r.DEPTH_COMPONENT24:U.type===ia?Me=r.DEPTH24_STENCIL8:Me=r.DEPTH_COMPONENT16:U.type===Vn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),U.format===ra&&Me===r.DEPTH_COMPONENT&&U.type!==Cf&&U.type!==Gr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),U.type=Gr,fe=s.convert(U.type)),U.format===co&&Me===r.DEPTH_COMPONENT&&(Me=r.DEPTH_STENCIL,U.type!==ia&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),U.type=ia,fe=s.convert(U.type))),Ve&&(Ie?t.texStorage2D(r.TEXTURE_2D,1,Me,Re.width,Re.height):t.texImage2D(r.TEXTURE_2D,0,Me,Re.width,Re.height,0,$,fe,null));else if(U.isDataTexture)if(le.length>0&&Ft){Ie&&Ve&&t.texStorage2D(r.TEXTURE_2D,Ye,Me,le[0].width,le[0].height);for(let Pe=0,tt=le.length;Pe<tt;Pe++)q=le[Pe],Ie?t.texSubImage2D(r.TEXTURE_2D,Pe,0,0,q.width,q.height,$,fe,q.data):t.texImage2D(r.TEXTURE_2D,Pe,Me,q.width,q.height,0,$,fe,q.data);U.generateMipmaps=!1}else Ie?(Ve&&t.texStorage2D(r.TEXTURE_2D,Ye,Me,Re.width,Re.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,Re.width,Re.height,$,fe,Re.data)):t.texImage2D(r.TEXTURE_2D,0,Me,Re.width,Re.height,0,$,fe,Re.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){Ie&&Ve&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ye,Me,le[0].width,le[0].height,Re.depth);for(let Pe=0,tt=le.length;Pe<tt;Pe++)q=le[Pe],U.format!==Hn?$!==null?Ie?t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Pe,0,0,0,q.width,q.height,Re.depth,$,q.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Pe,Me,q.width,q.height,Re.depth,0,q.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ie?t.texSubImage3D(r.TEXTURE_2D_ARRAY,Pe,0,0,0,q.width,q.height,Re.depth,$,fe,q.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Pe,Me,q.width,q.height,Re.depth,0,$,fe,q.data)}else{Ie&&Ve&&t.texStorage2D(r.TEXTURE_2D,Ye,Me,le[0].width,le[0].height);for(let Pe=0,tt=le.length;Pe<tt;Pe++)q=le[Pe],U.format!==Hn?$!==null?Ie?t.compressedTexSubImage2D(r.TEXTURE_2D,Pe,0,0,q.width,q.height,$,q.data):t.compressedTexImage2D(r.TEXTURE_2D,Pe,Me,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ie?t.texSubImage2D(r.TEXTURE_2D,Pe,0,0,q.width,q.height,$,fe,q.data):t.texImage2D(r.TEXTURE_2D,Pe,Me,q.width,q.height,0,$,fe,q.data)}else if(U.isDataArrayTexture)Ie?(Ve&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ye,Me,Re.width,Re.height,Re.depth),t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,$,fe,Re.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,Me,Re.width,Re.height,Re.depth,0,$,fe,Re.data);else if(U.isData3DTexture)Ie?(Ve&&t.texStorage3D(r.TEXTURE_3D,Ye,Me,Re.width,Re.height,Re.depth),t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,$,fe,Re.data)):t.texImage3D(r.TEXTURE_3D,0,Me,Re.width,Re.height,Re.depth,0,$,fe,Re.data);else if(U.isFramebufferTexture){if(Ve)if(Ie)t.texStorage2D(r.TEXTURE_2D,Ye,Me,Re.width,Re.height);else{let Pe=Re.width,tt=Re.height;for(let ht=0;ht<Ye;ht++)t.texImage2D(r.TEXTURE_2D,ht,Me,Pe,tt,0,$,fe,null),Pe>>=1,tt>>=1}}else if(le.length>0&&Ft){Ie&&Ve&&t.texStorage2D(r.TEXTURE_2D,Ye,Me,le[0].width,le[0].height);for(let Pe=0,tt=le.length;Pe<tt;Pe++)q=le[Pe],Ie?t.texSubImage2D(r.TEXTURE_2D,Pe,0,0,$,fe,q):t.texImage2D(r.TEXTURE_2D,Pe,Me,$,fe,q);U.generateMipmaps=!1}else Ie?(Ve&&t.texStorage2D(r.TEXTURE_2D,Ye,Me,Re.width,Re.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,$,fe,Re)):t.texImage2D(r.TEXTURE_2D,0,Me,$,fe,Re);P(U,Ft)&&I(Oe),it.__version=De.version,U.onUpdate&&U.onUpdate(U)}V.__version=U.version}function Ot(V,U,ce){if(U.image.length!==6)return;const Oe=Qe(V,U),Ne=U.source;t.bindTexture(r.TEXTURE_CUBE_MAP,V.__webglTexture,r.TEXTURE0+ce);const De=n.get(Ne);if(Ne.version!==De.__version||Oe===!0){t.activeTexture(r.TEXTURE0+ce);const it=Jt.getPrimaries(Jt.workingColorSpace),Ue=U.colorSpace===Xi?null:Jt.getPrimaries(U.colorSpace),qe=U.colorSpace===Xi||it===Ue?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,U.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,U.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,qe);const xt=U.isCompressedTexture||U.image[0].isCompressedTexture,At=U.image[0]&&U.image[0].isDataTexture,Re=[];for(let Pe=0;Pe<6;Pe++)!xt&&!At?Re[Pe]=S(U.image[Pe],!1,!0,d):Re[Pe]=At?U.image[Pe].image:U.image[Pe],Re[Pe]=Ut(U,Re[Pe]);const Ft=Re[0],$=E(Ft)||o,fe=s.convert(U.format,U.colorSpace),Me=s.convert(U.type),q=k(U.internalFormat,fe,Me,U.colorSpace),le=o&&U.isVideoTexture!==!0,Ie=De.__version===void 0||Oe===!0;let Ve=R(U,Ft,$);je(r.TEXTURE_CUBE_MAP,U,$);let Ye;if(xt){le&&Ie&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Ve,q,Ft.width,Ft.height);for(let Pe=0;Pe<6;Pe++){Ye=Re[Pe].mipmaps;for(let tt=0;tt<Ye.length;tt++){const ht=Ye[tt];U.format!==Hn?fe!==null?le?t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,tt,0,0,ht.width,ht.height,fe,ht.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,tt,q,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):le?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,tt,0,0,ht.width,ht.height,fe,Me,ht.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,tt,q,ht.width,ht.height,0,fe,Me,ht.data)}}}else{Ye=U.mipmaps,le&&Ie&&(Ye.length>0&&Ve++,t.texStorage2D(r.TEXTURE_CUBE_MAP,Ve,q,Re[0].width,Re[0].height));for(let Pe=0;Pe<6;Pe++)if(At){le?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,Re[Pe].width,Re[Pe].height,fe,Me,Re[Pe].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,q,Re[Pe].width,Re[Pe].height,0,fe,Me,Re[Pe].data);for(let tt=0;tt<Ye.length;tt++){const on=Ye[tt].image[Pe].image;le?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,tt+1,0,0,on.width,on.height,fe,Me,on.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,tt+1,q,on.width,on.height,0,fe,Me,on.data)}}else{le?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,fe,Me,Re[Pe]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,q,fe,Me,Re[Pe]);for(let tt=0;tt<Ye.length;tt++){const ht=Ye[tt];le?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,tt+1,0,0,fe,Me,ht.image[Pe]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,tt+1,q,fe,Me,ht.image[Pe])}}}P(U,$)&&I(r.TEXTURE_CUBE_MAP),De.__version=Ne.version,U.onUpdate&&U.onUpdate(U)}V.__version=U.version}function We(V,U,ce,Oe,Ne,De){const it=s.convert(ce.format,ce.colorSpace),Ue=s.convert(ce.type),qe=k(ce.internalFormat,it,Ue,ce.colorSpace);if(!n.get(U).__hasExternalTextures){const At=Math.max(1,U.width>>De),Re=Math.max(1,U.height>>De);Ne===r.TEXTURE_3D||Ne===r.TEXTURE_2D_ARRAY?t.texImage3D(Ne,De,qe,At,Re,U.depth,0,it,Ue,null):t.texImage2D(Ne,De,qe,At,Re,0,it,Ue,null)}t.bindFramebuffer(r.FRAMEBUFFER,V),ct(U)?p.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Oe,Ne,n.get(ce).__webglTexture,0,Ke(U)):(Ne===r.TEXTURE_2D||Ne>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Ne<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Oe,Ne,n.get(ce).__webglTexture,De),t.bindFramebuffer(r.FRAMEBUFFER,null)}function K(V,U,ce){if(r.bindRenderbuffer(r.RENDERBUFFER,V),U.depthBuffer&&!U.stencilBuffer){let Oe=o===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(ce||ct(U)){const Ne=U.depthTexture;Ne&&Ne.isDepthTexture&&(Ne.type===Vn?Oe=r.DEPTH_COMPONENT32F:Ne.type===Gr&&(Oe=r.DEPTH_COMPONENT24));const De=Ke(U);ct(U)?p.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,De,Oe,U.width,U.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,De,Oe,U.width,U.height)}else r.renderbufferStorage(r.RENDERBUFFER,Oe,U.width,U.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,V)}else if(U.depthBuffer&&U.stencilBuffer){const Oe=Ke(U);ce&&ct(U)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Oe,r.DEPTH24_STENCIL8,U.width,U.height):ct(U)?p.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Oe,r.DEPTH24_STENCIL8,U.width,U.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,U.width,U.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,V)}else{const Oe=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let Ne=0;Ne<Oe.length;Ne++){const De=Oe[Ne],it=s.convert(De.format,De.colorSpace),Ue=s.convert(De.type),qe=k(De.internalFormat,it,Ue,De.colorSpace),xt=Ke(U);ce&&ct(U)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,xt,qe,U.width,U.height):ct(U)?p.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,xt,qe,U.width,U.height):r.renderbufferStorage(r.RENDERBUFFER,qe,U.width,U.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function Ce(V,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,V),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),ee(U.depthTexture,0);const Oe=n.get(U.depthTexture).__webglTexture,Ne=Ke(U);if(U.depthTexture.format===ra)ct(U)?p.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Oe,0,Ne):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Oe,0);else if(U.depthTexture.format===co)ct(U)?p.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Oe,0,Ne):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Oe,0);else throw new Error("Unknown depthTexture format")}function be(V){const U=n.get(V),ce=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!U.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");Ce(U.__webglFramebuffer,V)}else if(ce){U.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)t.bindFramebuffer(r.FRAMEBUFFER,U.__webglFramebuffer[Oe]),U.__webglDepthbuffer[Oe]=r.createRenderbuffer(),K(U.__webglDepthbuffer[Oe],V,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer=r.createRenderbuffer(),K(U.__webglDepthbuffer,V,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function Te(V,U,ce){const Oe=n.get(V);U!==void 0&&We(Oe.__webglFramebuffer,V,V.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ce!==void 0&&be(V)}function Ae(V){const U=V.texture,ce=n.get(V),Oe=n.get(U);V.addEventListener("dispose",W),V.isWebGLMultipleRenderTargets!==!0&&(Oe.__webglTexture===void 0&&(Oe.__webglTexture=r.createTexture()),Oe.__version=U.version,a.memory.textures++);const Ne=V.isWebGLCubeRenderTarget===!0,De=V.isWebGLMultipleRenderTargets===!0,it=E(V)||o;if(Ne){ce.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)if(o&&U.mipmaps&&U.mipmaps.length>0){ce.__webglFramebuffer[Ue]=[];for(let qe=0;qe<U.mipmaps.length;qe++)ce.__webglFramebuffer[Ue][qe]=r.createFramebuffer()}else ce.__webglFramebuffer[Ue]=r.createFramebuffer()}else{if(o&&U.mipmaps&&U.mipmaps.length>0){ce.__webglFramebuffer=[];for(let Ue=0;Ue<U.mipmaps.length;Ue++)ce.__webglFramebuffer[Ue]=r.createFramebuffer()}else ce.__webglFramebuffer=r.createFramebuffer();if(De)if(i.drawBuffers){const Ue=V.texture;for(let qe=0,xt=Ue.length;qe<xt;qe++){const At=n.get(Ue[qe]);At.__webglTexture===void 0&&(At.__webglTexture=r.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&V.samples>0&&ct(V)===!1){const Ue=De?U:[U];ce.__webglMultisampledFramebuffer=r.createFramebuffer(),ce.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ce.__webglMultisampledFramebuffer);for(let qe=0;qe<Ue.length;qe++){const xt=Ue[qe];ce.__webglColorRenderbuffer[qe]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ce.__webglColorRenderbuffer[qe]);const At=s.convert(xt.format,xt.colorSpace),Re=s.convert(xt.type),Ft=k(xt.internalFormat,At,Re,xt.colorSpace,V.isXRRenderTarget===!0),$=Ke(V);r.renderbufferStorageMultisample(r.RENDERBUFFER,$,Ft,V.width,V.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+qe,r.RENDERBUFFER,ce.__webglColorRenderbuffer[qe])}r.bindRenderbuffer(r.RENDERBUFFER,null),V.depthBuffer&&(ce.__webglDepthRenderbuffer=r.createRenderbuffer(),K(ce.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Ne){t.bindTexture(r.TEXTURE_CUBE_MAP,Oe.__webglTexture),je(r.TEXTURE_CUBE_MAP,U,it);for(let Ue=0;Ue<6;Ue++)if(o&&U.mipmaps&&U.mipmaps.length>0)for(let qe=0;qe<U.mipmaps.length;qe++)We(ce.__webglFramebuffer[Ue][qe],V,U,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe);else We(ce.__webglFramebuffer[Ue],V,U,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0);P(U,it)&&I(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(De){const Ue=V.texture;for(let qe=0,xt=Ue.length;qe<xt;qe++){const At=Ue[qe],Re=n.get(At);t.bindTexture(r.TEXTURE_2D,Re.__webglTexture),je(r.TEXTURE_2D,At,it),We(ce.__webglFramebuffer,V,At,r.COLOR_ATTACHMENT0+qe,r.TEXTURE_2D,0),P(At,it)&&I(r.TEXTURE_2D)}t.unbindTexture()}else{let Ue=r.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(o?Ue=V.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ue,Oe.__webglTexture),je(Ue,U,it),o&&U.mipmaps&&U.mipmaps.length>0)for(let qe=0;qe<U.mipmaps.length;qe++)We(ce.__webglFramebuffer[qe],V,U,r.COLOR_ATTACHMENT0,Ue,qe);else We(ce.__webglFramebuffer,V,U,r.COLOR_ATTACHMENT0,Ue,0);P(U,it)&&I(Ue),t.unbindTexture()}V.depthBuffer&&be(V)}function ze(V){const U=E(V)||o,ce=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let Oe=0,Ne=ce.length;Oe<Ne;Oe++){const De=ce[Oe];if(P(De,U)){const it=V.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Ue=n.get(De).__webglTexture;t.bindTexture(it,Ue),I(it),t.unbindTexture()}}}function Xe(V){if(o&&V.samples>0&&ct(V)===!1){const U=V.isWebGLMultipleRenderTargets?V.texture:[V.texture],ce=V.width,Oe=V.height;let Ne=r.COLOR_BUFFER_BIT;const De=[],it=V.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ue=n.get(V),qe=V.isWebGLMultipleRenderTargets===!0;if(qe)for(let xt=0;xt<U.length;xt++)t.bindFramebuffer(r.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+xt,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Ue.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+xt,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Ue.__webglFramebuffer);for(let xt=0;xt<U.length;xt++){De.push(r.COLOR_ATTACHMENT0+xt),V.depthBuffer&&De.push(it);const At=Ue.__ignoreDepthValues!==void 0?Ue.__ignoreDepthValues:!1;if(At===!1&&(V.depthBuffer&&(Ne|=r.DEPTH_BUFFER_BIT),V.stencilBuffer&&(Ne|=r.STENCIL_BUFFER_BIT)),qe&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Ue.__webglColorRenderbuffer[xt]),At===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[it]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[it])),qe){const Re=n.get(U[xt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Re,0)}r.blitFramebuffer(0,0,ce,Oe,0,0,ce,Oe,Ne,r.NEAREST),g&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,De)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),qe)for(let xt=0;xt<U.length;xt++){t.bindFramebuffer(r.FRAMEBUFFER,Ue.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+xt,r.RENDERBUFFER,Ue.__webglColorRenderbuffer[xt]);const At=n.get(U[xt]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Ue.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+xt,r.TEXTURE_2D,At,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Ue.__webglMultisampledFramebuffer)}}function Ke(V){return Math.min(f,V.samples)}function ct(V){const U=n.get(V);return o&&V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function _t(V){const U=a.render.frame;y.get(V)!==U&&(y.set(V,U),V.update())}function Ut(V,U){const ce=V.colorSpace,Oe=V.format,Ne=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||V.format===uf||ce!==Qi&&ce!==Xi&&(Jt.getTransfer(ce)===ln?o===!1?e.has("EXT_sRGB")===!0&&Oe===Hn?(V.format=uf,V.minFilter=Zt,V.generateMipmaps=!1):U=Yv.sRGBToLinear(U):(Oe!==Hn||Ne!==Zi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ce)),U}this.allocateTextureUnit=te,this.resetTextureUnits=oe,this.setTexture2D=ee,this.setTexture2DArray=Z,this.setTexture3D=re,this.setTextureCube=pe,this.rebindTextures=Te,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=ze,this.updateMultisampleRenderTarget=Xe,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=We,this.useMultisampledRTT=ct}function NM(r,e,t){const n=t.isWebGL2;function i(s,a=Xi){let o;const l=Jt.getTransfer(a);if(s===Zi)return r.UNSIGNED_BYTE;if(s===zv)return r.UNSIGNED_SHORT_4_4_4_4;if(s===jv)return r.UNSIGNED_SHORT_5_5_5_1;if(s===Uv)return r.BYTE;if(s===Fv)return r.SHORT;if(s===Cf)return r.UNSIGNED_SHORT;if(s===Rf)return r.INT;if(s===Gr)return r.UNSIGNED_INT;if(s===Vn)return r.FLOAT;if(s===$n)return n?r.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===$2)return r.ALPHA;if(s===Hn)return r.RGBA;if(s===J2)return r.LUMINANCE;if(s===Q2)return r.LUMINANCE_ALPHA;if(s===ra)return r.DEPTH_COMPONENT;if(s===co)return r.DEPTH_STENCIL;if(s===uf)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===Bv)return r.RED;if(s===Hv)return r.RED_INTEGER;if(s===eM)return r.RG;if(s===Vv)return r.RG_INTEGER;if(s===Gv)return r.RGBA_INTEGER;if(s===Hh||s===Vh||s===Gh||s===Wh)if(l===ln)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===Hh)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Vh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Gh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Wh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Hh)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Vh)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Gh)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Wh)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===g0||s===v0||s===x0||s===y0)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===g0)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===v0)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===x0)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===y0)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===tM)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===_0||s===b0)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===_0)return l===ln?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===b0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===w0||s===S0||s===M0||s===E0||s===T0||s===A0||s===C0||s===R0||s===P0||s===N0||s===I0||s===L0||s===k0||s===D0)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===w0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===S0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===M0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===E0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===T0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===A0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===C0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===R0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===P0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===N0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===I0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===L0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===k0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===D0)return l===ln?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Xh||s===O0||s===U0)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===Xh)return l===ln?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===O0)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===U0)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===nM||s===F0||s===z0||s===j0)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===Xh)return o.COMPRESSED_RED_RGTC1_EXT;if(s===F0)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===z0)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===j0)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ia?n?r.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:i}}class IM extends Ln{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class gl extends qt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const eU={type:"move"};class fg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){a=!0;for(const b of e.hand.values()){const _=t.getJointPose(b,n),x=this._getHandJoint(d,b);_!==null&&(x.matrix.fromArray(_.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=_.radius),x.visible=_!==null}const h=d.joints["index-finger-tip"],f=d.joints["thumb-tip"],p=h.position.distanceTo(f.position),g=.02,y=.005;d.inputState.pinching&&p>g+y?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&p<=g-y&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(eU)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),d!==null&&(d.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new gl;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class LM extends an{constructor(e,t,n,i,s,a,o,l,d,h){if(h=h!==void 0?h:ra,h!==ra&&h!==co)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===ra&&(n=Gr),n===void 0&&h===co&&(n=ia),super(null,i,s,a,o,l,h,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:In,this.minFilter=l!==void 0?l:In,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class tU extends Cs{constructor(e,t){super();const n=this;let i=null,s=1,a=null,o="local-floor",l=1,d=null,h=null,f=null,p=null,g=null,y=null;const b=t.getContextAttributes();let _=null,x=null;const M=[],S=[],E=new Ln;E.layers.enable(1),E.viewport=new Qt;const T=new Ln;T.layers.enable(2),T.viewport=new Qt;const P=[E,T],I=new IM;I.layers.enable(1),I.layers.enable(2);let k=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let re=M[Z];return re===void 0&&(re=new fg,M[Z]=re),re.getTargetRaySpace()},this.getControllerGrip=function(Z){let re=M[Z];return re===void 0&&(re=new fg,M[Z]=re),re.getGripSpace()},this.getHand=function(Z){let re=M[Z];return re===void 0&&(re=new fg,M[Z]=re),re.getHandSpace()};function L(Z){const re=S.indexOf(Z.inputSource);if(re===-1)return;const pe=M[re];pe!==void 0&&(pe.update(Z.inputSource,Z.frame,d||a),pe.dispatchEvent({type:Z.type,data:Z.inputSource}))}function F(){i.removeEventListener("select",L),i.removeEventListener("selectstart",L),i.removeEventListener("selectend",L),i.removeEventListener("squeeze",L),i.removeEventListener("squeezestart",L),i.removeEventListener("squeezeend",L),i.removeEventListener("end",F),i.removeEventListener("inputsourceschange",W);for(let Z=0;Z<M.length;Z++){const re=S[Z];re!==null&&(S[Z]=null,M[Z].disconnect(re))}k=null,R=null,e.setRenderTarget(_),g=null,p=null,f=null,i=null,x=null,ee.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){s=Z,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){o=Z,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||a},this.setReferenceSpace=function(Z){d=Z},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(Z){if(i=Z,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",L),i.addEventListener("selectstart",L),i.addEventListener("selectend",L),i.addEventListener("squeeze",L),i.addEventListener("squeezestart",L),i.addEventListener("squeezeend",L),i.addEventListener("end",F),i.addEventListener("inputsourceschange",W),b.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const re={antialias:i.renderState.layers===void 0?b.antialias:!0,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(i,t,re),i.updateRenderState({baseLayer:g}),x=new er(g.framebufferWidth,g.framebufferHeight,{format:Hn,type:Zi,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}else{let re=null,pe=null,Ee=null;b.depth&&(Ee=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,re=b.stencil?co:ra,pe=b.stencil?ia:Gr);const Le={colorFormat:t.RGBA8,depthFormat:Ee,scaleFactor:s};f=new XRWebGLBinding(i,t),p=f.createProjectionLayer(Le),i.updateRenderState({layers:[p]}),x=new er(p.textureWidth,p.textureHeight,{format:Hn,type:Zi,depthTexture:new LM(p.textureWidth,p.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0});const ke=e.properties.get(x);ke.__ignoreDepthValues=p.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(l),d=null,a=await i.requestReferenceSpace(o),ee.setContext(i),ee.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function W(Z){for(let re=0;re<Z.removed.length;re++){const pe=Z.removed[re],Ee=S.indexOf(pe);Ee>=0&&(S[Ee]=null,M[Ee].disconnect(pe))}for(let re=0;re<Z.added.length;re++){const pe=Z.added[re];let Ee=S.indexOf(pe);if(Ee===-1){for(let ke=0;ke<M.length;ke++)if(ke>=S.length){S.push(pe),Ee=ke;break}else if(S[ke]===null){S[ke]=pe,Ee=ke;break}if(Ee===-1)break}const Le=M[Ee];Le&&Le.connect(pe)}}const J=new j,z=new j;function Q(Z,re,pe){J.setFromMatrixPosition(re.matrixWorld),z.setFromMatrixPosition(pe.matrixWorld);const Ee=J.distanceTo(z),Le=re.projectionMatrix.elements,ke=pe.projectionMatrix.elements,je=Le[14]/(Le[10]-1),Qe=Le[14]/(Le[10]+1),nt=(Le[9]+1)/Le[5],Ot=(Le[9]-1)/Le[5],We=(Le[8]-1)/Le[0],K=(ke[8]+1)/ke[0],Ce=je*We,be=je*K,Te=Ee/(-We+K),Ae=Te*-We;re.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Ae),Z.translateZ(Te),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert();const ze=je+Te,Xe=Qe+Te,Ke=Ce-Ae,ct=be+(Ee-Ae),_t=nt*Qe/Xe*ze,Ut=Ot*Qe/Xe*ze;Z.projectionMatrix.makePerspective(Ke,ct,_t,Ut,ze,Xe),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}function ne(Z,re){re===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(re.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(i===null)return;I.near=T.near=E.near=Z.near,I.far=T.far=E.far=Z.far,(k!==I.near||R!==I.far)&&(i.updateRenderState({depthNear:I.near,depthFar:I.far}),k=I.near,R=I.far);const re=Z.parent,pe=I.cameras;ne(I,re);for(let Ee=0;Ee<pe.length;Ee++)ne(pe[Ee],re);pe.length===2?Q(I,E,T):I.projectionMatrix.copy(E.projectionMatrix),oe(Z,I,re)};function oe(Z,re,pe){pe===null?Z.matrix.copy(re.matrixWorld):(Z.matrix.copy(pe.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(re.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(re.projectionMatrix),Z.projectionMatrixInverse.copy(re.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=Ll*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(Z){l=Z,p!==null&&(p.fixedFoveation=Z),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=Z)};let te=null;function ie(Z,re){if(h=re.getViewerPose(d||a),y=re,h!==null){const pe=h.views;g!==null&&(e.setRenderTargetFramebuffer(x,g.framebuffer),e.setRenderTarget(x));let Ee=!1;pe.length!==I.cameras.length&&(I.cameras.length=0,Ee=!0);for(let Le=0;Le<pe.length;Le++){const ke=pe[Le];let je=null;if(g!==null)je=g.getViewport(ke);else{const nt=f.getViewSubImage(p,ke);je=nt.viewport,Le===0&&(e.setRenderTargetTextures(x,nt.colorTexture,p.ignoreDepthValues?void 0:nt.depthStencilTexture),e.setRenderTarget(x))}let Qe=P[Le];Qe===void 0&&(Qe=new Ln,Qe.layers.enable(Le),Qe.viewport=new Qt,P[Le]=Qe),Qe.matrix.fromArray(ke.transform.matrix),Qe.matrix.decompose(Qe.position,Qe.quaternion,Qe.scale),Qe.projectionMatrix.fromArray(ke.projectionMatrix),Qe.projectionMatrixInverse.copy(Qe.projectionMatrix).invert(),Qe.viewport.set(je.x,je.y,je.width,je.height),Le===0&&(I.matrix.copy(Qe.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),Ee===!0&&I.cameras.push(Qe)}}for(let pe=0;pe<M.length;pe++){const Ee=S[pe],Le=M[pe];Ee!==null&&Le!==void 0&&Le.update(Ee,re,d||a)}te&&te(Z,re),re.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:re}),y=null}const ee=new TM;ee.setAnimationLoop(ie),this.setAnimationLoop=function(Z){te=Z},this.dispose=function(){}}}function nU(r,e){function t(_,x){_.matrixAutoUpdate===!0&&_.updateMatrix(),x.value.copy(_.matrix)}function n(_,x){x.color.getRGB(_.fogColor.value,SM(r)),x.isFog?(_.fogNear.value=x.near,_.fogFar.value=x.far):x.isFogExp2&&(_.fogDensity.value=x.density)}function i(_,x,M,S,E){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(_,x):x.isMeshToonMaterial?(s(_,x),f(_,x)):x.isMeshPhongMaterial?(s(_,x),h(_,x)):x.isMeshStandardMaterial?(s(_,x),p(_,x),x.isMeshPhysicalMaterial&&g(_,x,E)):x.isMeshMatcapMaterial?(s(_,x),y(_,x)):x.isMeshDepthMaterial?s(_,x):x.isMeshDistanceMaterial?(s(_,x),b(_,x)):x.isMeshNormalMaterial?s(_,x):x.isLineBasicMaterial?(a(_,x),x.isLineDashedMaterial&&o(_,x)):x.isPointsMaterial?l(_,x,M,S):x.isSpriteMaterial?d(_,x):x.isShadowMaterial?(_.color.value.copy(x.color),_.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(_,x){_.opacity.value=x.opacity,x.color&&_.diffuse.value.copy(x.color),x.emissive&&_.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(_.map.value=x.map,t(x.map,_.mapTransform)),x.alphaMap&&(_.alphaMap.value=x.alphaMap,t(x.alphaMap,_.alphaMapTransform)),x.bumpMap&&(_.bumpMap.value=x.bumpMap,t(x.bumpMap,_.bumpMapTransform),_.bumpScale.value=x.bumpScale,x.side===hi&&(_.bumpScale.value*=-1)),x.normalMap&&(_.normalMap.value=x.normalMap,t(x.normalMap,_.normalMapTransform),_.normalScale.value.copy(x.normalScale),x.side===hi&&_.normalScale.value.negate()),x.displacementMap&&(_.displacementMap.value=x.displacementMap,t(x.displacementMap,_.displacementMapTransform),_.displacementScale.value=x.displacementScale,_.displacementBias.value=x.displacementBias),x.emissiveMap&&(_.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,_.emissiveMapTransform)),x.specularMap&&(_.specularMap.value=x.specularMap,t(x.specularMap,_.specularMapTransform)),x.alphaTest>0&&(_.alphaTest.value=x.alphaTest);const M=e.get(x).envMap;if(M&&(_.envMap.value=M,_.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=x.reflectivity,_.ior.value=x.ior,_.refractionRatio.value=x.refractionRatio),x.lightMap){_.lightMap.value=x.lightMap;const S=r._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=x.lightMapIntensity*S,t(x.lightMap,_.lightMapTransform)}x.aoMap&&(_.aoMap.value=x.aoMap,_.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,_.aoMapTransform))}function a(_,x){_.diffuse.value.copy(x.color),_.opacity.value=x.opacity,x.map&&(_.map.value=x.map,t(x.map,_.mapTransform))}function o(_,x){_.dashSize.value=x.dashSize,_.totalSize.value=x.dashSize+x.gapSize,_.scale.value=x.scale}function l(_,x,M,S){_.diffuse.value.copy(x.color),_.opacity.value=x.opacity,_.size.value=x.size*M,_.scale.value=S*.5,x.map&&(_.map.value=x.map,t(x.map,_.uvTransform)),x.alphaMap&&(_.alphaMap.value=x.alphaMap,t(x.alphaMap,_.alphaMapTransform)),x.alphaTest>0&&(_.alphaTest.value=x.alphaTest)}function d(_,x){_.diffuse.value.copy(x.color),_.opacity.value=x.opacity,_.rotation.value=x.rotation,x.map&&(_.map.value=x.map,t(x.map,_.mapTransform)),x.alphaMap&&(_.alphaMap.value=x.alphaMap,t(x.alphaMap,_.alphaMapTransform)),x.alphaTest>0&&(_.alphaTest.value=x.alphaTest)}function h(_,x){_.specular.value.copy(x.specular),_.shininess.value=Math.max(x.shininess,1e-4)}function f(_,x){x.gradientMap&&(_.gradientMap.value=x.gradientMap)}function p(_,x){_.metalness.value=x.metalness,x.metalnessMap&&(_.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,_.metalnessMapTransform)),_.roughness.value=x.roughness,x.roughnessMap&&(_.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,_.roughnessMapTransform)),e.get(x).envMap&&(_.envMapIntensity.value=x.envMapIntensity)}function g(_,x,M){_.ior.value=x.ior,x.sheen>0&&(_.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),_.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(_.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,_.sheenColorMapTransform)),x.sheenRoughnessMap&&(_.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,_.sheenRoughnessMapTransform))),x.clearcoat>0&&(_.clearcoat.value=x.clearcoat,_.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(_.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,_.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(_.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===hi&&_.clearcoatNormalScale.value.negate())),x.iridescence>0&&(_.iridescence.value=x.iridescence,_.iridescenceIOR.value=x.iridescenceIOR,_.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(_.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,_.iridescenceMapTransform)),x.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),x.transmission>0&&(_.transmission.value=x.transmission,_.transmissionSamplerMap.value=M.texture,_.transmissionSamplerSize.value.set(M.width,M.height),x.transmissionMap&&(_.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,_.transmissionMapTransform)),_.thickness.value=x.thickness,x.thicknessMap&&(_.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=x.attenuationDistance,_.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(_.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(_.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=x.specularIntensity,_.specularColor.value.copy(x.specularColor),x.specularColorMap&&(_.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,_.specularColorMapTransform)),x.specularIntensityMap&&(_.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,_.specularIntensityMapTransform))}function y(_,x){x.matcap&&(_.matcap.value=x.matcap)}function b(_,x){const M=e.get(x).light;_.referencePosition.value.setFromMatrixPosition(M.matrixWorld),_.nearDistance.value=M.shadow.camera.near,_.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function iU(r,e,t,n){let i={},s={},a=[];const o=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(M,S){const E=S.program;n.uniformBlockBinding(M,E)}function d(M,S){let E=i[M.id];E===void 0&&(y(M),E=h(M),i[M.id]=E,M.addEventListener("dispose",_));const T=S.program;n.updateUBOMapping(M,T);const P=e.render.frame;s[M.id]!==P&&(p(M),s[M.id]=P)}function h(M){const S=f();M.__bindingPointIndex=S;const E=r.createBuffer(),T=M.__size,P=M.usage;return r.bindBuffer(r.UNIFORM_BUFFER,E),r.bufferData(r.UNIFORM_BUFFER,T,P),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,S,E),E}function f(){for(let M=0;M<o;M++)if(a.indexOf(M)===-1)return a.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(M){const S=i[M.id],E=M.uniforms,T=M.__cache;r.bindBuffer(r.UNIFORM_BUFFER,S);for(let P=0,I=E.length;P<I;P++){const k=E[P];if(g(k,P,T)===!0){const R=k.__offset,L=Array.isArray(k.value)?k.value:[k.value];let F=0;for(let W=0;W<L.length;W++){const J=L[W],z=b(J);typeof J=="number"?(k.__data[0]=J,r.bufferSubData(r.UNIFORM_BUFFER,R+F,k.__data)):J.isMatrix3?(k.__data[0]=J.elements[0],k.__data[1]=J.elements[1],k.__data[2]=J.elements[2],k.__data[3]=J.elements[0],k.__data[4]=J.elements[3],k.__data[5]=J.elements[4],k.__data[6]=J.elements[5],k.__data[7]=J.elements[0],k.__data[8]=J.elements[6],k.__data[9]=J.elements[7],k.__data[10]=J.elements[8],k.__data[11]=J.elements[0]):(J.toArray(k.__data,F),F+=z.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,R,k.__data)}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function g(M,S,E){const T=M.value;if(E[S]===void 0){if(typeof T=="number")E[S]=T;else{const P=Array.isArray(T)?T:[T],I=[];for(let k=0;k<P.length;k++)I.push(P[k].clone());E[S]=I}return!0}else if(typeof T=="number"){if(E[S]!==T)return E[S]=T,!0}else{const P=Array.isArray(E[S])?E[S]:[E[S]],I=Array.isArray(T)?T:[T];for(let k=0;k<P.length;k++){const R=P[k];if(R.equals(I[k])===!1)return R.copy(I[k]),!0}}return!1}function y(M){const S=M.uniforms;let E=0;const T=16;let P=0;for(let I=0,k=S.length;I<k;I++){const R=S[I],L={boundary:0,storage:0},F=Array.isArray(R.value)?R.value:[R.value];for(let W=0,J=F.length;W<J;W++){const z=F[W],Q=b(z);L.boundary+=Q.boundary,L.storage+=Q.storage}if(R.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=E,I>0){P=E%T;const W=T-P;P!==0&&W-L.boundary<0&&(E+=T-P,R.__offset=E)}E+=L.storage}return P=E%T,P>0&&(E+=T-P),M.__size=E,M.__cache={},this}function b(M){const S={boundary:0,storage:0};return typeof M=="number"?(S.boundary=4,S.storage=4):M.isVector2?(S.boundary=8,S.storage=8):M.isVector3||M.isColor?(S.boundary=16,S.storage=12):M.isVector4?(S.boundary=16,S.storage=16):M.isMatrix3?(S.boundary=48,S.storage=48):M.isMatrix4?(S.boundary=64,S.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),S}function _(M){const S=M.target;S.removeEventListener("dispose",_);const E=a.indexOf(S.__bindingPointIndex);a.splice(E,1),r.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function x(){for(const M in i)r.deleteBuffer(i[M]);a=[],i={},s={}}return{bind:l,update:d,dispose:x}}class Df{constructor(e={}){const{canvas:t=_M(),context:n=null,depth:i=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:d=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;n!==null?p=n.getContextAttributes().alpha:p=a;const g=new Uint32Array(4),y=new Int32Array(4);let b=null,_=null;const x=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=zn,this._useLegacyLights=!1,this.toneMapping=qr,this.toneMappingExposure=1;const S=this;let E=!1,T=0,P=0,I=null,k=-1,R=null;const L=new Qt,F=new Qt;let W=null;const J=new rt(0);let z=0,Q=t.width,ne=t.height,oe=1,te=null,ie=null;const ee=new Qt(0,0,Q,ne),Z=new Qt(0,0,Q,ne);let re=!1;const pe=new Lf;let Ee=!1,Le=!1,ke=null;const je=new Tt,Qe=new Se,nt=new j,Ot={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function We(){return I===null?oe:1}let K=n;function Ce(C,O){for(let G=0;G<C.length;G++){const H=C[G],Y=t.getContext(H,O);if(Y!==null)return Y}return null}try{const C={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zl}`),t.addEventListener("webglcontextlost",le,!1),t.addEventListener("webglcontextrestored",Ie,!1),t.addEventListener("webglcontextcreationerror",Ve,!1),K===null){const O=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&O.shift(),K=Ce(O,C),K===null)throw Ce(O)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&K instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(C){throw console.error("THREE.WebGLRenderer: "+C.message),C}let be,Te,Ae,ze,Xe,Ke,ct,_t,Ut,V,U,ce,Oe,Ne,De,it,Ue,qe,xt,At,Re,Ft,$,fe;function Me(){be=new y5(K),Te=new f5(K,be,e),be.init(Te),Ft=new NM(K,be,Te),Ae=new JO(K,be,Te),ze=new w5(K),Xe=new jO,Ke=new QO(K,be,Ae,Xe,Te,Ft,ze),ct=new m5(S),_t=new x5(S),Ut=new I4(K,Te),$=new d5(K,be,Ut,Te),V=new _5(K,Ut,ze,$),U=new T5(K,V,Ut,ze),xt=new E5(K,Te,Ke),it=new p5(Xe),ce=new zO(S,ct,_t,be,Te,$,it),Oe=new nU(S,Xe),Ne=new HO,De=new YO(be,Te),qe=new u5(S,ct,_t,Ae,U,p,l),Ue=new $O(S,U,Te),fe=new iU(K,ze,Te,Ae),At=new h5(K,be,ze,Te),Re=new b5(K,be,ze,Te),ze.programs=ce.programs,S.capabilities=Te,S.extensions=be,S.properties=Xe,S.renderLists=Ne,S.shadowMap=Ue,S.state=Ae,S.info=ze}Me();const q=new tU(S,K);this.xr=q,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const C=be.get("WEBGL_lose_context");C&&C.loseContext()},this.forceContextRestore=function(){const C=be.get("WEBGL_lose_context");C&&C.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(C){C!==void 0&&(oe=C,this.setSize(Q,ne,!1))},this.getSize=function(C){return C.set(Q,ne)},this.setSize=function(C,O,G=!0){if(q.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=C,ne=O,t.width=Math.floor(C*oe),t.height=Math.floor(O*oe),G===!0&&(t.style.width=C+"px",t.style.height=O+"px"),this.setViewport(0,0,C,O)},this.getDrawingBufferSize=function(C){return C.set(Q*oe,ne*oe).floor()},this.setDrawingBufferSize=function(C,O,G){Q=C,ne=O,oe=G,t.width=Math.floor(C*G),t.height=Math.floor(O*G),this.setViewport(0,0,C,O)},this.getCurrentViewport=function(C){return C.copy(L)},this.getViewport=function(C){return C.copy(ee)},this.setViewport=function(C,O,G,H){C.isVector4?ee.set(C.x,C.y,C.z,C.w):ee.set(C,O,G,H),Ae.viewport(L.copy(ee).multiplyScalar(oe).floor())},this.getScissor=function(C){return C.copy(Z)},this.setScissor=function(C,O,G,H){C.isVector4?Z.set(C.x,C.y,C.z,C.w):Z.set(C,O,G,H),Ae.scissor(F.copy(Z).multiplyScalar(oe).floor())},this.getScissorTest=function(){return re},this.setScissorTest=function(C){Ae.setScissorTest(re=C)},this.setOpaqueSort=function(C){te=C},this.setTransparentSort=function(C){ie=C},this.getClearColor=function(C){return C.copy(qe.getClearColor())},this.setClearColor=function(){qe.setClearColor.apply(qe,arguments)},this.getClearAlpha=function(){return qe.getClearAlpha()},this.setClearAlpha=function(){qe.setClearAlpha.apply(qe,arguments)},this.clear=function(C=!0,O=!0,G=!0){let H=0;if(C){let Y=!1;if(I!==null){const ue=I.texture.format;Y=ue===Gv||ue===Vv||ue===Hv}if(Y){const ue=I.texture.type,he=ue===Zi||ue===Gr||ue===Cf||ue===ia||ue===zv||ue===jv,_e=qe.getClearColor(),xe=qe.getClearAlpha(),we=_e.r,ge=_e.g,et=_e.b;he?(g[0]=we,g[1]=ge,g[2]=et,g[3]=xe,K.clearBufferuiv(K.COLOR,0,g)):(y[0]=we,y[1]=ge,y[2]=et,y[3]=xe,K.clearBufferiv(K.COLOR,0,y))}else H|=K.COLOR_BUFFER_BIT}O&&(H|=K.DEPTH_BUFFER_BIT),G&&(H|=K.STENCIL_BUFFER_BIT),K.clear(H)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",le,!1),t.removeEventListener("webglcontextrestored",Ie,!1),t.removeEventListener("webglcontextcreationerror",Ve,!1),Ne.dispose(),De.dispose(),Xe.dispose(),ct.dispose(),_t.dispose(),U.dispose(),$.dispose(),fe.dispose(),ce.dispose(),q.dispose(),q.removeEventListener("sessionstart",zt),q.removeEventListener("sessionend",An),ke&&(ke.dispose(),ke=null),fn.stop()};function le(C){C.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const C=ze.autoReset,O=Ue.enabled,G=Ue.autoUpdate,H=Ue.needsUpdate,Y=Ue.type;Me(),ze.autoReset=C,Ue.enabled=O,Ue.autoUpdate=G,Ue.needsUpdate=H,Ue.type=Y}function Ve(C){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",C.statusMessage)}function Ye(C){const O=C.target;O.removeEventListener("dispose",Ye),Pe(O)}function Pe(C){tt(C),Xe.remove(C)}function tt(C){const O=Xe.get(C).programs;O!==void 0&&(O.forEach(function(G){ce.releaseProgram(G)}),C.isShaderMaterial&&ce.releaseShaderCache(C))}this.renderBufferDirect=function(C,O,G,H,Y,ue){O===null&&(O=Ot);const he=Y.isMesh&&Y.matrixWorld.determinant()<0,_e=Mo(C,O,G,H,Y);Ae.setMaterial(H,he);let xe=G.index,we=1;if(H.wireframe===!0){if(xe=V.getWireframeAttribute(G),xe===void 0)return;we=2}const ge=G.drawRange,et=G.attributes.position;let Be=ge.start*we,He=(ge.start+ge.count)*we;ue!==null&&(Be=Math.max(Be,ue.start*we),He=Math.min(He,(ue.start+ue.count)*we)),xe!==null?(Be=Math.max(Be,0),He=Math.min(He,xe.count)):et!=null&&(Be=Math.max(Be,0),He=Math.min(He,et.count));const ut=He-Be;if(ut<0||ut===1/0)return;$.setup(Y,H,_e,G,xe);let mt,ft=At;if(xe!==null&&(mt=Ut.get(xe),ft=Re,ft.setIndex(mt)),Y.isMesh)H.wireframe===!0?(Ae.setLineWidth(H.wireframeLinewidth*We()),ft.setMode(K.LINES)):ft.setMode(K.TRIANGLES);else if(Y.isLine){let $e=H.linewidth;$e===void 0&&($e=1),Ae.setLineWidth($e*We()),Y.isLineSegments?ft.setMode(K.LINES):Y.isLineLoop?ft.setMode(K.LINE_LOOP):ft.setMode(K.LINE_STRIP)}else Y.isPoints?ft.setMode(K.POINTS):Y.isSprite&&ft.setMode(K.TRIANGLES);if(Y.isInstancedMesh)ft.renderInstances(Be,ut,Y.count);else if(G.isInstancedBufferGeometry){const $e=G._maxInstanceCount!==void 0?G._maxInstanceCount:1/0,yt=Math.min(G.instanceCount,$e);ft.renderInstances(Be,ut,yt)}else ft.render(Be,ut)},this.compile=function(C,O){function G(H,Y,ue){H.transparent===!0&&H.side===Mr&&H.forceSinglePass===!1?(H.side=hi,H.needsUpdate=!0,ni(H,Y,ue),H.side=As,H.needsUpdate=!0,ni(H,Y,ue),H.side=Mr):ni(H,Y,ue)}_=De.get(C),_.init(),M.push(_),C.traverseVisible(function(H){H.isLight&&H.layers.test(O.layers)&&(_.pushLight(H),H.castShadow&&_.pushShadow(H))}),_.setupLights(S._useLegacyLights),C.traverse(function(H){const Y=H.material;if(Y)if(Array.isArray(Y))for(let ue=0;ue<Y.length;ue++){const he=Y[ue];G(he,C,H)}else G(Y,C,H)}),M.pop(),_=null};let ht=null;function on(C){ht&&ht(C)}function zt(){fn.stop()}function An(){fn.start()}const fn=new TM;fn.setAnimationLoop(on),typeof self<"u"&&fn.setContext(self),this.setAnimationLoop=function(C){ht=C,q.setAnimationLoop(C),C===null?fn.stop():fn.start()},q.addEventListener("sessionstart",zt),q.addEventListener("sessionend",An),this.render=function(C,O){if(O!==void 0&&O.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;C.matrixWorldAutoUpdate===!0&&C.updateMatrixWorld(),O.parent===null&&O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),q.enabled===!0&&q.isPresenting===!0&&(q.cameraAutoUpdate===!0&&q.updateCamera(O),O=q.getCamera()),C.isScene===!0&&C.onBeforeRender(S,C,O,I),_=De.get(C,M.length),_.init(),M.push(_),je.multiplyMatrices(O.projectionMatrix,O.matrixWorldInverse),pe.setFromProjectionMatrix(je),Le=this.localClippingEnabled,Ee=it.init(this.clippingPlanes,Le),b=Ne.get(C,x.length),b.init(),x.push(b),wo(C,O,0,S.sortObjects),b.finish(),S.sortObjects===!0&&b.sort(te,ie),this.info.render.frame++,Ee===!0&&it.beginShadows();const G=_.state.shadowsArray;if(Ue.render(G,C,O),Ee===!0&&it.endShadows(),this.info.autoReset===!0&&this.info.reset(),qe.render(b,C),_.setupLights(S._useLegacyLights),O.isArrayCamera){const H=O.cameras;for(let Y=0,ue=H.length;Y<ue;Y++){const he=H[Y];So(b,C,he,he.viewport)}}else So(b,C,O);I!==null&&(Ke.updateMultisampleRenderTarget(I),Ke.updateRenderTargetMipmap(I)),C.isScene===!0&&C.onAfterRender(S,C,O),$.resetDefaultState(),k=-1,R=null,M.pop(),M.length>0?_=M[M.length-1]:_=null,x.pop(),x.length>0?b=x[x.length-1]:b=null};function wo(C,O,G,H){if(C.visible===!1)return;if(C.layers.test(O.layers)){if(C.isGroup)G=C.renderOrder;else if(C.isLOD)C.autoUpdate===!0&&C.update(O);else if(C.isLight)_.pushLight(C),C.castShadow&&_.pushShadow(C);else if(C.isSprite){if(!C.frustumCulled||pe.intersectsSprite(C)){H&&nt.setFromMatrixPosition(C.matrixWorld).applyMatrix4(je);const he=U.update(C),_e=C.material;_e.visible&&b.push(C,he,_e,G,nt.z,null)}}else if((C.isMesh||C.isLine||C.isPoints)&&(!C.frustumCulled||pe.intersectsObject(C))){const he=U.update(C),_e=C.material;if(H&&(C.boundingSphere!==void 0?(C.boundingSphere===null&&C.computeBoundingSphere(),nt.copy(C.boundingSphere.center)):(he.boundingSphere===null&&he.computeBoundingSphere(),nt.copy(he.boundingSphere.center)),nt.applyMatrix4(C.matrixWorld).applyMatrix4(je)),Array.isArray(_e)){const xe=he.groups;for(let we=0,ge=xe.length;we<ge;we++){const et=xe[we],Be=_e[et.materialIndex];Be&&Be.visible&&b.push(C,he,Be,G,nt.z,et)}}else _e.visible&&b.push(C,he,_e,G,nt.z,null)}}const ue=C.children;for(let he=0,_e=ue.length;he<_e;he++)wo(ue[he],O,G,H)}function So(C,O,G,H){const Y=C.opaque,ue=C.transmissive,he=C.transparent;_.setupLightsView(G),Ee===!0&&it.setGlobalState(S.clippingPlanes,G),ue.length>0&&Qr(Y,ue,O,G),H&&Ae.viewport(L.copy(H)),Y.length>0&&Rr(Y,O,G),ue.length>0&&Rr(ue,O,G),he.length>0&&Rr(he,O,G),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function Qr(C,O,G,H){const Y=Te.isWebGL2;ke===null&&(ke=new er(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")?$n:Zi,minFilter:ua,samples:Y?4:0})),S.getDrawingBufferSize(Qe),Y?ke.setSize(Qe.x,Qe.y):ke.setSize(df(Qe.x),df(Qe.y));const ue=S.getRenderTarget();S.setRenderTarget(ke),S.getClearColor(J),z=S.getClearAlpha(),z<1&&S.setClearColor(16777215,.5),S.clear();const he=S.toneMapping;S.toneMapping=qr,Rr(C,G,H),Ke.updateMultisampleRenderTarget(ke),Ke.updateRenderTargetMipmap(ke);let _e=!1;for(let xe=0,we=O.length;xe<we;xe++){const ge=O[xe],et=ge.object,Be=ge.geometry,He=ge.material,ut=ge.group;if(He.side===Mr&&et.layers.test(H.layers)){const mt=He.side;He.side=hi,He.needsUpdate=!0,Pr(et,G,H,Be,He,ut),He.side=mt,He.needsUpdate=!0,_e=!0}}_e===!0&&(Ke.updateMultisampleRenderTarget(ke),Ke.updateRenderTargetMipmap(ke)),S.setRenderTarget(ue),S.setClearColor(J,z),S.toneMapping=he}function Rr(C,O,G){const H=O.isScene===!0?O.overrideMaterial:null;for(let Y=0,ue=C.length;Y<ue;Y++){const he=C[Y],_e=he.object,xe=he.geometry,we=H===null?he.material:H,ge=he.group;_e.layers.test(G.layers)&&Pr(_e,O,G,xe,we,ge)}}function Pr(C,O,G,H,Y,ue){C.onBeforeRender(S,O,G,H,Y,ue),C.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,C.matrixWorld),C.normalMatrix.getNormalMatrix(C.modelViewMatrix),Y.onBeforeRender(S,O,G,H,C,ue),Y.transparent===!0&&Y.side===Mr&&Y.forceSinglePass===!1?(Y.side=hi,Y.needsUpdate=!0,S.renderBufferDirect(G,O,H,Y,C,ue),Y.side=As,Y.needsUpdate=!0,S.renderBufferDirect(G,O,H,Y,C,ue),Y.side=Mr):S.renderBufferDirect(G,O,H,Y,C,ue),C.onAfterRender(S,O,G,H,Y,ue)}function ni(C,O,G){O.isScene!==!0&&(O=Ot);const H=Xe.get(C),Y=_.state.lights,ue=_.state.shadowsArray,he=Y.state.version,_e=ce.getParameters(C,Y.state,ue,O,G),xe=ce.getProgramCacheKey(_e);let we=H.programs;H.environment=C.isMeshStandardMaterial?O.environment:null,H.fog=O.fog,H.envMap=(C.isMeshStandardMaterial?_t:ct).get(C.envMap||H.environment),we===void 0&&(C.addEventListener("dispose",Ye),we=new Map,H.programs=we);let ge=we.get(xe);if(ge!==void 0){if(H.currentProgram===ge&&H.lightsStateVersion===he)return Nt(C,_e),ge}else _e.uniforms=ce.getUniforms(C),C.onBuild(G,_e,S),C.onBeforeCompile(_e,S),ge=ce.acquireProgram(_e,xe),we.set(xe,ge),H.uniforms=_e.uniforms;const et=H.uniforms;(!C.isShaderMaterial&&!C.isRawShaderMaterial||C.clipping===!0)&&(et.clippingPlanes=it.uniform),Nt(C,_e),H.needsLights=D(C),H.lightsStateVersion=he,H.needsLights&&(et.ambientLightColor.value=Y.state.ambient,et.lightProbe.value=Y.state.probe,et.directionalLights.value=Y.state.directional,et.directionalLightShadows.value=Y.state.directionalShadow,et.spotLights.value=Y.state.spot,et.spotLightShadows.value=Y.state.spotShadow,et.rectAreaLights.value=Y.state.rectArea,et.ltc_1.value=Y.state.rectAreaLTC1,et.ltc_2.value=Y.state.rectAreaLTC2,et.pointLights.value=Y.state.point,et.pointLightShadows.value=Y.state.pointShadow,et.hemisphereLights.value=Y.state.hemi,et.directionalShadowMap.value=Y.state.directionalShadowMap,et.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,et.spotShadowMap.value=Y.state.spotShadowMap,et.spotLightMatrix.value=Y.state.spotLightMatrix,et.spotLightMap.value=Y.state.spotLightMap,et.pointShadowMap.value=Y.state.pointShadowMap,et.pointShadowMatrix.value=Y.state.pointShadowMatrix);const Be=ge.getUniforms(),He=Zh.seqWithValue(Be.seq,et);return H.currentProgram=ge,H.uniformsList=He,ge}function Nt(C,O){const G=Xe.get(C);G.outputColorSpace=O.outputColorSpace,G.instancing=O.instancing,G.instancingColor=O.instancingColor,G.skinning=O.skinning,G.morphTargets=O.morphTargets,G.morphNormals=O.morphNormals,G.morphColors=O.morphColors,G.morphTargetsCount=O.morphTargetsCount,G.numClippingPlanes=O.numClippingPlanes,G.numIntersection=O.numClipIntersection,G.vertexAlphas=O.vertexAlphas,G.vertexTangents=O.vertexTangents,G.toneMapping=O.toneMapping}function Mo(C,O,G,H,Y){O.isScene!==!0&&(O=Ot),Ke.resetTextureUnits();const ue=O.fog,he=H.isMeshStandardMaterial?O.environment:null,_e=I===null?S.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Qi,xe=(H.isMeshStandardMaterial?_t:ct).get(H.envMap||he),we=H.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,ge=!!G.attributes.tangent&&(!!H.normalMap||H.anisotropy>0),et=!!G.morphAttributes.position,Be=!!G.morphAttributes.normal,He=!!G.morphAttributes.color;let ut=qr;H.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(ut=S.toneMapping);const mt=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,ft=mt!==void 0?mt.length:0,$e=Xe.get(H),yt=_.state.lights;if(Ee===!0&&(Le===!0||C!==R)){const wt=C===R&&H.id===k;it.setState(H,C,wt)}let at=!1;H.version===$e.__version?($e.needsLights&&$e.lightsStateVersion!==yt.state.version||$e.outputColorSpace!==_e||Y.isInstancedMesh&&$e.instancing===!1||!Y.isInstancedMesh&&$e.instancing===!0||Y.isSkinnedMesh&&$e.skinning===!1||!Y.isSkinnedMesh&&$e.skinning===!0||Y.isInstancedMesh&&$e.instancingColor===!0&&Y.instanceColor===null||Y.isInstancedMesh&&$e.instancingColor===!1&&Y.instanceColor!==null||$e.envMap!==xe||H.fog===!0&&$e.fog!==ue||$e.numClippingPlanes!==void 0&&($e.numClippingPlanes!==it.numPlanes||$e.numIntersection!==it.numIntersection)||$e.vertexAlphas!==we||$e.vertexTangents!==ge||$e.morphTargets!==et||$e.morphNormals!==Be||$e.morphColors!==He||$e.toneMapping!==ut||Te.isWebGL2===!0&&$e.morphTargetsCount!==ft)&&(at=!0):(at=!0,$e.__version=H.version);let St=$e.currentProgram;at===!0&&(St=ni(H,O,Y));let Kt=!1,bt=!1,$t=!1;const Vt=St.getUniforms(),tn=$e.uniforms;if(Ae.useProgram(St.program)&&(Kt=!0,bt=!0,$t=!0),H.id!==k&&(k=H.id,bt=!0),Kt||R!==C){Vt.setValue(K,"projectionMatrix",C.projectionMatrix),Vt.setValue(K,"viewMatrix",C.matrixWorldInverse);const wt=Vt.map.cameraPosition;wt!==void 0&&wt.setValue(K,nt.setFromMatrixPosition(C.matrixWorld)),Te.logarithmicDepthBuffer&&Vt.setValue(K,"logDepthBufFC",2/(Math.log(C.far+1)/Math.LN2)),(H.isMeshPhongMaterial||H.isMeshToonMaterial||H.isMeshLambertMaterial||H.isMeshBasicMaterial||H.isMeshStandardMaterial||H.isShaderMaterial)&&Vt.setValue(K,"isOrthographic",C.isOrthographicCamera===!0),R!==C&&(R=C,bt=!0,$t=!0)}if(Y.isSkinnedMesh){Vt.setOptional(K,Y,"bindMatrix"),Vt.setOptional(K,Y,"bindMatrixInverse");const wt=Y.skeleton;wt&&(Te.floatVertexTextures?(wt.boneTexture===null&&wt.computeBoneTexture(),Vt.setValue(K,"boneTexture",wt.boneTexture,Ke),Vt.setValue(K,"boneTextureSize",wt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Cn=G.morphAttributes;if((Cn.position!==void 0||Cn.normal!==void 0||Cn.color!==void 0&&Te.isWebGL2===!0)&&xt.update(Y,G,St),(bt||$e.receiveShadow!==Y.receiveShadow)&&($e.receiveShadow=Y.receiveShadow,Vt.setValue(K,"receiveShadow",Y.receiveShadow)),H.isMeshGouraudMaterial&&H.envMap!==null&&(tn.envMap.value=xe,tn.flipEnvMap.value=xe.isCubeTexture&&xe.isRenderTargetTexture===!1?-1:1),bt&&(Vt.setValue(K,"toneMappingExposure",S.toneMappingExposure),$e.needsLights&&Wl(tn,$t),ue&&H.fog===!0&&Oe.refreshFogUniforms(tn,ue),Oe.refreshMaterialUniforms(tn,H,oe,ne,ke),Zh.upload(K,$e.uniformsList,tn,Ke)),H.isShaderMaterial&&H.uniformsNeedUpdate===!0&&(Zh.upload(K,$e.uniformsList,tn,Ke),H.uniformsNeedUpdate=!1),H.isSpriteMaterial&&Vt.setValue(K,"center",Y.center),Vt.setValue(K,"modelViewMatrix",Y.modelViewMatrix),Vt.setValue(K,"normalMatrix",Y.normalMatrix),Vt.setValue(K,"modelMatrix",Y.matrixWorld),H.isShaderMaterial||H.isRawShaderMaterial){const wt=H.uniformsGroups;for(let xn=0,Yt=wt.length;xn<Yt;xn++)if(Te.isWebGL2){const jt=wt[xn];fe.update(jt,St),fe.bind(jt,St)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return St}function Wl(C,O){C.ambientLightColor.needsUpdate=O,C.lightProbe.needsUpdate=O,C.directionalLights.needsUpdate=O,C.directionalLightShadows.needsUpdate=O,C.pointLights.needsUpdate=O,C.pointLightShadows.needsUpdate=O,C.spotLights.needsUpdate=O,C.spotLightShadows.needsUpdate=O,C.rectAreaLights.needsUpdate=O,C.hemisphereLights.needsUpdate=O}function D(C){return C.isMeshLambertMaterial||C.isMeshToonMaterial||C.isMeshPhongMaterial||C.isMeshStandardMaterial||C.isShadowMaterial||C.isShaderMaterial&&C.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(C,O,G){Xe.get(C.texture).__webglTexture=O,Xe.get(C.depthTexture).__webglTexture=G;const H=Xe.get(C);H.__hasExternalTextures=!0,H.__hasExternalTextures&&(H.__autoAllocateDepthBuffer=G===void 0,H.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),H.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(C,O){const G=Xe.get(C);G.__webglFramebuffer=O,G.__useDefaultFramebuffer=O===void 0},this.setRenderTarget=function(C,O=0,G=0){I=C,T=O,P=G;let H=!0,Y=null,ue=!1,he=!1;if(C){const xe=Xe.get(C);xe.__useDefaultFramebuffer!==void 0?(Ae.bindFramebuffer(K.FRAMEBUFFER,null),H=!1):xe.__webglFramebuffer===void 0?Ke.setupRenderTarget(C):xe.__hasExternalTextures&&Ke.rebindTextures(C,Xe.get(C.texture).__webglTexture,Xe.get(C.depthTexture).__webglTexture);const we=C.texture;(we.isData3DTexture||we.isDataArrayTexture||we.isCompressedArrayTexture)&&(he=!0);const ge=Xe.get(C).__webglFramebuffer;C.isWebGLCubeRenderTarget?(Array.isArray(ge[O])?Y=ge[O][G]:Y=ge[O],ue=!0):Te.isWebGL2&&C.samples>0&&Ke.useMultisampledRTT(C)===!1?Y=Xe.get(C).__webglMultisampledFramebuffer:Array.isArray(ge)?Y=ge[G]:Y=ge,L.copy(C.viewport),F.copy(C.scissor),W=C.scissorTest}else L.copy(ee).multiplyScalar(oe).floor(),F.copy(Z).multiplyScalar(oe).floor(),W=re;if(Ae.bindFramebuffer(K.FRAMEBUFFER,Y)&&Te.drawBuffers&&H&&Ae.drawBuffers(C,Y),Ae.viewport(L),Ae.scissor(F),Ae.setScissorTest(W),ue){const xe=Xe.get(C.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+O,xe.__webglTexture,G)}else if(he){const xe=Xe.get(C.texture),we=O||0;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,xe.__webglTexture,G||0,we)}k=-1},this.readRenderTargetPixels=function(C,O,G,H,Y,ue,he){if(!(C&&C.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _e=Xe.get(C).__webglFramebuffer;if(C.isWebGLCubeRenderTarget&&he!==void 0&&(_e=_e[he]),_e){Ae.bindFramebuffer(K.FRAMEBUFFER,_e);try{const xe=C.texture,we=xe.format,ge=xe.type;if(we!==Hn&&Ft.convert(we)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const et=ge===$n&&(be.has("EXT_color_buffer_half_float")||Te.isWebGL2&&be.has("EXT_color_buffer_float"));if(ge!==Zi&&Ft.convert(ge)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ge===Vn&&(Te.isWebGL2||be.has("OES_texture_float")||be.has("WEBGL_color_buffer_float")))&&!et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}O>=0&&O<=C.width-H&&G>=0&&G<=C.height-Y&&K.readPixels(O,G,H,Y,Ft.convert(we),Ft.convert(ge),ue)}finally{const xe=I!==null?Xe.get(I).__webglFramebuffer:null;Ae.bindFramebuffer(K.FRAMEBUFFER,xe)}}},this.copyFramebufferToTexture=function(C,O,G=0){const H=Math.pow(2,-G),Y=Math.floor(O.image.width*H),ue=Math.floor(O.image.height*H);Ke.setTexture2D(O,0),K.copyTexSubImage2D(K.TEXTURE_2D,G,0,0,C.x,C.y,Y,ue),Ae.unbindTexture()},this.copyTextureToTexture=function(C,O,G,H=0){const Y=O.image.width,ue=O.image.height,he=Ft.convert(G.format),_e=Ft.convert(G.type);Ke.setTexture2D(G,0),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,G.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,G.unpackAlignment),O.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,H,C.x,C.y,Y,ue,he,_e,O.image.data):O.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,H,C.x,C.y,O.mipmaps[0].width,O.mipmaps[0].height,he,O.mipmaps[0].data):K.texSubImage2D(K.TEXTURE_2D,H,C.x,C.y,he,_e,O.image),H===0&&G.generateMipmaps&&K.generateMipmap(K.TEXTURE_2D),Ae.unbindTexture()},this.copyTextureToTexture3D=function(C,O,G,H,Y=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ue=C.max.x-C.min.x+1,he=C.max.y-C.min.y+1,_e=C.max.z-C.min.z+1,xe=Ft.convert(H.format),we=Ft.convert(H.type);let ge;if(H.isData3DTexture)Ke.setTexture3D(H,0),ge=K.TEXTURE_3D;else if(H.isDataArrayTexture)Ke.setTexture2DArray(H,0),ge=K.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,H.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,H.unpackAlignment);const et=K.getParameter(K.UNPACK_ROW_LENGTH),Be=K.getParameter(K.UNPACK_IMAGE_HEIGHT),He=K.getParameter(K.UNPACK_SKIP_PIXELS),ut=K.getParameter(K.UNPACK_SKIP_ROWS),mt=K.getParameter(K.UNPACK_SKIP_IMAGES),ft=G.isCompressedTexture?G.mipmaps[0]:G.image;K.pixelStorei(K.UNPACK_ROW_LENGTH,ft.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,ft.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,C.min.x),K.pixelStorei(K.UNPACK_SKIP_ROWS,C.min.y),K.pixelStorei(K.UNPACK_SKIP_IMAGES,C.min.z),G.isDataTexture||G.isData3DTexture?K.texSubImage3D(ge,Y,O.x,O.y,O.z,ue,he,_e,xe,we,ft.data):G.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(ge,Y,O.x,O.y,O.z,ue,he,_e,xe,ft.data)):K.texSubImage3D(ge,Y,O.x,O.y,O.z,ue,he,_e,xe,we,ft),K.pixelStorei(K.UNPACK_ROW_LENGTH,et),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Be),K.pixelStorei(K.UNPACK_SKIP_PIXELS,He),K.pixelStorei(K.UNPACK_SKIP_ROWS,ut),K.pixelStorei(K.UNPACK_SKIP_IMAGES,mt),Y===0&&H.generateMipmaps&&K.generateMipmap(ge),Ae.unbindTexture()},this.initTexture=function(C){C.isCubeTexture?Ke.setTextureCube(C,0):C.isData3DTexture?Ke.setTexture3D(C,0):C.isDataArrayTexture||C.isCompressedArrayTexture?Ke.setTexture2DArray(C,0):Ke.setTexture2D(C,0),Ae.unbindTexture()},this.resetState=function(){T=0,P=0,I=null,Ae.reset(),$.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Wr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Nf?"display-p3":"srgb",t.unpackColorSpace=Jt.workingColorSpace===Ru?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===zn?sa:Xv}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===sa?zn:Qi}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class kM extends Df{}kM.prototype.isWebGL1Renderer=!0;class Of{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new rt(e),this.density=t}clone(){return new Of(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Uf{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new rt(e),this.near=t,this.far=n}clone(){return new Uf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Lu extends qt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Ff{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ou,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ki()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ki()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ki()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const yi=new j;class uo{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix4(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.applyNormalMatrix(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)yi.fromBufferAttribute(this,t),yi.transformDirection(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}setX(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ri(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ri(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ri(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ri(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array),i=Pt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pt(t,this.array),n=Pt(n,this.array),i=Pt(i,this.array),s=Pt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new en(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new uo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nx extends pi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let il;const yc=new j,rl=new j,sl=new j,al=new Se,_c=new Se,DM=new Tt,fh=new j,bc=new j,ph=new j,vb=new Se,pg=new Se,xb=new Se;class OM extends qt{constructor(e=new nx){if(super(),this.isSprite=!0,this.type="Sprite",il===void 0){il=new Dt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ff(t,5);il.setIndex([0,1,2,0,2,3]),il.setAttribute("position",new uo(n,3,0,!1)),il.setAttribute("uv",new uo(n,2,3,!1))}this.geometry=il,this.material=e,this.center=new Se(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),rl.setFromMatrixScale(this.matrixWorld),DM.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),sl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&rl.multiplyScalar(-sl.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const a=this.center;mh(fh.set(-.5,-.5,0),sl,a,rl,i,s),mh(bc.set(.5,-.5,0),sl,a,rl,i,s),mh(ph.set(.5,.5,0),sl,a,rl,i,s),vb.set(0,0),pg.set(1,0),xb.set(1,1);let o=e.ray.intersectTriangle(fh,bc,ph,!1,yc);if(o===null&&(mh(bc.set(-.5,.5,0),sl,a,rl,i,s),pg.set(0,1),o=e.ray.intersectTriangle(fh,ph,bc,!1,yc),o===null))return;const l=e.ray.origin.distanceTo(yc);l<e.near||l>e.far||t.push({distance:l,point:yc.clone(),uv:Ci.getInterpolation(yc,fh,bc,ph,vb,pg,xb,new Se),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function mh(r,e,t,n,i,s){al.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(_c.x=s*al.x-i*al.y,_c.y=i*al.x+s*al.y):_c.copy(al),r.copy(e),r.x+=_c.x,r.y+=_c.y,r.applyMatrix4(DM)}const gh=new j,yb=new j;class UM extends qt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){gh.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(gh);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){gh.setFromMatrixPosition(e.matrixWorld),yb.setFromMatrixPosition(this.matrixWorld);const n=gh.distanceTo(yb)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),n>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const _b=new j,bb=new Qt,wb=new Qt,rU=new j,Sb=new Tt,ol=new j,mg=new Tr,Mb=new Tt,gg=new go;class FM extends jn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Tt,this.bindMatrixInverse=new Tt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new $r),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)ol.fromBufferAttribute(t,n),this.applyBoneTransform(n,ol),this.boundingBox.expandByPoint(ol)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Tr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)ol.fromBufferAttribute(t,n),this.applyBoneTransform(n,ol),this.boundingSphere.expandByPoint(ol)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),mg.copy(this.boundingSphere),mg.applyMatrix4(i),e.ray.intersectsSphere(mg)!==!1&&(Mb.copy(i).invert(),gg.copy(e.ray).applyMatrix4(Mb),!(this.boundingBox!==null&&gg.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,gg)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qt,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;bb.fromBufferAttribute(i.attributes.skinIndex,e),wb.fromBufferAttribute(i.attributes.skinWeight,e),_b.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=wb.getComponent(s);if(a!==0){const o=bb.getComponent(s);Sb.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(rU.copy(_b).applyMatrix4(Sb),a)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class ix extends qt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class io extends an{constructor(e=null,t=1,n=1,i,s,a,o,l,d=In,h=In,f,p){super(null,a,o,l,d,h,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Eb=new Tt,sU=new Tt;class zf{constructor(e=[],t=[]){this.uuid=Ki(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Tt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Tt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:sU;Eb.multiplyMatrices(o,t[s]),Eb.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new zf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=xM(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new io(t,e,e,Hn,Vn);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new ix),this.bones.push(a),this.boneInverses.push(new Tt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class Dl extends en{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ll=new Tt,Tb=new Tt,vh=[],Ab=new $r,aU=new Tt,wc=new jn,Sc=new Tr;class zM extends jn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Dl(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,aU)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new $r),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,ll),Ab.copy(e.boundingBox).applyMatrix4(ll),this.boundingBox.union(Ab)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Tr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,ll),Sc.copy(e.boundingSphere).applyMatrix4(ll),this.boundingSphere.union(Sc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(wc.geometry=this.geometry,wc.material=this.material,wc.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Sc.copy(this.boundingSphere),Sc.applyMatrix4(n),e.ray.intersectsSphere(Sc)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,ll),Tb.multiplyMatrices(n,ll),wc.matrixWorld=Tb,wc.raycast(e,vh);for(let a=0,o=vh.length;a<o;a++){const l=vh[a];l.instanceId=s,l.object=this,t.push(l)}vh.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Dl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Si extends pi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Cb=new j,Rb=new j,Pb=new Tt,vg=new go,xh=new Tr;class da extends qt{constructor(e=new Dt,t=new Si){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)Cb.fromBufferAttribute(t,i-1),Rb.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Cb.distanceTo(Rb);e.setAttribute("lineDistance",new ot(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),xh.copy(n.boundingSphere),xh.applyMatrix4(i),xh.radius+=s,e.ray.intersectsSphere(xh)===!1)return;Pb.copy(i).invert(),vg.copy(e.ray).applyMatrix4(Pb);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,d=new j,h=new j,f=new j,p=new j,g=this.isLineSegments?2:1,y=n.index,_=n.attributes.position;if(y!==null){const x=Math.max(0,a.start),M=Math.min(y.count,a.start+a.count);for(let S=x,E=M-1;S<E;S+=g){const T=y.getX(S),P=y.getX(S+1);if(d.fromBufferAttribute(_,T),h.fromBufferAttribute(_,P),vg.distanceSqToSegment(d,h,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(p);k<e.near||k>e.far||t.push({distance:k,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,a.start),M=Math.min(_.count,a.start+a.count);for(let S=x,E=M-1;S<E;S+=g){if(d.fromBufferAttribute(_,S),h.fromBufferAttribute(_,S+1),vg.distanceSqToSegment(d,h,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(p);P<e.near||P>e.far||t.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const Nb=new j,Ib=new j;class Jr extends da{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)Nb.fromBufferAttribute(t,i),Ib.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Nb.distanceTo(Ib);e.setAttribute("lineDistance",new ot(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class jM extends da{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class rx extends pi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Lb=new Tt,W0=new go,yh=new Tr,_h=new j;class BM extends qt{constructor(e=new Dt,t=new rx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),yh.copy(n.boundingSphere),yh.applyMatrix4(i),yh.radius+=s,e.ray.intersectsSphere(yh)===!1)return;Lb.copy(i).invert(),W0.copy(e.ray).applyMatrix4(Lb);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,d=n.index,f=n.attributes.position;if(d!==null){const p=Math.max(0,a.start),g=Math.min(d.count,a.start+a.count);for(let y=p,b=g;y<b;y++){const _=d.getX(y);_h.fromBufferAttribute(f,_),kb(_h,_,l,i,e,t,this)}}else{const p=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count);for(let y=p,b=g;y<b;y++)_h.fromBufferAttribute(f,y),kb(_h,y,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function kb(r,e,t,n,i,s,a){const o=W0.distanceSqToPoint(r);if(o<t){const l=new j;W0.closestPointToPoint(r,l),l.applyMatrix4(n);const d=i.ray.origin.distanceTo(l);if(d<i.near||d>i.far)return;s.push({distance:d,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class oU extends an{constructor(e,t,n,i,s,a,o,l,d){super(e,t,n,i,s,a,o,l,d),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Zt,this.magFilter=s!==void 0?s:Zt,this.generateMipmaps=!1;const h=this;function f(){h.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class lU extends an{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=In,this.minFilter=In,this.generateMipmaps=!1,this.needsUpdate=!0}}class jf extends an{constructor(e,t,n,i,s,a,o,l,d,h,f,p){super(null,a,o,l,d,h,i,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class cU extends jf{constructor(e,t,n,i,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=vn}}class uU extends jf{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Kr),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class dU extends an{constructor(e,t,n,i,s,a,o,l,d){super(e,t,n,i,s,a,o,l,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ar{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,l=s-1,d;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),d=n[i]-a,d<0)o=i+1;else if(d>0)l=i-1;else{l=i;break}if(i=l,n[i]===a)return i/(s-1);const h=n[i],p=n[i+1]-h,g=(a-h)/p;return(i+g)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=t||(a.isVector2?new Se:new j);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new j,i=[],s=[],a=[],o=new j,l=new Tt;for(let g=0;g<=e;g++){const y=g/e;i[g]=this.getTangentAt(y,new j)}s[0]=new j,a[0]=new j;let d=Number.MAX_VALUE;const h=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=d&&(d=h,n.set(1,0,0)),f<=d&&(d=f,n.set(0,1,0)),p<=d&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),a[g]=a[g-1].clone(),o.crossVectors(i[g-1],i[g]),o.length()>Number.EPSILON){o.normalize();const y=Math.acos(En(i[g-1].dot(i[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(o,y))}a[g].crossVectors(i[g],s[g])}if(t===!0){let g=Math.acos(En(s[0].dot(s[e]),-1,1));g/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(g=-g);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(i[y],g*y)),a[y].crossVectors(i[y],s[y])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Bf extends Ar{constructor(e=0,t=0,n=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const n=t||new Se,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),d=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,g=d-this.aY;l=p*h-g*f+this.aX,d=p*f+g*h+this.aY}return n.set(l,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class HM extends Bf{constructor(e,t,n,i,s,a){super(e,t,n,n,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function sx(){let r=0,e=0,t=0,n=0;function i(s,a,o,l){r=s,e=o,t=-3*s+3*a-2*o-l,n=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,d){i(a,o,d*(o-s),d*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,d,h,f){let p=(a-s)/d-(o-s)/(d+h)+(o-a)/h,g=(o-a)/h-(l-a)/(h+f)+(l-o)/f;p*=h,g*=h,i(a,o,p,g)},calc:function(s){const a=s*s,o=a*s;return r+e*s+t*a+n*o}}}const bh=new j,xg=new sx,yg=new sx,_g=new sx;class VM extends Ar{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new j){const n=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let d,h;this.closed||o>0?d=i[(o-1)%s]:(bh.subVectors(i[0],i[1]).add(i[0]),d=bh);const f=i[o%s],p=i[(o+1)%s];if(this.closed||o+2<s?h=i[(o+2)%s]:(bh.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=bh),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let y=Math.pow(d.distanceToSquared(f),g),b=Math.pow(f.distanceToSquared(p),g),_=Math.pow(p.distanceToSquared(h),g);b<1e-4&&(b=1),y<1e-4&&(y=b),_<1e-4&&(_=b),xg.initNonuniformCatmullRom(d.x,f.x,p.x,h.x,y,b,_),yg.initNonuniformCatmullRom(d.y,f.y,p.y,h.y,y,b,_),_g.initNonuniformCatmullRom(d.z,f.z,p.z,h.z,y,b,_)}else this.curveType==="catmullrom"&&(xg.initCatmullRom(d.x,f.x,p.x,h.x,this.tension),yg.initCatmullRom(d.y,f.y,p.y,h.y,this.tension),_g.initCatmullRom(d.z,f.z,p.z,h.z,this.tension));return n.set(xg.calc(l),yg.calc(l),_g.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new j().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Db(r,e,t,n,i){const s=(n-e)*.5,a=(i-t)*.5,o=r*r,l=r*o;return(2*t-2*n+s+a)*l+(-3*t+3*n-2*s-a)*o+s*r+t}function hU(r,e){const t=1-r;return t*t*e}function fU(r,e){return 2*(1-r)*r*e}function pU(r,e){return r*r*e}function Hc(r,e,t,n){return hU(r,e)+fU(r,t)+pU(r,n)}function mU(r,e){const t=1-r;return t*t*t*e}function gU(r,e){const t=1-r;return 3*t*t*r*e}function vU(r,e){return 3*(1-r)*r*r*e}function xU(r,e){return r*r*r*e}function Vc(r,e,t,n,i){return mU(r,e)+gU(r,t)+vU(r,n)+xU(r,i)}class ax extends Ar{constructor(e=new Se,t=new Se,n=new Se,i=new Se){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Se){const n=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(Vc(e,i.x,s.x,a.x,o.x),Vc(e,i.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class GM extends Ar{constructor(e=new j,t=new j,n=new j,i=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new j){const n=t,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(Vc(e,i.x,s.x,a.x,o.x),Vc(e,i.y,s.y,a.y,o.y),Vc(e,i.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ox extends Ar{constructor(e=new Se,t=new Se){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Se){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Se){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WM extends Ar{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lx extends Ar{constructor(e=new Se,t=new Se,n=new Se){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Se){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(Hc(e,i.x,s.x,a.x),Hc(e,i.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cx extends Ar{constructor(e=new j,t=new j,n=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new j){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(Hc(e,i.x,s.x,a.x),Hc(e,i.y,s.y,a.y),Hc(e,i.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ux extends Ar{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Se){const n=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],d=i[a],h=i[a>i.length-2?i.length-1:a+1],f=i[a>i.length-3?i.length-1:a+2];return n.set(Db(o,l.x,d.x,h.x,f.x),Db(o,l.y,d.y,h.y,f.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Se().fromArray(i))}return this}}var hf=Object.freeze({__proto__:null,ArcCurve:HM,CatmullRomCurve3:VM,CubicBezierCurve:ax,CubicBezierCurve3:GM,EllipseCurve:Bf,LineCurve:ox,LineCurve3:WM,QuadraticBezierCurve:lx,QuadraticBezierCurve3:cx,SplineCurve:ux});class XM extends Ar{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new hf[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const a=i[s]-n,o=this.curves[s],l=o.getLength(),d=l===0?0:1-a/l;return o.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let d=0;d<l.length;d++){const h=l[d];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new hf[i.type]().fromJSON(i))}return this}}class uu extends XM{constructor(e){super(),this.type="Path",this.currentPoint=new Se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new ox(this.currentPoint.clone(),new Se(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new lx(this.currentPoint.clone(),new Se(e,t),new Se(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,a){const o=new ax(this.currentPoint.clone(),new Se(e,t),new Se(n,i),new Se(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new ux(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,i,s,a),this}absarc(e,t,n,i,s,a){return this.absellipse(e,t,n,n,i,s,a),this}ellipse(e,t,n,i,s,a,o,l){const d=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+d,t+h,n,i,s,a,o,l),this}absellipse(e,t,n,i,s,a,o,l){const d=new Bf(e,t,n,i,s,a,o,l);if(this.curves.length>0){const f=d.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(d);const h=d.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ku extends Dt{constructor(e=[new Se(0,-.5),new Se(.5,0),new Se(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=En(i,0,Math.PI*2);const s=[],a=[],o=[],l=[],d=[],h=1/t,f=new j,p=new Se,g=new j,y=new j,b=new j;let _=0,x=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:_=e[M+1].x-e[M].x,x=e[M+1].y-e[M].y,g.x=x*1,g.y=-_,g.z=x*0,b.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:_=e[M+1].x-e[M].x,x=e[M+1].y-e[M].y,g.x=x*1,g.y=-_,g.z=x*0,y.copy(g),g.x+=b.x,g.y+=b.y,g.z+=b.z,g.normalize(),l.push(g.x,g.y,g.z),b.copy(y)}for(let M=0;M<=t;M++){const S=n+M*h*i,E=Math.sin(S),T=Math.cos(S);for(let P=0;P<=e.length-1;P++){f.x=e[P].x*E,f.y=e[P].y,f.z=e[P].x*T,a.push(f.x,f.y,f.z),p.x=M/t,p.y=P/(e.length-1),o.push(p.x,p.y);const I=l[3*P+0]*E,k=l[3*P+1],R=l[3*P+0]*T;d.push(I,k,R)}}for(let M=0;M<t;M++)for(let S=0;S<e.length-1;S++){const E=S+M*e.length,T=E,P=E+e.length,I=E+e.length+1,k=E+1;s.push(T,P,k),s.push(I,k,P)}this.setIndex(s),this.setAttribute("position",new ot(a,3)),this.setAttribute("uv",new ot(o,2)),this.setAttribute("normal",new ot(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ku(e.points,e.segments,e.phiStart,e.phiLength)}}class Hf extends ku{constructor(e=1,t=1,n=4,i=8){const s=new uu;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Hf(e.radius,e.length,e.capSegments,e.radialSegments)}}class Vf extends Dt{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],a=[],o=[],l=[],d=new j,h=new Se;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const g=n+f/t*i;d.x=e*Math.cos(g),d.y=e*Math.sin(g),a.push(d.x,d.y,d.z),o.push(0,0,1),h.x=(a[p]/e+1)/2,h.y=(a[p+1]/e+1)/2,l.push(h.x,h.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new ot(a,3)),this.setAttribute("normal",new ot(o,3)),this.setAttribute("uv",new ot(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vf(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Hl extends Dt{constructor(e=1,t=1,n=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const d=this;i=Math.floor(i),s=Math.floor(s);const h=[],f=[],p=[],g=[];let y=0;const b=[],_=n/2;let x=0;M(),a===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(g,2));function M(){const E=new j,T=new j;let P=0;const I=(t-e)/n;for(let k=0;k<=s;k++){const R=[],L=k/s,F=L*(t-e)+e;for(let W=0;W<=i;W++){const J=W/i,z=J*l+o,Q=Math.sin(z),ne=Math.cos(z);T.x=F*Q,T.y=-L*n+_,T.z=F*ne,f.push(T.x,T.y,T.z),E.set(Q,I,ne).normalize(),p.push(E.x,E.y,E.z),g.push(J,1-L),R.push(y++)}b.push(R)}for(let k=0;k<i;k++)for(let R=0;R<s;R++){const L=b[R][k],F=b[R+1][k],W=b[R+1][k+1],J=b[R][k+1];h.push(L,F,J),h.push(F,W,J),P+=6}d.addGroup(x,P,0),x+=P}function S(E){const T=y,P=new Se,I=new j;let k=0;const R=E===!0?e:t,L=E===!0?1:-1;for(let W=1;W<=i;W++)f.push(0,_*L,0),p.push(0,L,0),g.push(.5,.5),y++;const F=y;for(let W=0;W<=i;W++){const z=W/i*l+o,Q=Math.cos(z),ne=Math.sin(z);I.x=R*ne,I.y=_*L,I.z=R*Q,f.push(I.x,I.y,I.z),p.push(0,L,0),P.x=Q*.5+.5,P.y=ne*.5*L+.5,g.push(P.x,P.y),y++}for(let W=0;W<i;W++){const J=T+W,z=F+W;E===!0?h.push(z,z+1,J):h.push(z+1,z,J),k+=3}d.addGroup(x,k,E===!0?1:2),x+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Gf extends Hl{constructor(e=1,t=1,n=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,n,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Gf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ma extends Dt{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],a=[];o(i),d(n),h(),this.setAttribute("position",new ot(s,3)),this.setAttribute("normal",new ot(s.slice(),3)),this.setAttribute("uv",new ot(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(M){const S=new j,E=new j,T=new j;for(let P=0;P<t.length;P+=3)g(t[P+0],S),g(t[P+1],E),g(t[P+2],T),l(S,E,T,M)}function l(M,S,E,T){const P=T+1,I=[];for(let k=0;k<=P;k++){I[k]=[];const R=M.clone().lerp(E,k/P),L=S.clone().lerp(E,k/P),F=P-k;for(let W=0;W<=F;W++)W===0&&k===P?I[k][W]=R:I[k][W]=R.clone().lerp(L,W/F)}for(let k=0;k<P;k++)for(let R=0;R<2*(P-k)-1;R++){const L=Math.floor(R/2);R%2===0?(p(I[k][L+1]),p(I[k+1][L]),p(I[k][L])):(p(I[k][L+1]),p(I[k+1][L+1]),p(I[k+1][L]))}}function d(M){const S=new j;for(let E=0;E<s.length;E+=3)S.x=s[E+0],S.y=s[E+1],S.z=s[E+2],S.normalize().multiplyScalar(M),s[E+0]=S.x,s[E+1]=S.y,s[E+2]=S.z}function h(){const M=new j;for(let S=0;S<s.length;S+=3){M.x=s[S+0],M.y=s[S+1],M.z=s[S+2];const E=_(M)/2/Math.PI+.5,T=x(M)/Math.PI+.5;a.push(E,1-T)}y(),f()}function f(){for(let M=0;M<a.length;M+=6){const S=a[M+0],E=a[M+2],T=a[M+4],P=Math.max(S,E,T),I=Math.min(S,E,T);P>.9&&I<.1&&(S<.2&&(a[M+0]+=1),E<.2&&(a[M+2]+=1),T<.2&&(a[M+4]+=1))}}function p(M){s.push(M.x,M.y,M.z)}function g(M,S){const E=M*3;S.x=e[E+0],S.y=e[E+1],S.z=e[E+2]}function y(){const M=new j,S=new j,E=new j,T=new j,P=new Se,I=new Se,k=new Se;for(let R=0,L=0;R<s.length;R+=9,L+=6){M.set(s[R+0],s[R+1],s[R+2]),S.set(s[R+3],s[R+4],s[R+5]),E.set(s[R+6],s[R+7],s[R+8]),P.set(a[L+0],a[L+1]),I.set(a[L+2],a[L+3]),k.set(a[L+4],a[L+5]),T.copy(M).add(S).add(E).divideScalar(3);const F=_(T);b(P,L+0,M,F),b(I,L+2,S,F),b(k,L+4,E,F)}}function b(M,S,E,T){T<0&&M.x===1&&(a[S]=M.x-1),E.x===0&&E.z===0&&(a[S]=T/2/Math.PI+.5)}function _(M){return Math.atan2(M.z,-M.x)}function x(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ma(e.vertices,e.indices,e.radius,e.details)}}class Wf extends ma{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wf(e.radius,e.detail)}}const wh=new j,Sh=new j,bg=new j,Mh=new Ci;class qM extends Dt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(to*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,d=[0,0,0],h=["a","b","c"],f=new Array(3),p={},g=[];for(let y=0;y<l;y+=3){a?(d[0]=a.getX(y),d[1]=a.getX(y+1),d[2]=a.getX(y+2)):(d[0]=y,d[1]=y+1,d[2]=y+2);const{a:b,b:_,c:x}=Mh;if(b.fromBufferAttribute(o,d[0]),_.fromBufferAttribute(o,d[1]),x.fromBufferAttribute(o,d[2]),Mh.getNormal(bg),f[0]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,f[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let M=0;M<3;M++){const S=(M+1)%3,E=f[M],T=f[S],P=Mh[h[M]],I=Mh[h[S]],k=`${E}_${T}`,R=`${T}_${E}`;R in p&&p[R]?(bg.dot(p[R].normal)<=s&&(g.push(P.x,P.y,P.z),g.push(I.x,I.y,I.z)),p[R]=null):k in p||(p[k]={index0:d[M],index1:d[S],normal:bg.clone()})}}for(const y in p)if(p[y]){const{index0:b,index1:_}=p[y];wh.fromBufferAttribute(o,b),Sh.fromBufferAttribute(o,_),g.push(wh.x,wh.y,wh.z),g.push(Sh.x,Sh.y,Sh.z)}this.setAttribute("position",new ot(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ro extends uu{constructor(e){super(e),this.uuid=Ki(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new uu().fromJSON(i))}return this}}const yU={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=YM(r,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,d,h,f,p,g;if(n&&(s=MU(r,e,s,t)),r.length>80*t){o=d=r[0],l=h=r[1];for(let y=t;y<i;y+=t)f=r[y],p=r[y+1],f<o&&(o=f),p<l&&(l=p),f>d&&(d=f),p>h&&(h=p);g=Math.max(d-o,h-l),g=g!==0?32767/g:0}return du(s,a,t,o,l,g,0),a}};function YM(r,e,t,n,i){let s,a;if(i===DU(r,e,t,n)>0)for(s=e;s<t;s+=n)a=Ob(s,r[s],r[s+1],a);else for(s=t-n;s>=e;s-=n)a=Ob(s,r[s],r[s+1],a);return a&&Xf(a,a.next)&&(fu(a),a=a.next),a}function ho(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Xf(t,t.next)||wn(t.prev,t,t.next)===0)){if(fu(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function du(r,e,t,n,i,s,a){if(!r)return;!a&&s&&RU(r,n,i,s);let o=r,l,d;for(;r.prev!==r.next;){if(l=r.prev,d=r.next,s?bU(r,n,i,s):_U(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(d.i/t|0),fu(r),r=d.next,o=d.next;continue}if(r=d,r===o){a?a===1?(r=wU(ho(r),e,t),du(r,e,t,n,i,s,2)):a===2&&SU(r,e,t,n,i,s):du(ho(r),e,t,n,i,s,1);break}}}function _U(r){const e=r.prev,t=r,n=r.next;if(wn(e,t,n)>=0)return!1;const i=e.x,s=t.x,a=n.x,o=e.y,l=t.y,d=n.y,h=i<s?i<a?i:a:s<a?s:a,f=o<l?o<d?o:d:l<d?l:d,p=i>s?i>a?i:a:s>a?s:a,g=o>l?o>d?o:d:l>d?l:d;let y=n.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=f&&y.y<=g&&vl(i,o,s,l,a,d,y.x,y.y)&&wn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function bU(r,e,t,n){const i=r.prev,s=r,a=r.next;if(wn(i,s,a)>=0)return!1;const o=i.x,l=s.x,d=a.x,h=i.y,f=s.y,p=a.y,g=o<l?o<d?o:d:l<d?l:d,y=h<f?h<p?h:p:f<p?f:p,b=o>l?o>d?o:d:l>d?l:d,_=h>f?h>p?h:p:f>p?f:p,x=X0(g,y,e,t,n),M=X0(b,_,e,t,n);let S=r.prevZ,E=r.nextZ;for(;S&&S.z>=x&&E&&E.z<=M;){if(S.x>=g&&S.x<=b&&S.y>=y&&S.y<=_&&S!==i&&S!==a&&vl(o,h,l,f,d,p,S.x,S.y)&&wn(S.prev,S,S.next)>=0||(S=S.prevZ,E.x>=g&&E.x<=b&&E.y>=y&&E.y<=_&&E!==i&&E!==a&&vl(o,h,l,f,d,p,E.x,E.y)&&wn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;S&&S.z>=x;){if(S.x>=g&&S.x<=b&&S.y>=y&&S.y<=_&&S!==i&&S!==a&&vl(o,h,l,f,d,p,S.x,S.y)&&wn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;E&&E.z<=M;){if(E.x>=g&&E.x<=b&&E.y>=y&&E.y<=_&&E!==i&&E!==a&&vl(o,h,l,f,d,p,E.x,E.y)&&wn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function wU(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!Xf(i,s)&&ZM(i,n,n.next,s)&&hu(i,s)&&hu(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),fu(n),fu(n.next),n=r=s),n=n.next}while(n!==r);return ho(n)}function SU(r,e,t,n,i,s){let a=r;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&IU(a,o)){let l=KM(a,o);a=ho(a,a.next),l=ho(l,l.next),du(a,e,t,n,i,s,0),du(l,e,t,n,i,s,0);return}o=o.next}a=a.next}while(a!==r)}function MU(r,e,t,n){const i=[];let s,a,o,l,d;for(s=0,a=e.length;s<a;s++)o=e[s]*n,l=s<a-1?e[s+1]*n:r.length,d=YM(r,o,l,n,!1),d===d.next&&(d.steiner=!0),i.push(NU(d));for(i.sort(EU),s=0;s<i.length;s++)t=TU(i[s],t);return t}function EU(r,e){return r.x-e.x}function TU(r,e){const t=AU(r,e);if(!t)return e;const n=KM(t,r);return ho(n,n.next),ho(t,t.next)}function AU(r,e){let t=e,n=-1/0,i;const s=r.x,a=r.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const p=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>n&&(n=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const o=i,l=i.x,d=i.y;let h=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&vl(a<d?s:n,a,l,d,a<d?n:s,a,t.x,t.y)&&(f=Math.abs(a-t.y)/(s-t.x),hu(t,r)&&(f<h||f===h&&(t.x>i.x||t.x===i.x&&CU(i,t)))&&(i=t,h=f)),t=t.next;while(t!==o);return i}function CU(r,e){return wn(r.prev,r,e.prev)<0&&wn(e.next,r,r.next)<0}function RU(r,e,t,n){let i=r;do i.z===0&&(i.z=X0(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,PU(i)}function PU(r){let e,t,n,i,s,a,o,l,d=1;do{for(t=r,r=null,s=null,a=0;t;){for(a++,n=t,o=0,e=0;e<d&&(o++,n=n.nextZ,!!n);e++);for(l=d;o>0||l>0&&n;)o!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,d*=2}while(a>1);return r}function X0(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function NU(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function vl(r,e,t,n,i,s,a,o){return(i-a)*(e-o)>=(r-a)*(s-o)&&(r-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(i-a)*(n-o)}function IU(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!LU(r,e)&&(hu(r,e)&&hu(e,r)&&kU(r,e)&&(wn(r.prev,r,e.prev)||wn(r,e.prev,e))||Xf(r,e)&&wn(r.prev,r,r.next)>0&&wn(e.prev,e,e.next)>0)}function wn(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Xf(r,e){return r.x===e.x&&r.y===e.y}function ZM(r,e,t,n){const i=Th(wn(r,e,t)),s=Th(wn(r,e,n)),a=Th(wn(t,n,r)),o=Th(wn(t,n,e));return!!(i!==s&&a!==o||i===0&&Eh(r,t,e)||s===0&&Eh(r,n,e)||a===0&&Eh(t,r,n)||o===0&&Eh(t,e,n))}function Eh(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Th(r){return r>0?1:r<0?-1:0}function LU(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&ZM(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function hu(r,e){return wn(r.prev,r,r.next)<0?wn(r,e,r.next)>=0&&wn(r,r.prev,e)>=0:wn(r,e,r.prev)<0||wn(r,r.next,e)<0}function kU(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function KM(r,e){const t=new q0(r.i,r.x,r.y),n=new q0(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Ob(r,e,t,n){const i=new q0(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function fu(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function q0(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function DU(r,e,t,n){let i=0;for(let s=e,a=t-n;s<t;s+=n)i+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return i}class Yr{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Yr.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];Ub(e),Fb(n,e);let a=e.length;t.forEach(Ub);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,Fb(n,t[l]);const o=yU.triangulate(n,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function Ub(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function Fb(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Du extends Dt{constructor(e=new ro([new Se(.5,.5),new Se(-.5,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let o=0,l=e.length;o<l;o++){const d=e[o];a(d)}this.setAttribute("position",new ot(i,3)),this.setAttribute("uv",new ot(s,2)),this.computeVertexNormals();function a(o){const l=[],d=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:g-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:OU;let S,E=!1,T,P,I,k;x&&(S=x.getSpacedPoints(h),E=!0,p=!1,T=x.computeFrenetFrames(h,!1),P=new j,I=new j,k=new j),p||(_=0,g=0,y=0,b=0);const R=o.extractPoints(d);let L=R.shape;const F=R.holes;if(!Yr.isClockWise(L)){L=L.reverse();for(let K=0,Ce=F.length;K<Ce;K++){const be=F[K];Yr.isClockWise(be)&&(F[K]=be.reverse())}}const J=Yr.triangulateShape(L,F),z=L;for(let K=0,Ce=F.length;K<Ce;K++){const be=F[K];L=L.concat(be)}function Q(K,Ce,be){return Ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),K.clone().addScaledVector(Ce,be)}const ne=L.length,oe=J.length;function te(K,Ce,be){let Te,Ae,ze;const Xe=K.x-Ce.x,Ke=K.y-Ce.y,ct=be.x-K.x,_t=be.y-K.y,Ut=Xe*Xe+Ke*Ke,V=Xe*_t-Ke*ct;if(Math.abs(V)>Number.EPSILON){const U=Math.sqrt(Ut),ce=Math.sqrt(ct*ct+_t*_t),Oe=Ce.x-Ke/U,Ne=Ce.y+Xe/U,De=be.x-_t/ce,it=be.y+ct/ce,Ue=((De-Oe)*_t-(it-Ne)*ct)/(Xe*_t-Ke*ct);Te=Oe+Xe*Ue-K.x,Ae=Ne+Ke*Ue-K.y;const qe=Te*Te+Ae*Ae;if(qe<=2)return new Se(Te,Ae);ze=Math.sqrt(qe/2)}else{let U=!1;Xe>Number.EPSILON?ct>Number.EPSILON&&(U=!0):Xe<-Number.EPSILON?ct<-Number.EPSILON&&(U=!0):Math.sign(Ke)===Math.sign(_t)&&(U=!0),U?(Te=-Ke,Ae=Xe,ze=Math.sqrt(Ut)):(Te=Xe,Ae=Ke,ze=Math.sqrt(Ut/2))}return new Se(Te/ze,Ae/ze)}const ie=[];for(let K=0,Ce=z.length,be=Ce-1,Te=K+1;K<Ce;K++,be++,Te++)be===Ce&&(be=0),Te===Ce&&(Te=0),ie[K]=te(z[K],z[be],z[Te]);const ee=[];let Z,re=ie.concat();for(let K=0,Ce=F.length;K<Ce;K++){const be=F[K];Z=[];for(let Te=0,Ae=be.length,ze=Ae-1,Xe=Te+1;Te<Ae;Te++,ze++,Xe++)ze===Ae&&(ze=0),Xe===Ae&&(Xe=0),Z[Te]=te(be[Te],be[ze],be[Xe]);ee.push(Z),re=re.concat(Z)}for(let K=0;K<_;K++){const Ce=K/_,be=g*Math.cos(Ce*Math.PI/2),Te=y*Math.sin(Ce*Math.PI/2)+b;for(let Ae=0,ze=z.length;Ae<ze;Ae++){const Xe=Q(z[Ae],ie[Ae],Te);je(Xe.x,Xe.y,-be)}for(let Ae=0,ze=F.length;Ae<ze;Ae++){const Xe=F[Ae];Z=ee[Ae];for(let Ke=0,ct=Xe.length;Ke<ct;Ke++){const _t=Q(Xe[Ke],Z[Ke],Te);je(_t.x,_t.y,-be)}}}const pe=y+b;for(let K=0;K<ne;K++){const Ce=p?Q(L[K],re[K],pe):L[K];E?(I.copy(T.normals[0]).multiplyScalar(Ce.x),P.copy(T.binormals[0]).multiplyScalar(Ce.y),k.copy(S[0]).add(I).add(P),je(k.x,k.y,k.z)):je(Ce.x,Ce.y,0)}for(let K=1;K<=h;K++)for(let Ce=0;Ce<ne;Ce++){const be=p?Q(L[Ce],re[Ce],pe):L[Ce];E?(I.copy(T.normals[K]).multiplyScalar(be.x),P.copy(T.binormals[K]).multiplyScalar(be.y),k.copy(S[K]).add(I).add(P),je(k.x,k.y,k.z)):je(be.x,be.y,f/h*K)}for(let K=_-1;K>=0;K--){const Ce=K/_,be=g*Math.cos(Ce*Math.PI/2),Te=y*Math.sin(Ce*Math.PI/2)+b;for(let Ae=0,ze=z.length;Ae<ze;Ae++){const Xe=Q(z[Ae],ie[Ae],Te);je(Xe.x,Xe.y,f+be)}for(let Ae=0,ze=F.length;Ae<ze;Ae++){const Xe=F[Ae];Z=ee[Ae];for(let Ke=0,ct=Xe.length;Ke<ct;Ke++){const _t=Q(Xe[Ke],Z[Ke],Te);E?je(_t.x,_t.y+S[h-1].y,S[h-1].x+be):je(_t.x,_t.y,f+be)}}}Ee(),Le();function Ee(){const K=i.length/3;if(p){let Ce=0,be=ne*Ce;for(let Te=0;Te<oe;Te++){const Ae=J[Te];Qe(Ae[2]+be,Ae[1]+be,Ae[0]+be)}Ce=h+_*2,be=ne*Ce;for(let Te=0;Te<oe;Te++){const Ae=J[Te];Qe(Ae[0]+be,Ae[1]+be,Ae[2]+be)}}else{for(let Ce=0;Ce<oe;Ce++){const be=J[Ce];Qe(be[2],be[1],be[0])}for(let Ce=0;Ce<oe;Ce++){const be=J[Ce];Qe(be[0]+ne*h,be[1]+ne*h,be[2]+ne*h)}}n.addGroup(K,i.length/3-K,0)}function Le(){const K=i.length/3;let Ce=0;ke(z,Ce),Ce+=z.length;for(let be=0,Te=F.length;be<Te;be++){const Ae=F[be];ke(Ae,Ce),Ce+=Ae.length}n.addGroup(K,i.length/3-K,1)}function ke(K,Ce){let be=K.length;for(;--be>=0;){const Te=be;let Ae=be-1;Ae<0&&(Ae=K.length-1);for(let ze=0,Xe=h+_*2;ze<Xe;ze++){const Ke=ne*ze,ct=ne*(ze+1),_t=Ce+Te+Ke,Ut=Ce+Ae+Ke,V=Ce+Ae+ct,U=Ce+Te+ct;nt(_t,Ut,V,U)}}}function je(K,Ce,be){l.push(K),l.push(Ce),l.push(be)}function Qe(K,Ce,be){Ot(K),Ot(Ce),Ot(be);const Te=i.length/3,Ae=M.generateTopUV(n,i,Te-3,Te-2,Te-1);We(Ae[0]),We(Ae[1]),We(Ae[2])}function nt(K,Ce,be,Te){Ot(K),Ot(Ce),Ot(Te),Ot(Ce),Ot(be),Ot(Te);const Ae=i.length/3,ze=M.generateSideWallUV(n,i,Ae-6,Ae-3,Ae-2,Ae-1);We(ze[0]),We(ze[1]),We(ze[3]),We(ze[1]),We(ze[2]),We(ze[3])}function Ot(K){i.push(l[K*3+0]),i.push(l[K*3+1]),i.push(l[K*3+2])}function We(K){s.push(K.x),s.push(K.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return UU(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];n.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new hf[i.type]().fromJSON(i)),new Du(n,e.options)}}const OU={generateTopUV:function(r,e,t,n,i){const s=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],d=e[i*3],h=e[i*3+1];return[new Se(s,a),new Se(o,l),new Se(d,h)]},generateSideWallUV:function(r,e,t,n,i,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],d=e[n*3],h=e[n*3+1],f=e[n*3+2],p=e[i*3],g=e[i*3+1],y=e[i*3+2],b=e[s*3],_=e[s*3+1],x=e[s*3+2];return Math.abs(o-h)<Math.abs(a-d)?[new Se(a,1-l),new Se(d,1-f),new Se(p,1-y),new Se(b,1-x)]:[new Se(o,1-l),new Se(h,1-f),new Se(g,1-y),new Se(_,1-x)]}};function UU(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ou extends ma{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ou(e.radius,e.detail)}}class Uu extends ma{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uu(e.radius,e.detail)}}class qf extends Dt{constructor(e=.5,t=1,n=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const o=[],l=[],d=[],h=[];let f=e;const p=(t-e)/i,g=new j,y=new Se;for(let b=0;b<=i;b++){for(let _=0;_<=n;_++){const x=s+_/n*a;g.x=f*Math.cos(x),g.y=f*Math.sin(x),l.push(g.x,g.y,g.z),d.push(0,0,1),y.x=(g.x/t+1)/2,y.y=(g.y/t+1)/2,h.push(y.x,y.y)}f+=p}for(let b=0;b<i;b++){const _=b*(n+1);for(let x=0;x<n;x++){const M=x+_,S=M,E=M+n+1,T=M+n+2,P=M+1;o.push(S,E,P),o.push(E,T,P)}}this.setIndex(o),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(d,3)),this.setAttribute("uv",new ot(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Yf extends Dt{constructor(e=new ro([new Se(0,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)d(e);else for(let h=0;h<e.length;h++)d(e[h]),this.addGroup(o,l,h),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new ot(i,3)),this.setAttribute("normal",new ot(s,3)),this.setAttribute("uv",new ot(a,2));function d(h){const f=i.length/3,p=h.extractPoints(t);let g=p.shape;const y=p.holes;Yr.isClockWise(g)===!1&&(g=g.reverse());for(let _=0,x=y.length;_<x;_++){const M=y[_];Yr.isClockWise(M)===!0&&(y[_]=M.reverse())}const b=Yr.triangulateShape(g,y);for(let _=0,x=y.length;_<x;_++){const M=y[_];g=g.concat(M)}for(let _=0,x=g.length;_<x;_++){const M=g[_];i.push(M.x,M.y,0),s.push(0,0,1),a.push(M.x,M.y)}for(let _=0,x=b.length;_<x;_++){const M=b[_],S=M[0]+f,E=M[1]+f,T=M[2]+f;n.push(S,E,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return FU(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=t[e.shapes[i]];n.push(a)}return new Yf(n,e.curveSegments)}}function FU(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class Fu extends Dt{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let d=0;const h=[],f=new j,p=new j,g=[],y=[],b=[],_=[];for(let x=0;x<=n;x++){const M=[],S=x/n;let E=0;x===0&&a===0?E=.5/t:x===n&&l===Math.PI&&(E=-.5/t);for(let T=0;T<=t;T++){const P=T/t;f.x=-e*Math.cos(i+P*s)*Math.sin(a+S*o),f.y=e*Math.cos(a+S*o),f.z=e*Math.sin(i+P*s)*Math.sin(a+S*o),y.push(f.x,f.y,f.z),p.copy(f).normalize(),b.push(p.x,p.y,p.z),_.push(P+E,1-S),M.push(d++)}h.push(M)}for(let x=0;x<n;x++)for(let M=0;M<t;M++){const S=h[x][M+1],E=h[x][M],T=h[x+1][M],P=h[x+1][M+1];(x!==0||a>0)&&g.push(S,E,P),(x!==n-1||l<Math.PI)&&g.push(E,T,P)}this.setIndex(g),this.setAttribute("position",new ot(y,3)),this.setAttribute("normal",new ot(b,3)),this.setAttribute("uv",new ot(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Zf extends ma{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zf(e.radius,e.detail)}}class Kf extends Dt{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],d=[],h=new j,f=new j,p=new j;for(let g=0;g<=n;g++)for(let y=0;y<=i;y++){const b=y/i*s,_=g/n*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(b),f.y=(e+t*Math.cos(_))*Math.sin(b),f.z=t*Math.sin(_),o.push(f.x,f.y,f.z),h.x=e*Math.cos(b),h.y=e*Math.sin(b),p.subVectors(f,h).normalize(),l.push(p.x,p.y,p.z),d.push(y/i),d.push(g/n)}for(let g=1;g<=n;g++)for(let y=1;y<=i;y++){const b=(i+1)*g+y-1,_=(i+1)*(g-1)+y-1,x=(i+1)*(g-1)+y,M=(i+1)*g+y;a.push(b,_,M),a.push(_,x,M)}this.setIndex(a),this.setAttribute("position",new ot(o,3)),this.setAttribute("normal",new ot(l,3)),this.setAttribute("uv",new ot(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kf(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $f extends Dt{constructor(e=1,t=.4,n=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:a},n=Math.floor(n),i=Math.floor(i);const o=[],l=[],d=[],h=[],f=new j,p=new j,g=new j,y=new j,b=new j,_=new j,x=new j;for(let S=0;S<=n;++S){const E=S/n*s*Math.PI*2;M(E,s,a,e,g),M(E+.01,s,a,e,y),_.subVectors(y,g),x.addVectors(y,g),b.crossVectors(_,x),x.crossVectors(b,_),b.normalize(),x.normalize();for(let T=0;T<=i;++T){const P=T/i*Math.PI*2,I=-t*Math.cos(P),k=t*Math.sin(P);f.x=g.x+(I*x.x+k*b.x),f.y=g.y+(I*x.y+k*b.y),f.z=g.z+(I*x.z+k*b.z),l.push(f.x,f.y,f.z),p.subVectors(f,g).normalize(),d.push(p.x,p.y,p.z),h.push(S/n),h.push(T/i)}}for(let S=1;S<=n;S++)for(let E=1;E<=i;E++){const T=(i+1)*(S-1)+(E-1),P=(i+1)*S+(E-1),I=(i+1)*S+E,k=(i+1)*(S-1)+E;o.push(T,P,k),o.push(P,I,k)}this.setIndex(o),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(d,3)),this.setAttribute("uv",new ot(h,2));function M(S,E,T,P,I){const k=Math.cos(S),R=Math.sin(S),L=T/E*S,F=Math.cos(L);I.x=P*(2+F)*.5*k,I.y=P*(2+F)*R*.5,I.z=P*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $f(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Jf extends Dt{constructor(e=new cx(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new j,l=new j,d=new Se;let h=new j;const f=[],p=[],g=[],y=[];b(),this.setIndex(y),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(g,2));function b(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),M(),x()}function _(S){h=e.getPointAt(S/t,h);const E=a.normals[S],T=a.binormals[S];for(let P=0;P<=i;P++){const I=P/i*Math.PI*2,k=Math.sin(I),R=-Math.cos(I);l.x=R*E.x+k*T.x,l.y=R*E.y+k*T.y,l.z=R*E.z+k*T.z,l.normalize(),p.push(l.x,l.y,l.z),o.x=h.x+n*l.x,o.y=h.y+n*l.y,o.z=h.z+n*l.z,f.push(o.x,o.y,o.z)}}function x(){for(let S=1;S<=t;S++)for(let E=1;E<=i;E++){const T=(i+1)*(S-1)+(E-1),P=(i+1)*S+(E-1),I=(i+1)*S+E,k=(i+1)*(S-1)+E;y.push(T,P,k),y.push(P,I,k)}}function M(){for(let S=0;S<=t;S++)for(let E=0;E<=i;E++)d.x=S/t,d.y=E/i,g.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Jf(new hf[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class $M extends Dt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new j,s=new j;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let d=0,h=l.length;d<h;++d){const f=l[d],p=f.start,g=f.count;for(let y=p,b=p+g;y<b;y+=3)for(let _=0;_<3;_++){const x=o.getX(y+_),M=o.getX(y+(_+1)%3);i.fromBufferAttribute(a,x),s.fromBufferAttribute(a,M),zb(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let d=0;d<3;d++){const h=3*o+d,f=3*o+(d+1)%3;i.fromBufferAttribute(a,h),s.fromBufferAttribute(a,f),zb(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ot(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function zb(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var jb=Object.freeze({__proto__:null,BoxGeometry:vo,CapsuleGeometry:Hf,CircleGeometry:Vf,ConeGeometry:Gf,CylinderGeometry:Hl,DodecahedronGeometry:Wf,EdgesGeometry:qM,ExtrudeGeometry:Du,IcosahedronGeometry:Ou,LatheGeometry:ku,OctahedronGeometry:Uu,PlaneGeometry:xo,PolyhedronGeometry:ma,RingGeometry:qf,ShapeGeometry:Yf,SphereGeometry:Fu,TetrahedronGeometry:Zf,TorusGeometry:Kf,TorusKnotGeometry:$f,TubeGeometry:Jf,WireframeGeometry:$M});class JM extends pi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new rt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class QM extends Oi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class dx extends pi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eE extends dx{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return En(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class tE extends pi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rt(16777215),this.specular=new rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nE extends pi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class iE extends pi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class rE extends pi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sE extends pi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aE extends Si{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ya(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function oE(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function lE(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function Y0(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,a=0;a!==n;++s){const o=t[s]*e;for(let l=0;l!==e;++l)i[a++]=r[o+l]}return i}function hx(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=r[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=r[i++];while(s!==void 0)}function zU(r,e,t,n,i=30){const s=r.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const d=s.tracks[l],h=d.getValueSize(),f=[],p=[];for(let g=0;g<d.times.length;++g){const y=d.times[g]*i;if(!(y<t||y>=n)){f.push(d.times[g]);for(let b=0;b<h;++b)p.push(d.values[g*h+b])}}f.length!==0&&(d.times=Ya(f,d.times.constructor),d.values=Ya(p,d.values.constructor),a.push(d))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function jU(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let a=0;a<i;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const d=r.tracks.find(function(x){return x.name===o.name&&x.ValueTypeName===l});if(d===void 0)continue;let h=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=0;const g=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);const y=o.times.length-1;let b;if(s<=o.times[0]){const x=h,M=f-h;b=o.values.slice(x,M)}else if(s>=o.times[y]){const x=y*f+h,M=x+f-h;b=o.values.slice(x,M)}else{const x=o.createInterpolant(),M=h,S=f-h;x.evaluate(s),b=x.resultBuffer.slice(M,S)}l==="quaternion"&&new fi().fromArray(b).normalize().conjugate().toArray(b);const _=d.times.length;for(let x=0;x<_;++x){const M=x*g+p;if(l==="quaternion")fi.multiplyQuaternionsFlat(d.values,M,b,0,d.values,M);else{const S=g-p*2;for(let E=0;E<S;++E)d.values[M+E]-=b[E]}}}return r.blendMode=Wv,r}const BU={convertArray:Ya,isTypedArray:oE,getKeyframeOrder:lE,sortedArray:Y0,flattenJSON:hx,subclip:zU,makeClipAdditive:jU};class zu{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let o=n+2;;){if(i===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class cE extends zu{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ga,endingEnd:Ga}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case Wa:s=e,o=2*t-n;break;case iu:s=i.length-2,o=t+i[s]-i[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Wa:a=e,l=2*n-t;break;case iu:a=1,l=n+i[1]-i[0];break;default:a=e-1,l=t}const d=(n-t)*.5,h=this.valueSize;this._weightPrev=d/(t-o),this._weightNext=d/(l-n),this._offsetPrev=s*h,this._offsetNext=a*h}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,d=l-o,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,g=this._weightNext,y=(n-t)/(i-t),b=y*y,_=b*y,x=-p*_+2*p*b-p*y,M=(1+p)*_+(-1.5-2*p)*b+(-.5+p)*y+1,S=(-1-g)*_+(1.5+g)*b+.5*y,E=g*_-g*b;for(let T=0;T!==o;++T)s[T]=x*a[h+T]+M*a[d+T]+S*a[l+T]+E*a[f+T];return s}}class fx extends zu{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,d=l-o,h=(n-t)/(i-t),f=1-h;for(let p=0;p!==o;++p)s[p]=a[d+p]*f+a[l+p]*h;return s}}class uE extends zu{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Cr{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ya(t,this.TimeBufferType),this.values=Ya(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Ya(e.times,Array),values:Ya(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new uE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new cE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tu:t=this.InterpolantFactoryMethodDiscrete;break;case nu:t=this.InterpolantFactoryMethodLinear;break;case qh:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tu;case this.InterpolantFactoryMethodLinear:return nu;case this.InterpolantFactoryMethodSmooth:return qh}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,a=i-1;for(;s!==i&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&oE(i))for(let o=0,l=i.length;o!==l;++o){const d=i[o];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===qh,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const d=e[o],h=e[o+1];if(d!==h&&(o!==1||d!==e[0]))if(i)l=!0;else{const f=o*n,p=f-n,g=f+n;for(let y=0;y!==n;++y){const b=t[f+y];if(b!==t[p+y]||b!==t[g+y]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const f=o*n,p=a*n;for(let g=0;g!==n;++g)t[p+g]=t[f+g]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,d=0;d!==n;++d)t[l+d]=t[o+d];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Cr.prototype.TimeBufferType=Float32Array;Cr.prototype.ValueBufferType=Float32Array;Cr.prototype.DefaultInterpolation=nu;class yo extends Cr{}yo.prototype.ValueTypeName="bool";yo.prototype.ValueBufferType=Array;yo.prototype.DefaultInterpolation=tu;yo.prototype.InterpolantFactoryMethodLinear=void 0;yo.prototype.InterpolantFactoryMethodSmooth=void 0;class px extends Cr{}px.prototype.ValueTypeName="color";class pu extends Cr{}pu.prototype.ValueTypeName="number";class dE extends zu{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(i-t);let d=e*o;for(let h=d+o;d!==h;d+=4)fi.slerpFlat(s,0,a,d-o,a,d,l);return s}}class Vl extends Cr{InterpolantFactoryMethodLinear(e){return new dE(this.times,this.values,this.getValueSize(),e)}}Vl.prototype.ValueTypeName="quaternion";Vl.prototype.DefaultInterpolation=nu;Vl.prototype.InterpolantFactoryMethodSmooth=void 0;class _o extends Cr{}_o.prototype.ValueTypeName="string";_o.prototype.ValueBufferType=Array;_o.prototype.DefaultInterpolation=tu;_o.prototype.InterpolantFactoryMethodLinear=void 0;_o.prototype.InterpolantFactoryMethodSmooth=void 0;class mu extends Cr{}mu.prototype.ValueTypeName="vector";class gu{constructor(e,t=-1,n,i=Pf){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Ki(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(VU(n[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(Cr.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],d=[];l.push((o+s-1)%s,o,(o+1)%s),d.push(0,1,0);const h=lE(l);l=Y0(l,1,h),d=Y0(d,1,h),!i&&l[0]===0&&(l.push(s),d.push(d[0])),a.push(new pu(".morphTargetInfluences["+t[o].name+"]",l,d).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const d=e[o],h=d.name.match(s);if(h&&h.length>1){const f=h[1];let p=i[f];p||(i[f]=p=[]),p.push(d)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(f,p,g,y,b){if(g.length!==0){const _=[],x=[];hx(g,_,x,y),_.length!==0&&b.push(new f(p,_,x))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const d=e.hierarchy||[];for(let f=0;f<d.length;f++){const p=d[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let b=0;b<p[y].morphTargets.length;b++)g[p[y].morphTargets[b]]=-1;for(const b in g){const _=[],x=[];for(let M=0;M!==p[y].morphTargets.length;++M){const S=p[y];_.push(S.time),x.push(S.morphTarget===b?1:0)}i.push(new pu(".morphTargetInfluence["+b+"]",_,x))}l=g.length*a}else{const g=".bones["+t[f].name+"]";n(mu,g+".position",p,"pos",i),n(Vl,g+".quaternion",p,"rot",i),n(mu,g+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function HU(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pu;case"vector":case"vector2":case"vector3":case"vector4":return mu;case"color":return px;case"quaternion":return Vl;case"bool":case"boolean":return yo;case"string":return _o}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function VU(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=HU(r.type);if(r.times===void 0){const t=[],n=[];hx(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const fo={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class Qf{constructor(e,t,n){const i=this;let s=!1,a=0,o=0,l;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){o++,s===!1&&i.onStart!==void 0&&i.onStart(h,a,o),s=!0},this.itemEnd=function(h){a++,i.onProgress!==void 0&&i.onProgress(h,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,f){return d.push(h,f),this},this.removeHandler=function(h){const f=d.indexOf(h);return f!==-1&&d.splice(f,2),this},this.getHandler=function(h){for(let f=0,p=d.length;f<p;f+=2){const g=d[f],y=d[f+1];if(g.global&&(g.lastIndex=0),g.test(h))return y}return null}}}const hE=new Qf;class mi{constructor(e){this.manager=e!==void 0?e:hE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}mi.DEFAULT_MATERIAL_NAME="__DEFAULT";const gs={};class GU extends Error{constructor(e,t){super(e),this.response=t}}class ki extends mi{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=fo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(gs[e]!==void 0){gs[e].push({onLoad:t,onProgress:n,onError:i});return}gs[e]=[],gs[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const h=gs[e],f=d.body.getReader(),p=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),g=p?parseInt(p):0,y=g!==0;let b=0;const _=new ReadableStream({start(x){M();function M(){f.read().then(({done:S,value:E})=>{if(S)x.close();else{b+=E.byteLength;const T=new ProgressEvent("progress",{lengthComputable:y,loaded:b,total:g});for(let P=0,I=h.length;P<I;P++){const k=h[P];k.onProgress&&k.onProgress(T)}x.enqueue(E),M()}})}}});return new Response(_)}else throw new GU(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(l){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return d.json();default:if(o===void 0)return d.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),p=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(p);return d.arrayBuffer().then(y=>g.decode(y))}}}).then(d=>{fo.add(e,d);const h=gs[e];delete gs[e];for(let f=0,p=h.length;f<p;f++){const g=h[f];g.onLoad&&g.onLoad(d)}}).catch(d=>{const h=gs[e];if(h===void 0)throw this.manager.itemError(e),d;delete gs[e];for(let f=0,p=h.length;f<p;f++){const g=h[f];g.onError&&g.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class WU extends mi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new ki(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=gu.parse(e[n]);t.push(i)}return t}}class XU extends mi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=[],o=new jf,l=new ki(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let d=0;function h(f){l.load(e[f],function(p){const g=s.parse(p,!0);a[f]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},d+=1,d===6&&(g.mipmapCount===1&&(o.minFilter=Zt),o.image=a,o.format=g.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)h(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const g=p.mipmaps.length/p.mipmapCount;for(let y=0;y<g;y++){a[y]={mipmaps:[]};for(let b=0;b<p.mipmapCount;b++)a[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+b]),a[y].format=p.format,a[y].width=p.width,a[y].height=p.height}o.image=a}else o.image.width=p.width,o.image.height=p.height,o.mipmaps=p.mipmaps;p.mipmapCount===1&&(o.minFilter=Zt),o.format=p.format,o.needsUpdate=!0,t&&t(o)},n,i);return o}}class vu extends mi{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=fo.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=cu("img");function l(){h(),fo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(f){h(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){o.removeEventListener("load",l,!1),o.removeEventListener("error",d,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class fE extends mi{constructor(e){super(e)}load(e,t,n,i){const s=new Iu;s.colorSpace=zn;const a=new vu(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(d){a.load(e[d],function(h){s.images[d]=h,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let d=0;d<e.length;++d)l(d);return s}}class mx extends mi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new io,o=new ki(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let d;try{d=s.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}d.image!==void 0?a.image=d.image:d.data!==void 0&&(a.image.width=d.width,a.image.height=d.height,a.image.data=d.data),a.wrapS=d.wrapS!==void 0?d.wrapS:vn,a.wrapT=d.wrapT!==void 0?d.wrapT:vn,a.magFilter=d.magFilter!==void 0?d.magFilter:Zt,a.minFilter=d.minFilter!==void 0?d.minFilter:Zt,a.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0?a.colorSpace=d.colorSpace:d.encoding!==void 0&&(a.encoding=d.encoding),d.flipY!==void 0&&(a.flipY=d.flipY),d.format!==void 0&&(a.format=d.format),d.type!==void 0&&(a.type=d.type),d.mipmaps!==void 0&&(a.mipmaps=d.mipmaps,a.minFilter=ua),d.mipmapCount===1&&(a.minFilter=Zt),d.generateMipmaps!==void 0&&(a.generateMipmaps=d.generateMipmaps),a.needsUpdate=!0,t&&t(a,d)},n,i),a}}class qU extends mi{constructor(e){super(e)}load(e,t,n,i){const s=new an,a=new vu(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class ga extends qt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new rt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class pE extends ga{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(qt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const wg=new Tt,Bb=new j,Hb=new j;class gx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Se(512,512),this.map=null,this.mapPass=null,this.matrix=new Tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lf,this._frameExtents=new Se(1,1),this._viewportCount=1,this._viewports=[new Qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Bb.setFromMatrixPosition(e.matrixWorld),t.position.copy(Bb),Hb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Hb),t.updateMatrixWorld(),wg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wg),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(wg)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class YU extends gx{constructor(){super(new Ln(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Ll*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class mE extends ga{constructor(e,t,n=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(qt.DEFAULT_UP),this.updateMatrix(),this.target=new qt,this.distance=n,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new YU}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Vb=new Tt,Mc=new j,Sg=new j;class ZU extends gx{constructor(){super(new Ln(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Se(4,2),this._viewportCount=6,this._viewports=[new Qt(2,1,1,1),new Qt(0,1,1,1),new Qt(3,1,1,1),new Qt(1,1,1,1),new Qt(3,0,1,1),new Qt(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Mc.setFromMatrixPosition(e.matrixWorld),n.position.copy(Mc),Sg.copy(n.position),Sg.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Sg),n.updateMatrixWorld(),i.makeTranslation(-Mc.x,-Mc.y,-Mc.z),Vb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vb)}}class gE extends ga{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new ZU}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class KU extends gx{constructor(){super(new Ss(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class vE extends ga{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qt.DEFAULT_UP),this.updateMatrix(),this.target=new qt,this.shadow=new KU}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xE extends ga{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class yE extends ga{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class _E{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class bE extends ga{constructor(e=new _E,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class ep extends mi{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,a=new ki(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=ep.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new rt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=n(a.value);break;case"c":i.uniforms[s].value=new rt().setHex(a.value);break;case"v2":i.uniforms[s].value=new Se().fromArray(a.value);break;case"v3":i.uniforms[s].value=new j().fromArray(a.value);break;case"v4":i.uniforms[s].value=new Qt().fromArray(a.value);break;case"m3":i.uniforms[s].value=new Lt().fromArray(a.value);break;case"m4":i.uniforms[s].value=new Tt().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Se().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Se().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:JM,SpriteMaterial:nx,RawShaderMaterial:QM,ShaderMaterial:Oi,PointsMaterial:rx,MeshPhysicalMaterial:eE,MeshStandardMaterial:dx,MeshPhongMaterial:tE,MeshToonMaterial:nE,MeshNormalMaterial:iE,MeshLambertMaterial:rE,MeshDepthMaterial:ex,MeshDistanceMaterial:tx,MeshBasicMaterial:Rs,MeshMatcapMaterial:sE,LineDashedMaterial:aE,LineBasicMaterial:Si,Material:pi};return new t[e]}}class Z0{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class wE extends Dt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class SE extends mi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new ki(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(g,y){if(t[y]!==void 0)return t[y];const _=g.interleavedBuffers[y],x=s(g,_.buffer),M=pl(_.type,x),S=new Ff(M,_.stride);return S.uuid=_.uuid,t[y]=S,S}function s(g,y){if(n[y]!==void 0)return n[y];const _=g.arrayBuffers[y],x=new Uint32Array(_).buffer;return n[y]=x,x}const a=e.isInstancedBufferGeometry?new wE:new Dt,o=e.data.index;if(o!==void 0){const g=pl(o.type,o.array);a.setIndex(new en(g,1))}const l=e.data.attributes;for(const g in l){const y=l[g];let b;if(y.isInterleavedBufferAttribute){const _=i(e.data,y.data);b=new uo(_,y.itemSize,y.offset,y.normalized)}else{const _=pl(y.type,y.array),x=y.isInstancedBufferAttribute?Dl:en;b=new x(_,y.itemSize,y.normalized)}y.name!==void 0&&(b.name=y.name),y.usage!==void 0&&b.setUsage(y.usage),y.updateRange!==void 0&&(b.updateRange.offset=y.updateRange.offset,b.updateRange.count=y.updateRange.count),a.setAttribute(g,b)}const d=e.data.morphAttributes;if(d)for(const g in d){const y=d[g],b=[];for(let _=0,x=y.length;_<x;_++){const M=y[_];let S;if(M.isInterleavedBufferAttribute){const E=i(e.data,M.data);S=new uo(E,M.itemSize,M.offset,M.normalized)}else{const E=pl(M.type,M.array);S=new en(E,M.itemSize,M.normalized)}M.name!==void 0&&(S.name=M.name),b.push(S)}a.morphAttributes[g]=b}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let g=0,y=f.length;g!==y;++g){const b=f[g];a.addGroup(b.start,b.count,b.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const g=new j;p.center!==void 0&&g.fromArray(p.center),a.boundingSphere=new Tr(g,p.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class $U extends mi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=this.path===""?Z0.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new ki(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let d=null;try{d=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const h=d.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?Z0.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ki(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(d)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),d=this.parseObject(e.object,s,l,o,n),h=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,h),t!==void 0){let f=!1;for(const p in a)if(a[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,t),d=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,d),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new ro().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new zf().fromJSON(e[s],i);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new SE;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in jb?o=jb[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new ep;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),i[l.uuid]=n[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=gu.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function a(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const d=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return a(h)}else return l.data?{data:pl(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Qf(t);s=new vu(l),s.setCrossOrigin(this.crossOrigin);for(let d=0,h=e.length;d<h;d++){const f=e[d],p=f.url;if(Array.isArray(p)){const g=[];for(let y=0,b=p.length;y<b;y++){const _=p[y],x=o(_);x!==null&&(x instanceof HTMLImageElement?g.push(x):g.push(new io(x.data,x.width,x.height)))}i[f.uuid]=new Xa(g)}else{const g=o(f.url);i[f.uuid]=new Xa(g)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return a.data?{data:pl(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new vu(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],d=l.url;if(Array.isArray(d)){const h=[];for(let f=0,p=d.length;f<p;f++){const g=d[f],y=await s(g);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new io(y.data,y.width,y.height)))}n[l.uuid]=new Xa(h)}else{const h=await s(l.url);n[l.uuid]=new Xa(h)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],d=l.data;let h;Array.isArray(d)?(h=new Iu,d.length===6&&(h.needsUpdate=!0)):(d&&d.data?h=new io:h=new an,d&&(h.needsUpdate=!0)),h.source=l,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=n(o.mapping,JU)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=n(o.wrap[0],Gb),h.wrapT=n(o.wrap[1],Gb)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.encoding!==void 0&&(h.encoding=o.encoding),o.minFilter!==void 0&&(h.minFilter=n(o.minFilter,Wb)),o.magFilter!==void 0&&(h.magFilter=n(o.magFilter,Wb)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),i[o.uuid]=h}return i}parseObject(e,t,n,i,s){let a;function o(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const g=[];for(let y=0,b=p.length;y<b;y++){const _=p[y];n[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),g.push(n[_])}return g}return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),n[p]}}function d(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let h,f;switch(e.type){case"Scene":a=new Lu,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new rt(e.background):a.background=d(e.background)),e.environment!==void 0&&(a.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Uf(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Of(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Ln(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ss(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new xE(e.color,e.intensity);break;case"DirectionalLight":a=new vE(e.color,e.intensity);break;case"PointLight":a=new gE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new yE(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new mE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new pE(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new bE().fromJSON(e);break;case"SkinnedMesh":h=o(e.geometry),f=l(e.material),a=new FM(h,f),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),f=l(e.material),a=new jn(h,f);break;case"InstancedMesh":h=o(e.geometry),f=l(e.material);const p=e.count,g=e.instanceMatrix,y=e.instanceColor;a=new zM(h,f,p),a.instanceMatrix=new Dl(new Float32Array(g.array),16),y!==void 0&&(a.instanceColor=new Dl(new Float32Array(y.array),y.itemSize));break;case"LOD":a=new UM;break;case"Line":a=new da(o(e.geometry),l(e.material));break;case"LineLoop":a=new jM(o(e.geometry),l(e.material));break;case"LineSegments":a=new Jr(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new BM(o(e.geometry),l(e.material));break;case"Sprite":a=new OM(l(e.material));break;case"Group":a=new gl;break;case"Bone":a=new ix;break;default:a=new qt}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let g=0;g<p.length;g++)a.add(this.parseObject(p[g],t,n,i,s))}if(e.animations!==void 0){const p=e.animations;for(let g=0;g<p.length;g++){const y=p[g];a.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const p=e.levels;for(let g=0;g<p.length;g++){const y=p[g],b=a.getObjectByProperty("uuid",y.object);b!==void 0&&a.addLevel(b,y.distance,y.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}}const JU={UVMapping:la,CubeReflectionMapping:Kr,CubeRefractionMapping:ca,EquirectangularReflectionMapping:Il,EquirectangularRefractionMapping:Jc,CubeUVReflectionMapping:jl},Gb={RepeatWrapping:Qc,ClampToEdgeWrapping:vn,MirroredRepeatWrapping:eu},Wb={NearestFilter:In,NearestMipmapNearestFilter:cf,NearestMipmapLinearFilter:zc,LinearFilter:Zt,LinearMipmapNearestFilter:Ov,LinearMipmapLinearFilter:ua};class QU extends mi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=fo.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){fo.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Ah;class vx{static getContext(){return Ah===void 0&&(Ah=new(window.AudioContext||window.webkitAudioContext)),Ah}static setContext(e){Ah=e}}class e6 extends mi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new ki(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const d=l.slice(0);vx.getContext().decodeAudioData(d,function(f){t(f)},o)}catch(d){o(d)}},n,i);function o(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const Xb=new Tt,qb=new Tt,Ia=new Tt;class t6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ln,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ln,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ia.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,a=t.near*Math.tan(to*t.fov*.5)/t.zoom;let o,l;qb.elements[12]=-i,Xb.elements[12]=i,o=-a*t.aspect+s,l=a*t.aspect+s,Ia.elements[0]=2*t.near/(l-o),Ia.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Ia),o=-a*t.aspect-s,l=a*t.aspect-s,Ia.elements[0]=2*t.near/(l-o),Ia.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Ia)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(qb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Xb)}}class xx{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Yb(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Yb();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Yb(){return(typeof performance>"u"?Date:performance).now()}const La=new j,Zb=new fi,n6=new j,ka=new j;class i6 extends qt{constructor(){super(),this.type="AudioListener",this.context=vx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xx}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(La,Zb,n6),ka.set(0,0,-1).applyQuaternion(Zb),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(La.x,i),t.positionY.linearRampToValueAtTime(La.y,i),t.positionZ.linearRampToValueAtTime(La.z,i),t.forwardX.linearRampToValueAtTime(ka.x,i),t.forwardY.linearRampToValueAtTime(ka.y,i),t.forwardZ.linearRampToValueAtTime(ka.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(La.x,La.y,La.z),t.setOrientation(ka.x,ka.y,ka.z,n.x,n.y,n.z)}}class ME extends qt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Da=new j,Kb=new fi,r6=new j,Oa=new j;class s6 extends ME{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Da,Kb,r6),Oa.set(0,0,1).applyQuaternion(Kb);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Da.x,n),t.positionY.linearRampToValueAtTime(Da.y,n),t.positionZ.linearRampToValueAtTime(Da.z,n),t.orientationX.linearRampToValueAtTime(Oa.x,n),t.orientationY.linearRampToValueAtTime(Oa.y,n),t.orientationZ.linearRampToValueAtTime(Oa.z,n)}else t.setPosition(Da.x,Da.y,Da.z),t.setOrientation(Oa.x,Oa.y,Oa.z)}}class a6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class EE{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)n[s+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,i,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let l=t,d=t+t;l!==d;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,a=i;s!==a;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){fi.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const a=this._workIndex*s;fi.multiplyQuaternionsFlat(e,a,e,t,e,n),fi.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*i}}_lerpAdditive(e,t,n,i,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[n+a]*i}}}const yx="\\[\\]\\.:\\/",o6=new RegExp("["+yx+"]","g"),_x="[^"+yx+"]",l6="[^"+yx.replace("\\.","")+"]",c6=/((?:WC+[\/:])*)/.source.replace("WC",_x),u6=/(WCOD+)?/.source.replace("WCOD",l6),d6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_x),h6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_x),f6=new RegExp("^"+c6+u6+d6+h6+"$"),p6=["material","materials","bones","map"];class m6{constructor(e,t,n){const i=n||Ht.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Ht{constructor(e,t,n){this.path=t,this.parsedPath=n||Ht.parseTrackName(t),this.node=Ht.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Ht.Composite(e,t,n):new Ht(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(o6,"")}static parseTrackName(e){const t=f6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);p6.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Ht.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===d){d=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const a=e[i];if(a===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ht.Composite=m6;Ht.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ht.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ht.prototype.GetterByBindingType=[Ht.prototype._getValue_direct,Ht.prototype._getValue_array,Ht.prototype._getValue_arrayElement,Ht.prototype._getValue_toArray];Ht.prototype.SetterByBindingTypeAndVersioning=[[Ht.prototype._setValue_direct,Ht.prototype._setValue_direct_setNeedsUpdate,Ht.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_array,Ht.prototype._setValue_array_setNeedsUpdate,Ht.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_arrayElement,Ht.prototype._setValue_arrayElement_setNeedsUpdate,Ht.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ht.prototype._setValue_fromArray,Ht.prototype._setValue_fromArray_setNeedsUpdate,Ht.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class g6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ki(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,d=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],g=p.uuid;let y=t[g];if(y===void 0){y=l++,t[g]=y,e.push(p);for(let b=0,_=a;b!==_;++b)s[b].push(new Ht(p,n[b],i[b]))}else if(y<d){o=e[y];const b=--d,_=e[b];t[_.uuid]=y,e[y]=_,t[g]=b,e[b]=p;for(let x=0,M=a;x!==M;++x){const S=s[x],E=S[b];let T=S[y];S[y]=E,T===void 0&&(T=new Ht(p,n[x],i[x])),S[b]=T}}else e[y]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],d=l.uuid,h=t[d];if(h!==void 0&&h>=s){const f=s++,p=e[f];t[p.uuid]=h,e[h]=p,t[d]=f,e[f]=l;for(let g=0,y=i;g!==y;++g){const b=n[g],_=b[f],x=b[h];b[h]=_,b[f]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const d=arguments[o],h=d.uuid,f=t[h];if(f!==void 0)if(delete t[h],f<s){const p=--s,g=e[p],y=--a,b=e[y];t[g.uuid]=f,e[f]=g,t[b.uuid]=p,e[p]=b,e.pop();for(let _=0,x=i;_!==x;++_){const M=n[_],S=M[p],E=M[y];M[f]=S,M[p]=E,M.pop()}}else{const p=--a,g=e[p];p>0&&(t[g.uuid]=f),e[f]=g,e.pop();for(let y=0,b=i;y!==b;++y){const _=n[y];_[f]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,o=this._parsedPaths,l=this._objects,d=l.length,h=this.nCachedObjects_,f=new Array(d);i=s.length,n[e]=i,a.push(e),o.push(t),s.push(f);for(let p=h,g=l.length;p!==g;++p){const y=l[p];f[p]=new Ht(y,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],d=e[o];t[d]=n,a[n]=l,a.pop(),s[n]=s[o],s.pop(),i[n]=i[o],i.pop()}}}class TE{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:Ga,endingEnd:Ga};for(let d=0;d!==a;++d){const h=s[d].createInterpolant(null);o[d]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rM,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,d=o.sampleValues;return l[0]=s,l[1]=s+n,d[0]=e/a,d[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case Wv:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(a),d[h].accumulateAdditive(o);break;case Pf:default:for(let h=0,f=l.length;h!==f;++h)l[h].evaluate(a),d[h].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const a=n===sM;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(n===iM){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const d=e<0;this._setEndings(d,!d,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Wa,i.endingEnd=Wa):(e?i.endingStart=this.zeroSlopeAtStart?Wa:Ga:i.endingStart=iu,t?i.endingEnd=this.zeroSlopeAtEnd?Wa:Ga:i.endingEnd=iu)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=n,this}}const v6=new Float32Array(1);class x6 extends Cs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,d=this._bindingsByRootAndName;let h=d[l];h===void 0&&(h={},d[l]=h);for(let f=0;f!==s;++f){const p=i[f],g=p.name;let y=h[g];if(y!==void 0)++y.referenceCount,a[f]=y;else{if(y=a[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,g));continue}const b=t&&t._propertyBindings[f].binding.parsedPath;y=new EE(Ht.create(n,g,b),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,g),a[f]=y}o[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,d=l[l.length-1],h=e._byClipCacheIndex;d._byClipCacheIndex=h,l[h]=d,l.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[i],l=t[t.length-1],d=e._cacheIndex;l._cacheIndex=d,t[d]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new fx(new Float32Array(2),new Float32Array(2),1,v6),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?gu.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let d=null;if(n===void 0&&(a!==null?n=a.blendMode:n=Pf),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===n)return f;d=l.knownActions[0],a===null&&(a=d._clip)}if(a===null)return null;const h=new TE(this,a,t,n);return this._bindAction(h,d),this._addInactiveAction(h,o,s),h}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?gu.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let d=0;d!==l;++d)o[d].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const d=a[o];this._deactivateAction(d);const h=d._cacheIndex,f=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,f._cacheIndex=h,t[h]=f,t.pop(),this._removeInactiveBindingsForAction(d)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class bx{constructor(e){this.value=e}clone(){return new bx(this.value.clone===void 0?this.value:this.value.clone())}}let y6=0;class _6 extends Cs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:y6++}),this.name="",this.usage=ou,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class b6 extends Ff{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class w6{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class wx{constructor(e,t,n=0,i=1/0){this.ray=new go(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new no,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return K0(e,this,n,t),n.sort($b),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)K0(e[i],this,n,t);return n.sort($b),n}}function $b(r,e){return r.distance-e.distance}function K0(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let s=0,a=i.length;s<a;s++)K0(i[s],e,t,!0)}}class ff{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(En(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class S6{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const Jb=new Se;class M6{constructor(e=new Se(1/0,1/0),t=new Se(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Jb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Jb).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Qb=new j,Ch=new j;class E6{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Qb.subVectors(e,this.start),Ch.subVectors(this.end,this.start);const n=Ch.dot(Ch);let s=Ch.dot(Qb)/n;return t&&(s=En(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const ew=new j;class T6 extends qt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Dt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const d=a/l*Math.PI*2,h=o/l*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new ot(i,3));const s=new Si({fog:!1,toneMapped:!1});this.cone=new Jr(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),ew.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ew),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Xs=new j,Rh=new Tt,Mg=new Tt;class A6 extends Jr{constructor(e){const t=AE(e),n=new Dt,i=[],s=[],a=new rt(0,0,1),o=new rt(0,1,0);for(let d=0;d<t.length;d++){const h=t[d];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}n.setAttribute("position",new ot(i,3)),n.setAttribute("color",new ot(s,3));const l=new Si({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Mg.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(Rh.multiplyMatrices(Mg,o.matrixWorld),Xs.setFromMatrixPosition(Rh),i.setXYZ(a,Xs.x,Xs.y,Xs.z),Rh.multiplyMatrices(Mg,o.parent.matrixWorld),Xs.setFromMatrixPosition(Rh),i.setXYZ(a+1,Xs.x,Xs.y,Xs.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function AE(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,AE(r.children[t]));return e}class C6 extends jn{constructor(e,t,n){const i=new Fu(t,4,2),s=new Rs({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const R6=new j,tw=new rt,nw=new rt;class P6 extends qt{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Uu(t);i.rotateY(Math.PI*.5),this.material=new Rs({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new en(a,3)),this.add(new jn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");tw.copy(this.light.color),nw.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?tw:nw;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(R6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class N6 extends Jr{constructor(e=10,t=10,n=4473924,i=8947848){n=new rt(n),i=new rt(i);const s=t/2,a=e/t,o=e/2,l=[],d=[];for(let p=0,g=0,y=-o;p<=t;p++,y+=a){l.push(-o,0,y,o,0,y),l.push(y,0,-o,y,0,o);const b=p===s?n:i;b.toArray(d,g),g+=3,b.toArray(d,g),g+=3,b.toArray(d,g),g+=3,b.toArray(d,g),g+=3}const h=new Dt;h.setAttribute("position",new ot(l,3)),h.setAttribute("color",new ot(d,3));const f=new Si({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class I6 extends Jr{constructor(e=10,t=16,n=8,i=64,s=4473924,a=8947848){s=new rt(s),a=new rt(a);const o=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),g=Math.sin(p)*e,y=Math.cos(p)*e;o.push(0,0,0),o.push(g,0,y);const b=f&1?s:a;l.push(b.r,b.g,b.b),l.push(b.r,b.g,b.b)}for(let f=0;f<n;f++){const p=f&1?s:a,g=e-e/n*f;for(let y=0;y<i;y++){let b=y/i*(Math.PI*2),_=Math.sin(b)*g,x=Math.cos(b)*g;o.push(_,0,x),l.push(p.r,p.g,p.b),b=(y+1)/i*(Math.PI*2),_=Math.sin(b)*g,x=Math.cos(b)*g,o.push(_,0,x),l.push(p.r,p.g,p.b)}}const d=new Dt;d.setAttribute("position",new ot(o,3)),d.setAttribute("color",new ot(l,3));const h=new Si({vertexColors:!0,toneMapped:!1});super(d,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const iw=new j,Ph=new j,rw=new j;class L6 extends qt{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Dt;i.setAttribute("position",new ot([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Si({fog:!1,toneMapped:!1});this.lightPlane=new da(i,s),this.add(this.lightPlane),i=new Dt,i.setAttribute("position",new ot([0,0,0,0,0,1],3)),this.targetLine=new da(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),iw.setFromMatrixPosition(this.light.matrixWorld),Ph.setFromMatrixPosition(this.light.target.matrixWorld),rw.subVectors(Ph,iw),this.lightPlane.lookAt(Ph),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ph),this.targetLine.scale.z=rw.length()}}const Nh=new j,Mn=new Nu;class k6 extends Jr{constructor(e){const t=new Dt,n=new Si({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(y,b){l(y),l(b)}function l(y){i.push(0,0,0),s.push(0,0,0),a[y]===void 0&&(a[y]=[]),a[y].push(i.length/3-1)}t.setAttribute("position",new ot(i,3)),t.setAttribute("color",new ot(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const d=new rt(16755200),h=new rt(16711680),f=new rt(43775),p=new rt(16777215),g=new rt(3355443);this.setColors(d,h,f,p,g)}setColors(e,t,n,i,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;Mn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pn("c",t,e,Mn,0,0,-1),Pn("t",t,e,Mn,0,0,1),Pn("n1",t,e,Mn,-n,-i,-1),Pn("n2",t,e,Mn,n,-i,-1),Pn("n3",t,e,Mn,-n,i,-1),Pn("n4",t,e,Mn,n,i,-1),Pn("f1",t,e,Mn,-n,-i,1),Pn("f2",t,e,Mn,n,-i,1),Pn("f3",t,e,Mn,-n,i,1),Pn("f4",t,e,Mn,n,i,1),Pn("u1",t,e,Mn,n*.7,i*1.1,-1),Pn("u2",t,e,Mn,-n*.7,i*1.1,-1),Pn("u3",t,e,Mn,0,i*2,-1),Pn("cf1",t,e,Mn,-n,0,1),Pn("cf2",t,e,Mn,n,0,1),Pn("cf3",t,e,Mn,0,-i,1),Pn("cf4",t,e,Mn,0,i,1),Pn("cn1",t,e,Mn,-n,0,-1),Pn("cn2",t,e,Mn,n,0,-1),Pn("cn3",t,e,Mn,0,-i,-1),Pn("cn4",t,e,Mn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pn(r,e,t,n,i,s,a){Nh.set(i,s,a).unproject(n);const o=e[r];if(o!==void 0){const l=t.getAttribute("position");for(let d=0,h=o.length;d<h;d++)l.setXYZ(o[d],Nh.x,Nh.y,Nh.z)}}const Ih=new $r;class D6 extends Jr{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Dt;s.setIndex(new en(n,1)),s.setAttribute("position",new en(i,3)),super(s,new Si({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Ih.setFromObject(this.object),Ih.isEmpty())return;const t=Ih.min,n=Ih.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class O6 extends Jr{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Dt;s.setIndex(new en(n,1)),s.setAttribute("position",new ot(i,3)),super(s,new Si({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class U6 extends da{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Dt;a.setAttribute("position",new ot(s,3)),a.computeBoundingSphere(),super(a,new Si({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Dt;l.setAttribute("position",new ot(o,3)),l.computeBoundingSphere(),this.add(new jn(l,new Rs({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const sw=new j;let Lh,Eg;class F6 extends qt{constructor(e=new j(0,0,1),t=new j(0,0,0),n=1,i=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",Lh===void 0&&(Lh=new Dt,Lh.setAttribute("position",new ot([0,0,0,0,1,0],3)),Eg=new Hl(0,.5,1,5,1),Eg.translate(0,-.5,0)),this.position.copy(t),this.line=new da(Lh,new Si({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new jn(Eg,new Rs({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{sw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(sw,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class z6 extends Jr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Dt;i.setAttribute("position",new ot(t,3)),i.setAttribute("color",new ot(n,3));const s=new Si({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new rt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class CE{constructor(){this.type="ShapePath",this.color=new rt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new uu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,a){return this.currentPath.bezierCurveTo(e,t,n,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const M=[];for(let S=0,E=x.length;S<E;S++){const T=x[S],P=new ro;P.curves=T.curves,M.push(P)}return M}function n(x,M){const S=M.length;let E=!1;for(let T=S-1,P=0;P<S;T=P++){let I=M[T],k=M[P],R=k.x-I.x,L=k.y-I.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(I=M[P],R=-R,k=M[T],L=-L),x.y<I.y||x.y>k.y)continue;if(x.y===I.y){if(x.x===I.x)return!0}else{const F=L*(x.x-I.x)-R*(x.y-I.y);if(F===0)return!0;if(F<0)continue;E=!E}}else{if(x.y!==I.y)continue;if(k.x<=x.x&&x.x<=I.x||I.x<=x.x&&x.x<=k.x)return!0}}return E}const i=Yr.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const d=[];if(s.length===1)return o=s[0],l=new ro,l.curves=o.curves,d.push(l),d;let h=!i(s[0].getPoints());h=e?!h:h;const f=[],p=[];let g=[],y=0,b;p[y]=void 0,g[y]=[];for(let x=0,M=s.length;x<M;x++)o=s[x],b=o.getPoints(),a=i(b),a=e?!a:a,a?(!h&&p[y]&&y++,p[y]={s:new ro,p:b},p[y].s.curves=o.curves,h&&y++,g[y]=[]):g[y].push({h:o,p:b[0]});if(!p[0])return t(s);if(p.length>1){let x=!1,M=0;for(let S=0,E=p.length;S<E;S++)f[S]=[];for(let S=0,E=p.length;S<E;S++){const T=g[S];for(let P=0;P<T.length;P++){const I=T[P];let k=!0;for(let R=0;R<p.length;R++)n(I.p,p[R].p)&&(S!==R&&M++,k?(k=!1,f[R].push(I)):x=!0);k&&f[S].push(I)}}M>0&&x===!1&&(g=f)}let _;for(let x=0,M=p.length;x<M;x++){l=p[x].s,d.push(l),_=g[x];for(let S=0,E=_.length;S<E;S++)l.holes.push(_[S].h)}return d}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zl);const j6=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Dv,AddEquation:Ba,AddOperation:X2,AdditiveAnimationBlendMode:Wv,AdditiveBlending:of,AlphaFormat:$2,AlwaysCompare:vM,AlwaysDepth:z2,AlwaysStencilFunc:cM,AmbientLight:xE,AnimationAction:TE,AnimationClip:gu,AnimationLoader:WU,AnimationMixer:x6,AnimationObjectGroup:g6,AnimationUtils:BU,ArcCurve:HM,ArrayCamera:IM,ArrowHelper:F6,Audio:ME,AudioAnalyser:a6,AudioContext:vx,AudioListener:i6,AudioLoader:e6,AxesHelper:z6,BackSide:hi,BasicDepthPacking:aM,BasicShadowMap:E2,Bone:ix,BooleanKeyframeTrack:yo,Box2:M6,Box3:$r,Box3Helper:O6,BoxGeometry:vo,BoxHelper:D6,BufferAttribute:en,BufferGeometry:Dt,BufferGeometryLoader:SE,ByteType:Uv,Cache:fo,Camera:Nu,CameraHelper:k6,CanvasTexture:dU,CapsuleGeometry:Hf,CatmullRomCurve3:VM,CineonToneMapping:Z2,CircleGeometry:Vf,ClampToEdgeWrapping:vn,Clock:xx,Color:rt,ColorKeyframeTrack:px,ColorManagement:Jt,CompressedArrayTexture:cU,CompressedCubeTexture:uU,CompressedTexture:jf,CompressedTextureLoader:XU,ConeGeometry:Gf,CubeCamera:EM,CubeReflectionMapping:Kr,CubeRefractionMapping:ca,CubeTexture:Iu,CubeTextureLoader:fE,CubeUVReflectionMapping:jl,CubicBezierCurve:ax,CubicBezierCurve3:GM,CubicInterpolant:cE,CullFaceBack:u0,CullFaceFront:M2,CullFaceFrontBack:uL,CullFaceNone:S2,Curve:Ar,CurvePath:XM,CustomBlending:T2,CustomToneMapping:K2,CylinderGeometry:Hl,Cylindrical:S6,Data3DTexture:Zv,DataArrayTexture:If,DataTexture:io,DataTextureLoader:mx,DataUtils:qa,DecrementStencilOp:bL,DecrementWrapStencilOp:SL,DefaultLoadingManager:hE,DepthFormat:ra,DepthStencilFormat:co,DepthTexture:LM,DirectionalLight:vE,DirectionalLightHelper:L6,DiscreteInterpolant:uE,DisplayP3ColorSpace:Nf,DodecahedronGeometry:Wf,DoubleSide:Mr,DstAlphaFactor:L2,DstColorFactor:D2,DynamicCopyUsage:FL,DynamicDrawUsage:IL,DynamicReadUsage:DL,EdgesGeometry:qM,EllipseCurve:Bf,EqualCompare:hM,EqualDepth:B2,EqualStencilFunc:AL,EquirectangularReflectionMapping:Il,EquirectangularRefractionMapping:Jc,Euler:Pu,EventDispatcher:Cs,ExtrudeGeometry:Du,FileLoader:ki,Float16BufferAttribute:S4,Float32BufferAttribute:ot,Float64BufferAttribute:M4,FloatType:Vn,Fog:Uf,FogExp2:Of,FramebufferTexture:lU,FrontSide:As,Frustum:Lf,GLBufferAttribute:w6,GLSL1:jL,GLSL3:B0,GreaterCompare:pM,GreaterDepth:V2,GreaterEqualCompare:gM,GreaterEqualDepth:H2,GreaterEqualStencilFunc:NL,GreaterStencilFunc:RL,GridHelper:N6,Group:gl,HalfFloatType:$n,HemisphereLight:pE,HemisphereLightHelper:P6,IcosahedronGeometry:Ou,ImageBitmapLoader:QU,ImageLoader:vu,ImageUtils:Yv,IncrementStencilOp:_L,IncrementWrapStencilOp:wL,InstancedBufferAttribute:Dl,InstancedBufferGeometry:wE,InstancedInterleavedBuffer:b6,InstancedMesh:zM,Int16BufferAttribute:b4,Int32BufferAttribute:w4,Int8BufferAttribute:x4,IntType:Rf,InterleavedBuffer:Ff,InterleavedBufferAttribute:uo,Interpolant:zu,InterpolateDiscrete:tu,InterpolateLinear:nu,InterpolateSmooth:qh,InvertStencilOp:ML,KeepStencilOp:Yh,KeyframeTrack:Cr,LOD:UM,LatheGeometry:ku,Layers:no,LessCompare:dM,LessDepth:j2,LessEqualCompare:fM,LessEqualDepth:lf,LessEqualStencilFunc:CL,LessStencilFunc:TL,Light:ga,LightProbe:bE,Line:da,Line3:E6,LineBasicMaterial:Si,LineCurve:ox,LineCurve3:WM,LineDashedMaterial:aE,LineLoop:jM,LineSegments:Jr,LinearDisplayP3ColorSpace:Ru,LinearEncoding:Xv,LinearFilter:Zt,LinearInterpolant:fx,LinearMipMapLinearFilter:m0,LinearMipMapNearestFilter:pL,LinearMipmapLinearFilter:ua,LinearMipmapNearestFilter:Ov,LinearSRGBColorSpace:Qi,LinearToneMapping:q2,LinearTransfer:ru,Loader:mi,LoaderUtils:Z0,LoadingManager:Qf,LoopOnce:iM,LoopPingPong:sM,LoopRepeat:rM,LuminanceAlphaFormat:Q2,LuminanceFormat:J2,MOUSE:Fa,Material:pi,MaterialLoader:ep,MathUtils:e4,Matrix3:Lt,Matrix4:Tt,MaxEquation:p0,Mesh:jn,MeshBasicMaterial:Rs,MeshDepthMaterial:ex,MeshDistanceMaterial:tx,MeshLambertMaterial:rE,MeshMatcapMaterial:sE,MeshNormalMaterial:iE,MeshPhongMaterial:tE,MeshPhysicalMaterial:eE,MeshStandardMaterial:dx,MeshToonMaterial:nE,MinEquation:f0,MirroredRepeatWrapping:eu,MixOperation:W2,MultiplyBlending:h0,MultiplyOperation:Cu,NearestFilter:In,NearestMipMapLinearFilter:fL,NearestMipMapNearestFilter:hL,NearestMipmapLinearFilter:zc,NearestMipmapNearestFilter:cf,NeverCompare:uM,NeverDepth:F2,NeverStencilFunc:EL,NoBlending:Xr,NoColorSpace:Xi,NoToneMapping:qr,NormalAnimationBlendMode:Pf,NormalBlending:eo,NotEqualCompare:mM,NotEqualDepth:G2,NotEqualStencilFunc:PL,NumberKeyframeTrack:pu,Object3D:qt,ObjectLoader:$U,ObjectSpaceNormalMap:lM,OctahedronGeometry:Uu,OneFactor:P2,OneMinusDstAlphaFactor:k2,OneMinusDstColorFactor:O2,OneMinusSrcAlphaFactor:kv,OneMinusSrcColorFactor:I2,OrthographicCamera:Ss,P3Primaries:au,PCFShadowMap:Af,PCFSoftShadowMap:Fc,PMREMGenerator:V0,Path:uu,PerspectiveCamera:Ln,Plane:_s,PlaneGeometry:xo,PlaneHelper:U6,PointLight:gE,PointLightHelper:C6,Points:BM,PointsMaterial:rx,PolarGridHelper:I6,PolyhedronGeometry:ma,PositionalAudio:s6,PropertyBinding:Ht,PropertyMixer:EE,QuadraticBezierCurve:lx,QuadraticBezierCurve3:cx,Quaternion:fi,QuaternionKeyframeTrack:Vl,QuaternionLinearInterpolant:dE,RED_GREEN_RGTC2_Format:z0,RED_RGTC1_Format:nM,REVISION:zl,RGBADepthPacking:oM,RGBAFormat:Hn,RGBAIntegerFormat:Gv,RGBA_ASTC_10x10_Format:L0,RGBA_ASTC_10x5_Format:P0,RGBA_ASTC_10x6_Format:N0,RGBA_ASTC_10x8_Format:I0,RGBA_ASTC_12x10_Format:k0,RGBA_ASTC_12x12_Format:D0,RGBA_ASTC_4x4_Format:w0,RGBA_ASTC_5x4_Format:S0,RGBA_ASTC_5x5_Format:M0,RGBA_ASTC_6x5_Format:E0,RGBA_ASTC_6x6_Format:T0,RGBA_ASTC_8x5_Format:A0,RGBA_ASTC_8x6_Format:C0,RGBA_ASTC_8x8_Format:R0,RGBA_BPTC_Format:Xh,RGBA_ETC2_EAC_Format:b0,RGBA_PVRTC_2BPPV1_Format:y0,RGBA_PVRTC_4BPPV1_Format:x0,RGBA_S3TC_DXT1_Format:Vh,RGBA_S3TC_DXT3_Format:Gh,RGBA_S3TC_DXT5_Format:Wh,RGB_BPTC_SIGNED_Format:O0,RGB_BPTC_UNSIGNED_Format:U0,RGB_ETC1_Format:tM,RGB_ETC2_Format:_0,RGB_PVRTC_2BPPV1_Format:v0,RGB_PVRTC_4BPPV1_Format:g0,RGB_S3TC_DXT1_Format:Hh,RGFormat:eM,RGIntegerFormat:Vv,RawShaderMaterial:QM,Ray:go,Raycaster:wx,Rec709Primaries:su,RectAreaLight:yE,RedFormat:Bv,RedIntegerFormat:Hv,ReinhardToneMapping:Y2,RenderTarget:bM,RepeatWrapping:Qc,ReplaceStencilOp:yL,ReverseSubtractEquation:C2,RingGeometry:qf,SIGNED_RED_GREEN_RGTC2_Format:j0,SIGNED_RED_RGTC1_Format:F0,SRGBColorSpace:zn,SRGBTransfer:ln,Scene:Lu,ShaderChunk:Rt,ShaderLib:Sr,ShaderMaterial:Oi,ShadowMaterial:JM,Shape:ro,ShapeGeometry:Yf,ShapePath:CE,ShapeUtils:Yr,ShortType:Fv,Skeleton:zf,SkeletonHelper:A6,SkinnedMesh:FM,Source:Xa,Sphere:Tr,SphereGeometry:Fu,Spherical:ff,SphericalHarmonics3:_E,SplineCurve:ux,SpotLight:mE,SpotLightHelper:T6,Sprite:OM,SpriteMaterial:nx,SrcAlphaFactor:Lv,SrcAlphaSaturateFactor:U2,SrcColorFactor:N2,StaticCopyUsage:UL,StaticDrawUsage:ou,StaticReadUsage:kL,StereoCamera:t6,StreamCopyUsage:zL,StreamDrawUsage:LL,StreamReadUsage:OL,StringKeyframeTrack:_o,SubtractEquation:A2,SubtractiveBlending:d0,TOUCH:za,TangentSpaceNormalMap:pa,TetrahedronGeometry:Zf,Texture:an,TextureLoader:qU,TorusGeometry:Kf,TorusKnotGeometry:$f,Triangle:Ci,TriangleFanDrawMode:vL,TriangleStripDrawMode:gL,TrianglesDrawMode:mL,TubeGeometry:Jf,TwoPassDoubleSide:dL,UVMapping:la,Uint16BufferAttribute:Kv,Uint32BufferAttribute:$v,Uint8BufferAttribute:y4,Uint8ClampedBufferAttribute:_4,Uniform:bx,UniformsGroup:_6,UniformsLib:Ge,UniformsUtils:MM,UnsignedByteType:Zi,UnsignedInt248Type:ia,UnsignedIntType:Gr,UnsignedShort4444Type:zv,UnsignedShort5551Type:jv,UnsignedShortType:Cf,VSMShadowMap:wr,Vector2:Se,Vector3:j,Vector4:Qt,VectorKeyframeTrack:mu,VideoTexture:oU,WebGL1Renderer:kM,WebGL3DRenderTarget:a4,WebGLArrayRenderTarget:s4,WebGLCoordinateSystem:Wr,WebGLCubeRenderTarget:Jv,WebGLMultipleRenderTargets:o4,WebGLRenderTarget:er,WebGLRenderer:Df,WebGLUtils:NM,WebGPUCoordinateSystem:lu,WireframeGeometry:$M,WrapAroundEnding:iu,ZeroCurvatureEnding:Ga,ZeroFactor:R2,ZeroSlopeEnding:Wa,ZeroStencilOp:xL,_SRGBAFormat:uf,createCanvasElement:_M,sRGBEncoding:sa},Symbol.toStringTag,{value:"Module"}));var RE={exports:{}},bo={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */bo.ConcurrentRoot=1;bo.ContinuousEventPriority=4;bo.DefaultEventPriority=16;bo.DiscreteEventPriority=1;bo.IdleEventPriority=536870912;bo.LegacyRoot=0;RE.exports=bo;var xl=RE.exports;function B6(r){let e;const t=new Set,n=(d,h)=>{const f=typeof d=="function"?d(e):d;if(f!==e){const p=e;e=h?f:Object.assign({},e,f),t.forEach(g=>g(e,p))}},i=()=>e,s=(d,h=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function g(){const y=h(e);if(!f(p,y)){const b=p;d(p=y,b)}}return t.add(g),()=>t.delete(g)},l={setState:n,getState:i,subscribe:(d,h,f)=>h||f?s(d,h,f):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=r(n,i,l),l}const H6=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),aw=H6?B.useEffect:B.useLayoutEffect;function PE(r){const e=typeof r=="function"?B6(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=B.useReducer(_=>_+1,0),a=e.getState(),o=B.useRef(a),l=B.useRef(n),d=B.useRef(i),h=B.useRef(!1),f=B.useRef();f.current===void 0&&(f.current=n(a));let p,g=!1;(o.current!==a||l.current!==n||d.current!==i||h.current)&&(p=n(a),g=!i(f.current,p)),aw(()=>{g&&(f.current=p),o.current=a,l.current=n,d.current=i,h.current=!1});const y=B.useRef(a);aw(()=>{const _=()=>{try{const M=e.getState(),S=l.current(M);d.current(f.current,S)||(o.current=M,f.current=S,s())}catch{h.current=!0,s()}},x=e.subscribe(_);return e.getState()!==y.current&&_(),x},[]);const b=g?p:f.current;return B.useDebugValue(b),b};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}const V6=r=>typeof r=="object"&&typeof r.then=="function",Za=[];function NE(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function IE(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of Za)if(NE(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=Za.indexOf(i);s!==-1&&Za.splice(s,1)},promise:(V6(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if(Za.push(i),!t)throw i.promise}const LE=(r,e,t)=>IE(r,e,!1,t),kE=(r,e,t)=>void IE(r,e,!0,t),DE=r=>{if(r===void 0||r.length===0)Za.splice(0,Za.length);else{const e=Za.find(t=>NE(r,t.keys,t.equal));e&&e.remove()}};var OE={exports:{}},UE={exports:{}},FE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(te,ie){var ee=te.length;te.push(ie);e:for(;0<ee;){var Z=ee-1>>>1,re=te[Z];if(0<i(re,ie))te[Z]=ie,te[ee]=re,ee=Z;else break e}}function t(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ie=te[0],ee=te.pop();if(ee!==ie){te[0]=ee;e:for(var Z=0,re=te.length,pe=re>>>1;Z<pe;){var Ee=2*(Z+1)-1,Le=te[Ee],ke=Ee+1,je=te[ke];if(0>i(Le,ee))ke<re&&0>i(je,Le)?(te[Z]=je,te[ke]=ee,Z=ke):(te[Z]=Le,te[Ee]=ee,Z=Ee);else if(ke<re&&0>i(je,ee))te[Z]=je,te[ke]=ee,Z=ke;else break e}}return ie}function i(te,ie){var ee=te.sortIndex-ie.sortIndex;return ee!==0?ee:te.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],d=[],h=1,f=null,p=3,g=!1,y=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(te){for(var ie=t(d);ie!==null;){if(ie.callback===null)n(d);else if(ie.startTime<=te)n(d),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=t(d)}}function E(te){if(b=!1,S(te),!y)if(t(l)!==null)y=!0,ne(T);else{var ie=t(d);ie!==null&&oe(E,ie.startTime-te)}}function T(te,ie){y=!1,b&&(b=!1,x(k),k=-1),g=!0;var ee=p;try{for(S(ie),f=t(l);f!==null&&(!(f.expirationTime>ie)||te&&!F());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var re=Z(f.expirationTime<=ie);ie=r.unstable_now(),typeof re=="function"?f.callback=re:f===t(l)&&n(l),S(ie)}else n(l);f=t(l)}if(f!==null)var pe=!0;else{var Ee=t(d);Ee!==null&&oe(E,Ee.startTime-ie),pe=!1}return pe}finally{f=null,p=ee,g=!1}}var P=!1,I=null,k=-1,R=5,L=-1;function F(){return!(r.unstable_now()-L<R)}function W(){if(I!==null){var te=r.unstable_now();L=te;var ie=!0;try{ie=I(!0,te)}finally{ie?J():(P=!1,I=null)}}else P=!1}var J;if(typeof M=="function")J=function(){M(W)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=W,J=function(){Q.postMessage(null)}}else J=function(){_(W,0)};function ne(te){I=te,P||(P=!0,J())}function oe(te,ie){k=_(function(){te(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){y||g||(y=!0,ne(T))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(te){switch(p){case 1:case 2:case 3:var ie=3;break;default:ie=p}var ee=p;p=ie;try{return te()}finally{p=ee}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,ie){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ee=p;p=te;try{return ie()}finally{p=ee}},r.unstable_scheduleCallback=function(te,ie,ee){var Z=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Z+ee:Z):ee=Z,te){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ee+re,te={id:h++,callback:ie,priorityLevel:te,startTime:ee,expirationTime:re,sortIndex:-1},ee>Z?(te.sortIndex=ee,e(d,te),t(l)===null&&te===t(d)&&(b?(x(k),k=-1):b=!0,oe(E,ee-Z))):(te.sortIndex=re,e(l,te),y||g||(y=!0,ne(T))),te},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(te){var ie=p;return function(){var ee=p;p=ie;try{return te.apply(this,arguments)}finally{p=ee}}}})(FE);UE.exports=FE;var $0=UE.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G6=function(e){var t={},n=B,i=$0,s=Object.assign;function a(c){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)u+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),d=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),T=Symbol.iterator;function P(c){return c===null||typeof c!="object"?null:(c=T&&c[T]||c["@@iterator"],typeof c=="function"?c:null)}function I(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case d:return"Portal";case p:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case x:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case y:return(c.displayName||"Context")+".Consumer";case g:return(c._context.displayName||"Context")+".Provider";case b:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case M:return u=c.displayName||null,u!==null?u:I(c.type)||"Memo";case S:u=c._payload,c=c._init;try{return I(c(u))}catch{}}return null}function k(c){var u=c.type;switch(c.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=u.render,c=c.displayName||c.name||"",u.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(u);case 8:return u===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function R(c){var u=c,v=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,u.flags&4098&&(v=u.return),c=u.return;while(c)}return u.tag===3?v:null}function L(c){if(R(c)!==c)throw Error(a(188))}function F(c){var u=c.alternate;if(!u){if(u=R(c),u===null)throw Error(a(188));return u!==c?null:c}for(var v=c,w=u;;){var A=v.return;if(A===null)break;var N=A.alternate;if(N===null){if(w=A.return,w!==null){v=w;continue}break}if(A.child===N.child){for(N=A.child;N;){if(N===v)return L(A),c;if(N===w)return L(A),u;N=N.sibling}throw Error(a(188))}if(v.return!==w.return)v=A,w=N;else{for(var X=!1,se=A.child;se;){if(se===v){X=!0,v=A,w=N;break}if(se===w){X=!0,w=A,v=N;break}se=se.sibling}if(!X){for(se=N.child;se;){if(se===v){X=!0,v=N,w=A;break}if(se===w){X=!0,w=N,v=A;break}se=se.sibling}if(!X)throw Error(a(189))}}if(v.alternate!==w)throw Error(a(190))}if(v.tag!==3)throw Error(a(188));return v.stateNode.current===v?c:u}function W(c){return c=F(c),c!==null?J(c):null}function J(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var u=J(c);if(u!==null)return u;c=c.sibling}return null}function z(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var u=z(c);if(u!==null)return u}c=c.sibling}return null}var Q=Array.isArray,ne=e.getPublicInstance,oe=e.getRootHostContext,te=e.getChildHostContext,ie=e.prepareForCommit,ee=e.resetAfterCommit,Z=e.createInstance,re=e.appendInitialChild,pe=e.finalizeInitialChildren,Ee=e.prepareUpdate,Le=e.shouldSetTextContent,ke=e.createTextInstance,je=e.scheduleTimeout,Qe=e.cancelTimeout,nt=e.noTimeout,Ot=e.isPrimaryRenderer,We=e.supportsMutation,K=e.supportsPersistence,Ce=e.supportsHydration,be=e.getInstanceFromNode,Te=e.preparePortalMount,Ae=e.getCurrentEventPriority,ze=e.detachDeletedInstance,Xe=e.supportsMicrotasks,Ke=e.scheduleMicrotask,ct=e.supportsTestSelectors,_t=e.findFiberRoot,Ut=e.getBoundingRect,V=e.getTextContent,U=e.isHiddenSubtree,ce=e.matchAccessibilityRole,Oe=e.setFocusIfFocusable,Ne=e.setupIntersectionObserver,De=e.appendChild,it=e.appendChildToContainer,Ue=e.commitTextUpdate,qe=e.commitMount,xt=e.commitUpdate,At=e.insertBefore,Re=e.insertInContainerBefore,Ft=e.removeChild,$=e.removeChildFromContainer,fe=e.resetTextContent,Me=e.hideInstance,q=e.hideTextInstance,le=e.unhideInstance,Ie=e.unhideTextInstance,Ve=e.clearContainer,Ye=e.cloneInstance,Pe=e.createContainerChildSet,tt=e.appendChildToContainerChildSet,ht=e.finalizeContainerChildren,on=e.replaceContainerChildren,zt=e.cloneHiddenInstance,An=e.cloneHiddenTextInstance,fn=e.canHydrateInstance,wo=e.canHydrateTextInstance,So=e.canHydrateSuspenseInstance,Qr=e.isSuspenseInstancePending,Rr=e.isSuspenseInstanceFallback,Pr=e.registerSuspenseInstanceRetry,ni=e.getNextHydratableSibling,Nt=e.getFirstHydratableChild,Mo=e.getFirstHydratableChildWithinContainer,Wl=e.getFirstHydratableChildWithinSuspenseInstance,D=e.hydrateInstance,C=e.hydrateTextInstance,O=e.hydrateSuspenseInstance,G=e.getNextHydratableInstanceAfterSuspenseInstance,H=e.commitHydratedContainer,Y=e.commitHydratedSuspenseInstance,ue=e.clearSuspenseBoundary,he=e.clearSuspenseBoundaryFromContainer,_e=e.shouldDeleteUnhydratedTailInstances,xe=e.didNotMatchHydratedContainerTextInstance,we=e.didNotMatchHydratedTextInstance,ge;function et(c){if(ge===void 0)try{throw Error()}catch(v){var u=v.stack.trim().match(/\n( *(at )?)/);ge=u&&u[1]||""}return`
`+ge+c}var Be=!1;function He(c,u){if(!c||Be)return"";Be=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Fe){var w=Fe}Reflect.construct(c,[],u)}else{try{u.call()}catch(Fe){w=Fe}c.call(u.prototype)}else{try{throw Error()}catch(Fe){w=Fe}c()}}catch(Fe){if(Fe&&w&&typeof Fe.stack=="string"){for(var A=Fe.stack.split(`
`),N=w.stack.split(`
`),X=A.length-1,se=N.length-1;1<=X&&0<=se&&A[X]!==N[se];)se--;for(;1<=X&&0<=se;X--,se--)if(A[X]!==N[se]){if(X!==1||se!==1)do if(X--,se--,0>se||A[X]!==N[se]){var ye=`
`+A[X].replace(" at new "," at ");return c.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",c.displayName)),ye}while(1<=X&&0<=se);break}}}finally{Be=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?et(c):""}var ut=Object.prototype.hasOwnProperty,mt=[],ft=-1;function $e(c){return{current:c}}function yt(c){0>ft||(c.current=mt[ft],mt[ft]=null,ft--)}function at(c,u){ft++,mt[ft]=c.current,c.current=u}var St={},Kt=$e(St),bt=$e(!1),$t=St;function Vt(c,u){var v=c.type.contextTypes;if(!v)return St;var w=c.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===u)return w.__reactInternalMemoizedMaskedChildContext;var A={},N;for(N in v)A[N]=u[N];return w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=u,c.__reactInternalMemoizedMaskedChildContext=A),A}function tn(c){return c=c.childContextTypes,c!=null}function Cn(){yt(bt),yt(Kt)}function wt(c,u,v){if(Kt.current!==St)throw Error(a(168));at(Kt,u),at(bt,v)}function xn(c,u,v){var w=c.stateNode;if(u=u.childContextTypes,typeof w.getChildContext!="function")return v;w=w.getChildContext();for(var A in w)if(!(A in u))throw Error(a(108,k(c)||"Unknown",A));return s({},v,w)}function Yt(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||St,$t=Kt.current,at(Kt,c),at(bt,bt.current),!0}function jt(c,u,v){var w=c.stateNode;if(!w)throw Error(a(169));v?(c=xn(c,u,$t),w.__reactInternalMemoizedMergedChildContext=c,yt(bt),yt(Kt),at(Kt,c)):yt(bt),at(bt,v)}var pn=Math.clz32?Math.clz32:Nr,es=Math.log,gi=Math.LN2;function Nr(c){return c>>>=0,c===0?32:31-(es(c)/gi|0)|0}var Hu=64,Vu=4194304;function Xl(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Gu(c,u){var v=c.pendingLanes;if(v===0)return 0;var w=0,A=c.suspendedLanes,N=c.pingedLanes,X=v&268435455;if(X!==0){var se=X&~A;se!==0?w=Xl(se):(N&=X,N!==0&&(w=Xl(N)))}else X=v&~A,X!==0?w=Xl(X):N!==0&&(w=Xl(N));if(w===0)return 0;if(u!==0&&u!==w&&!(u&A)&&(A=w&-w,N=u&-u,A>=N||A===16&&(N&4194240)!==0))return u;if(w&4&&(w|=v&16),u=c.entangledLanes,u!==0)for(c=c.entanglements,u&=w;0<u;)v=31-pn(u),A=1<<v,w|=c[v],u&=~A;return w}function gT(c,u){switch(c){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vT(c,u){for(var v=c.suspendedLanes,w=c.pingedLanes,A=c.expirationTimes,N=c.pendingLanes;0<N;){var X=31-pn(N),se=1<<X,ye=A[X];ye===-1?(!(se&v)||se&w)&&(A[X]=gT(se,u)):ye<=u&&(c.expiredLanes|=se),N&=~se}}function np(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ip(c){for(var u=[],v=0;31>v;v++)u.push(c);return u}function ql(c,u,v){c.pendingLanes|=u,u!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,u=31-pn(u),c[u]=v}function xT(c,u){var v=c.pendingLanes&~u;c.pendingLanes=u,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=u,c.mutableReadLanes&=u,c.entangledLanes&=u,u=c.entanglements;var w=c.eventTimes;for(c=c.expirationTimes;0<v;){var A=31-pn(v),N=1<<A;u[A]=0,w[A]=-1,c[A]=-1,v&=~N}}function rp(c,u){var v=c.entangledLanes|=u;for(c=c.entanglements;v;){var w=31-pn(v),A=1<<w;A&u|c[w]&u&&(c[w]|=u),v&=~A}}var Gt=0;function Ox(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var sp=i.unstable_scheduleCallback,Ux=i.unstable_cancelCallback,yT=i.unstable_shouldYield,_T=i.unstable_requestPaint,Xn=i.unstable_now,ap=i.unstable_ImmediatePriority,bT=i.unstable_UserBlockingPriority,op=i.unstable_NormalPriority,wT=i.unstable_IdlePriority,Wu=null,Ir=null;function ST(c){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(Wu,c,void 0,(c.current.flags&128)===128)}catch{}}function MT(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var Lr=typeof Object.is=="function"?Object.is:MT,ts=null,Xu=!1,lp=!1;function Fx(c){ts===null?ts=[c]:ts.push(c)}function ET(c){Xu=!0,Fx(c)}function kr(){if(!lp&&ts!==null){lp=!0;var c=0,u=Gt;try{var v=ts;for(Gt=1;c<v.length;c++){var w=v[c];do w=w(!0);while(w!==null)}ts=null,Xu=!1}catch(A){throw ts!==null&&(ts=ts.slice(c+1)),sp(ap,kr),A}finally{Gt=u,lp=!1}}return null}var TT=o.ReactCurrentBatchConfig;function qu(c,u){if(Lr(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var v=Object.keys(c),w=Object.keys(u);if(v.length!==w.length)return!1;for(w=0;w<v.length;w++){var A=v[w];if(!ut.call(u,A)||!Lr(c[A],u[A]))return!1}return!0}function AT(c){switch(c.tag){case 5:return et(c.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return c=He(c.type,!1),c;case 11:return c=He(c.type.render,!1),c;case 1:return c=He(c.type,!0),c;default:return""}}function gr(c,u){if(c&&c.defaultProps){u=s({},u),c=c.defaultProps;for(var v in c)u[v]===void 0&&(u[v]=c[v]);return u}return u}var Yu=$e(null),Zu=null,Eo=null,cp=null;function up(){cp=Eo=Zu=null}function zx(c,u,v){Ot?(at(Yu,u._currentValue),u._currentValue=v):(at(Yu,u._currentValue2),u._currentValue2=v)}function dp(c){var u=Yu.current;yt(Yu),Ot?c._currentValue=u:c._currentValue2=u}function hp(c,u,v){for(;c!==null;){var w=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),c===v)break;c=c.return}}function To(c,u){Zu=c,cp=Eo=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&u&&(zi=!0),c.firstContext=null)}function tr(c){var u=Ot?c._currentValue:c._currentValue2;if(cp!==c)if(c={context:c,memoizedValue:u,next:null},Eo===null){if(Zu===null)throw Error(a(308));Eo=c,Zu.dependencies={lanes:0,firstContext:c}}else Eo=Eo.next=c;return u}var Dr=null,Ps=!1;function fp(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jx(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function ns(c,u){return{eventTime:c,lane:u,tag:0,payload:null,callback:null,next:null}}function Ns(c,u){var v=c.updateQueue;v!==null&&(v=v.shared,kn!==null&&c.mode&1&&!(kt&2)?(c=v.interleaved,c===null?(u.next=u,Dr===null?Dr=[v]:Dr.push(v)):(u.next=c.next,c.next=u),v.interleaved=u):(c=v.pending,c===null?u.next=u:(u.next=c.next,c.next=u),v.pending=u))}function Ku(c,u,v){if(u=u.updateQueue,u!==null&&(u=u.shared,(v&4194240)!==0)){var w=u.lanes;w&=c.pendingLanes,v|=w,u.lanes=v,rp(c,v)}}function Bx(c,u){var v=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,v===w)){var A=null,N=null;if(v=v.firstBaseUpdate,v!==null){do{var X={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};N===null?A=N=X:N=N.next=X,v=v.next}while(v!==null);N===null?A=N=u:N=N.next=u}else A=N=u;v={baseState:w.baseState,firstBaseUpdate:A,lastBaseUpdate:N,shared:w.shared,effects:w.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=u:c.next=u,v.lastBaseUpdate=u}function $u(c,u,v,w){var A=c.updateQueue;Ps=!1;var N=A.firstBaseUpdate,X=A.lastBaseUpdate,se=A.shared.pending;if(se!==null){A.shared.pending=null;var ye=se,Fe=ye.next;ye.next=null,X===null?N=Fe:X.next=Fe,X=ye;var st=c.alternate;st!==null&&(st=st.updateQueue,se=st.lastBaseUpdate,se!==X&&(se===null?st.firstBaseUpdate=Fe:se.next=Fe,st.lastBaseUpdate=ye))}if(N!==null){var Mt=A.baseState;X=0,st=Fe=ye=null,se=N;do{var gt=se.lane,nn=se.eventTime;if((w&gt)===gt){st!==null&&(st=st.next={eventTime:nn,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var dt=c,ai=se;switch(gt=u,nn=v,ai.tag){case 1:if(dt=ai.payload,typeof dt=="function"){Mt=dt.call(nn,Mt,gt);break e}Mt=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ai.payload,gt=typeof dt=="function"?dt.call(nn,Mt,gt):dt,gt==null)break e;Mt=s({},Mt,gt);break e;case 2:Ps=!0}}se.callback!==null&&se.lane!==0&&(c.flags|=64,gt=A.effects,gt===null?A.effects=[se]:gt.push(se))}else nn={eventTime:nn,lane:gt,tag:se.tag,payload:se.payload,callback:se.callback,next:null},st===null?(Fe=st=nn,ye=Mt):st=st.next=nn,X|=gt;if(se=se.next,se===null){if(se=A.shared.pending,se===null)break;gt=se,se=gt.next,gt.next=null,A.lastBaseUpdate=gt,A.shared.pending=null}}while(!0);if(st===null&&(ye=Mt),A.baseState=ye,A.firstBaseUpdate=Fe,A.lastBaseUpdate=st,u=A.shared.interleaved,u!==null){A=u;do X|=A.lane,A=A.next;while(A!==u)}else N===null&&(A.shared.lanes=0);Do|=X,c.lanes=X,c.memoizedState=Mt}}function Hx(c,u,v){if(c=u.effects,u.effects=null,c!==null)for(u=0;u<c.length;u++){var w=c[u],A=w.callback;if(A!==null){if(w.callback=null,w=v,typeof A!="function")throw Error(a(191,A));A.call(w)}}}var Vx=new n.Component().refs;function pp(c,u,v,w){u=c.memoizedState,v=v(w,u),v=v==null?u:s({},u,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var Ju={isMounted:function(c){return(c=c._reactInternals)?R(c)===c:!1},enqueueSetState:function(c,u,v){c=c._reactInternals;var w=xi(),A=ks(c),N=ns(w,A);N.payload=u,v!=null&&(N.callback=v),Ns(c,N),u=ar(c,A,w),u!==null&&Ku(u,c,A)},enqueueReplaceState:function(c,u,v){c=c._reactInternals;var w=xi(),A=ks(c),N=ns(w,A);N.tag=1,N.payload=u,v!=null&&(N.callback=v),Ns(c,N),u=ar(c,A,w),u!==null&&Ku(u,c,A)},enqueueForceUpdate:function(c,u){c=c._reactInternals;var v=xi(),w=ks(c),A=ns(v,w);A.tag=2,u!=null&&(A.callback=u),Ns(c,A),u=ar(c,w,v),u!==null&&Ku(u,c,w)}};function Gx(c,u,v,w,A,N,X){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,N,X):u.prototype&&u.prototype.isPureReactComponent?!qu(v,w)||!qu(A,N):!0}function Wx(c,u,v){var w=!1,A=St,N=u.contextType;return typeof N=="object"&&N!==null?N=tr(N):(A=tn(u)?$t:Kt.current,w=u.contextTypes,N=(w=w!=null)?Vt(c,A):St),u=new u(v,N),c.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ju,c.stateNode=u,u._reactInternals=c,w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=A,c.__reactInternalMemoizedMaskedChildContext=N),u}function Xx(c,u,v,w){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(v,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(v,w),u.state!==c&&Ju.enqueueReplaceState(u,u.state,null)}function mp(c,u,v,w){var A=c.stateNode;A.props=v,A.state=c.memoizedState,A.refs=Vx,fp(c);var N=u.contextType;typeof N=="object"&&N!==null?A.context=tr(N):(N=tn(u)?$t:Kt.current,A.context=Vt(c,N)),A.state=c.memoizedState,N=u.getDerivedStateFromProps,typeof N=="function"&&(pp(c,u,N,v),A.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(u=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),u!==A.state&&Ju.enqueueReplaceState(A,A.state,null),$u(c,v,A,w),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308)}var Ao=[],Co=0,Qu=null,ed=0,nr=[],ir=0,va=null,is=1,rs="";function xa(c,u){Ao[Co++]=ed,Ao[Co++]=Qu,Qu=c,ed=u}function qx(c,u,v){nr[ir++]=is,nr[ir++]=rs,nr[ir++]=va,va=c;var w=is;c=rs;var A=32-pn(w)-1;w&=~(1<<A),v+=1;var N=32-pn(u)+A;if(30<N){var X=A-A%5;N=(w&(1<<X)-1).toString(32),w>>=X,A-=X,is=1<<32-pn(u)+A|v<<A|w,rs=N+c}else is=1<<N|v<<A|w,rs=c}function gp(c){c.return!==null&&(xa(c,1),qx(c,1,0))}function vp(c){for(;c===Qu;)Qu=Ao[--Co],Ao[Co]=null,ed=Ao[--Co],Ao[Co]=null;for(;c===va;)va=nr[--ir],nr[ir]=null,rs=nr[--ir],nr[ir]=null,is=nr[--ir],nr[ir]=null}var Ui=null,Fi=null,mn=!1,Yl=!1,vr=null;function Yx(c,u){var v=or(5,null,null,0);v.elementType="DELETED",v.stateNode=u,v.return=c,u=c.deletions,u===null?(c.deletions=[v],c.flags|=16):u.push(v)}function Zx(c,u){switch(c.tag){case 5:return u=fn(u,c.type,c.pendingProps),u!==null?(c.stateNode=u,Ui=c,Fi=Nt(u),!0):!1;case 6:return u=wo(u,c.pendingProps),u!==null?(c.stateNode=u,Ui=c,Fi=null,!0):!1;case 13:if(u=So(u),u!==null){var v=va!==null?{id:is,overflow:rs}:null;return c.memoizedState={dehydrated:u,treeContext:v,retryLane:1073741824},v=or(18,null,null,0),v.stateNode=u,v.return=c,c.child=v,Ui=c,Fi=null,!0}return!1;default:return!1}}function xp(c){return(c.mode&1)!==0&&(c.flags&128)===0}function yp(c){if(mn){var u=Fi;if(u){var v=u;if(!Zx(c,u)){if(xp(c))throw Error(a(418));u=ni(v);var w=Ui;u&&Zx(c,u)?Yx(w,v):(c.flags=c.flags&-4097|2,mn=!1,Ui=c)}}else{if(xp(c))throw Error(a(418));c.flags=c.flags&-4097|2,mn=!1,Ui=c}}}function Kx(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ui=c}function Zl(c){if(!Ce||c!==Ui)return!1;if(!mn)return Kx(c),mn=!0,!1;if(c.tag!==3&&(c.tag!==5||_e(c.type)&&!Le(c.type,c.memoizedProps))){var u=Fi;if(u){if(xp(c)){for(c=Fi;c;)c=ni(c);throw Error(a(418))}for(;u;)Yx(c,u),u=ni(u)}}if(Kx(c),c.tag===13){if(!Ce)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Fi=G(c)}else Fi=Ui?ni(c.stateNode):null;return!0}function Ro(){Ce&&(Fi=Ui=null,Yl=mn=!1)}function _p(c){vr===null?vr=[c]:vr.push(c)}function Kl(c,u,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(a(309));var w=v.stateNode}if(!w)throw Error(a(147,c));var A=w,N=""+c;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===N?u.ref:(u=function(X){var se=A.refs;se===Vx&&(se=A.refs={}),X===null?delete se[N]:se[N]=X},u._stringRef=N,u)}if(typeof c!="string")throw Error(a(284));if(!v._owner)throw Error(a(290,c))}return c}function td(c,u){throw c=Object.prototype.toString.call(u),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c))}function $x(c){var u=c._init;return u(c._payload)}function Jx(c){function u(de,ae){if(c){var me=de.deletions;me===null?(de.deletions=[ae],de.flags|=16):me.push(ae)}}function v(de,ae){if(!c)return null;for(;ae!==null;)u(de,ae),ae=ae.sibling;return null}function w(de,ae){for(de=new Map;ae!==null;)ae.key!==null?de.set(ae.key,ae):de.set(ae.index,ae),ae=ae.sibling;return de}function A(de,ae){return de=Os(de,ae),de.index=0,de.sibling=null,de}function N(de,ae,me){return de.index=me,c?(me=de.alternate,me!==null?(me=me.index,me<ae?(de.flags|=2,ae):me):(de.flags|=2,ae)):(de.flags|=1048576,ae)}function X(de){return c&&de.alternate===null&&(de.flags|=2),de}function se(de,ae,me,Je){return ae===null||ae.tag!==6?(ae=im(me,de.mode,Je),ae.return=de,ae):(ae=A(ae,me),ae.return=de,ae)}function ye(de,ae,me,Je){var lt=me.type;return lt===h?st(de,ae,me.props.children,Je,me.key):ae!==null&&(ae.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===S&&$x(lt)===ae.type)?(Je=A(ae,me.props),Je.ref=Kl(de,ae,me),Je.return=de,Je):(Je=Id(me.type,me.key,me.props,null,de.mode,Je),Je.ref=Kl(de,ae,me),Je.return=de,Je)}function Fe(de,ae,me,Je){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==me.containerInfo||ae.stateNode.implementation!==me.implementation?(ae=rm(me,de.mode,Je),ae.return=de,ae):(ae=A(ae,me.children||[]),ae.return=de,ae)}function st(de,ae,me,Je,lt){return ae===null||ae.tag!==7?(ae=Ea(me,de.mode,Je,lt),ae.return=de,ae):(ae=A(ae,me),ae.return=de,ae)}function Mt(de,ae,me){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ae=im(""+ae,de.mode,me),ae.return=de,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case l:return me=Id(ae.type,ae.key,ae.props,null,de.mode,me),me.ref=Kl(de,null,ae),me.return=de,me;case d:return ae=rm(ae,de.mode,me),ae.return=de,ae;case S:var Je=ae._init;return Mt(de,Je(ae._payload),me)}if(Q(ae)||P(ae))return ae=Ea(ae,de.mode,me,null),ae.return=de,ae;td(de,ae)}return null}function gt(de,ae,me,Je){var lt=ae!==null?ae.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return lt!==null?null:se(de,ae,""+me,Je);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case l:return me.key===lt?ye(de,ae,me,Je):null;case d:return me.key===lt?Fe(de,ae,me,Je):null;case S:return lt=me._init,gt(de,ae,lt(me._payload),Je)}if(Q(me)||P(me))return lt!==null?null:st(de,ae,me,Je,null);td(de,me)}return null}function nn(de,ae,me,Je,lt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return de=de.get(me)||null,se(ae,de,""+Je,lt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case l:return de=de.get(Je.key===null?me:Je.key)||null,ye(ae,de,Je,lt);case d:return de=de.get(Je.key===null?me:Je.key)||null,Fe(ae,de,Je,lt);case S:var It=Je._init;return nn(de,ae,me,It(Je._payload),lt)}if(Q(Je)||P(Je))return de=de.get(me)||null,st(ae,de,Je,lt,null);td(ae,Je)}return null}function dt(de,ae,me,Je){for(var lt=null,It=null,Et=ae,Wt=ae=0,Yn=null;Et!==null&&Wt<me.length;Wt++){Et.index>Wt?(Yn=Et,Et=null):Yn=Et.sibling;var Xt=gt(de,Et,me[Wt],Je);if(Xt===null){Et===null&&(Et=Yn);break}c&&Et&&Xt.alternate===null&&u(de,Et),ae=N(Xt,ae,Wt),It===null?lt=Xt:It.sibling=Xt,It=Xt,Et=Yn}if(Wt===me.length)return v(de,Et),mn&&xa(de,Wt),lt;if(Et===null){for(;Wt<me.length;Wt++)Et=Mt(de,me[Wt],Je),Et!==null&&(ae=N(Et,ae,Wt),It===null?lt=Et:It.sibling=Et,It=Et);return mn&&xa(de,Wt),lt}for(Et=w(de,Et);Wt<me.length;Wt++)Yn=nn(Et,de,Wt,me[Wt],Je),Yn!==null&&(c&&Yn.alternate!==null&&Et.delete(Yn.key===null?Wt:Yn.key),ae=N(Yn,ae,Wt),It===null?lt=Yn:It.sibling=Yn,It=Yn);return c&&Et.forEach(function(Us){return u(de,Us)}),mn&&xa(de,Wt),lt}function ai(de,ae,me,Je){var lt=P(me);if(typeof lt!="function")throw Error(a(150));if(me=lt.call(me),me==null)throw Error(a(151));for(var It=lt=null,Et=ae,Wt=ae=0,Yn=null,Xt=me.next();Et!==null&&!Xt.done;Wt++,Xt=me.next()){Et.index>Wt?(Yn=Et,Et=null):Yn=Et.sibling;var Us=gt(de,Et,Xt.value,Je);if(Us===null){Et===null&&(Et=Yn);break}c&&Et&&Us.alternate===null&&u(de,Et),ae=N(Us,ae,Wt),It===null?lt=Us:It.sibling=Us,It=Us,Et=Yn}if(Xt.done)return v(de,Et),mn&&xa(de,Wt),lt;if(Et===null){for(;!Xt.done;Wt++,Xt=me.next())Xt=Mt(de,Xt.value,Je),Xt!==null&&(ae=N(Xt,ae,Wt),It===null?lt=Xt:It.sibling=Xt,It=Xt);return mn&&xa(de,Wt),lt}for(Et=w(de,Et);!Xt.done;Wt++,Xt=me.next())Xt=nn(Et,de,Wt,Xt.value,Je),Xt!==null&&(c&&Xt.alternate!==null&&Et.delete(Xt.key===null?Wt:Xt.key),ae=N(Xt,ae,Wt),It===null?lt=Xt:It.sibling=Xt,It=Xt);return c&&Et.forEach(function(iA){return u(de,iA)}),mn&&xa(de,Wt),lt}function lr(de,ae,me,Je){if(typeof me=="object"&&me!==null&&me.type===h&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case l:e:{for(var lt=me.key,It=ae;It!==null;){if(It.key===lt){if(lt=me.type,lt===h){if(It.tag===7){v(de,It.sibling),ae=A(It,me.props.children),ae.return=de,de=ae;break e}}else if(It.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===S&&$x(lt)===It.type){v(de,It.sibling),ae=A(It,me.props),ae.ref=Kl(de,It,me),ae.return=de,de=ae;break e}v(de,It);break}else u(de,It);It=It.sibling}me.type===h?(ae=Ea(me.props.children,de.mode,Je,me.key),ae.return=de,de=ae):(Je=Id(me.type,me.key,me.props,null,de.mode,Je),Je.ref=Kl(de,ae,me),Je.return=de,de=Je)}return X(de);case d:e:{for(It=me.key;ae!==null;){if(ae.key===It)if(ae.tag===4&&ae.stateNode.containerInfo===me.containerInfo&&ae.stateNode.implementation===me.implementation){v(de,ae.sibling),ae=A(ae,me.children||[]),ae.return=de,de=ae;break e}else{v(de,ae);break}else u(de,ae);ae=ae.sibling}ae=rm(me,de.mode,Je),ae.return=de,de=ae}return X(de);case S:return It=me._init,lr(de,ae,It(me._payload),Je)}if(Q(me))return dt(de,ae,me,Je);if(P(me))return ai(de,ae,me,Je);td(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,ae!==null&&ae.tag===6?(v(de,ae.sibling),ae=A(ae,me),ae.return=de,de=ae):(v(de,ae),ae=im(me,de.mode,Je),ae.return=de,de=ae),X(de)):v(de,ae)}return lr}var Po=Jx(!0),Qx=Jx(!1),$l={},rr=$e($l),Jl=$e($l),No=$e($l);function Or(c){if(c===$l)throw Error(a(174));return c}function bp(c,u){at(No,u),at(Jl,c),at(rr,$l),c=oe(u),yt(rr),at(rr,c)}function Io(){yt(rr),yt(Jl),yt(No)}function ey(c){var u=Or(No.current),v=Or(rr.current);u=te(v,c.type,u),v!==u&&(at(Jl,c),at(rr,u))}function wp(c){Jl.current===c&&(yt(rr),yt(Jl))}var yn=$e(0);function nd(c){for(var u=c;u!==null;){if(u.tag===13){var v=u.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Qr(v)||Rr(v)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Sp=[];function Mp(){for(var c=0;c<Sp.length;c++){var u=Sp[c];Ot?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}Sp.length=0}var id=o.ReactCurrentDispatcher,sr=o.ReactCurrentBatchConfig,Lo=0,Sn=null,ii=null,qn=null,rd=!1,Ql=!1,ec=0,CT=0;function ri(){throw Error(a(321))}function Ep(c,u){if(u===null)return!1;for(var v=0;v<u.length&&v<c.length;v++)if(!Lr(c[v],u[v]))return!1;return!0}function Tp(c,u,v,w,A,N){if(Lo=N,Sn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,id.current=c===null||c.memoizedState===null?IT:LT,c=v(w,A),Ql){N=0;do{if(Ql=!1,ec=0,25<=N)throw Error(a(301));N+=1,qn=ii=null,u.updateQueue=null,id.current=kT,c=v(w,A)}while(Ql)}if(id.current=cd,u=ii!==null&&ii.next!==null,Lo=0,qn=ii=Sn=null,rd=!1,u)throw Error(a(300));return c}function Ap(){var c=ec!==0;return ec=0,c}function ss(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?Sn.memoizedState=qn=c:qn=qn.next=c,qn}function Ur(){if(ii===null){var c=Sn.alternate;c=c!==null?c.memoizedState:null}else c=ii.next;var u=qn===null?Sn.memoizedState:qn.next;if(u!==null)qn=u,ii=c;else{if(c===null)throw Error(a(310));ii=c,c={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},qn===null?Sn.memoizedState=qn=c:qn=qn.next=c}return qn}function ya(c,u){return typeof u=="function"?u(c):u}function sd(c){var u=Ur(),v=u.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=c;var w=ii,A=w.baseQueue,N=v.pending;if(N!==null){if(A!==null){var X=A.next;A.next=N.next,N.next=X}w.baseQueue=A=N,v.pending=null}if(A!==null){N=A.next,w=w.baseState;var se=X=null,ye=null,Fe=N;do{var st=Fe.lane;if((Lo&st)===st)ye!==null&&(ye=ye.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),w=Fe.hasEagerState?Fe.eagerState:c(w,Fe.action);else{var Mt={lane:st,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};ye===null?(se=ye=Mt,X=w):ye=ye.next=Mt,Sn.lanes|=st,Do|=st}Fe=Fe.next}while(Fe!==null&&Fe!==N);ye===null?X=w:ye.next=se,Lr(w,u.memoizedState)||(zi=!0),u.memoizedState=w,u.baseState=X,u.baseQueue=ye,v.lastRenderedState=w}if(c=v.interleaved,c!==null){A=c;do N=A.lane,Sn.lanes|=N,Do|=N,A=A.next;while(A!==c)}else A===null&&(v.lanes=0);return[u.memoizedState,v.dispatch]}function ad(c){var u=Ur(),v=u.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=c;var w=v.dispatch,A=v.pending,N=u.memoizedState;if(A!==null){v.pending=null;var X=A=A.next;do N=c(N,X.action),X=X.next;while(X!==A);Lr(N,u.memoizedState)||(zi=!0),u.memoizedState=N,u.baseQueue===null&&(u.baseState=N),v.lastRenderedState=N}return[N,w]}function ty(){}function ny(c,u){var v=Sn,w=Ur(),A=u(),N=!Lr(w.memoizedState,A);if(N&&(w.memoizedState=A,zi=!0),w=w.queue,nc(sy.bind(null,v,w,c),[c]),w.getSnapshot!==u||N||qn!==null&&qn.memoizedState.tag&1){if(v.flags|=2048,tc(9,ry.bind(null,v,w,A,u),void 0,null),kn===null)throw Error(a(349));Lo&30||iy(v,u,A)}return A}function iy(c,u,v){c.flags|=16384,c={getSnapshot:u,value:v},u=Sn.updateQueue,u===null?(u={lastEffect:null,stores:null},Sn.updateQueue=u,u.stores=[c]):(v=u.stores,v===null?u.stores=[c]:v.push(c))}function ry(c,u,v,w){u.value=v,u.getSnapshot=w,ay(u)&&ar(c,1,-1)}function sy(c,u,v){return v(function(){ay(u)&&ar(c,1,-1)})}function ay(c){var u=c.getSnapshot;c=c.value;try{var v=u();return!Lr(c,v)}catch{return!0}}function Cp(c){var u=ss();return typeof c=="function"&&(c=c()),u.memoizedState=u.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:c},u.queue=c,c=c.dispatch=NT.bind(null,Sn,c),[u.memoizedState,c]}function tc(c,u,v,w){return c={tag:c,create:u,destroy:v,deps:w,next:null},u=Sn.updateQueue,u===null?(u={lastEffect:null,stores:null},Sn.updateQueue=u,u.lastEffect=c.next=c):(v=u.lastEffect,v===null?u.lastEffect=c.next=c:(w=v.next,v.next=c,c.next=w,u.lastEffect=c)),c}function oy(){return Ur().memoizedState}function od(c,u,v,w){var A=ss();Sn.flags|=c,A.memoizedState=tc(1|u,v,void 0,w===void 0?null:w)}function ld(c,u,v,w){var A=Ur();w=w===void 0?null:w;var N=void 0;if(ii!==null){var X=ii.memoizedState;if(N=X.destroy,w!==null&&Ep(w,X.deps)){A.memoizedState=tc(u,v,N,w);return}}Sn.flags|=c,A.memoizedState=tc(1|u,v,N,w)}function Rp(c,u){return od(8390656,8,c,u)}function nc(c,u){return ld(2048,8,c,u)}function ly(c,u){return ld(4,2,c,u)}function cy(c,u){return ld(4,4,c,u)}function uy(c,u){if(typeof u=="function")return c=c(),u(c),function(){u(null)};if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function dy(c,u,v){return v=v!=null?v.concat([c]):null,ld(4,4,uy.bind(null,u,c),v)}function Pp(){}function hy(c,u){var v=Ur();u=u===void 0?null:u;var w=v.memoizedState;return w!==null&&u!==null&&Ep(u,w[1])?w[0]:(v.memoizedState=[c,u],c)}function fy(c,u){var v=Ur();u=u===void 0?null:u;var w=v.memoizedState;return w!==null&&u!==null&&Ep(u,w[1])?w[0]:(c=c(),v.memoizedState=[c,u],c)}function RT(c,u){var v=Gt;Gt=v!==0&&4>v?v:4,c(!0);var w=sr.transition;sr.transition={};try{c(!1),u()}finally{Gt=v,sr.transition=w}}function py(){return Ur().memoizedState}function PT(c,u,v){var w=ks(c);v={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null},my(c)?gy(u,v):(vy(c,u,v),v=xi(),c=ar(c,w,v),c!==null&&xy(c,u,w))}function NT(c,u,v){var w=ks(c),A={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null};if(my(c))gy(u,A);else{vy(c,u,A);var N=c.alternate;if(c.lanes===0&&(N===null||N.lanes===0)&&(N=u.lastRenderedReducer,N!==null))try{var X=u.lastRenderedState,se=N(X,v);if(A.hasEagerState=!0,A.eagerState=se,Lr(se,X))return}catch{}finally{}v=xi(),c=ar(c,w,v),c!==null&&xy(c,u,w)}}function my(c){var u=c.alternate;return c===Sn||u!==null&&u===Sn}function gy(c,u){Ql=rd=!0;var v=c.pending;v===null?u.next=u:(u.next=v.next,v.next=u),c.pending=u}function vy(c,u,v){kn!==null&&c.mode&1&&!(kt&2)?(c=u.interleaved,c===null?(v.next=v,Dr===null?Dr=[u]:Dr.push(u)):(v.next=c.next,c.next=v),u.interleaved=v):(c=u.pending,c===null?v.next=v:(v.next=c.next,c.next=v),u.pending=v)}function xy(c,u,v){if(v&4194240){var w=u.lanes;w&=c.pendingLanes,v|=w,u.lanes=v,rp(c,v)}}var cd={readContext:tr,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},IT={readContext:tr,useCallback:function(c,u){return ss().memoizedState=[c,u===void 0?null:u],c},useContext:tr,useEffect:Rp,useImperativeHandle:function(c,u,v){return v=v!=null?v.concat([c]):null,od(4194308,4,uy.bind(null,u,c),v)},useLayoutEffect:function(c,u){return od(4194308,4,c,u)},useInsertionEffect:function(c,u){return od(4,2,c,u)},useMemo:function(c,u){var v=ss();return u=u===void 0?null:u,c=c(),v.memoizedState=[c,u],c},useReducer:function(c,u,v){var w=ss();return u=v!==void 0?v(u):u,w.memoizedState=w.baseState=u,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:u},w.queue=c,c=c.dispatch=PT.bind(null,Sn,c),[w.memoizedState,c]},useRef:function(c){var u=ss();return c={current:c},u.memoizedState=c},useState:Cp,useDebugValue:Pp,useDeferredValue:function(c){var u=Cp(c),v=u[0],w=u[1];return Rp(function(){var A=sr.transition;sr.transition={};try{w(c)}finally{sr.transition=A}},[c]),v},useTransition:function(){var c=Cp(!1),u=c[0];return c=RT.bind(null,c[1]),ss().memoizedState=c,[u,c]},useMutableSource:function(){},useSyncExternalStore:function(c,u,v){var w=Sn,A=ss();if(mn){if(v===void 0)throw Error(a(407));v=v()}else{if(v=u(),kn===null)throw Error(a(349));Lo&30||iy(w,u,v)}A.memoizedState=v;var N={value:v,getSnapshot:u};return A.queue=N,Rp(sy.bind(null,w,N,c),[c]),w.flags|=2048,tc(9,ry.bind(null,w,N,v,u),void 0,null),v},useId:function(){var c=ss(),u=kn.identifierPrefix;if(mn){var v=rs,w=is;v=(w&~(1<<32-pn(w)-1)).toString(32)+v,u=":"+u+"R"+v,v=ec++,0<v&&(u+="H"+v.toString(32)),u+=":"}else v=CT++,u=":"+u+"r"+v.toString(32)+":";return c.memoizedState=u},unstable_isNewReconciler:!1},LT={readContext:tr,useCallback:hy,useContext:tr,useEffect:nc,useImperativeHandle:dy,useInsertionEffect:ly,useLayoutEffect:cy,useMemo:fy,useReducer:sd,useRef:oy,useState:function(){return sd(ya)},useDebugValue:Pp,useDeferredValue:function(c){var u=sd(ya),v=u[0],w=u[1];return nc(function(){var A=sr.transition;sr.transition={};try{w(c)}finally{sr.transition=A}},[c]),v},useTransition:function(){var c=sd(ya)[0],u=Ur().memoizedState;return[c,u]},useMutableSource:ty,useSyncExternalStore:ny,useId:py,unstable_isNewReconciler:!1},kT={readContext:tr,useCallback:hy,useContext:tr,useEffect:nc,useImperativeHandle:dy,useInsertionEffect:ly,useLayoutEffect:cy,useMemo:fy,useReducer:ad,useRef:oy,useState:function(){return ad(ya)},useDebugValue:Pp,useDeferredValue:function(c){var u=ad(ya),v=u[0],w=u[1];return nc(function(){var A=sr.transition;sr.transition={};try{w(c)}finally{sr.transition=A}},[c]),v},useTransition:function(){var c=ad(ya)[0],u=Ur().memoizedState;return[c,u]},useMutableSource:ty,useSyncExternalStore:ny,useId:py,unstable_isNewReconciler:!1};function Np(c,u){try{var v="",w=u;do v+=AT(w),w=w.return;while(w);var A=v}catch(N){A=`
Error generating stack: `+N.message+`
`+N.stack}return{value:c,source:u,stack:A}}function Ip(c,u){try{console.error(u.value)}catch(v){setTimeout(function(){throw v})}}var DT=typeof WeakMap=="function"?WeakMap:Map;function yy(c,u,v){v=ns(-1,v),v.tag=3,v.payload={element:null};var w=u.value;return v.callback=function(){Ed||(Ed=!0,Kp=w),Ip(c,u)},v}function _y(c,u,v){v=ns(-1,v),v.tag=3;var w=c.type.getDerivedStateFromError;if(typeof w=="function"){var A=u.value;v.payload=function(){return w(A)},v.callback=function(){Ip(c,u)}}var N=c.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(v.callback=function(){Ip(c,u),typeof w!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var X=u.stack;this.componentDidCatch(u.value,{componentStack:X!==null?X:""})}),v}function by(c,u,v){var w=c.pingCache;if(w===null){w=c.pingCache=new DT;var A=new Set;w.set(u,A)}else A=w.get(u),A===void 0&&(A=new Set,w.set(u,A));A.has(v)||(A.add(v),c=ZT.bind(null,c,u,v),u.then(c,c))}function wy(c){do{var u;if((u=c.tag===13)&&(u=c.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return c;c=c.return}while(c!==null);return null}function Sy(c,u,v,w,A){return c.mode&1?(c.flags|=65536,c.lanes=A,c):(c===u?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(u=ns(-1,1),u.tag=2,Ns(v,u))),v.lanes|=1),c)}function Fr(c){c.flags|=4}function My(c,u){if(c!==null&&c.child===u.child)return!0;if(u.flags&16)return!1;for(c=u.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var ic,rc,ud,dd;if(We)ic=function(c,u){for(var v=u.child;v!==null;){if(v.tag===5||v.tag===6)re(c,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},rc=function(){},ud=function(c,u,v,w,A){if(c=c.memoizedProps,c!==w){var N=u.stateNode,X=Or(rr.current);v=Ee(N,v,c,w,A,X),(u.updateQueue=v)&&Fr(u)}},dd=function(c,u,v,w){v!==w&&Fr(u)};else if(K){ic=function(c,u,v,w){for(var A=u.child;A!==null;){if(A.tag===5){var N=A.stateNode;v&&w&&(N=zt(N,A.type,A.memoizedProps,A)),re(c,N)}else if(A.tag===6)N=A.stateNode,v&&w&&(N=An(N,A.memoizedProps,A)),re(c,N);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)N=A.child,N!==null&&(N.return=A),ic(c,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===u)break;for(;A.sibling===null;){if(A.return===null||A.return===u)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};var Ey=function(c,u,v,w){for(var A=u.child;A!==null;){if(A.tag===5){var N=A.stateNode;v&&w&&(N=zt(N,A.type,A.memoizedProps,A)),tt(c,N)}else if(A.tag===6)N=A.stateNode,v&&w&&(N=An(N,A.memoizedProps,A)),tt(c,N);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)N=A.child,N!==null&&(N.return=A),Ey(c,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===u)break;for(;A.sibling===null;){if(A.return===null||A.return===u)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};rc=function(c,u){var v=u.stateNode;if(!My(c,u)){c=v.containerInfo;var w=Pe(c);Ey(w,u,!1,!1),v.pendingChildren=w,Fr(u),ht(c,w)}},ud=function(c,u,v,w,A){var N=c.stateNode,X=c.memoizedProps;if((c=My(c,u))&&X===w)u.stateNode=N;else{var se=u.stateNode,ye=Or(rr.current),Fe=null;X!==w&&(Fe=Ee(se,v,X,w,A,ye)),c&&Fe===null?u.stateNode=N:(N=Ye(N,Fe,v,X,w,u,c,se),pe(N,v,w,A,ye)&&Fr(u),u.stateNode=N,c?Fr(u):ic(N,u,!1,!1))}},dd=function(c,u,v,w){v!==w?(c=Or(No.current),v=Or(rr.current),u.stateNode=ke(w,c,v,u),Fr(u)):u.stateNode=c.stateNode}}else rc=function(){},ud=function(){},dd=function(){};function sc(c,u){if(!mn)switch(c.tailMode){case"hidden":u=c.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function si(c){var u=c.alternate!==null&&c.alternate.child===c.child,v=0,w=0;if(u)for(var A=c.child;A!==null;)v|=A.lanes|A.childLanes,w|=A.subtreeFlags&14680064,w|=A.flags&14680064,A.return=c,A=A.sibling;else for(A=c.child;A!==null;)v|=A.lanes|A.childLanes,w|=A.subtreeFlags,w|=A.flags,A.return=c,A=A.sibling;return c.subtreeFlags|=w,c.childLanes=v,u}function OT(c,u,v){var w=u.pendingProps;switch(vp(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(u),null;case 1:return tn(u.type)&&Cn(),si(u),null;case 3:return w=u.stateNode,Io(),yt(bt),yt(Kt),Mp(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(c===null||c.child===null)&&(Zl(u)?Fr(u):c===null||c.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,vr!==null&&(Qp(vr),vr=null))),rc(c,u),si(u),null;case 5:wp(u),v=Or(No.current);var A=u.type;if(c!==null&&u.stateNode!=null)ud(c,u,A,w,v),c.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!w){if(u.stateNode===null)throw Error(a(166));return si(u),null}if(c=Or(rr.current),Zl(u)){if(!Ce)throw Error(a(175));c=D(u.stateNode,u.type,u.memoizedProps,v,c,u,!Yl),u.updateQueue=c,c!==null&&Fr(u)}else{var N=Z(A,w,v,c,u);ic(N,u,!1,!1),u.stateNode=N,pe(N,A,w,v,c)&&Fr(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return si(u),null;case 6:if(c&&u.stateNode!=null)dd(c,u,c.memoizedProps,w);else{if(typeof w!="string"&&u.stateNode===null)throw Error(a(166));if(c=Or(No.current),v=Or(rr.current),Zl(u)){if(!Ce)throw Error(a(176));if(c=u.stateNode,w=u.memoizedProps,(v=C(c,w,u,!Yl))&&(A=Ui,A!==null))switch(N=(A.mode&1)!==0,A.tag){case 3:xe(A.stateNode.containerInfo,c,w,N);break;case 5:we(A.type,A.memoizedProps,A.stateNode,c,w,N)}v&&Fr(u)}else u.stateNode=ke(w,c,v,u)}return si(u),null;case 13:if(yt(yn),w=u.memoizedState,mn&&Fi!==null&&u.mode&1&&!(u.flags&128)){for(c=Fi;c;)c=ni(c);return Ro(),u.flags|=98560,u}if(w!==null&&w.dehydrated!==null){if(w=Zl(u),c===null){if(!w)throw Error(a(318));if(!Ce)throw Error(a(344));if(c=u.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));O(c,u)}else Ro(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;return si(u),null}return vr!==null&&(Qp(vr),vr=null),u.flags&128?(u.lanes=v,u):(w=w!==null,v=!1,c===null?Zl(u):v=c.memoizedState!==null,w&&!v&&(u.child.flags|=8192,u.mode&1&&(c===null||yn.current&1?Bn===0&&(Bn=3):tm())),u.updateQueue!==null&&(u.flags|=4),si(u),null);case 4:return Io(),rc(c,u),c===null&&Te(u.stateNode.containerInfo),si(u),null;case 10:return dp(u.type._context),si(u),null;case 17:return tn(u.type)&&Cn(),si(u),null;case 19:if(yt(yn),A=u.memoizedState,A===null)return si(u),null;if(w=(u.flags&128)!==0,N=A.rendering,N===null)if(w)sc(A,!1);else{if(Bn!==0||c!==null&&c.flags&128)for(c=u.child;c!==null;){if(N=nd(c),N!==null){for(u.flags|=128,sc(A,!1),c=N.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),u.subtreeFlags=0,c=v,w=u.child;w!==null;)v=w,A=c,v.flags&=14680066,N=v.alternate,N===null?(v.childLanes=0,v.lanes=A,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=N.childLanes,v.lanes=N.lanes,v.child=N.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=N.memoizedProps,v.memoizedState=N.memoizedState,v.updateQueue=N.updateQueue,v.type=N.type,A=N.dependencies,v.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),w=w.sibling;return at(yn,yn.current&1|2),u.child}c=c.sibling}A.tail!==null&&Xn()>Zp&&(u.flags|=128,w=!0,sc(A,!1),u.lanes=4194304)}else{if(!w)if(c=nd(N),c!==null){if(u.flags|=128,w=!0,c=c.updateQueue,c!==null&&(u.updateQueue=c,u.flags|=4),sc(A,!0),A.tail===null&&A.tailMode==="hidden"&&!N.alternate&&!mn)return si(u),null}else 2*Xn()-A.renderingStartTime>Zp&&v!==1073741824&&(u.flags|=128,w=!0,sc(A,!1),u.lanes=4194304);A.isBackwards?(N.sibling=u.child,u.child=N):(c=A.last,c!==null?c.sibling=N:u.child=N,A.last=N)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=Xn(),u.sibling=null,c=yn.current,at(yn,w?c&1|2:c&1),u):(si(u),null);case 22:case 23:return em(),w=u.memoizedState!==null,c!==null&&c.memoizedState!==null!==w&&(u.flags|=8192),w&&u.mode&1?ji&1073741824&&(si(u),We&&u.subtreeFlags&6&&(u.flags|=8192)):si(u),null;case 24:return null;case 25:return null}throw Error(a(156,u.tag))}var UT=o.ReactCurrentOwner,zi=!1;function vi(c,u,v,w){u.child=c===null?Qx(u,null,v,w):Po(u,c.child,v,w)}function Ty(c,u,v,w,A){v=v.render;var N=u.ref;return To(u,A),w=Tp(c,u,v,w,N,A),v=Ap(),c!==null&&!zi?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~A,as(c,u,A)):(mn&&v&&gp(u),u.flags|=1,vi(c,u,w,A),u.child)}function Ay(c,u,v,w,A){if(c===null){var N=v.type;return typeof N=="function"&&!nm(N)&&N.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(u.tag=15,u.type=N,Cy(c,u,N,w,A)):(c=Id(v.type,null,w,u,u.mode,A),c.ref=u.ref,c.return=u,u.child=c)}if(N=c.child,!(c.lanes&A)){var X=N.memoizedProps;if(v=v.compare,v=v!==null?v:qu,v(X,w)&&c.ref===u.ref)return as(c,u,A)}return u.flags|=1,c=Os(N,w),c.ref=u.ref,c.return=u,u.child=c}function Cy(c,u,v,w,A){if(c!==null&&qu(c.memoizedProps,w)&&c.ref===u.ref)if(zi=!1,(c.lanes&A)!==0)c.flags&131072&&(zi=!0);else return u.lanes=c.lanes,as(c,u,A);return Lp(c,u,v,w,A)}function Ry(c,u,v){var w=u.pendingProps,A=w.children,N=c!==null?c.memoizedState:null;if(w.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null},at(ko,ji),ji|=v;else if(v&1073741824)u.memoizedState={baseLanes:0,cachePool:null},w=N!==null?N.baseLanes:v,at(ko,ji),ji|=w;else return c=N!==null?N.baseLanes|v:v,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:c,cachePool:null},u.updateQueue=null,at(ko,ji),ji|=c,null;else N!==null?(w=N.baseLanes|v,u.memoizedState=null):w=v,at(ko,ji),ji|=w;return vi(c,u,A,v),u.child}function Py(c,u){var v=u.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(u.flags|=512,u.flags|=2097152)}function Lp(c,u,v,w,A){var N=tn(v)?$t:Kt.current;return N=Vt(u,N),To(u,A),v=Tp(c,u,v,w,N,A),w=Ap(),c!==null&&!zi?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~A,as(c,u,A)):(mn&&w&&gp(u),u.flags|=1,vi(c,u,v,A),u.child)}function Ny(c,u,v,w,A){if(tn(v)){var N=!0;Yt(u)}else N=!1;if(To(u,A),u.stateNode===null)c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),Wx(u,v,w),mp(u,v,w,A),w=!0;else if(c===null){var X=u.stateNode,se=u.memoizedProps;X.props=se;var ye=X.context,Fe=v.contextType;typeof Fe=="object"&&Fe!==null?Fe=tr(Fe):(Fe=tn(v)?$t:Kt.current,Fe=Vt(u,Fe));var st=v.getDerivedStateFromProps,Mt=typeof st=="function"||typeof X.getSnapshotBeforeUpdate=="function";Mt||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(se!==w||ye!==Fe)&&Xx(u,X,w,Fe),Ps=!1;var gt=u.memoizedState;X.state=gt,$u(u,w,X,A),ye=u.memoizedState,se!==w||gt!==ye||bt.current||Ps?(typeof st=="function"&&(pp(u,v,st,w),ye=u.memoizedState),(se=Ps||Gx(u,v,se,w,gt,ye,Fe))?(Mt||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(u.flags|=4194308)):(typeof X.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=ye),X.props=w,X.state=ye,X.context=Fe,w=se):(typeof X.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{X=u.stateNode,jx(c,u),se=u.memoizedProps,Fe=u.type===u.elementType?se:gr(u.type,se),X.props=Fe,Mt=u.pendingProps,gt=X.context,ye=v.contextType,typeof ye=="object"&&ye!==null?ye=tr(ye):(ye=tn(v)?$t:Kt.current,ye=Vt(u,ye));var nn=v.getDerivedStateFromProps;(st=typeof nn=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(se!==Mt||gt!==ye)&&Xx(u,X,w,ye),Ps=!1,gt=u.memoizedState,X.state=gt,$u(u,w,X,A);var dt=u.memoizedState;se!==Mt||gt!==dt||bt.current||Ps?(typeof nn=="function"&&(pp(u,v,nn,w),dt=u.memoizedState),(Fe=Ps||Gx(u,v,Fe,w,gt,dt,ye)||!1)?(st||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(w,dt,ye),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(w,dt,ye)),typeof X.componentDidUpdate=="function"&&(u.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof X.componentDidUpdate!="function"||se===c.memoizedProps&&gt===c.memoizedState||(u.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&gt===c.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=dt),X.props=w,X.state=dt,X.context=ye,w=Fe):(typeof X.componentDidUpdate!="function"||se===c.memoizedProps&&gt===c.memoizedState||(u.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&gt===c.memoizedState||(u.flags|=1024),w=!1)}return kp(c,u,v,w,N,A)}function kp(c,u,v,w,A,N){Py(c,u);var X=(u.flags&128)!==0;if(!w&&!X)return A&&jt(u,v,!1),as(c,u,N);w=u.stateNode,UT.current=u;var se=X&&typeof v.getDerivedStateFromError!="function"?null:w.render();return u.flags|=1,c!==null&&X?(u.child=Po(u,c.child,null,N),u.child=Po(u,null,se,N)):vi(c,u,se,N),u.memoizedState=w.state,A&&jt(u,v,!0),u.child}function Iy(c){var u=c.stateNode;u.pendingContext?wt(c,u.pendingContext,u.pendingContext!==u.context):u.context&&wt(c,u.context,!1),bp(c,u.containerInfo)}function Ly(c,u,v,w,A){return Ro(),_p(A),u.flags|=256,vi(c,u,v,w),u.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function fd(c){return{baseLanes:c,cachePool:null}}function ky(c,u,v){var w=u.pendingProps,A=yn.current,N=!1,X=(u.flags&128)!==0,se;if((se=X)||(se=c!==null&&c.memoizedState===null?!1:(A&2)!==0),se?(N=!0,u.flags&=-129):(c===null||c.memoizedState!==null)&&(A|=1),at(yn,A&1),c===null)return yp(u),c=u.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(u.mode&1?Rr(c)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(A=w.children,c=w.fallback,N?(w=u.mode,N=u.child,A={mode:"hidden",children:A},!(w&1)&&N!==null?(N.childLanes=0,N.pendingProps=A):N=Ld(A,w,0,null),c=Ea(c,w,v,null),N.return=u,c.return=u,N.sibling=c,u.child=N,u.child.memoizedState=fd(v),u.memoizedState=hd,c):Dp(u,A));if(A=c.memoizedState,A!==null){if(se=A.dehydrated,se!==null){if(X)return u.flags&256?(u.flags&=-257,pd(c,u,v,Error(a(422)))):u.memoizedState!==null?(u.child=c.child,u.flags|=128,null):(N=w.fallback,A=u.mode,w=Ld({mode:"visible",children:w.children},A,0,null),N=Ea(N,A,v,null),N.flags|=2,w.return=u,N.return=u,w.sibling=N,u.child=w,u.mode&1&&Po(u,c.child,null,v),u.child.memoizedState=fd(v),u.memoizedState=hd,N);if(!(u.mode&1))u=pd(c,u,v,null);else if(Rr(se))u=pd(c,u,v,Error(a(419)));else if(w=(v&c.childLanes)!==0,zi||w){if(w=kn,w!==null){switch(v&-v){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}w=N&(w.suspendedLanes|v)?0:N,w!==0&&w!==A.retryLane&&(A.retryLane=w,ar(c,w,-1))}tm(),u=pd(c,u,v,Error(a(421)))}else Qr(se)?(u.flags|=128,u.child=c.child,u=KT.bind(null,c),Pr(se,u),u=null):(v=A.treeContext,Ce&&(Fi=Wl(se),Ui=u,mn=!0,vr=null,Yl=!1,v!==null&&(nr[ir++]=is,nr[ir++]=rs,nr[ir++]=va,is=v.id,rs=v.overflow,va=u)),u=Dp(u,u.pendingProps.children),u.flags|=4096);return u}return N?(w=Oy(c,u,w.children,w.fallback,v),N=u.child,A=c.child.memoizedState,N.memoizedState=A===null?fd(v):{baseLanes:A.baseLanes|v,cachePool:null},N.childLanes=c.childLanes&~v,u.memoizedState=hd,w):(v=Dy(c,u,w.children,v),u.memoizedState=null,v)}return N?(w=Oy(c,u,w.children,w.fallback,v),N=u.child,A=c.child.memoizedState,N.memoizedState=A===null?fd(v):{baseLanes:A.baseLanes|v,cachePool:null},N.childLanes=c.childLanes&~v,u.memoizedState=hd,w):(v=Dy(c,u,w.children,v),u.memoizedState=null,v)}function Dp(c,u){return u=Ld({mode:"visible",children:u},c.mode,0,null),u.return=c,c.child=u}function Dy(c,u,v,w){var A=c.child;return c=A.sibling,v=Os(A,{mode:"visible",children:v}),!(u.mode&1)&&(v.lanes=w),v.return=u,v.sibling=null,c!==null&&(w=u.deletions,w===null?(u.deletions=[c],u.flags|=16):w.push(c)),u.child=v}function Oy(c,u,v,w,A){var N=u.mode;c=c.child;var X=c.sibling,se={mode:"hidden",children:v};return!(N&1)&&u.child!==c?(v=u.child,v.childLanes=0,v.pendingProps=se,u.deletions=null):(v=Os(c,se),v.subtreeFlags=c.subtreeFlags&14680064),X!==null?w=Os(X,w):(w=Ea(w,N,A,null),w.flags|=2),w.return=u,v.return=u,v.sibling=w,u.child=v,w}function pd(c,u,v,w){return w!==null&&_p(w),Po(u,c.child,null,v),c=Dp(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function Uy(c,u,v){c.lanes|=u;var w=c.alternate;w!==null&&(w.lanes|=u),hp(c.return,u,v)}function Op(c,u,v,w,A){var N=c.memoizedState;N===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:v,tailMode:A}:(N.isBackwards=u,N.rendering=null,N.renderingStartTime=0,N.last=w,N.tail=v,N.tailMode=A)}function Fy(c,u,v){var w=u.pendingProps,A=w.revealOrder,N=w.tail;if(vi(c,u,w.children,v),w=yn.current,w&2)w=w&1|2,u.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Uy(c,v,u);else if(c.tag===19)Uy(c,v,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}if(at(yn,w),!(u.mode&1))u.memoizedState=null;else switch(A){case"forwards":for(v=u.child,A=null;v!==null;)c=v.alternate,c!==null&&nd(c)===null&&(A=v),v=v.sibling;v=A,v===null?(A=u.child,u.child=null):(A=v.sibling,v.sibling=null),Op(u,!1,A,v,N);break;case"backwards":for(v=null,A=u.child,u.child=null;A!==null;){if(c=A.alternate,c!==null&&nd(c)===null){u.child=A;break}c=A.sibling,A.sibling=v,v=A,A=c}Op(u,!0,v,null,N);break;case"together":Op(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function as(c,u,v){if(c!==null&&(u.dependencies=c.dependencies),Do|=u.lanes,!(v&u.childLanes))return null;if(c!==null&&u.child!==c.child)throw Error(a(153));if(u.child!==null){for(c=u.child,v=Os(c,c.pendingProps),u.child=v,v.return=u;c.sibling!==null;)c=c.sibling,v=v.sibling=Os(c,c.pendingProps),v.return=u;v.sibling=null}return u.child}function FT(c,u,v){switch(u.tag){case 3:Iy(u),Ro();break;case 5:ey(u);break;case 1:tn(u.type)&&Yt(u);break;case 4:bp(u,u.stateNode.containerInfo);break;case 10:zx(u,u.type._context,u.memoizedProps.value);break;case 13:var w=u.memoizedState;if(w!==null)return w.dehydrated!==null?(at(yn,yn.current&1),u.flags|=128,null):v&u.child.childLanes?ky(c,u,v):(at(yn,yn.current&1),c=as(c,u,v),c!==null?c.sibling:null);at(yn,yn.current&1);break;case 19:if(w=(v&u.childLanes)!==0,c.flags&128){if(w)return Fy(c,u,v);u.flags|=128}var A=u.memoizedState;if(A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),at(yn,yn.current),w)break;return null;case 22:case 23:return u.lanes=0,Ry(c,u,v)}return as(c,u,v)}function zT(c,u){switch(vp(u),u.tag){case 1:return tn(u.type)&&Cn(),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return Io(),yt(bt),yt(Kt),Mp(),c=u.flags,c&65536&&!(c&128)?(u.flags=c&-65537|128,u):null;case 5:return wp(u),null;case 13:if(yt(yn),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(a(340));Ro()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return yt(yn),null;case 4:return Io(),null;case 10:return dp(u.type._context),null;case 22:case 23:return em(),null;case 24:return null;default:return null}}var md=!1,_a=!1,jT=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function gd(c,u){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(w){Ti(c,u,w)}else v.current=null}function Up(c,u,v){try{v()}catch(w){Ti(c,u,w)}}var zy=!1;function BT(c,u){for(ie(c.containerInfo),Ze=u;Ze!==null;)if(c=Ze,u=c.child,(c.subtreeFlags&1028)!==0&&u!==null)u.return=c,Ze=u;else for(;Ze!==null;){c=Ze;try{var v=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,A=v.memoizedState,N=c.stateNode,X=N.getSnapshotBeforeUpdate(c.elementType===c.type?w:gr(c.type,w),A);N.__reactInternalSnapshotBeforeUpdate=X}break;case 3:We&&Ve(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(se){Ti(c,c.return,se)}if(u=c.sibling,u!==null){u.return=c.return,Ze=u;break}Ze=c.return}return v=zy,zy=!1,v}function ba(c,u,v){var w=u.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var A=w=w.next;do{if((A.tag&c)===c){var N=A.destroy;A.destroy=void 0,N!==void 0&&Up(u,v,N)}A=A.next}while(A!==w)}}function ac(c,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var v=u=u.next;do{if((v.tag&c)===c){var w=v.create;v.destroy=w()}v=v.next}while(v!==u)}}function Fp(c){var u=c.ref;if(u!==null){var v=c.stateNode;switch(c.tag){case 5:c=ne(v);break;default:c=v}typeof u=="function"?u(c):u.current=c}}function jy(c,u,v){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(Wu,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:if(c=u.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var w=c=c.next;do{var A=w,N=A.destroy;A=A.tag,N!==void 0&&(A&2||A&4)&&Up(u,v,N),w=w.next}while(w!==c)}break;case 1:if(gd(u,v),c=u.stateNode,typeof c.componentWillUnmount=="function")try{c.props=u.memoizedProps,c.state=u.memoizedState,c.componentWillUnmount()}catch(X){Ti(u,v,X)}break;case 5:gd(u,v);break;case 4:We?Xy(c,u,v):K&&K&&(u=u.stateNode.containerInfo,v=Pe(u),on(u,v))}}function By(c,u,v){for(var w=u;;)if(jy(c,w,v),w.child===null||We&&w.tag===4){if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function Hy(c){var u=c.alternate;u!==null&&(c.alternate=null,Hy(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&ze(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Vy(c){return c.tag===5||c.tag===3||c.tag===4}function Gy(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Vy(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Wy(c){if(We){e:{for(var u=c.return;u!==null;){if(Vy(u))break e;u=u.return}throw Error(a(160))}var v=u;switch(v.tag){case 5:u=v.stateNode,v.flags&32&&(fe(u),v.flags&=-33),v=Gy(c),jp(c,v,u);break;case 3:case 4:u=v.stateNode.containerInfo,v=Gy(c),zp(c,v,u);break;default:throw Error(a(161))}}}function zp(c,u,v){var w=c.tag;if(w===5||w===6)c=c.stateNode,u?Re(v,c,u):it(v,c);else if(w!==4&&(c=c.child,c!==null))for(zp(c,u,v),c=c.sibling;c!==null;)zp(c,u,v),c=c.sibling}function jp(c,u,v){var w=c.tag;if(w===5||w===6)c=c.stateNode,u?At(v,c,u):De(v,c);else if(w!==4&&(c=c.child,c!==null))for(jp(c,u,v),c=c.sibling;c!==null;)jp(c,u,v),c=c.sibling}function Xy(c,u,v){for(var w=u,A=!1,N,X;;){if(!A){A=w.return;e:for(;;){if(A===null)throw Error(a(160));switch(N=A.stateNode,A.tag){case 5:X=!1;break e;case 3:N=N.containerInfo,X=!0;break e;case 4:N=N.containerInfo,X=!0;break e}A=A.return}A=!0}if(w.tag===5||w.tag===6)By(c,w,v),X?$(N,w.stateNode):Ft(N,w.stateNode);else if(w.tag===18)X?he(N,w.stateNode):ue(N,w.stateNode);else if(w.tag===4){if(w.child!==null){N=w.stateNode.containerInfo,X=!0,w.child.return=w,w=w.child;continue}}else if(jy(c,w,v),w.child!==null){w.child.return=w,w=w.child;continue}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return;w=w.return,w.tag===4&&(A=!1)}w.sibling.return=w.return,w=w.sibling}}function Bp(c,u){if(We){switch(u.tag){case 0:case 11:case 14:case 15:ba(3,u,u.return),ac(3,u),ba(5,u,u.return);return;case 1:return;case 5:var v=u.stateNode;if(v!=null){var w=u.memoizedProps;c=c!==null?c.memoizedProps:w;var A=u.type,N=u.updateQueue;u.updateQueue=null,N!==null&&xt(v,N,A,c,w,u)}return;case 6:if(u.stateNode===null)throw Error(a(162));v=u.memoizedProps,Ue(u.stateNode,c!==null?c.memoizedProps:v,v);return;case 3:Ce&&c!==null&&c.memoizedState.isDehydrated&&H(u.stateNode.containerInfo);return;case 12:return;case 13:vd(u);return;case 19:vd(u);return;case 17:return}throw Error(a(163))}switch(u.tag){case 0:case 11:case 14:case 15:ba(3,u,u.return),ac(3,u),ba(5,u,u.return);return;case 12:return;case 13:vd(u);return;case 19:vd(u);return;case 3:Ce&&c!==null&&c.memoizedState.isDehydrated&&H(u.stateNode.containerInfo);break;case 22:case 23:return}e:if(K){switch(u.tag){case 1:case 5:case 6:break e;case 3:case 4:u=u.stateNode,on(u.containerInfo,u.pendingChildren);break e}throw Error(a(163))}}function vd(c){var u=c.updateQueue;if(u!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new jT),u.forEach(function(w){var A=$T.bind(null,c,w);v.has(w)||(v.add(w),w.then(A,A))})}}function HT(c,u){for(Ze=u;Ze!==null;){u=Ze;var v=u.deletions;if(v!==null)for(var w=0;w<v.length;w++){var A=v[w];try{var N=c;We?Xy(N,A,u):By(N,A,u);var X=A.alternate;X!==null&&(X.return=null),A.return=null}catch(lt){Ti(A,u,lt)}}if(v=u.child,u.subtreeFlags&12854&&v!==null)v.return=u,Ze=v;else for(;Ze!==null;){u=Ze;try{var se=u.flags;if(se&32&&We&&fe(u.stateNode),se&512){var ye=u.alternate;if(ye!==null){var Fe=ye.ref;Fe!==null&&(typeof Fe=="function"?Fe(null):Fe.current=null)}}if(se&8192)switch(u.tag){case 13:if(u.memoizedState!==null){var st=u.alternate;(st===null||st.memoizedState===null)&&(Yp=Xn())}break;case 22:var Mt=u.memoizedState!==null,gt=u.alternate,nn=gt!==null&&gt.memoizedState!==null;if(v=u,We){e:if(w=v,A=Mt,N=null,We)for(var dt=w;;){if(dt.tag===5){if(N===null){N=dt;var ai=dt.stateNode;A?Me(ai):le(dt.stateNode,dt.memoizedProps)}}else if(dt.tag===6){if(N===null){var lr=dt.stateNode;A?q(lr):Ie(lr,dt.memoizedProps)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===w)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===w)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===w)break e;N===dt&&(N=null),dt=dt.return}N===dt&&(N=null),dt.sibling.return=dt.return,dt=dt.sibling}}if(Mt&&!nn&&v.mode&1){Ze=v;for(var de=v.child;de!==null;){for(v=Ze=de;Ze!==null;){w=Ze;var ae=w.child;switch(w.tag){case 0:case 11:case 14:case 15:ba(4,w,w.return);break;case 1:gd(w,w.return);var me=w.stateNode;if(typeof me.componentWillUnmount=="function"){var Je=w.return;try{me.props=w.memoizedProps,me.state=w.memoizedState,me.componentWillUnmount()}catch(lt){Ti(w,Je,lt)}}break;case 5:gd(w,w.return);break;case 22:if(w.memoizedState!==null){Zy(v);continue}}ae!==null?(ae.return=w,Ze=ae):Zy(v)}de=de.sibling}}}switch(se&4102){case 2:Wy(u),u.flags&=-3;break;case 6:Wy(u),u.flags&=-3,Bp(u.alternate,u);break;case 4096:u.flags&=-4097;break;case 4100:u.flags&=-4097,Bp(u.alternate,u);break;case 4:Bp(u.alternate,u)}}catch(lt){Ti(u,u.return,lt)}if(v=u.sibling,v!==null){v.return=u.return,Ze=v;break}Ze=u.return}}}function VT(c,u,v){Ze=c,qy(c)}function qy(c,u,v){for(var w=(c.mode&1)!==0;Ze!==null;){var A=Ze,N=A.child;if(A.tag===22&&w){var X=A.memoizedState!==null||md;if(!X){var se=A.alternate,ye=se!==null&&se.memoizedState!==null||_a;se=md;var Fe=_a;if(md=X,(_a=ye)&&!Fe)for(Ze=A;Ze!==null;)X=Ze,ye=X.child,X.tag===22&&X.memoizedState!==null?Ky(A):ye!==null?(ye.return=X,Ze=ye):Ky(A);for(;N!==null;)Ze=N,qy(N),N=N.sibling;Ze=A,md=se,_a=Fe}Yy(c)}else A.subtreeFlags&8772&&N!==null?(N.return=A,Ze=N):Yy(c)}}function Yy(c){for(;Ze!==null;){var u=Ze;if(u.flags&8772){var v=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:_a||ac(5,u);break;case 1:var w=u.stateNode;if(u.flags&4&&!_a)if(v===null)w.componentDidMount();else{var A=u.elementType===u.type?v.memoizedProps:gr(u.type,v.memoizedProps);w.componentDidUpdate(A,v.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var N=u.updateQueue;N!==null&&Hx(u,N,w);break;case 3:var X=u.updateQueue;if(X!==null){if(v=null,u.child!==null)switch(u.child.tag){case 5:v=ne(u.child.stateNode);break;case 1:v=u.child.stateNode}Hx(u,X,v)}break;case 5:var se=u.stateNode;v===null&&u.flags&4&&qe(se,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(Ce&&u.memoizedState===null){var ye=u.alternate;if(ye!==null){var Fe=ye.memoizedState;if(Fe!==null){var st=Fe.dehydrated;st!==null&&Y(st)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}_a||u.flags&512&&Fp(u)}catch(Mt){Ti(u,u.return,Mt)}}if(u===c){Ze=null;break}if(v=u.sibling,v!==null){v.return=u.return,Ze=v;break}Ze=u.return}}function Zy(c){for(;Ze!==null;){var u=Ze;if(u===c){Ze=null;break}var v=u.sibling;if(v!==null){v.return=u.return,Ze=v;break}Ze=u.return}}function Ky(c){for(;Ze!==null;){var u=Ze;try{switch(u.tag){case 0:case 11:case 15:var v=u.return;try{ac(4,u)}catch(ye){Ti(u,v,ye)}break;case 1:var w=u.stateNode;if(typeof w.componentDidMount=="function"){var A=u.return;try{w.componentDidMount()}catch(ye){Ti(u,A,ye)}}var N=u.return;try{Fp(u)}catch(ye){Ti(u,N,ye)}break;case 5:var X=u.return;try{Fp(u)}catch(ye){Ti(u,X,ye)}}}catch(ye){Ti(u,u.return,ye)}if(u===c){Ze=null;break}var se=u.sibling;if(se!==null){se.return=u.return,Ze=se;break}Ze=u.return}}var xd=0,yd=1,_d=2,bd=3,wd=4;if(typeof Symbol=="function"&&Symbol.for){var oc=Symbol.for;xd=oc("selector.component"),yd=oc("selector.has_pseudo_class"),_d=oc("selector.role"),bd=oc("selector.test_id"),wd=oc("selector.text")}function Hp(c){var u=be(c);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(a(364));return u}if(c=_t(c),c===null)throw Error(a(362));return c.stateNode.current}function Vp(c,u){switch(u.$$typeof){case xd:if(c.type===u.value)return!0;break;case yd:e:{u=u.value,c=[c,0];for(var v=0;v<c.length;){var w=c[v++],A=c[v++],N=u[A];if(w.tag!==5||!U(w)){for(;N!=null&&Vp(w,N);)A++,N=u[A];if(A===u.length){u=!0;break e}else for(w=w.child;w!==null;)c.push(w,A),w=w.sibling}}u=!1}return u;case _d:if(c.tag===5&&ce(c.stateNode,u.value))return!0;break;case wd:if((c.tag===5||c.tag===6)&&(c=V(c),c!==null&&0<=c.indexOf(u.value)))return!0;break;case bd:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Gp(c){switch(c.$$typeof){case xd:return"<"+(I(c.value)||"Unknown")+">";case yd:return":has("+(Gp(c)||"")+")";case _d:return'[role="'+c.value+'"]';case wd:return'"'+c.value+'"';case bd:return'[data-testname="'+c.value+'"]';default:throw Error(a(365))}}function $y(c,u){var v=[];c=[c,0];for(var w=0;w<c.length;){var A=c[w++],N=c[w++],X=u[N];if(A.tag!==5||!U(A)){for(;X!=null&&Vp(A,X);)N++,X=u[N];if(N===u.length)v.push(A);else for(A=A.child;A!==null;)c.push(A,N),A=A.sibling}}return v}function Wp(c,u){if(!ct)throw Error(a(363));c=Hp(c),c=$y(c,u),u=[],c=Array.from(c);for(var v=0;v<c.length;){var w=c[v++];if(w.tag===5)U(w)||u.push(w.stateNode);else for(w=w.child;w!==null;)c.push(w),w=w.sibling}return u}var GT=Math.ceil,Sd=o.ReactCurrentDispatcher,Xp=o.ReactCurrentOwner,Rn=o.ReactCurrentBatchConfig,kt=0,kn=null,Dn=null,Qn=0,ji=0,ko=$e(0),Bn=0,lc=null,Do=0,Md=0,qp=0,cc=null,Mi=null,Yp=0,Zp=1/0;function Oo(){Zp=Xn()+500}var Ed=!1,Kp=null,Is=null,Td=!1,Ls=null,Ad=0,uc=0,$p=null,Cd=-1,Rd=0;function xi(){return kt&6?Xn():Cd!==-1?Cd:Cd=Xn()}function ks(c){return c.mode&1?kt&2&&Qn!==0?Qn&-Qn:TT.transition!==null?(Rd===0&&(c=Hu,Hu<<=1,!(Hu&4194240)&&(Hu=64),Rd=c),Rd):(c=Gt,c!==0?c:Ae()):1}function ar(c,u,v){if(50<uc)throw uc=0,$p=null,Error(a(185));var w=Pd(c,u);return w===null?null:(ql(w,u,v),(!(kt&2)||w!==kn)&&(w===kn&&(!(kt&2)&&(Md|=u),Bn===4&&Ds(w,Qn)),Ei(w,v),u===1&&kt===0&&!(c.mode&1)&&(Oo(),Xu&&kr())),w)}function Pd(c,u){c.lanes|=u;var v=c.alternate;for(v!==null&&(v.lanes|=u),v=c,c=c.return;c!==null;)c.childLanes|=u,v=c.alternate,v!==null&&(v.childLanes|=u),v=c,c=c.return;return v.tag===3?v.stateNode:null}function Ei(c,u){var v=c.callbackNode;vT(c,u);var w=Gu(c,c===kn?Qn:0);if(w===0)v!==null&&Ux(v),c.callbackNode=null,c.callbackPriority=0;else if(u=w&-w,c.callbackPriority!==u){if(v!=null&&Ux(v),u===1)c.tag===0?ET(Qy.bind(null,c)):Fx(Qy.bind(null,c)),Xe?Ke(function(){kt===0&&kr()}):sp(ap,kr),v=null;else{switch(Ox(w)){case 1:v=ap;break;case 4:v=bT;break;case 16:v=op;break;case 536870912:v=wT;break;default:v=op}v=l_(v,Jy.bind(null,c))}c.callbackPriority=u,c.callbackNode=v}}function Jy(c,u){if(Cd=-1,Rd=0,kt&6)throw Error(a(327));var v=c.callbackNode;if(Ma()&&c.callbackNode!==v)return null;var w=Gu(c,c===kn?Qn:0);if(w===0)return null;if(w&30||w&c.expiredLanes||u)u=Nd(c,w);else{u=w;var A=kt;kt|=2;var N=n_();(kn!==c||Qn!==u)&&(Oo(),wa(c,u));do try{qT();break}catch(se){t_(c,se)}while(!0);up(),Sd.current=N,kt=A,Dn!==null?u=0:(kn=null,Qn=0,u=Bn)}if(u!==0){if(u===2&&(A=np(c),A!==0&&(w=A,u=Jp(c,A))),u===1)throw v=lc,wa(c,0),Ds(c,w),Ei(c,Xn()),v;if(u===6)Ds(c,w);else{if(A=c.current.alternate,!(w&30)&&!WT(A)&&(u=Nd(c,w),u===2&&(N=np(c),N!==0&&(w=N,u=Jp(c,N))),u===1))throw v=lc,wa(c,0),Ds(c,w),Ei(c,Xn()),v;switch(c.finishedWork=A,c.finishedLanes=w,u){case 0:case 1:throw Error(a(345));case 2:Sa(c,Mi);break;case 3:if(Ds(c,w),(w&130023424)===w&&(u=Yp+500-Xn(),10<u)){if(Gu(c,0)!==0)break;if(A=c.suspendedLanes,(A&w)!==w){xi(),c.pingedLanes|=c.suspendedLanes&A;break}c.timeoutHandle=je(Sa.bind(null,c,Mi),u);break}Sa(c,Mi);break;case 4:if(Ds(c,w),(w&4194240)===w)break;for(u=c.eventTimes,A=-1;0<w;){var X=31-pn(w);N=1<<X,X=u[X],X>A&&(A=X),w&=~N}if(w=A,w=Xn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*GT(w/1960))-w,10<w){c.timeoutHandle=je(Sa.bind(null,c,Mi),w);break}Sa(c,Mi);break;case 5:Sa(c,Mi);break;default:throw Error(a(329))}}}return Ei(c,Xn()),c.callbackNode===v?Jy.bind(null,c):null}function Jp(c,u){var v=cc;return c.current.memoizedState.isDehydrated&&(wa(c,u).flags|=256),c=Nd(c,u),c!==2&&(u=Mi,Mi=v,u!==null&&Qp(u)),c}function Qp(c){Mi===null?Mi=c:Mi.push.apply(Mi,c)}function WT(c){for(var u=c;;){if(u.flags&16384){var v=u.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var A=v[w],N=A.getSnapshot;A=A.value;try{if(!Lr(N(),A))return!1}catch{return!1}}}if(v=u.child,u.subtreeFlags&16384&&v!==null)v.return=u,u=v;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ds(c,u){for(u&=~qp,u&=~Md,c.suspendedLanes|=u,c.pingedLanes&=~u,c=c.expirationTimes;0<u;){var v=31-pn(u),w=1<<v;c[v]=-1,u&=~w}}function Qy(c){if(kt&6)throw Error(a(327));Ma();var u=Gu(c,0);if(!(u&1))return Ei(c,Xn()),null;var v=Nd(c,u);if(c.tag!==0&&v===2){var w=np(c);w!==0&&(u=w,v=Jp(c,w))}if(v===1)throw v=lc,wa(c,0),Ds(c,u),Ei(c,Xn()),v;if(v===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=u,Sa(c,Mi),Ei(c,Xn()),null}function e_(c){Ls!==null&&Ls.tag===0&&!(kt&6)&&Ma();var u=kt;kt|=1;var v=Rn.transition,w=Gt;try{if(Rn.transition=null,Gt=1,c)return c()}finally{Gt=w,Rn.transition=v,kt=u,!(kt&6)&&kr()}}function em(){ji=ko.current,yt(ko)}function wa(c,u){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==nt&&(c.timeoutHandle=nt,Qe(v)),Dn!==null)for(v=Dn.return;v!==null;){var w=v;switch(vp(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Cn();break;case 3:Io(),yt(bt),yt(Kt),Mp();break;case 5:wp(w);break;case 4:Io();break;case 13:yt(yn);break;case 19:yt(yn);break;case 10:dp(w.type._context);break;case 22:case 23:em()}v=v.return}if(kn=c,Dn=c=Os(c.current,null),Qn=ji=u,Bn=0,lc=null,qp=Md=Do=0,Mi=cc=null,Dr!==null){for(u=0;u<Dr.length;u++)if(v=Dr[u],w=v.interleaved,w!==null){v.interleaved=null;var A=w.next,N=v.pending;if(N!==null){var X=N.next;N.next=A,w.next=X}v.pending=w}Dr=null}return c}function t_(c,u){do{var v=Dn;try{if(up(),id.current=cd,rd){for(var w=Sn.memoizedState;w!==null;){var A=w.queue;A!==null&&(A.pending=null),w=w.next}rd=!1}if(Lo=0,qn=ii=Sn=null,Ql=!1,ec=0,Xp.current=null,v===null||v.return===null){Bn=1,lc=u,Dn=null;break}e:{var N=c,X=v.return,se=v,ye=u;if(u=Qn,se.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Fe=ye,st=se,Mt=st.tag;if(!(st.mode&1)&&(Mt===0||Mt===11||Mt===15)){var gt=st.alternate;gt?(st.updateQueue=gt.updateQueue,st.memoizedState=gt.memoizedState,st.lanes=gt.lanes):(st.updateQueue=null,st.memoizedState=null)}var nn=wy(X);if(nn!==null){nn.flags&=-257,Sy(nn,X,se,N,u),nn.mode&1&&by(N,Fe,u),u=nn,ye=Fe;var dt=u.updateQueue;if(dt===null){var ai=new Set;ai.add(ye),u.updateQueue=ai}else dt.add(ye);break e}else{if(!(u&1)){by(N,Fe,u),tm();break e}ye=Error(a(426))}}else if(mn&&se.mode&1){var lr=wy(X);if(lr!==null){!(lr.flags&65536)&&(lr.flags|=256),Sy(lr,X,se,N,u),_p(ye);break e}}N=ye,Bn!==4&&(Bn=2),cc===null?cc=[N]:cc.push(N),ye=Np(ye,se),se=X;do{switch(se.tag){case 3:se.flags|=65536,u&=-u,se.lanes|=u;var de=yy(se,ye,u);Bx(se,de);break e;case 1:N=ye;var ae=se.type,me=se.stateNode;if(!(se.flags&128)&&(typeof ae.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(Is===null||!Is.has(me)))){se.flags|=65536,u&=-u,se.lanes|=u;var Je=_y(se,N,u);Bx(se,Je);break e}}se=se.return}while(se!==null)}r_(v)}catch(lt){u=lt,Dn===v&&v!==null&&(Dn=v=v.return);continue}break}while(!0)}function n_(){var c=Sd.current;return Sd.current=cd,c===null?cd:c}function tm(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),kn===null||!(Do&268435455)&&!(Md&268435455)||Ds(kn,Qn)}function Nd(c,u){var v=kt;kt|=2;var w=n_();kn===c&&Qn===u||wa(c,u);do try{XT();break}catch(A){t_(c,A)}while(!0);if(up(),kt=v,Sd.current=w,Dn!==null)throw Error(a(261));return kn=null,Qn=0,Bn}function XT(){for(;Dn!==null;)i_(Dn)}function qT(){for(;Dn!==null&&!yT();)i_(Dn)}function i_(c){var u=o_(c.alternate,c,ji);c.memoizedProps=c.pendingProps,u===null?r_(c):Dn=u,Xp.current=null}function r_(c){var u=c;do{var v=u.alternate;if(c=u.return,u.flags&32768){if(v=zT(v,u),v!==null){v.flags&=32767,Dn=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Bn=6,Dn=null;return}}else if(v=OT(v,u,ji),v!==null){Dn=v;return}if(u=u.sibling,u!==null){Dn=u;return}Dn=u=c}while(u!==null);Bn===0&&(Bn=5)}function Sa(c,u){var v=Gt,w=Rn.transition;try{Rn.transition=null,Gt=1,YT(c,u,v)}finally{Rn.transition=w,Gt=v}return null}function YT(c,u,v){do Ma();while(Ls!==null);if(kt&6)throw Error(a(327));var w=c.finishedWork,A=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(a(177));c.callbackNode=null,c.callbackPriority=0;var N=w.lanes|w.childLanes;if(xT(c,N),c===kn&&(Dn=kn=null,Qn=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||Td||(Td=!0,l_(op,function(){return Ma(),null})),N=(w.flags&15990)!==0,w.subtreeFlags&15990||N){N=Rn.transition,Rn.transition=null;var X=Gt;Gt=1;var se=kt;kt|=4,Xp.current=null,BT(c,w),HT(c,w),ee(c.containerInfo),c.current=w,VT(w),_T(),kt=se,Gt=X,Rn.transition=N}else c.current=w;if(Td&&(Td=!1,Ls=c,Ad=A),N=c.pendingLanes,N===0&&(Is=null),ST(w.stateNode),Ei(c,Xn()),u!==null)for(v=c.onRecoverableError,w=0;w<u.length;w++)v(u[w]);if(Ed)throw Ed=!1,c=Kp,Kp=null,c;return Ad&1&&c.tag!==0&&Ma(),N=c.pendingLanes,N&1?c===$p?uc++:(uc=0,$p=c):uc=0,kr(),null}function Ma(){if(Ls!==null){var c=Ox(Ad),u=Rn.transition,v=Gt;try{if(Rn.transition=null,Gt=16>c?16:c,Ls===null)var w=!1;else{if(c=Ls,Ls=null,Ad=0,kt&6)throw Error(a(331));var A=kt;for(kt|=4,Ze=c.current;Ze!==null;){var N=Ze,X=N.child;if(Ze.flags&16){var se=N.deletions;if(se!==null){for(var ye=0;ye<se.length;ye++){var Fe=se[ye];for(Ze=Fe;Ze!==null;){var st=Ze;switch(st.tag){case 0:case 11:case 15:ba(8,st,N)}var Mt=st.child;if(Mt!==null)Mt.return=st,Ze=Mt;else for(;Ze!==null;){st=Ze;var gt=st.sibling,nn=st.return;if(Hy(st),st===Fe){Ze=null;break}if(gt!==null){gt.return=nn,Ze=gt;break}Ze=nn}}}var dt=N.alternate;if(dt!==null){var ai=dt.child;if(ai!==null){dt.child=null;do{var lr=ai.sibling;ai.sibling=null,ai=lr}while(ai!==null)}}Ze=N}}if(N.subtreeFlags&2064&&X!==null)X.return=N,Ze=X;else e:for(;Ze!==null;){if(N=Ze,N.flags&2048)switch(N.tag){case 0:case 11:case 15:ba(9,N,N.return)}var de=N.sibling;if(de!==null){de.return=N.return,Ze=de;break e}Ze=N.return}}var ae=c.current;for(Ze=ae;Ze!==null;){X=Ze;var me=X.child;if(X.subtreeFlags&2064&&me!==null)me.return=X,Ze=me;else e:for(X=ae;Ze!==null;){if(se=Ze,se.flags&2048)try{switch(se.tag){case 0:case 11:case 15:ac(9,se)}}catch(lt){Ti(se,se.return,lt)}if(se===X){Ze=null;break e}var Je=se.sibling;if(Je!==null){Je.return=se.return,Ze=Je;break e}Ze=se.return}}if(kt=A,kr(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(Wu,c)}catch{}w=!0}return w}finally{Gt=v,Rn.transition=u}}return!1}function s_(c,u,v){u=Np(v,u),u=yy(c,u,1),Ns(c,u),u=xi(),c=Pd(c,1),c!==null&&(ql(c,1,u),Ei(c,u))}function Ti(c,u,v){if(c.tag===3)s_(c,c,v);else for(;u!==null;){if(u.tag===3){s_(u,c,v);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Is===null||!Is.has(w))){c=Np(v,c),c=_y(u,c,1),Ns(u,c),c=xi(),u=Pd(u,1),u!==null&&(ql(u,1,c),Ei(u,c));break}}u=u.return}}function ZT(c,u,v){var w=c.pingCache;w!==null&&w.delete(u),u=xi(),c.pingedLanes|=c.suspendedLanes&v,kn===c&&(Qn&v)===v&&(Bn===4||Bn===3&&(Qn&130023424)===Qn&&500>Xn()-Yp?wa(c,0):qp|=v),Ei(c,u)}function a_(c,u){u===0&&(c.mode&1?(u=Vu,Vu<<=1,!(Vu&130023424)&&(Vu=4194304)):u=1);var v=xi();c=Pd(c,u),c!==null&&(ql(c,u,v),Ei(c,v))}function KT(c){var u=c.memoizedState,v=0;u!==null&&(v=u.retryLane),a_(c,v)}function $T(c,u){var v=0;switch(c.tag){case 13:var w=c.stateNode,A=c.memoizedState;A!==null&&(v=A.retryLane);break;case 19:w=c.stateNode;break;default:throw Error(a(314))}w!==null&&w.delete(u),a_(c,v)}var o_;o_=function(c,u,v){if(c!==null)if(c.memoizedProps!==u.pendingProps||bt.current)zi=!0;else{if(!(c.lanes&v)&&!(u.flags&128))return zi=!1,FT(c,u,v);zi=!!(c.flags&131072)}else zi=!1,mn&&u.flags&1048576&&qx(u,ed,u.index);switch(u.lanes=0,u.tag){case 2:var w=u.type;c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),c=u.pendingProps;var A=Vt(u,Kt.current);To(u,v),A=Tp(null,u,w,c,A,v);var N=Ap();return u.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,tn(w)?(N=!0,Yt(u)):N=!1,u.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,fp(u),A.updater=Ju,u.stateNode=A,A._reactInternals=u,mp(u,w,c,v),u=kp(null,u,w,!0,N,v)):(u.tag=0,mn&&N&&gp(u),vi(null,u,A,v),u=u.child),u;case 16:w=u.elementType;e:{switch(c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),c=u.pendingProps,A=w._init,w=A(w._payload),u.type=w,A=u.tag=QT(w),c=gr(w,c),A){case 0:u=Lp(null,u,w,c,v);break e;case 1:u=Ny(null,u,w,c,v);break e;case 11:u=Ty(null,u,w,c,v);break e;case 14:u=Ay(null,u,w,gr(w.type,c),v);break e}throw Error(a(306,w,""))}return u;case 0:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:gr(w,A),Lp(c,u,w,A,v);case 1:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:gr(w,A),Ny(c,u,w,A,v);case 3:e:{if(Iy(u),c===null)throw Error(a(387));w=u.pendingProps,N=u.memoizedState,A=N.element,jx(c,u),$u(u,w,null,v);var X=u.memoizedState;if(w=X.element,Ce&&N.isDehydrated)if(N={element:w,isDehydrated:!1,cache:X.cache,transitions:X.transitions},u.updateQueue.baseState=N,u.memoizedState=N,u.flags&256){A=Error(a(423)),u=Ly(c,u,w,v,A);break e}else if(w!==A){A=Error(a(424)),u=Ly(c,u,w,v,A);break e}else for(Ce&&(Fi=Mo(u.stateNode.containerInfo),Ui=u,mn=!0,vr=null,Yl=!1),v=Qx(u,null,w,v),u.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Ro(),w===A){u=as(c,u,v);break e}vi(c,u,w,v)}u=u.child}return u;case 5:return ey(u),c===null&&yp(u),w=u.type,A=u.pendingProps,N=c!==null?c.memoizedProps:null,X=A.children,Le(w,A)?X=null:N!==null&&Le(w,N)&&(u.flags|=32),Py(c,u),vi(c,u,X,v),u.child;case 6:return c===null&&yp(u),null;case 13:return ky(c,u,v);case 4:return bp(u,u.stateNode.containerInfo),w=u.pendingProps,c===null?u.child=Po(u,null,w,v):vi(c,u,w,v),u.child;case 11:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:gr(w,A),Ty(c,u,w,A,v);case 7:return vi(c,u,u.pendingProps,v),u.child;case 8:return vi(c,u,u.pendingProps.children,v),u.child;case 12:return vi(c,u,u.pendingProps.children,v),u.child;case 10:e:{if(w=u.type._context,A=u.pendingProps,N=u.memoizedProps,X=A.value,zx(u,w,X),N!==null)if(Lr(N.value,X)){if(N.children===A.children&&!bt.current){u=as(c,u,v);break e}}else for(N=u.child,N!==null&&(N.return=u);N!==null;){var se=N.dependencies;if(se!==null){X=N.child;for(var ye=se.firstContext;ye!==null;){if(ye.context===w){if(N.tag===1){ye=ns(-1,v&-v),ye.tag=2;var Fe=N.updateQueue;if(Fe!==null){Fe=Fe.shared;var st=Fe.pending;st===null?ye.next=ye:(ye.next=st.next,st.next=ye),Fe.pending=ye}}N.lanes|=v,ye=N.alternate,ye!==null&&(ye.lanes|=v),hp(N.return,v,u),se.lanes|=v;break}ye=ye.next}}else if(N.tag===10)X=N.type===u.type?null:N.child;else if(N.tag===18){if(X=N.return,X===null)throw Error(a(341));X.lanes|=v,se=X.alternate,se!==null&&(se.lanes|=v),hp(X,v,u),X=N.sibling}else X=N.child;if(X!==null)X.return=N;else for(X=N;X!==null;){if(X===u){X=null;break}if(N=X.sibling,N!==null){N.return=X.return,X=N;break}X=X.return}N=X}vi(c,u,A.children,v),u=u.child}return u;case 9:return A=u.type,w=u.pendingProps.children,To(u,v),A=tr(A),w=w(A),u.flags|=1,vi(c,u,w,v),u.child;case 14:return w=u.type,A=gr(w,u.pendingProps),A=gr(w.type,A),Ay(c,u,w,A,v);case 15:return Cy(c,u,u.type,u.pendingProps,v);case 17:return w=u.type,A=u.pendingProps,A=u.elementType===w?A:gr(w,A),c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,tn(w)?(c=!0,Yt(u)):c=!1,To(u,v),Wx(u,w,A),mp(u,w,A,v),kp(null,u,w,!0,c,v);case 19:return Fy(c,u,v);case 22:return Ry(c,u,v)}throw Error(a(156,u.tag))};function l_(c,u){return sp(c,u)}function JT(c,u,v,w){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(c,u,v,w){return new JT(c,u,v,w)}function nm(c){return c=c.prototype,!(!c||!c.isReactComponent)}function QT(c){if(typeof c=="function")return nm(c)?1:0;if(c!=null){if(c=c.$$typeof,c===b)return 11;if(c===M)return 14}return 2}function Os(c,u){var v=c.alternate;return v===null?(v=or(c.tag,u,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=u,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,u=c.dependencies,v.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v}function Id(c,u,v,w,A,N){var X=2;if(w=c,typeof c=="function")nm(c)&&(X=1);else if(typeof c=="string")X=5;else e:switch(c){case h:return Ea(v.children,A,N,u);case f:X=8,A|=8;break;case p:return c=or(12,v,u,A|2),c.elementType=p,c.lanes=N,c;case _:return c=or(13,v,u,A),c.elementType=_,c.lanes=N,c;case x:return c=or(19,v,u,A),c.elementType=x,c.lanes=N,c;case E:return Ld(v,A,N,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case g:X=10;break e;case y:X=9;break e;case b:X=11;break e;case M:X=14;break e;case S:X=16,w=null;break e}throw Error(a(130,c==null?c:typeof c,""))}return u=or(X,v,u,A),u.elementType=c,u.type=w,u.lanes=N,u}function Ea(c,u,v,w){return c=or(7,c,w,u),c.lanes=v,c}function Ld(c,u,v,w){return c=or(22,c,w,u),c.elementType=E,c.lanes=v,c.stateNode={},c}function im(c,u,v){return c=or(6,c,null,u),c.lanes=v,c}function rm(c,u,v){return u=or(4,c.children!==null?c.children:[],c.key,u),u.lanes=v,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function eA(c,u,v,w,A){this.tag=u,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=nt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=w,this.onRecoverableError=A,Ce&&(this.mutableSourceEagerHydrationData=null)}function c_(c,u,v,w,A,N,X,se,ye){return c=new eA(c,u,v,se,ye),u===1?(u=1,N===!0&&(u|=8)):u=0,N=or(3,null,null,u),c.current=N,N.stateNode=c,N.memoizedState={element:w,isDehydrated:v,cache:null,transitions:null},fp(N),c}function u_(c){if(!c)return St;c=c._reactInternals;e:{if(R(c)!==c||c.tag!==1)throw Error(a(170));var u=c;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(tn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(a(171))}if(c.tag===1){var v=c.type;if(tn(v))return xn(c,v,u)}return u}function d_(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=W(u),c===null?null:c.stateNode}function h_(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<u?v:u}}function sm(c,u){h_(c,u),(c=c.alternate)&&h_(c,u)}function tA(c){return c=W(c),c===null?null:c.stateNode}function nA(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var u=xi();ar(c,134217728,u),sm(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var u=xi(),v=ks(c);ar(c,v,u),sm(c,v)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var u=c.stateNode;if(u.current.memoizedState.isDehydrated){var v=Xl(u.pendingLanes);v!==0&&(rp(u,v|1),Ei(u,Xn()),!(kt&6)&&(Oo(),kr()))}break;case 13:var w=xi();e_(function(){return ar(c,1,w)}),sm(c,1)}},t.batchedUpdates=function(c,u){var v=kt;kt|=1;try{return c(u)}finally{kt=v,kt===0&&(Oo(),Xu&&kr())}},t.createComponentSelector=function(c){return{$$typeof:xd,value:c}},t.createContainer=function(c,u,v,w,A,N,X){return c_(c,u,!1,null,v,w,A,N,X)},t.createHasPseudoClassSelector=function(c){return{$$typeof:yd,value:c}},t.createHydrationContainer=function(c,u,v,w,A,N,X,se,ye){return c=c_(v,w,!0,c,A,N,X,se,ye),c.context=u_(null),v=c.current,w=xi(),A=ks(v),N=ns(w,A),N.callback=u??null,Ns(v,N),c.current.lanes=A,ql(c,A,w),Ei(c,w),c},t.createPortal=function(c,u,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:c,containerInfo:u,implementation:v}},t.createRoleSelector=function(c){return{$$typeof:_d,value:c}},t.createTestNameSelector=function(c){return{$$typeof:bd,value:c}},t.createTextSelector=function(c){return{$$typeof:wd,value:c}},t.deferredUpdates=function(c){var u=Gt,v=Rn.transition;try{return Rn.transition=null,Gt=16,c()}finally{Gt=u,Rn.transition=v}},t.discreteUpdates=function(c,u,v,w,A){var N=Gt,X=Rn.transition;try{return Rn.transition=null,Gt=1,c(u,v,w,A)}finally{Gt=N,Rn.transition=X,kt===0&&Oo()}},t.findAllNodes=Wp,t.findBoundingRects=function(c,u){if(!ct)throw Error(a(363));u=Wp(c,u),c=[];for(var v=0;v<u.length;v++)c.push(Ut(u[v]));for(u=c.length-1;0<u;u--){v=c[u];for(var w=v.x,A=w+v.width,N=v.y,X=N+v.height,se=u-1;0<=se;se--)if(u!==se){var ye=c[se],Fe=ye.x,st=Fe+ye.width,Mt=ye.y,gt=Mt+ye.height;if(w>=Fe&&N>=Mt&&A<=st&&X<=gt){c.splice(u,1);break}else if(w!==Fe||v.width!==ye.width||gt<N||Mt>X){if(!(N!==Mt||v.height!==ye.height||st<w||Fe>A)){Fe>w&&(ye.width+=Fe-w,ye.x=w),st<A&&(ye.width=A-Fe),c.splice(u,1);break}}else{Mt>N&&(ye.height+=Mt-N,ye.y=N),gt<X&&(ye.height=X-Mt),c.splice(u,1);break}}}return c},t.findHostInstance=d_,t.findHostInstanceWithNoPortals=function(c){return c=F(c),c=c!==null?z(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return d_(c)},t.flushControlled=function(c){var u=kt;kt|=1;var v=Rn.transition,w=Gt;try{Rn.transition=null,Gt=1,c()}finally{Gt=w,Rn.transition=v,kt=u,kt===0&&(Oo(),kr())}},t.flushPassiveEffects=Ma,t.flushSync=e_,t.focusWithin=function(c,u){if(!ct)throw Error(a(363));for(c=Hp(c),u=$y(c,u),u=Array.from(u),c=0;c<u.length;){var v=u[c++];if(!U(v)){if(v.tag===5&&Oe(v.stateNode))return!0;for(v=v.child;v!==null;)u.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Gt},t.getFindAllNodesFailureDescription=function(c,u){if(!ct)throw Error(a(363));var v=0,w=[];c=[Hp(c),0];for(var A=0;A<c.length;){var N=c[A++],X=c[A++],se=u[X];if((N.tag!==5||!U(N))&&(Vp(N,se)&&(w.push(Gp(se)),X++,X>v&&(v=X)),X<u.length))for(N=N.child;N!==null;)c.push(N,X),N=N.sibling}if(v<u.length){for(c=[];v<u.length;v++)c.push(Gp(u[v]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ne(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:tA,findFiberByHostInstance:c.findFiberByHostInstance||nA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)c=!0;else{try{Wu=u.inject(c),Ir=u}catch{}c=!!u.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,u,v,w){if(!ct)throw Error(a(363));c=Wp(c,u);var A=Ne(c,v,w).disconnect;return{disconnect:function(){A()}}},t.registerMutableSourceForHydration=function(c,u){var v=u._getVersion;v=v(u._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[u,v]:c.mutableSourceEagerHydrationData.push(u,v)},t.runWithPriority=function(c,u){var v=Gt;try{return Gt=c,u()}finally{Gt=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,u,v,w){var A=u.current,N=xi(),X=ks(A);return v=u_(v),u.context===null?u.context=v:u.pendingContext=v,u=ns(N,X),u.payload={element:c},w=w===void 0?null:w,w!==null&&(u.callback=w),Ns(A,u),c=ar(A,X,N),c!==null&&Ku(c,A,X),X},t};OE.exports=G6;var W6=OE.exports;const X6=rv(W6),Sx={},Mx=r=>void Object.assign(Sx,r);function q6(r,e){function t(h,{args:f=[],attach:p,...g},y){let b=`${h[0].toUpperCase()}${h.slice(1)}`,_;if(h==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=g.object;_=ul(x,{type:h,root:y,attach:p,primitive:!0})}else{const x=Sx[b];if(!x)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=ul(new x(...f),{type:h,root:y,attach:p,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),b!=="inject"&&Cg(_,g),_}function n(h,f){let p=!1;if(f){var g,y;(g=f.__r3f)!=null&&g.attach?Ag(h,f,f.__r3f.attach):f.isObject3D&&h.isObject3D&&(h.add(f),p=!0),p||(y=h.__r3f)==null||y.objects.push(f),f.__r3f||ul(f,{}),f.__r3f.parent=h,Q0(f),dl(f)}}function i(h,f,p){let g=!1;if(f){var y,b;if((y=f.__r3f)!=null&&y.attach)Ag(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:f});const _=h.children.filter(M=>M!==f),x=_.indexOf(p);h.children=[..._.slice(0,x),f,..._.slice(x)],g=!0}g||(b=h.__r3f)==null||b.objects.push(f),f.__r3f||ul(f,{}),f.__r3f.parent=h,Q0(f),dl(f)}}function s(h,f,p=!1){h&&[...h].forEach(g=>a(f,g,p))}function a(h,f,p){if(f){var g,y,b;if(f.__r3f&&(f.__r3f.parent=null),(g=h.__r3f)!=null&&g.objects&&(h.__r3f.objects=h.__r3f.objects.filter(E=>E!==f)),(y=f.__r3f)!=null&&y.attach)dw(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){var _;h.remove(f),(_=f.__r3f)!=null&&_.root&&eF(Kh(f),f)}const M=(b=f.__r3f)==null?void 0:b.primitive,S=!M&&(p===void 0?f.dispose!==null:p);if(!M){var x;s((x=f.__r3f)==null?void 0:x.objects,f,S),s(f.children,f,S)}if(delete f.__r3f,S&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?$0.unstable_scheduleCallback($0.unstable_IdlePriority,E):E()}dl(h)}}function o(h,f,p,g){var y;const b=(y=h.__r3f)==null?void 0:y.parent;if(!b)return;const _=t(f,p,h.__r3f.root);if(h.children){for(const x of h.children)x.__r3f&&n(_,x);h.children=h.children.filter(x=>!x.__r3f)}h.__r3f.objects.forEach(x=>n(_,x)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||a(b,h),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),n(b,_),_.raycast&&_.__r3f.eventCount&&Kh(_).getState().internal.interaction.push(_),[g,g.alternate].forEach(x=>{x!==null&&(x.stateNode=_,x.ref&&(typeof x.ref=="function"?x.ref(_):x.ref.current=_))})}const l=()=>{};return{reconciler:X6({createInstance:t,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,f)=>{if(!f)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,n(p,f))},removeChildFromContainer:(h,f)=>{f&&a(h.getState().scene,f)},insertInContainerBefore:(h,f,p)=>{if(!f||!p)return;const g=h.getState().scene;g.__r3f&&i(g,f,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var f;return!!((f=h==null?void 0:h.__r3f)!=null?f:{}).handlers},prepareUpdate(h,f,p,g){var y;if(((y=h==null?void 0:h.__r3f)!=null?y:{}).primitive&&g.object&&g.object!==h)return[!0];{const{args:_=[],children:x,...M}=g,{args:S=[],children:E,...T}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((I,k)=>I!==S[k]))return[!0];const P=WE(h,M,T,!0);return P.changes.length?[!1,P]:null}},commitUpdate(h,[f,p],g,y,b,_){f?o(h,g,b,_):Cg(h,p)},commitMount(h,f,p,g){var y;const b=(y=h.__r3f)!=null?y:{};h.raycast&&b.handlers&&b.eventCount&&Kh(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>ul(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var f;const{attach:p,parent:g}=(f=h.__r3f)!=null?f:{};p&&g&&dw(g,h,p),h.isObject3D&&(h.visible=!1),dl(h)},unhideInstance(h,f){var p;const{attach:g,parent:y}=(p=h.__r3f)!=null?p:{};g&&y&&Ag(y,h,g),(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0),dl(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():xl.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&cn.fun(performance.now)?performance.now:cn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:cn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:cn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Cg}}var ow,lw;const Tg=r=>"colorSpace"in r||"outputColorSpace"in r,zE=()=>{var r;return(r=Sx.ColorManagement)!=null?r:null},jE=r=>r&&r.isOrthographicCamera,Y6=r=>r&&r.hasOwnProperty("current"),ju=typeof window<"u"&&((ow=window.document)!=null&&ow.createElement||((lw=window.navigator)==null?void 0:lw.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function BE(r){const e=B.useRef(r);return ju(()=>void(e.current=r),[r]),e}function Z6({set:r}){return ju(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}let HE=class extends B.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};HE.getDerivedStateFromError=()=>({error:!0});const VE="__default",cw=new Map,K6=r=>r&&!!r.memoized&&!!r.changes;function GE(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const Ec=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function Kh(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const cn={obj:r=>r===Object(r)&&!cn.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(cn.str(r)||cn.num(r)||cn.boo(r))return r===e;const s=cn.obj(r);if(s&&n==="reference")return r===e;const a=cn.arr(r);if(a&&t==="reference")return r===e;if((a||s)&&r===e)return!0;let o;for(o in r)if(!(o in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(o in i?e:r)if(!cn.equ(r[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:r)if(r[o]!==e[o])return!1;if(cn.und(o)){if(a&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function $6(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function J6(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function ul(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function J0(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,a)=>s[a],r),{target:t,key:i}}else return{target:t,key:e}}const uw=/-\d+$/;function Ag(r,e,t){if(cn.str(t)){if(uw.test(t)){const s=t.replace(uw,""),{target:a,key:o}=J0(r,s);Array.isArray(a[o])||(a[o]=[])}const{target:n,key:i}=J0(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function dw(r,e,t){var n,i;if(cn.str(t)){const{target:s,key:a}=J0(r,t),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function WE(r,{children:e,key:t,ref:n,...i},{children:s,key:a,ref:o,...l}={},d=!1){const h=r.__r3f,f=Object.entries(i),p=[];if(d){const y=Object.keys(l);for(let b=0;b<y.length;b++)i.hasOwnProperty(y[b])||f.unshift([y[b],VE+"remove"])}f.forEach(([y,b])=>{var _;if((_=r.__r3f)!=null&&_.primitive&&y==="object"||cn.equ(b,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,b,!0,[]]);let x=[];y.includes("-")&&(x=y.split("-")),p.push([y,b,!1,x]);for(const M in i){const S=i[M];M.startsWith(`${y}-`)&&p.push([M,S,!1,M.split("-")])}});const g={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(g.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(g.attach=h.memoizedProps.attach),{memoized:g,changes:p}}function Cg(r,e){var t;const n=r.__r3f,i=n==null?void 0:n.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:a,changes:o}=K6(e)?e:WE(r,e),l=n==null?void 0:n.eventCount;r.__r3f&&(r.__r3f.memoizedProps=a);for(let p=0;p<o.length;p++){let[g,y,b,_]=o[p];if(Tg(r)){const E="srgb",T="srgb-linear";g==="encoding"?(g="colorSpace",y=y===3001?E:T):g==="outputEncoding"&&(g="outputColorSpace",y=y===3001?E:T)}let x=r,M=x[g];if(_.length&&(M=_.reduce((S,E)=>S[E],r),!(M&&M.set))){const[S,...E]=_.reverse();x=E.reverse().reduce((T,P)=>T[P],r),g=S}if(y===VE+"remove")if(x.constructor){let S=cw.get(x.constructor);S||(S=new x.constructor,cw.set(x.constructor,S)),y=S[g]}else y=0;if(b&&n)y?n.handlers[g]=y:delete n.handlers[g],n.eventCount=Object.keys(n.handlers).length;else if(M&&M.set&&(M.copy||M instanceof no)){if(Array.isArray(y))M.fromArray?M.fromArray(y):M.set(...y);else if(M.copy&&y&&y.constructor&&M.constructor===y.constructor)M.copy(y);else if(y!==void 0){var d;const S=(d=M)==null?void 0:d.isColor;!S&&M.setScalar?M.setScalar(y):M instanceof no&&y instanceof no?M.mask=y.mask:M.set(y),!zE()&&s&&!s.linear&&S&&M.convertSRGBToLinear()}}else{var h;if(x[g]=y,(h=x[g])!=null&&h.isTexture&&x[g].format===Hn&&x[g].type===Zi&&s){const S=x[g];Tg(S)&&Tg(s.gl)?S.colorSpace=s.gl.outputColorSpace:S.encoding=s.gl.outputEncoding}}dl(r)}if(n&&n.parent&&r.raycast&&l!==n.eventCount){const p=Kh(r).getState().internal,g=p.interaction.indexOf(r);g>-1&&p.interaction.splice(g,1),n.eventCount&&p.interaction.push(r)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(t=r.__r3f)!=null&&t.parent&&Q0(r),r}function dl(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function Q0(r){r.onUpdate==null||r.onUpdate(r)}function XE(r,e){r.manual||(jE(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function kh(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function Q6(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return xl.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return xl.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return xl.ContinuousEventPriority;default:return xl.DefaultEventPriority}}function qE(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function eF(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{qE(t.capturedMap,e,n,i)})}function tF(r){function e(l){const{internal:d}=r.getState(),h=l.offsetX-d.initialClick[0],f=l.offsetY-d.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function t(l){return l.filter(d=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=d.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function n(l,d){const h=r.getState(),f=new Set,p=[],g=d?d(h.internal.interaction):h.internal.interaction;for(let x=0;x<g.length;x++){const M=Ec(g[x]);M&&(M.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(x){const M=Ec(x);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var S;M.events.compute==null||M.events.compute(l,M,(S=M.previousRoot)==null?void 0:S.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(x,!0):[]}let b=g.flatMap(y).sort((x,M)=>{const S=Ec(x.object),E=Ec(M.object);return!S||!E?x.distance-M.distance:E.events.priority-S.events.priority||x.distance-M.distance}).filter(x=>{const M=kh(x);return f.has(M)?!1:(f.add(M),!0)});h.events.filter&&(b=h.events.filter(b,h));for(const x of b){let M=x.object;for(;M;){var _;(_=M.__r3f)!=null&&_.eventCount&&p.push({...x,eventObject:M}),M=M.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let x of h.internal.capturedMap.get(l.pointerId).values())f.has(kh(x.intersection))||p.push(x.intersection);return p}function i(l,d,h,f){const p=r.getState();if(l.length){const g={stopped:!1};for(const y of l){const b=Ec(y.object)||p,{raycaster:_,pointer:x,camera:M,internal:S}=b,E=new j(x.x,x.y,0).unproject(M),T=L=>{var F,W;return(F=(W=S.capturedMap.get(L))==null?void 0:W.has(y.eventObject))!=null?F:!1},P=L=>{const F={intersection:y,target:d.target};S.capturedMap.has(L)?S.capturedMap.get(L).set(y.eventObject,F):S.capturedMap.set(L,new Map([[y.eventObject,F]])),d.target.setPointerCapture(L)},I=L=>{const F=S.capturedMap.get(L);F&&qE(S.capturedMap,y.eventObject,F,L)};let k={};for(let L in d){let F=d[L];typeof F!="function"&&(k[L]=F)}let R={...y,...k,pointer:x,intersections:l,stopped:g.stopped,delta:h,unprojectedPoint:E,ray:_.ray,camera:M,stopPropagation(){const L="pointerId"in d&&S.capturedMap.get(d.pointerId);if((!L||L.has(y.eventObject))&&(R.stopped=g.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(F=>F.eventObject===y.eventObject))){const F=l.slice(0,l.indexOf(y));s([...F,y])}},target:{hasPointerCapture:T,setPointerCapture:P,releasePointerCapture:I},currentTarget:{hasPointerCapture:T,setPointerCapture:P,releasePointerCapture:I},nativeEvent:d};if(f(R),g.stopped===!0)break}}return l}function s(l){const{internal:d}=r.getState();for(const h of d.hovered.values())if(!l.length||!l.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const p=h.eventObject.__r3f,g=p==null?void 0:p.handlers;if(d.hovered.delete(kh(h)),p!=null&&p.eventCount){const y={...h,intersections:l};g.onPointerOut==null||g.onPointerOut(y),g.onPointerLeave==null||g.onPointerLeave(y)}}}function a(l,d){for(let h=0;h<d.length;h++){const f=d[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:h}=r.getState();"pointerId"in d&&h.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(d.pointerId)&&(h.capturedMap.delete(d.pointerId),s([]))})}}return function(h){const{onPointerMissed:f,internal:p}=r.getState();p.lastEvent.current=h;const g=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=n(h,g?t:void 0),x=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=_.map(S=>S.eventObject)),y&&!_.length&&x<=2&&(a(h,p.interaction),f&&f(h)),g&&s(_);function M(S){const E=S.eventObject,T=E.__r3f,P=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(g){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const I=kh(S),k=p.hovered.get(I);k?k.stopped&&S.stopPropagation():(p.hovered.set(I,S),P.onPointerOver==null||P.onPointerOver(S),P.onPointerEnter==null||P.onPointerEnter(S))}P.onPointerMove==null||P.onPointerMove(S)}else{const I=P[l];I?(!y||p.initialHits.includes(E))&&(a(h,p.interaction.filter(k=>!p.initialHits.includes(k))),I(S)):y&&p.initialHits.includes(E)&&a(h,p.interaction.filter(k=>!p.initialHits.includes(k)))}}i(_,h,x,M)}}return{handlePointer:o}}const nF=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],YE=r=>!!(r!=null&&r.render),Ex=B.createContext(null),iF=(r,e)=>{const t=PE((o,l)=>{const d=new j,h=new j,f=new j;function p(x=l().camera,M=h,S=l().size){const{width:E,height:T,top:P,left:I}=S,k=E/T;M.isVector3?f.copy(M):f.set(...M);const R=x.getWorldPosition(d).distanceTo(f);if(jE(x))return{width:E/x.zoom,height:T/x.zoom,top:P,left:I,factor:1,distance:R,aspect:k};{const L=x.fov*Math.PI/180,F=2*Math.tan(L/2)*R,W=F*(E/T);return{width:W,height:F,top:P,left:I,factor:E/W,distance:R,aspect:k}}}let g;const y=x=>o(M=>({performance:{...M.performance,current:x}})),b=new Se;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>r(l(),x),advance:(x,M)=>e(x,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new xx,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();g&&clearTimeout(g),x.performance.current!==x.performance.min&&y(x.performance.min),g=setTimeout(()=>y(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:x=>o(M=>({...M,events:{...M.events,...x}})),setSize:(x,M,S,E,T)=>{const P=l().camera,I={width:x,height:M,top:E||0,left:T||0,updateStyle:S};o(k=>({size:I,viewport:{...k.viewport,...p(P,h,I)}}))},setDpr:x=>o(M=>{const S=GE(x);return{viewport:{...M.viewport,dpr:S,initialDpr:M.viewport.initialDpr||S}}}),setFrameloop:(x="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,x!=="never"&&(M.start(),M.elapsedTime=0),o(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:B.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,M,S)=>{const E=l().internal;return E.priority=E.priority+(M>0?1:0),E.subscribers.push({ref:x,priority:M,store:S}),E.subscribers=E.subscribers.sort((T,P)=>T.priority-P.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(M>0?1:0),T.subscribers=T.subscribers.filter(P=>P.ref!==x))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:d,gl:h,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||d.dpr!==s){var p;i=l,s=d.dpr,XE(o,l),h.setPixelRatio(d.dpr);const g=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,g)}o!==a&&(a=o,f(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>r(o)),t};let Dh,rF=new Set,sF=new Set,aF=new Set;function Rg(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function Tc(r,e){switch(r){case"before":return Rg(rF,e);case"after":return Rg(sF,e);case"tail":return Rg(aF,e)}}let Pg,Ng;function Ig(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),Pg=e.internal.subscribers,Dh=0;Dh<Pg.length;Dh++)Ng=Pg[Dh],Ng.ref.current(Ng.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function oF(r){let e=!1,t=!1,n,i,s;function a(d){i=requestAnimationFrame(a),e=!0,n=0,Tc("before",d),t=!0;for(const f of r.values()){var h;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(n+=Ig(d,s))}if(t=!1,Tc("after",d),n===0)return Tc("tail",d),e=!1,cancelAnimationFrame(i)}function o(d,h=1){var f;if(!d)return r.forEach(p=>o(p.store.getState(),h));(f=d.gl.xr)!=null&&f.isPresenting||!d.internal.active||d.frameloop==="never"||(h>1?d.internal.frames=Math.min(60,d.internal.frames+h):t?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function l(d,h=!0,f,p){if(h&&Tc("before",d),f)Ig(d,f,p);else for(const g of r.values())Ig(d,g.store.getState());h&&Tc("after",d)}return{loop:a,invalidate:o,advance:l}}function Tx(){const r=B.useContext(Ex);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Vi(r=t=>t,e){return Tx()(r,e)}function Gl(r,e=0){const t=Tx(),n=t.getState().internal.subscribe,i=BE(r);return ju(()=>n(i,e,t),[e,n,t]),null}const hw=new WeakMap;function ZE(r,e){return function(t,...n){let i=hw.get(t);return i||(i=new t,hw.set(t,i)),r&&r(i),Promise.all(n.map(s=>new Promise((a,o)=>i.load(s,l=>{l.scene&&Object.assign(l,$6(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Ol(r,e,t,n){const i=Array.isArray(e)?e:[e],s=LE(ZE(t,n),[r,...i],{equal:cn.equ});return Array.isArray(e)?s:s[0]}Ol.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return kE(ZE(t),[r,...n])};Ol.clear=function(r,e){const t=Array.isArray(e)?e:[e];return DE([r,...t])};const Ul=new Map,{invalidate:fw,advance:pw}=oF(Ul),{reconciler:xu,applyProps:Ys}=q6(Ul,Q6),cl={objects:"shallow",strict:!1},lF=(r,e)=>{const t=typeof r=="function"?r(e):r;return YE(t)?t:new Df({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function cF(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:a,updateStyle:o=t}=e;return{width:n,height:i,top:s,left:a,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:a}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function uF(r){const e=Ul.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||iF(fw,pw),a=t||xu.createContainer(s,xl.ConcurrentRoot,null,!1,null,"",i,null);e||Ul.set(r,{fiber:a,store:s});let o,l=!1,d;return{configure(h={}){let{gl:f,size:p,scene:g,events:y,onCreated:b,shadows:_=!1,linear:x=!1,flat:M=!1,legacy:S=!1,orthographic:E=!1,frameloop:T="always",dpr:P=[1,2],performance:I,raycaster:k,camera:R,onPointerMissed:L}=h,F=s.getState(),W=F.gl;F.gl||F.set({gl:W=lF(f,r)});let J=F.raycaster;J||F.set({raycaster:J=new wx});const{params:z,...Q}=k||{};if(cn.equ(Q,J,cl)||Ys(J,{...Q}),cn.equ(z,J.params,cl)||Ys(J,{params:{...J.params,...z}}),!F.camera||F.camera===d&&!cn.equ(d,R,cl)){d=R;const ee=R instanceof Nu,Z=ee?R:E?new Ss(0,0,0,0,.1,1e3):new Ln(75,0,.1,1e3);ee||(Z.position.z=5,R&&(Ys(Z,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(Z.manual=!0,Z.updateProjectionMatrix())),!F.camera&&!(R!=null&&R.rotation)&&Z.lookAt(0,0,0)),F.set({camera:Z}),J.camera=Z}if(!F.scene){let ee;g!=null&&g.isScene?ee=g:(ee=new Lu,g&&Ys(ee,g)),F.set({scene:ul(ee)})}if(!F.xr){var ne;const ee=(pe,Ee)=>{const Le=s.getState();Le.frameloop!=="never"&&pw(pe,!0,Le,Ee)},Z=()=>{const pe=s.getState();pe.gl.xr.enabled=pe.gl.xr.isPresenting,pe.gl.xr.setAnimationLoop(pe.gl.xr.isPresenting?ee:null),pe.gl.xr.isPresenting||fw(pe)},re={connect(){const pe=s.getState().gl;pe.xr.addEventListener("sessionstart",Z),pe.xr.addEventListener("sessionend",Z)},disconnect(){const pe=s.getState().gl;pe.xr.removeEventListener("sessionstart",Z),pe.xr.removeEventListener("sessionend",Z)}};typeof((ne=W.xr)==null?void 0:ne.addEventListener)=="function"&&re.connect(),F.set({xr:re})}if(W.shadowMap){const ee=W.shadowMap.enabled,Z=W.shadowMap.type;if(W.shadowMap.enabled=!!_,cn.boo(_))W.shadowMap.type=Fc;else if(cn.str(_)){var oe;const re={basic:E2,percentage:Af,soft:Fc,variance:wr};W.shadowMap.type=(oe=re[_])!=null?oe:Fc}else cn.obj(_)&&Object.assign(W.shadowMap,_);(ee!==W.shadowMap.enabled||Z!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}const te=zE();te&&("enabled"in te?te.enabled=!S:"legacyMode"in te&&(te.legacyMode=S)),l||Ys(W,{outputEncoding:x?3e3:3001,toneMapping:M?qr:Dv}),F.legacy!==S&&F.set(()=>({legacy:S})),F.linear!==x&&F.set(()=>({linear:x})),F.flat!==M&&F.set(()=>({flat:M})),f&&!cn.fun(f)&&!YE(f)&&!cn.equ(f,W,cl)&&Ys(W,f),y&&!F.events.handlers&&F.set({events:y(s)});const ie=cF(r,p);return cn.equ(ie,F.size,cl)||F.setSize(ie.width,ie.height,ie.updateStyle,ie.top,ie.left),P&&F.viewport.dpr!==GE(P)&&F.setDpr(P),F.frameloop!==T&&F.setFrameloop(T),F.onPointerMissed||F.set({onPointerMissed:L}),I&&!cn.equ(I,F.performance,cl)&&F.set(ee=>({performance:{...ee.performance,...I}})),o=b,l=!0,this},render(h){return l||this.configure(),xu.updateContainer(m.jsx(dF,{store:s,children:h,onCreated:o,rootElement:r}),a,null,()=>{}),s},unmount(){KE(r)}}}function dF({store:r,children:e,onCreated:t,rootElement:n}){return ju(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),m.jsx(Ex.Provider,{value:r,children:e})}function KE(r,e){const t=Ul.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),xu.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,a,o,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),J6(i),Ul.delete(r)}catch{}},500)})}}function hF(r,e,t){return m.jsx(fF,{children:r,container:e,state:t},e.uuid)}function fF({state:r={},children:e,container:t}){const{events:n,size:i,...s}=r,a=Tx(),[o]=B.useState(()=>new wx),[l]=B.useState(()=>new Se),d=B.useCallback((f,p)=>{const g={...f};Object.keys(f).forEach(b=>{(nF.includes(b)||f[b]!==p[b]&&p[b])&&delete g[b]});let y;if(p&&i){const b=p.camera;y=f.viewport.getCurrentViewport(b,new j,i),b!==f.camera&&XE(b,i)}return{...g,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...f.events,...p==null?void 0:p.events,...n},size:{...f.size,...i},viewport:{...f.viewport,...y},...s}},[r]),[h]=B.useState(()=>{const f=a.getState();return PE((g,y)=>({...f,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...f.events,...n},size:{...f.size,...i},...s,set:g,get:y,setEvents:b=>g(_=>({..._,events:{..._.events,...b}}))}))});return B.useEffect(()=>{const f=a.subscribe(p=>h.setState(g=>d(p,g)));return()=>{f()}},[d]),B.useEffect(()=>{h.setState(f=>d(a.getState(),f))},[d]),B.useEffect(()=>()=>{h.destroy()},[]),m.jsx(m.Fragment,{children:xu.createPortal(m.jsx(Ex.Provider,{value:h,children:e}),h,null)})}xu.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:B.version});const Lg={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pF(r){const{handlePointer:e}=tF(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(Lg).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(a=>({events:{...a.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([a,o])=>{const[l,d]=Lg[a];t.addEventListener(l,o,{passive:d})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,a])=>{if(n&&n.connected instanceof HTMLElement){const[o]=Lg[s];n.connected.removeEventListener(o,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function mw(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function mF({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=B.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=B.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=r?typeof r=="number"?r:r.scroll:null,d=r?typeof r=="number"?r:r.resize:null,h=B.useRef(!1);B.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,p,g]=B.useMemo(()=>{const x=()=>{if(!o.current.element)return;const{left:M,top:S,width:E,height:T,bottom:P,right:I,x:k,y:R}=o.current.element.getBoundingClientRect(),L={left:M,top:S,width:E,height:T,bottom:P,right:I,x:k,y:R};o.current.element instanceof HTMLElement&&n&&(L.height=o.current.element.offsetHeight,L.width=o.current.element.offsetWidth),Object.freeze(L),h.current&&!yF(o.current.lastBounds,L)&&a(o.current.lastBounds=L)};return[x,d?mw(x,d):x,l?mw(x,l):x]},[a,n,l,d]);function y(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",g,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function b(){o.current.element&&(o.current.resizeObserver=new i(g),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(x=>x.addEventListener("scroll",g,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const _=x=>{!x||x===o.current.element||(y(),o.current.element=x,o.current.scrollContainers=$E(x),b())};return vF(g,!!e),gF(p),B.useEffect(()=>{y(),b()},[e,g,p]),B.useEffect(()=>y,[]),[_,s,f]}function gF(r){B.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function vF(r,e){B.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function $E(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...$E(r.parentElement)]}const xF=["x","y","top","bottom","left","right","width","height"],yF=(r,e)=>xF.every(t=>r[t]===e[t]);var _F=Object.defineProperty,bF=Object.defineProperties,wF=Object.getOwnPropertyDescriptors,gw=Object.getOwnPropertySymbols,SF=Object.prototype.hasOwnProperty,MF=Object.prototype.propertyIsEnumerable,vw=(r,e,t)=>e in r?_F(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xw=(r,e)=>{for(var t in e||(e={}))SF.call(e,t)&&vw(r,t,e[t]);if(gw)for(var t of gw(e))MF.call(e,t)&&vw(r,t,e[t]);return r},EF=(r,e)=>bF(r,wF(e)),yw,_w;typeof window<"u"&&((yw=window.document)!=null&&yw.createElement||((_w=window.navigator)==null?void 0:_w.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function JE(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=JE(n,e,t);if(i)return i;n=n.sibling}}function QE(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const bw=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=bw;return}return bw.apply(this,arguments)};const Ax=QE(B.createContext(null));class eT extends B.Component{render(){return B.createElement(Ax.Provider,{value:this._reactInternals},this.props.children)}}function TF(){const r=B.useContext(Ax);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=B.useId();return B.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const i=JE(n,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[r,e])}function AF(){const r=TF(),[e]=B.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==Ax&&!e.has(i)&&e.set(i,B.useContext(QE(i)))}t=t.return}return e}function CF(){const r=AF();return B.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>B.createElement(e,null,B.createElement(t.Provider,EF(xw({},n),{value:r.get(t)}))),e=>B.createElement(eT,xw({},e))),[r])}const RF=B.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:a=pF,eventSource:o,eventPrefix:l,shadows:d,linear:h,flat:f,legacy:p,orthographic:g,frameloop:y,dpr:b,performance:_,raycaster:x,camera:M,scene:S,onPointerMissed:E,onCreated:T,...P},I){B.useMemo(()=>Mx(j6),[]);const k=CF(),[R,L]=mF({scroll:!0,debounce:{scroll:50,resize:0},...n}),F=B.useRef(null),W=B.useRef(null);B.useImperativeHandle(I,()=>F.current);const J=BE(E),[z,Q]=B.useState(!1),[ne,oe]=B.useState(!1);if(z)throw z;if(ne)throw ne;const te=B.useRef(null);ju(()=>{const ee=F.current;L.width>0&&L.height>0&&ee&&(te.current||(te.current=uF(ee)),te.current.configure({gl:s,events:a,shadows:d,linear:h,flat:f,legacy:p,orthographic:g,frameloop:y,dpr:b,performance:_,raycaster:x,camera:M,scene:S,size:L,onPointerMissed:(...Z)=>J.current==null?void 0:J.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(o?Y6(o)?o.current:o:W.current),l&&Z.setEvents({compute:(re,pe)=>{const Ee=re[l+"X"],Le=re[l+"Y"];pe.pointer.set(Ee/pe.size.width*2-1,-(Le/pe.size.height)*2+1),pe.raycaster.setFromCamera(pe.pointer,pe.camera)}}),T==null||T(Z)}}),te.current.render(m.jsx(k,{children:m.jsx(HE,{set:oe,children:m.jsx(B.Suspense,{fallback:m.jsx(Z6,{set:Q}),children:e??null})})})))}),B.useEffect(()=>{const ee=F.current;if(ee)return()=>KE(ee)},[]);const ie=o?"none":"auto";return m.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ie,...i},...P,children:m.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:m.jsx("canvas",{ref:F,style:{display:"block"},children:t})})})}),PF=B.forwardRef(function(e,t){return m.jsx(eT,{children:m.jsx(RF,{...e,ref:t})})});function yu(){return yu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yu.apply(null,arguments)}const tT=parseInt(zl.replace(/\D+/g,""));function NF(r,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=r.getIndex(),i=r.getAttribute("position"),s=n?n.count:i.count;let a=0;const o=Object.keys(r.attributes),l={},d={},h=[],f=["getX","getY","getZ","getW"];for(let b=0,_=o.length;b<_;b++){const x=o[b];l[x]=[];const M=r.morphAttributes[x];M&&(d[x]=new Array(M.length).fill(0).map(()=>[]))}const p=Math.log10(1/e),g=Math.pow(10,p);for(let b=0;b<s;b++){const _=n?n.getX(b):b;let x="";for(let M=0,S=o.length;M<S;M++){const E=o[M],T=r.getAttribute(E),P=T.itemSize;for(let I=0;I<P;I++)x+=`${~~(T[f[I]](_)*g)},`}if(x in t)h.push(t[x]);else{for(let M=0,S=o.length;M<S;M++){const E=o[M],T=r.getAttribute(E),P=r.morphAttributes[E],I=T.itemSize,k=l[E],R=d[E];for(let L=0;L<I;L++){const F=f[L];if(k.push(T[F](_)),P)for(let W=0,J=P.length;W<J;W++)R[W].push(P[W][F](_))}}t[x]=a,h.push(a),a++}}const y=r.clone();for(let b=0,_=o.length;b<_;b++){const x=o[b],M=r.getAttribute(x),S=new M.array.constructor(l[x]),E=new en(S,M.itemSize,M.normalized);if(y.setAttribute(x,E),x in d)for(let T=0;T<d[x].length;T++){const P=r.morphAttributes[x][T],I=new P.array.constructor(d[x][T]),k=new en(I,P.itemSize,P.normalized);y.morphAttributes[x][T]=k}}return y.setIndex(h),y}var dr=Uint8Array,ea=Uint16Array,ev=Uint32Array,nT=new dr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iT=new dr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),IF=new dr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rT=function(r,e){for(var t=new ea(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new ev(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},sT=rT(nT,2),aT=sT[0],LF=sT[1];aT[28]=258,LF[258]=28;var kF=rT(iT,0),DF=kF[0],tv=new ea(32768);for(var hn=0;hn<32768;++hn){var qs=(hn&43690)>>>1|(hn&21845)<<1;qs=(qs&52428)>>>2|(qs&13107)<<2,qs=(qs&61680)>>>4|(qs&3855)<<4,tv[hn]=((qs&65280)>>>8|(qs&255)<<8)>>>1}var Gc=function(r,e,t){for(var n=r.length,i=0,s=new ea(e);i<n;++i)++s[r[i]-1];var a=new ea(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new ea(1<<e);var l=15-e;for(i=0;i<n;++i)if(r[i])for(var d=i<<4|r[i],h=e-r[i],f=a[r[i]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)o[tv[f]>>>l]=d}else for(o=new ea(n),i=0;i<n;++i)r[i]&&(o[i]=tv[a[r[i]-1]++]>>>15-r[i]);return o},Bu=new dr(288);for(var hn=0;hn<144;++hn)Bu[hn]=8;for(var hn=144;hn<256;++hn)Bu[hn]=9;for(var hn=256;hn<280;++hn)Bu[hn]=7;for(var hn=280;hn<288;++hn)Bu[hn]=8;var oT=new dr(32);for(var hn=0;hn<32;++hn)oT[hn]=5;var OF=Gc(Bu,9,1),UF=Gc(oT,5,1),kg=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},br=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},Dg=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},FF=function(r){return(r/8|0)+(r&7&&1)},zF=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof ea?ea:r instanceof ev?ev:dr)(t-e);return n.set(r.subarray(e,t)),n},jF=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new dr(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new dr(n*3));var a=function(ke){var je=e.length;if(ke>je){var Qe=new dr(Math.max(je*2,ke));Qe.set(e),e=Qe}},o=t.f||0,l=t.p||0,d=t.b||0,h=t.l,f=t.d,p=t.m,g=t.n,y=n*8;do{if(!h){t.f=o=br(r,l,1);var b=br(r,l+1,3);if(l+=3,b)if(b==1)h=OF,f=UF,p=9,g=5;else if(b==2){var S=br(r,l,31)+257,E=br(r,l+10,15)+4,T=S+br(r,l+5,31)+1;l+=14;for(var P=new dr(T),I=new dr(19),k=0;k<E;++k)I[IF[k]]=br(r,l+k*3,7);l+=E*3;for(var R=kg(I),L=(1<<R)-1,F=Gc(I,R,1),k=0;k<T;){var W=F[br(r,l,L)];l+=W&15;var _=W>>>4;if(_<16)P[k++]=_;else{var J=0,z=0;for(_==16?(z=3+br(r,l,3),l+=2,J=P[k-1]):_==17?(z=3+br(r,l,7),l+=3):_==18&&(z=11+br(r,l,127),l+=7);z--;)P[k++]=J}}var Q=P.subarray(0,S),ne=P.subarray(S);p=kg(Q),g=kg(ne),h=Gc(Q,p,1),f=Gc(ne,g,1)}else throw"invalid block type";else{var _=FF(l)+4,x=r[_-4]|r[_-3]<<8,M=_+x;if(M>n){if(s)throw"unexpected EOF";break}i&&a(d+x),e.set(r.subarray(_,M),d),t.b=d+=x,t.p=l=M*8;continue}if(l>y){if(s)throw"unexpected EOF";break}}i&&a(d+131072);for(var oe=(1<<p)-1,te=(1<<g)-1,ie=l;;ie=l){var J=h[Dg(r,l)&oe],ee=J>>>4;if(l+=J&15,l>y){if(s)throw"unexpected EOF";break}if(!J)throw"invalid length/literal";if(ee<256)e[d++]=ee;else if(ee==256){ie=l,h=null;break}else{var Z=ee-254;if(ee>264){var k=ee-257,re=nT[k];Z=br(r,l,(1<<re)-1)+aT[k],l+=re}var pe=f[Dg(r,l)&te],Ee=pe>>>4;if(!pe)throw"invalid distance";l+=pe&15;var ne=DF[Ee];if(Ee>3){var re=iT[Ee];ne+=Dg(r,l)&(1<<re)-1,l+=re}if(l>y){if(s)throw"unexpected EOF";break}i&&a(d+131072);for(var Le=d+Z;d<Le;d+=4)e[d]=e[d-ne],e[d+1]=e[d+1-ne],e[d+2]=e[d+2-ne],e[d+3]=e[d+3-ne];d=Le}}t.l=h,t.p=ie,t.b=d,h&&(o=1,t.m=p,t.d=f,t.n=g)}while(!o);return d==e.length?e:zF(e,0,d)},BF=new dr(0),HF=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Oh(r,e){return jF((HF(r),r.subarray(2,-4)),e)}var VF=typeof TextDecoder<"u"&&new TextDecoder,GF=0;try{VF.decode(BF,{stream:!0}),GF=1}catch{}const WF=r=>r&&r.isCubeTexture;class XF extends jn{constructor(e,t){var n,i;const s=WF(e),o=((i=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(o)),d=Math.pow(2,l),h=3*Math.max(d,16*7),f=4*d,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],g=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,y=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${tT>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,b={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},_=new Ou(1,16),x=new Oi({uniforms:b,fragmentShader:y,vertexShader:g,side:Mr});super(_,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var qF=Object.defineProperty,YF=(r,e,t)=>e in r?qF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ZF=(r,e,t)=>(YF(r,e+"",t),t);class KF{constructor(){ZF(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}var $F=Object.defineProperty,JF=(r,e,t)=>e in r?$F(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vt=(r,e,t)=>(JF(r,typeof e!="symbol"?e+"":e,t),t);const Uh=new go,ww=new _s,QF=Math.cos(70*(Math.PI/180)),Sw=(r,e)=>(r%e+e)%e;let ez=class extends KF{constructor(e,t){super(),vt(this,"object"),vt(this,"domElement"),vt(this,"enabled",!0),vt(this,"target",new j),vt(this,"minDistance",0),vt(this,"maxDistance",1/0),vt(this,"minZoom",0),vt(this,"maxZoom",1/0),vt(this,"minPolarAngle",0),vt(this,"maxPolarAngle",Math.PI),vt(this,"minAzimuthAngle",-1/0),vt(this,"maxAzimuthAngle",1/0),vt(this,"enableDamping",!1),vt(this,"dampingFactor",.05),vt(this,"enableZoom",!0),vt(this,"zoomSpeed",1),vt(this,"enableRotate",!0),vt(this,"rotateSpeed",1),vt(this,"enablePan",!0),vt(this,"panSpeed",1),vt(this,"screenSpacePanning",!0),vt(this,"keyPanSpeed",7),vt(this,"zoomToCursor",!1),vt(this,"autoRotate",!1),vt(this,"autoRotateSpeed",2),vt(this,"reverseOrbit",!1),vt(this,"reverseHorizontalOrbit",!1),vt(this,"reverseVerticalOrbit",!1),vt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),vt(this,"mouseButtons",{LEFT:Fa.ROTATE,MIDDLE:Fa.DOLLY,RIGHT:Fa.PAN}),vt(this,"touches",{ONE:za.ROTATE,TWO:za.DOLLY_PAN}),vt(this,"target0"),vt(this,"position0"),vt(this,"zoom0"),vt(this,"_domElementKeyEvents",null),vt(this,"getPolarAngle"),vt(this,"getAzimuthalAngle"),vt(this,"setPolarAngle"),vt(this,"setAzimuthalAngle"),vt(this,"getDistance"),vt(this,"getZoomScale"),vt(this,"listenToKeyEvents"),vt(this,"stopListenToKeyEvents"),vt(this,"saveState"),vt(this,"reset"),vt(this,"update"),vt(this,"connect"),vt(this,"dispose"),vt(this,"dollyIn"),vt(this,"dollyOut"),vt(this,"getScale"),vt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=$=>{let fe=Sw($,2*Math.PI),Me=h.phi;Me<0&&(Me+=2*Math.PI),fe<0&&(fe+=2*Math.PI);let q=Math.abs(fe-Me);2*Math.PI-q<q&&(fe<Me?fe+=2*Math.PI:Me+=2*Math.PI),f.phi=fe-Me,n.update()},this.setAzimuthalAngle=$=>{let fe=Sw($,2*Math.PI),Me=h.theta;Me<0&&(Me+=2*Math.PI),fe<0&&(fe+=2*Math.PI);let q=Math.abs(fe-Me);2*Math.PI-q<q&&(fe<Me?fe+=2*Math.PI:Me+=2*Math.PI),f.theta=fe-Me,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=$=>{$.addEventListener("keydown",De),this._domElementKeyEvents=$},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",De),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=o.NONE},this.update=(()=>{const $=new j,fe=new j(0,1,0),Me=new fi().setFromUnitVectors(e.up,fe),q=Me.clone().invert(),le=new j,Ie=new fi,Ve=2*Math.PI;return function(){const Pe=n.object.position;Me.setFromUnitVectors(e.up,fe),q.copy(Me).invert(),$.copy(Pe).sub(n.target),$.applyQuaternion(Me),h.setFromVector3($),n.autoRotate&&l===o.NONE&&z(W()),n.enableDamping?(h.theta+=f.theta*n.dampingFactor,h.phi+=f.phi*n.dampingFactor):(h.theta+=f.theta,h.phi+=f.phi);let tt=n.minAzimuthAngle,ht=n.maxAzimuthAngle;isFinite(tt)&&isFinite(ht)&&(tt<-Math.PI?tt+=Ve:tt>Math.PI&&(tt-=Ve),ht<-Math.PI?ht+=Ve:ht>Math.PI&&(ht-=Ve),tt<=ht?h.theta=Math.max(tt,Math.min(ht,h.theta)):h.theta=h.theta>(tt+ht)/2?Math.max(tt,h.theta):Math.min(ht,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(g,n.dampingFactor):n.target.add(g),n.zoomToCursor&&R||n.object.isOrthographicCamera?h.radius=pe(h.radius):h.radius=pe(h.radius*p),$.setFromSpherical(h),$.applyQuaternion(q),Pe.copy(n.target).add($),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,g.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),g.set(0,0,0));let on=!1;if(n.zoomToCursor&&R){let zt=null;if(n.object instanceof Ln&&n.object.isPerspectiveCamera){const An=$.length();zt=pe(An*p);const fn=An-zt;n.object.position.addScaledVector(I,fn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const An=new j(k.x,k.y,0);An.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/p)),n.object.updateProjectionMatrix(),on=!0;const fn=new j(k.x,k.y,0);fn.unproject(n.object),n.object.position.sub(fn).add(An),n.object.updateMatrixWorld(),zt=$.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;zt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(zt).add(n.object.position):(Uh.origin.copy(n.object.position),Uh.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Uh.direction))<QF?e.lookAt(n.target):(ww.setFromNormalAndCoplanarPoint(n.object.up,n.target),Uh.intersectPlane(ww,n.target))))}else n.object instanceof Ss&&n.object.isOrthographicCamera&&(on=p!==1,on&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/p)),n.object.updateProjectionMatrix()));return p=1,R=!1,on||le.distanceToSquared(n.object.position)>d||8*(1-Ie.dot(n.object.quaternion))>d?(n.dispatchEvent(i),le.copy(n.object.position),Ie.copy(n.object.quaternion),on=!1,!0):!1}})(),this.connect=$=>{n.domElement=$,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",qe),n.domElement.addEventListener("pointerdown",Ut),n.domElement.addEventListener("pointercancel",U),n.domElement.addEventListener("wheel",Ne)},this.dispose=()=>{var $,fe,Me,q,le,Ie;n.domElement&&(n.domElement.style.touchAction="auto"),($=n.domElement)==null||$.removeEventListener("contextmenu",qe),(fe=n.domElement)==null||fe.removeEventListener("pointerdown",Ut),(Me=n.domElement)==null||Me.removeEventListener("pointercancel",U),(q=n.domElement)==null||q.removeEventListener("wheel",Ne),(le=n.domElement)==null||le.ownerDocument.removeEventListener("pointermove",V),(Ie=n.domElement)==null||Ie.ownerDocument.removeEventListener("pointerup",U),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",De)};const n=this,i={type:"change"},s={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const d=1e-6,h=new ff,f=new ff;let p=1;const g=new j,y=new Se,b=new Se,_=new Se,x=new Se,M=new Se,S=new Se,E=new Se,T=new Se,P=new Se,I=new j,k=new Se;let R=!1;const L=[],F={};function W(){return 2*Math.PI/60/60*n.autoRotateSpeed}function J(){return Math.pow(.95,n.zoomSpeed)}function z($){n.reverseOrbit||n.reverseHorizontalOrbit?f.theta+=$:f.theta-=$}function Q($){n.reverseOrbit||n.reverseVerticalOrbit?f.phi+=$:f.phi-=$}const ne=(()=>{const $=new j;return function(Me,q){$.setFromMatrixColumn(q,0),$.multiplyScalar(-Me),g.add($)}})(),oe=(()=>{const $=new j;return function(Me,q){n.screenSpacePanning===!0?$.setFromMatrixColumn(q,1):($.setFromMatrixColumn(q,0),$.crossVectors(n.object.up,$)),$.multiplyScalar(Me),g.add($)}})(),te=(()=>{const $=new j;return function(Me,q){const le=n.domElement;if(le&&n.object instanceof Ln&&n.object.isPerspectiveCamera){const Ie=n.object.position;$.copy(Ie).sub(n.target);let Ve=$.length();Ve*=Math.tan(n.object.fov/2*Math.PI/180),ne(2*Me*Ve/le.clientHeight,n.object.matrix),oe(2*q*Ve/le.clientHeight,n.object.matrix)}else le&&n.object instanceof Ss&&n.object.isOrthographicCamera?(ne(Me*(n.object.right-n.object.left)/n.object.zoom/le.clientWidth,n.object.matrix),oe(q*(n.object.top-n.object.bottom)/n.object.zoom/le.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ie($){n.object instanceof Ln&&n.object.isPerspectiveCamera||n.object instanceof Ss&&n.object.isOrthographicCamera?p=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ee($){ie(p/$)}function Z($){ie(p*$)}function re($){if(!n.zoomToCursor||!n.domElement)return;R=!0;const fe=n.domElement.getBoundingClientRect(),Me=$.clientX-fe.left,q=$.clientY-fe.top,le=fe.width,Ie=fe.height;k.x=Me/le*2-1,k.y=-(q/Ie)*2+1,I.set(k.x,k.y,1).unproject(n.object).sub(n.object.position).normalize()}function pe($){return Math.max(n.minDistance,Math.min(n.maxDistance,$))}function Ee($){y.set($.clientX,$.clientY)}function Le($){re($),E.set($.clientX,$.clientY)}function ke($){x.set($.clientX,$.clientY)}function je($){b.set($.clientX,$.clientY),_.subVectors(b,y).multiplyScalar(n.rotateSpeed);const fe=n.domElement;fe&&(z(2*Math.PI*_.x/fe.clientHeight),Q(2*Math.PI*_.y/fe.clientHeight)),y.copy(b),n.update()}function Qe($){T.set($.clientX,$.clientY),P.subVectors(T,E),P.y>0?ee(J()):P.y<0&&Z(J()),E.copy(T),n.update()}function nt($){M.set($.clientX,$.clientY),S.subVectors(M,x).multiplyScalar(n.panSpeed),te(S.x,S.y),x.copy(M),n.update()}function Ot($){re($),$.deltaY<0?Z(J()):$.deltaY>0&&ee(J()),n.update()}function We($){let fe=!1;switch($.code){case n.keys.UP:te(0,n.keyPanSpeed),fe=!0;break;case n.keys.BOTTOM:te(0,-n.keyPanSpeed),fe=!0;break;case n.keys.LEFT:te(n.keyPanSpeed,0),fe=!0;break;case n.keys.RIGHT:te(-n.keyPanSpeed,0),fe=!0;break}fe&&($.preventDefault(),n.update())}function K(){if(L.length==1)y.set(L[0].pageX,L[0].pageY);else{const $=.5*(L[0].pageX+L[1].pageX),fe=.5*(L[0].pageY+L[1].pageY);y.set($,fe)}}function Ce(){if(L.length==1)x.set(L[0].pageX,L[0].pageY);else{const $=.5*(L[0].pageX+L[1].pageX),fe=.5*(L[0].pageY+L[1].pageY);x.set($,fe)}}function be(){const $=L[0].pageX-L[1].pageX,fe=L[0].pageY-L[1].pageY,Me=Math.sqrt($*$+fe*fe);E.set(0,Me)}function Te(){n.enableZoom&&be(),n.enablePan&&Ce()}function Ae(){n.enableZoom&&be(),n.enableRotate&&K()}function ze($){if(L.length==1)b.set($.pageX,$.pageY);else{const Me=Ft($),q=.5*($.pageX+Me.x),le=.5*($.pageY+Me.y);b.set(q,le)}_.subVectors(b,y).multiplyScalar(n.rotateSpeed);const fe=n.domElement;fe&&(z(2*Math.PI*_.x/fe.clientHeight),Q(2*Math.PI*_.y/fe.clientHeight)),y.copy(b)}function Xe($){if(L.length==1)M.set($.pageX,$.pageY);else{const fe=Ft($),Me=.5*($.pageX+fe.x),q=.5*($.pageY+fe.y);M.set(Me,q)}S.subVectors(M,x).multiplyScalar(n.panSpeed),te(S.x,S.y),x.copy(M)}function Ke($){const fe=Ft($),Me=$.pageX-fe.x,q=$.pageY-fe.y,le=Math.sqrt(Me*Me+q*q);T.set(0,le),P.set(0,Math.pow(T.y/E.y,n.zoomSpeed)),ee(P.y),E.copy(T)}function ct($){n.enableZoom&&Ke($),n.enablePan&&Xe($)}function _t($){n.enableZoom&&Ke($),n.enableRotate&&ze($)}function Ut($){var fe,Me;n.enabled!==!1&&(L.length===0&&((fe=n.domElement)==null||fe.ownerDocument.addEventListener("pointermove",V),(Me=n.domElement)==null||Me.ownerDocument.addEventListener("pointerup",U)),xt($),$.pointerType==="touch"?it($):ce($))}function V($){n.enabled!==!1&&($.pointerType==="touch"?Ue($):Oe($))}function U($){var fe,Me,q;At($),L.length===0&&((fe=n.domElement)==null||fe.releasePointerCapture($.pointerId),(Me=n.domElement)==null||Me.ownerDocument.removeEventListener("pointermove",V),(q=n.domElement)==null||q.ownerDocument.removeEventListener("pointerup",U)),n.dispatchEvent(a),l=o.NONE}function ce($){let fe;switch($.button){case 0:fe=n.mouseButtons.LEFT;break;case 1:fe=n.mouseButtons.MIDDLE;break;case 2:fe=n.mouseButtons.RIGHT;break;default:fe=-1}switch(fe){case Fa.DOLLY:if(n.enableZoom===!1)return;Le($),l=o.DOLLY;break;case Fa.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enablePan===!1)return;ke($),l=o.PAN}else{if(n.enableRotate===!1)return;Ee($),l=o.ROTATE}break;case Fa.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enableRotate===!1)return;Ee($),l=o.ROTATE}else{if(n.enablePan===!1)return;ke($),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(s)}function Oe($){if(n.enabled!==!1)switch(l){case o.ROTATE:if(n.enableRotate===!1)return;je($);break;case o.DOLLY:if(n.enableZoom===!1)return;Qe($);break;case o.PAN:if(n.enablePan===!1)return;nt($);break}}function Ne($){n.enabled===!1||n.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||($.preventDefault(),n.dispatchEvent(s),Ot($),n.dispatchEvent(a))}function De($){n.enabled===!1||n.enablePan===!1||We($)}function it($){switch(Re($),L.length){case 1:switch(n.touches.ONE){case za.ROTATE:if(n.enableRotate===!1)return;K(),l=o.TOUCH_ROTATE;break;case za.PAN:if(n.enablePan===!1)return;Ce(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(n.touches.TWO){case za.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Te(),l=o.TOUCH_DOLLY_PAN;break;case za.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ae(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(s)}function Ue($){switch(Re($),l){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;ze($),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;Xe($),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ct($),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;_t($),n.update();break;default:l=o.NONE}}function qe($){n.enabled!==!1&&$.preventDefault()}function xt($){L.push($)}function At($){delete F[$.pointerId];for(let fe=0;fe<L.length;fe++)if(L[fe].pointerId==$.pointerId){L.splice(fe,1);return}}function Re($){let fe=F[$.pointerId];fe===void 0&&(fe=new Se,F[$.pointerId]=fe),fe.set($.pageX,$.pageY)}function Ft($){const fe=$.pointerId===L[0].pointerId?L[1]:L[0];return F[fe.pointerId]}this.dollyIn=($=J())=>{Z($),n.update()},this.dollyOut=($=J())=>{ee($),n.update()},this.getScale=()=>p,this.setScale=$=>{ie($),n.update()},this.getZoomScale=()=>J(),t!==void 0&&this.connect(t),this.update()}};class tz extends Du{constructor(e,t={}){const{bevelEnabled:n=!1,bevelSize:i=8,bevelThickness:s=10,font:a,height:o=50,size:l=100,lineHeight:d=1,letterSpacing:h=0,...f}=t;if(a===void 0)super();else{const p=a.generateShapes(e,l,{lineHeight:d,letterSpacing:h});super(p,{...f,bevelEnabled:n,bevelSize:i,bevelThickness:s,depth:o})}this.type="TextGeometry"}}var nz=Object.defineProperty,iz=(r,e,t)=>e in r?nz(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Og=(r,e,t)=>(iz(r,typeof e!="symbol"?e+"":e,t),t);class rz extends mi{constructor(e){super(e)}load(e,t,n,i){const s=new ki(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{if(typeof a!="string")throw new Error("unsupported data type");const o=JSON.parse(a),l=this.parse(o);t&&t(l)},n,i)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new sz(e)}}class sz{constructor(e){Og(this,"data"),Og(this,"isFont",!0),Og(this,"type","Font"),this.data=e}generateShapes(e,t=100,n){const i=[],s={letterSpacing:0,lineHeight:1,...n},a=az(e,t,this.data,s);for(let o=0,l=a.length;o<l;o++)Array.prototype.push.apply(i,a[o].toShapes(!1));return i}}function az(r,e,t,n){const i=Array.from(r),s=e/t.resolution,a=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,o=[];let l=0,d=0;for(let h=0;h<i.length;h++){const f=i[h];if(f===`
`)l=0,d-=a*n.lineHeight;else{const p=oz(f,s,l,d,t);p&&(l+=p.offsetX+n.letterSpacing,o.push(p.path))}}return o}function oz(r,e,t,n,i){const s=i.glyphs[r]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+r+'" does not exists in font family '+i.familyName+".");return}const a=new CE;let o,l,d,h,f,p,g,y;if(s.o){const b=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let _=0,x=b.length;_<x;)switch(b[_++]){case"m":o=parseInt(b[_++])*e+t,l=parseInt(b[_++])*e+n,a.moveTo(o,l);break;case"l":o=parseInt(b[_++])*e+t,l=parseInt(b[_++])*e+n,a.lineTo(o,l);break;case"q":d=parseInt(b[_++])*e+t,h=parseInt(b[_++])*e+n,f=parseInt(b[_++])*e+t,p=parseInt(b[_++])*e+n,a.quadraticCurveTo(f,p,d,h);break;case"b":d=parseInt(b[_++])*e+t,h=parseInt(b[_++])*e+n,f=parseInt(b[_++])*e+t,p=parseInt(b[_++])*e+n,g=parseInt(b[_++])*e+t,y=parseInt(b[_++])*e+n,a.bezierCurveTo(f,p,g,y,d,h);break}}return{offsetX:s.ha*e,path:a}}class lz extends mx{constructor(e){super(e),this.type=$n}parse(e){const a=function(k,R){switch(k){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(R||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(R||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(R||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(R||""))}},h=`
`,f=function(k,R,L){R=R||1024;let W=k.pos,J=-1,z=0,Q="",ne=String.fromCharCode.apply(null,new Uint16Array(k.subarray(W,W+128)));for(;0>(J=ne.indexOf(h))&&z<R&&W<k.byteLength;)Q+=ne,z+=ne.length,W+=128,ne+=String.fromCharCode.apply(null,new Uint16Array(k.subarray(W,W+128)));return-1<J?(k.pos+=z+J+1,Q+ne.slice(0,J)):!1},p=function(k){const R=/^#\?(\S+)/,L=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*FORMAT=(\S+)\s*$/,J=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,z={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Q,ne;for((k.pos>=k.byteLength||!(Q=f(k)))&&a(1,"no header found"),(ne=Q.match(R))||a(3,"bad initial token"),z.valid|=1,z.programtype=ne[1],z.string+=Q+`
`;Q=f(k),Q!==!1;){if(z.string+=Q+`
`,Q.charAt(0)==="#"){z.comments+=Q+`
`;continue}if((ne=Q.match(L))&&(z.gamma=parseFloat(ne[1])),(ne=Q.match(F))&&(z.exposure=parseFloat(ne[1])),(ne=Q.match(W))&&(z.valid|=2,z.format=ne[1]),(ne=Q.match(J))&&(z.valid|=4,z.height=parseInt(ne[1],10),z.width=parseInt(ne[2],10)),z.valid&2&&z.valid&4)break}return z.valid&2||a(3,"missing format specifier"),z.valid&4||a(3,"missing image size specifier"),z},g=function(k,R,L){const F=R;if(F<8||F>32767||k[0]!==2||k[1]!==2||k[2]&128)return new Uint8Array(k);F!==(k[2]<<8|k[3])&&a(3,"wrong scanline width");const W=new Uint8Array(4*R*L);W.length||a(4,"unable to allocate buffer space");let J=0,z=0;const Q=4*F,ne=new Uint8Array(4),oe=new Uint8Array(Q);let te=L;for(;te>0&&z<k.byteLength;){z+4>k.byteLength&&a(1),ne[0]=k[z++],ne[1]=k[z++],ne[2]=k[z++],ne[3]=k[z++],(ne[0]!=2||ne[1]!=2||(ne[2]<<8|ne[3])!=F)&&a(3,"bad rgbe scanline format");let ie=0,ee;for(;ie<Q&&z<k.byteLength;){ee=k[z++];const re=ee>128;if(re&&(ee-=128),(ee===0||ie+ee>Q)&&a(3,"bad scanline data"),re){const pe=k[z++];for(let Ee=0;Ee<ee;Ee++)oe[ie++]=pe}else oe.set(k.subarray(z,z+ee),ie),ie+=ee,z+=ee}const Z=F;for(let re=0;re<Z;re++){let pe=0;W[J]=oe[re+pe],pe+=F,W[J+1]=oe[re+pe],pe+=F,W[J+2]=oe[re+pe],pe+=F,W[J+3]=oe[re+pe],J+=4}te--}return W},y=function(k,R,L,F){const W=k[R+3],J=Math.pow(2,W-128)/255;L[F+0]=k[R+0]*J,L[F+1]=k[R+1]*J,L[F+2]=k[R+2]*J,L[F+3]=1},b=function(k,R,L,F){const W=k[R+3],J=Math.pow(2,W-128)/255;L[F+0]=qa.toHalfFloat(Math.min(k[R+0]*J,65504)),L[F+1]=qa.toHalfFloat(Math.min(k[R+1]*J,65504)),L[F+2]=qa.toHalfFloat(Math.min(k[R+2]*J,65504)),L[F+3]=qa.toHalfFloat(1)},_=new Uint8Array(e);_.pos=0;const x=p(_),M=x.width,S=x.height,E=g(_.subarray(_.pos),M,S);let T,P,I;switch(this.type){case Vn:I=E.length/4;const k=new Float32Array(I*4);for(let L=0;L<I;L++)y(E,L*4,k,L*4);T=k,P=Vn;break;case $n:I=E.length/4;const R=new Uint16Array(I*4);for(let L=0;L<I;L++)b(E,L*4,R,L*4);T=R,P=$n;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:M,height:S,data:T,header:x.string,gamma:x.gamma,exposure:x.exposure,type:P}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(a,o){switch(a.type){case Vn:case $n:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=Zt,a.magFilter=Zt,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,s,n,i)}}const Ac=tT>=152;class cz extends mx{constructor(e){super(e),this.type=$n}parse(e){const R=Math.pow(2.7182818,2.2);function L(D,C){for(var O=0,G=0;G<65536;++G)(G==0||D[G>>3]&1<<(G&7))&&(C[O++]=G);for(var H=O-1;O<65536;)C[O++]=0;return H}function F(D){for(var C=0;C<16384;C++)D[C]={},D[C].len=0,D[C].lit=0,D[C].p=null}const W={l:0,c:0,lc:0};function J(D,C,O,G,H){for(;O<D;)C=C<<8|Ft(G,H),O+=8;O-=D,W.l=C>>O&(1<<D)-1,W.c=C,W.lc=O}const z=new Array(59);function Q(D){for(var C=0;C<=58;++C)z[C]=0;for(var C=0;C<65537;++C)z[D[C]]+=1;for(var O=0,C=58;C>0;--C){var G=O+z[C]>>1;z[C]=O,O=G}for(var C=0;C<65537;++C){var H=D[C];H>0&&(D[C]=H|z[H]++<<6)}}function ne(D,C,O,G,H,Y,ue){for(var he=O,_e=0,xe=0;H<=Y;H++){if(he.value-O.value>G)return!1;J(6,_e,xe,D,he);var we=W.l;if(_e=W.c,xe=W.lc,ue[H]=we,we==63){if(he.value-O.value>G)throw"Something wrong with hufUnpackEncTable";J(8,_e,xe,D,he);var ge=W.l+6;if(_e=W.c,xe=W.lc,H+ge>Y+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)ue[H++]=0;H--}else if(we>=59){var ge=we-59+2;if(H+ge>Y+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)ue[H++]=0;H--}}Q(ue)}function oe(D){return D&63}function te(D){return D>>6}function ie(D,C,O,G){for(;C<=O;C++){var H=te(D[C]),Y=oe(D[C]);if(H>>Y)throw"Invalid table entry";if(Y>14){var ue=G[H>>Y-14];if(ue.len)throw"Invalid table entry";if(ue.lit++,ue.p){var he=ue.p;ue.p=new Array(ue.lit);for(var _e=0;_e<ue.lit-1;++_e)ue.p[_e]=he[_e]}else ue.p=new Array(1);ue.p[ue.lit-1]=C}else if(Y)for(var xe=0,_e=1<<14-Y;_e>0;_e--){var ue=G[(H<<14-Y)+xe];if(ue.len||ue.p)throw"Invalid table entry";ue.len=Y,ue.lit=C,xe++}}return!0}const ee={c:0,lc:0};function Z(D,C,O,G){D=D<<8|Ft(O,G),C+=8,ee.c=D,ee.lc=C}const re={c:0,lc:0};function pe(D,C,O,G,H,Y,ue,he,_e,xe){if(D==C){G<8&&(Z(O,G,H,ue),O=ee.c,G=ee.lc),G-=8;var we=O>>G,we=new Uint8Array([we])[0];if(_e.value+we>xe)return!1;for(var ge=he[_e.value-1];we-- >0;)he[_e.value++]=ge}else if(_e.value<xe)he[_e.value++]=D;else return!1;re.c=O,re.lc=G}function Ee(D){return D&65535}function Le(D){var C=Ee(D);return C>32767?C-65536:C}const ke={a:0,b:0};function je(D,C){var O=Le(D),G=Le(C),H=G,Y=O+(H&1)+(H>>1),ue=Y,he=Y-H;ke.a=ue,ke.b=he}function Qe(D,C){var O=Ee(D),G=Ee(C),H=O-(G>>1)&65535,Y=G+H-32768&65535;ke.a=Y,ke.b=H}function nt(D,C,O,G,H,Y,ue){for(var he=ue<16384,_e=O>H?H:O,xe=1,we;xe<=_e;)xe<<=1;for(xe>>=1,we=xe,xe>>=1;xe>=1;){for(var ge=0,et=ge+Y*(H-we),Be=Y*xe,He=Y*we,ut=G*xe,mt=G*we,ft,$e,yt,at;ge<=et;ge+=He){for(var St=ge,Kt=ge+G*(O-we);St<=Kt;St+=mt){var bt=St+ut,$t=St+Be,Vt=$t+ut;he?(je(D[St+C],D[$t+C]),ft=ke.a,yt=ke.b,je(D[bt+C],D[Vt+C]),$e=ke.a,at=ke.b,je(ft,$e),D[St+C]=ke.a,D[bt+C]=ke.b,je(yt,at),D[$t+C]=ke.a,D[Vt+C]=ke.b):(Qe(D[St+C],D[$t+C]),ft=ke.a,yt=ke.b,Qe(D[bt+C],D[Vt+C]),$e=ke.a,at=ke.b,Qe(ft,$e),D[St+C]=ke.a,D[bt+C]=ke.b,Qe(yt,at),D[$t+C]=ke.a,D[Vt+C]=ke.b)}if(O&xe){var $t=St+Be;he?je(D[St+C],D[$t+C]):Qe(D[St+C],D[$t+C]),ft=ke.a,D[$t+C]=ke.b,D[St+C]=ft}}if(H&xe)for(var St=ge,Kt=ge+G*(O-we);St<=Kt;St+=mt){var bt=St+ut;he?je(D[St+C],D[bt+C]):Qe(D[St+C],D[bt+C]),ft=ke.a,D[bt+C]=ke.b,D[St+C]=ft}we=xe,xe>>=1}return ge}function Ot(D,C,O,G,H,Y,ue,he,_e,xe){for(var we=0,ge=0,et=he,Be=Math.trunc(H.value+(Y+7)/8);H.value<Be;)for(Z(we,ge,O,H),we=ee.c,ge=ee.lc;ge>=14;){var He=we>>ge-14&16383,ut=C[He];if(ut.len)ge-=ut.len,pe(ut.lit,ue,we,ge,O,G,H,_e,xe,et),we=re.c,ge=re.lc;else{if(!ut.p)throw"hufDecode issues";var mt;for(mt=0;mt<ut.lit;mt++){for(var ft=oe(D[ut.p[mt]]);ge<ft&&H.value<Be;)Z(we,ge,O,H),we=ee.c,ge=ee.lc;if(ge>=ft&&te(D[ut.p[mt]])==(we>>ge-ft&(1<<ft)-1)){ge-=ft,pe(ut.p[mt],ue,we,ge,O,G,H,_e,xe,et),we=re.c,ge=re.lc;break}}if(mt==ut.lit)throw"hufDecode issues"}}var $e=8-Y&7;for(we>>=$e,ge-=$e;ge>0;){var ut=C[we<<14-ge&16383];if(ut.len)ge-=ut.len,pe(ut.lit,ue,we,ge,O,G,H,_e,xe,et),we=re.c,ge=re.lc;else throw"hufDecode issues"}return!0}function We(D,C,O,G,H,Y){var ue={value:0},he=O.value,_e=Re(C,O),xe=Re(C,O);O.value+=4;var we=Re(C,O);if(O.value+=4,_e<0||_e>=65537||xe<0||xe>=65537)throw"Something wrong with HUF_ENCSIZE";var ge=new Array(65537),et=new Array(16384);F(et);var Be=G-(O.value-he);if(ne(D,C,O,Be,_e,xe,ge),we>8*(G-(O.value-he)))throw"Something wrong with hufUncompress";ie(ge,_e,xe,et),Ot(ge,et,D,C,O,we,xe,Y,H,ue)}function K(D,C,O){for(var G=0;G<O;++G)C[G]=D[C[G]]}function Ce(D){for(var C=1;C<D.length;C++){var O=D[C-1]+D[C]-128;D[C]=O}}function be(D,C){for(var O=0,G=Math.floor((D.length+1)/2),H=0,Y=D.length-1;!(H>Y||(C[H++]=D[O++],H>Y));)C[H++]=D[G++]}function Te(D){for(var C=D.byteLength,O=new Array,G=0,H=new DataView(D);C>0;){var Y=H.getInt8(G++);if(Y<0){var ue=-Y;C-=ue+1;for(var he=0;he<ue;he++)O.push(H.getUint8(G++))}else{var ue=Y;C-=2;for(var _e=H.getUint8(G++),he=0;he<ue+1;he++)O.push(_e)}}return O}function Ae(D,C,O,G,H,Y){var bt=new DataView(Y.buffer),ue=O[D.idx[0]].width,he=O[D.idx[0]].height,_e=3,xe=Math.floor(ue/8),we=Math.ceil(ue/8),ge=Math.ceil(he/8),et=ue-(we-1)*8,Be=he-(ge-1)*8,He={value:0},ut=new Array(_e),mt=new Array(_e),ft=new Array(_e),$e=new Array(_e),yt=new Array(_e);for(let wt=0;wt<_e;++wt)yt[wt]=C[D.idx[wt]],ut[wt]=wt<1?0:ut[wt-1]+we*ge,mt[wt]=new Float32Array(64),ft[wt]=new Uint16Array(64),$e[wt]=new Uint16Array(we*64);for(let wt=0;wt<ge;++wt){var at=8;wt==ge-1&&(at=Be);var St=8;for(let Yt=0;Yt<we;++Yt){Yt==we-1&&(St=et);for(let jt=0;jt<_e;++jt)ft[jt].fill(0),ft[jt][0]=H[ut[jt]++],ze(He,G,ft[jt]),Xe(ft[jt],mt[jt]),Ke(mt[jt]);ct(mt);for(let jt=0;jt<_e;++jt)_t(mt[jt],$e[jt],Yt*64)}let xn=0;for(let Yt=0;Yt<_e;++Yt){const jt=O[D.idx[Yt]].type;for(let pn=8*wt;pn<8*wt+at;++pn){xn=yt[Yt][pn];for(let es=0;es<xe;++es){const gi=es*64+(pn&7)*8;bt.setUint16(xn+0*2*jt,$e[Yt][gi+0],!0),bt.setUint16(xn+1*2*jt,$e[Yt][gi+1],!0),bt.setUint16(xn+2*2*jt,$e[Yt][gi+2],!0),bt.setUint16(xn+3*2*jt,$e[Yt][gi+3],!0),bt.setUint16(xn+4*2*jt,$e[Yt][gi+4],!0),bt.setUint16(xn+5*2*jt,$e[Yt][gi+5],!0),bt.setUint16(xn+6*2*jt,$e[Yt][gi+6],!0),bt.setUint16(xn+7*2*jt,$e[Yt][gi+7],!0),xn+=8*2*jt}}if(xe!=we)for(let pn=8*wt;pn<8*wt+at;++pn){const es=yt[Yt][pn]+8*xe*2*jt,gi=xe*64+(pn&7)*8;for(let Nr=0;Nr<St;++Nr)bt.setUint16(es+Nr*2*jt,$e[Yt][gi+Nr],!0)}}}for(var Kt=new Uint16Array(ue),bt=new DataView(Y.buffer),$t=0;$t<_e;++$t){O[D.idx[$t]].decoded=!0;var Vt=O[D.idx[$t]].type;if(O[$t].type==2)for(var tn=0;tn<he;++tn){const wt=yt[$t][tn];for(var Cn=0;Cn<ue;++Cn)Kt[Cn]=bt.getUint16(wt+Cn*2*Vt,!0);for(var Cn=0;Cn<ue;++Cn)bt.setFloat32(wt+Cn*2*Vt,le(Kt[Cn]),!0)}}}function ze(D,C,O){for(var G,H=1;H<64;)G=C[D.value],G==65280?H=64:G>>8==255?H+=G&255:(O[H]=G,H++),D.value++}function Xe(D,C){C[0]=le(D[0]),C[1]=le(D[1]),C[2]=le(D[5]),C[3]=le(D[6]),C[4]=le(D[14]),C[5]=le(D[15]),C[6]=le(D[27]),C[7]=le(D[28]),C[8]=le(D[2]),C[9]=le(D[4]),C[10]=le(D[7]),C[11]=le(D[13]),C[12]=le(D[16]),C[13]=le(D[26]),C[14]=le(D[29]),C[15]=le(D[42]),C[16]=le(D[3]),C[17]=le(D[8]),C[18]=le(D[12]),C[19]=le(D[17]),C[20]=le(D[25]),C[21]=le(D[30]),C[22]=le(D[41]),C[23]=le(D[43]),C[24]=le(D[9]),C[25]=le(D[11]),C[26]=le(D[18]),C[27]=le(D[24]),C[28]=le(D[31]),C[29]=le(D[40]),C[30]=le(D[44]),C[31]=le(D[53]),C[32]=le(D[10]),C[33]=le(D[19]),C[34]=le(D[23]),C[35]=le(D[32]),C[36]=le(D[39]),C[37]=le(D[45]),C[38]=le(D[52]),C[39]=le(D[54]),C[40]=le(D[20]),C[41]=le(D[22]),C[42]=le(D[33]),C[43]=le(D[38]),C[44]=le(D[46]),C[45]=le(D[51]),C[46]=le(D[55]),C[47]=le(D[60]),C[48]=le(D[21]),C[49]=le(D[34]),C[50]=le(D[37]),C[51]=le(D[47]),C[52]=le(D[50]),C[53]=le(D[56]),C[54]=le(D[59]),C[55]=le(D[61]),C[56]=le(D[35]),C[57]=le(D[36]),C[58]=le(D[48]),C[59]=le(D[49]),C[60]=le(D[57]),C[61]=le(D[58]),C[62]=le(D[62]),C[63]=le(D[63])}function Ke(D){const C=.5*Math.cos(.7853975),O=.5*Math.cos(3.14159/16),G=.5*Math.cos(3.14159/8),H=.5*Math.cos(3*3.14159/16),Y=.5*Math.cos(5*3.14159/16),ue=.5*Math.cos(3*3.14159/8),he=.5*Math.cos(7*3.14159/16);for(var _e=new Array(4),xe=new Array(4),we=new Array(4),ge=new Array(4),et=0;et<8;++et){var Be=et*8;_e[0]=G*D[Be+2],_e[1]=ue*D[Be+2],_e[2]=G*D[Be+6],_e[3]=ue*D[Be+6],xe[0]=O*D[Be+1]+H*D[Be+3]+Y*D[Be+5]+he*D[Be+7],xe[1]=H*D[Be+1]-he*D[Be+3]-O*D[Be+5]-Y*D[Be+7],xe[2]=Y*D[Be+1]-O*D[Be+3]+he*D[Be+5]+H*D[Be+7],xe[3]=he*D[Be+1]-Y*D[Be+3]+H*D[Be+5]-O*D[Be+7],we[0]=C*(D[Be+0]+D[Be+4]),we[3]=C*(D[Be+0]-D[Be+4]),we[1]=_e[0]+_e[3],we[2]=_e[1]-_e[2],ge[0]=we[0]+we[1],ge[1]=we[3]+we[2],ge[2]=we[3]-we[2],ge[3]=we[0]-we[1],D[Be+0]=ge[0]+xe[0],D[Be+1]=ge[1]+xe[1],D[Be+2]=ge[2]+xe[2],D[Be+3]=ge[3]+xe[3],D[Be+4]=ge[3]-xe[3],D[Be+5]=ge[2]-xe[2],D[Be+6]=ge[1]-xe[1],D[Be+7]=ge[0]-xe[0]}for(var He=0;He<8;++He)_e[0]=G*D[16+He],_e[1]=ue*D[16+He],_e[2]=G*D[48+He],_e[3]=ue*D[48+He],xe[0]=O*D[8+He]+H*D[24+He]+Y*D[40+He]+he*D[56+He],xe[1]=H*D[8+He]-he*D[24+He]-O*D[40+He]-Y*D[56+He],xe[2]=Y*D[8+He]-O*D[24+He]+he*D[40+He]+H*D[56+He],xe[3]=he*D[8+He]-Y*D[24+He]+H*D[40+He]-O*D[56+He],we[0]=C*(D[He]+D[32+He]),we[3]=C*(D[He]-D[32+He]),we[1]=_e[0]+_e[3],we[2]=_e[1]-_e[2],ge[0]=we[0]+we[1],ge[1]=we[3]+we[2],ge[2]=we[3]-we[2],ge[3]=we[0]-we[1],D[0+He]=ge[0]+xe[0],D[8+He]=ge[1]+xe[1],D[16+He]=ge[2]+xe[2],D[24+He]=ge[3]+xe[3],D[32+He]=ge[3]-xe[3],D[40+He]=ge[2]-xe[2],D[48+He]=ge[1]-xe[1],D[56+He]=ge[0]-xe[0]}function ct(D){for(var C=0;C<64;++C){var O=D[0][C],G=D[1][C],H=D[2][C];D[0][C]=O+1.5747*H,D[1][C]=O-.1873*G-.4682*H,D[2][C]=O+1.8556*G}}function _t(D,C,O){for(var G=0;G<64;++G)C[O+G]=qa.toHalfFloat(Ut(D[G]))}function Ut(D){return D<=1?Math.sign(D)*Math.pow(Math.abs(D),2.2):Math.sign(D)*Math.pow(R,Math.abs(D)-1)}function V(D){return new DataView(D.array.buffer,D.offset.value,D.size)}function U(D){var C=D.viewer.buffer.slice(D.offset.value,D.offset.value+D.size),O=new Uint8Array(Te(C)),G=new Uint8Array(O.length);return Ce(O),be(O,G),new DataView(G.buffer)}function ce(D){var C=D.array.slice(D.offset.value,D.offset.value+D.size),O=Oh(C),G=new Uint8Array(O.length);return Ce(O),be(O,G),new DataView(G.buffer)}function Oe(D){for(var C=D.viewer,O={value:D.offset.value},G=new Uint16Array(D.width*D.scanlineBlockSize*(D.channels*D.type)),H=new Uint8Array(8192),Y=0,ue=new Array(D.channels),he=0;he<D.channels;he++)ue[he]={},ue[he].start=Y,ue[he].end=ue[he].start,ue[he].nx=D.width,ue[he].ny=D.lines,ue[he].size=D.type,Y+=ue[he].nx*ue[he].ny*ue[he].size;var _e=Ie(C,O),xe=Ie(C,O);if(xe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(_e<=xe)for(var he=0;he<xe-_e+1;he++)H[he+_e]=$(C,O);var we=new Uint16Array(65536),ge=L(H,we),et=Re(C,O);We(D.array,C,O,et,G,Y);for(var he=0;he<D.channels;++he)for(var Be=ue[he],He=0;He<ue[he].size;++He)nt(G,Be.start+He,Be.nx,Be.size,Be.ny,Be.nx*Be.size,ge);K(we,G,Y);for(var ut=0,mt=new Uint8Array(G.buffer.byteLength),ft=0;ft<D.lines;ft++)for(var $e=0;$e<D.channels;$e++){var Be=ue[$e],yt=Be.nx*Be.size,at=new Uint8Array(G.buffer,Be.end*2,yt*2);mt.set(at,ut),ut+=yt*2,Be.end+=yt}return new DataView(mt.buffer)}function Ne(D){var C=D.array.slice(D.offset.value,D.offset.value+D.size),O=Oh(C);const G=D.lines*D.channels*D.width,H=D.type==1?new Uint16Array(G):new Uint32Array(G);let Y=0,ue=0;const he=new Array(4);for(let _e=0;_e<D.lines;_e++)for(let xe=0;xe<D.channels;xe++){let we=0;switch(D.type){case 1:he[0]=Y,he[1]=he[0]+D.width,Y=he[1]+D.width;for(let ge=0;ge<D.width;++ge){const et=O[he[0]++]<<8|O[he[1]++];we+=et,H[ue]=we,ue++}break;case 2:he[0]=Y,he[1]=he[0]+D.width,he[2]=he[1]+D.width,Y=he[2]+D.width;for(let ge=0;ge<D.width;++ge){const et=O[he[0]++]<<24|O[he[1]++]<<16|O[he[2]++]<<8;we+=et,H[ue]=we,ue++}break}}return new DataView(H.buffer)}function De(D){var C=D.viewer,O={value:D.offset.value},G=new Uint8Array(D.width*D.lines*(D.channels*D.type*2)),H={version:fe(C,O),unknownUncompressedSize:fe(C,O),unknownCompressedSize:fe(C,O),acCompressedSize:fe(C,O),dcCompressedSize:fe(C,O),rleCompressedSize:fe(C,O),rleUncompressedSize:fe(C,O),rleRawSize:fe(C,O),totalAcUncompressedCount:fe(C,O),totalDcUncompressedCount:fe(C,O),acCompression:fe(C,O)};if(H.version<2)throw"EXRLoader.parse: "+ni.compression+" version "+H.version+" is unsupported";for(var Y=new Array,ue=Ie(C,O)-2;ue>0;){var he=it(C.buffer,O),_e=$(C,O),xe=_e>>2&3,we=(_e>>4)-1,ge=new Int8Array([we])[0],et=$(C,O);Y.push({name:he,index:ge,type:et,compression:xe}),ue-=he.length+3}for(var Be=ni.channels,He=new Array(D.channels),ut=0;ut<D.channels;++ut){var mt=He[ut]={},ft=Be[ut];mt.name=ft.name,mt.compression=0,mt.decoded=!1,mt.type=ft.pixelType,mt.pLinear=ft.pLinear,mt.width=D.width,mt.height=D.lines}for(var $e={idx:new Array(3)},yt=0;yt<D.channels;++yt)for(var mt=He[yt],ut=0;ut<Y.length;++ut){var at=Y[ut];mt.name==at.name&&(mt.compression=at.compression,at.index>=0&&($e.idx[at.index]=yt),mt.offset=yt)}if(H.acCompressedSize>0)switch(H.acCompression){case 0:var bt=new Uint16Array(H.totalAcUncompressedCount);We(D.array,C,O,H.acCompressedSize,bt,H.totalAcUncompressedCount);break;case 1:var St=D.array.slice(O.value,O.value+H.totalAcUncompressedCount),Kt=Oh(St),bt=new Uint16Array(Kt.buffer);O.value+=H.totalAcUncompressedCount;break}if(H.dcCompressedSize>0){var $t={array:D.array,offset:O,size:H.dcCompressedSize},Vt=new Uint16Array(ce($t).buffer);O.value+=H.dcCompressedSize}if(H.rleRawSize>0){var St=D.array.slice(O.value,O.value+H.rleCompressedSize),Kt=Oh(St),tn=Te(Kt.buffer);O.value+=H.rleCompressedSize}for(var Cn=0,wt=new Array(He.length),ut=0;ut<wt.length;++ut)wt[ut]=new Array;for(var xn=0;xn<D.lines;++xn)for(var Yt=0;Yt<He.length;++Yt)wt[Yt].push(Cn),Cn+=He[Yt].width*D.type*2;Ae($e,wt,He,bt,Vt,G);for(var ut=0;ut<He.length;++ut){var mt=He[ut];if(!mt.decoded)switch(mt.compression){case 2:for(var jt=0,pn=0,xn=0;xn<D.lines;++xn){for(var es=wt[ut][jt],gi=0;gi<mt.width;++gi){for(var Nr=0;Nr<2*mt.type;++Nr)G[es++]=tn[pn+Nr*mt.width*mt.height];pn++}jt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(G.buffer)}function it(D,C){for(var O=new Uint8Array(D),G=0;O[C.value+G]!=0;)G+=1;var H=new TextDecoder().decode(O.slice(C.value,C.value+G));return C.value=C.value+G+1,H}function Ue(D,C,O){var G=new TextDecoder().decode(new Uint8Array(D).slice(C.value,C.value+O));return C.value=C.value+O,G}function qe(D,C){var O=At(D,C),G=Re(D,C);return[O,G]}function xt(D,C){var O=Re(D,C),G=Re(D,C);return[O,G]}function At(D,C){var O=D.getInt32(C.value,!0);return C.value=C.value+4,O}function Re(D,C){var O=D.getUint32(C.value,!0);return C.value=C.value+4,O}function Ft(D,C){var O=D[C.value];return C.value=C.value+1,O}function $(D,C){var O=D.getUint8(C.value);return C.value=C.value+1,O}const fe=function(D,C){let O;return"getBigInt64"in DataView.prototype?O=Number(D.getBigInt64(C.value,!0)):O=D.getUint32(C.value+4,!0)+Number(D.getUint32(C.value,!0)<<32),C.value+=8,O};function Me(D,C){var O=D.getFloat32(C.value,!0);return C.value+=4,O}function q(D,C){return qa.toHalfFloat(Me(D,C))}function le(D){var C=(D&31744)>>10,O=D&1023;return(D>>15?-1:1)*(C?C===31?O?NaN:1/0:Math.pow(2,C-15)*(1+O/1024):6103515625e-14*(O/1024))}function Ie(D,C){var O=D.getUint16(C.value,!0);return C.value+=2,O}function Ve(D,C){return le(Ie(D,C))}function Ye(D,C,O,G){for(var H=O.value,Y=[];O.value<H+G-1;){var ue=it(C,O),he=At(D,O),_e=$(D,O);O.value+=3;var xe=At(D,O),we=At(D,O);Y.push({name:ue,pixelType:he,pLinear:_e,xSampling:xe,ySampling:we})}return O.value+=1,Y}function Pe(D,C){var O=Me(D,C),G=Me(D,C),H=Me(D,C),Y=Me(D,C),ue=Me(D,C),he=Me(D,C),_e=Me(D,C),xe=Me(D,C);return{redX:O,redY:G,greenX:H,greenY:Y,blueX:ue,blueY:he,whiteX:_e,whiteY:xe}}function tt(D,C){var O=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],G=$(D,C);return O[G]}function ht(D,C){var O=Re(D,C),G=Re(D,C),H=Re(D,C),Y=Re(D,C);return{xMin:O,yMin:G,xMax:H,yMax:Y}}function on(D,C){var O=["INCREASING_Y"],G=$(D,C);return O[G]}function zt(D,C){var O=Me(D,C),G=Me(D,C);return[O,G]}function An(D,C){var O=Me(D,C),G=Me(D,C),H=Me(D,C);return[O,G,H]}function fn(D,C,O,G,H){if(G==="string"||G==="stringvector"||G==="iccProfile")return Ue(C,O,H);if(G==="chlist")return Ye(D,C,O,H);if(G==="chromaticities")return Pe(D,O);if(G==="compression")return tt(D,O);if(G==="box2i")return ht(D,O);if(G==="lineOrder")return on(D,O);if(G==="float")return Me(D,O);if(G==="v2f")return zt(D,O);if(G==="v3f")return An(D,O);if(G==="int")return At(D,O);if(G==="rational")return qe(D,O);if(G==="timecode")return xt(D,O);if(G==="preview")return O.value+=H,"skipped";O.value+=H}function wo(D,C,O){const G={};if(D.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";G.version=D.getUint8(4);const H=D.getUint8(5);G.spec={singleTile:!!(H&2),longName:!!(H&4),deepFormat:!!(H&8),multiPart:!!(H&16)},O.value=8;for(var Y=!0;Y;){var ue=it(C,O);if(ue==0)Y=!1;else{var he=it(C,O),_e=Re(D,O),xe=fn(D,C,O,he,_e);xe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${he}'.`):G[ue]=xe}}if(H&-5)throw console.error("EXRHeader:",G),"THREE.EXRLoader: provided file is currently unsupported.";return G}function So(D,C,O,G,H){const Y={size:0,viewer:C,array:O,offset:G,width:D.dataWindow.xMax-D.dataWindow.xMin+1,height:D.dataWindow.yMax-D.dataWindow.yMin+1,channels:D.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:D.channels[0].pixelType,uncompress:null,getter:null,format:null,[Ac?"colorSpace":"encoding"]:null};switch(D.compression){case"NO_COMPRESSION":Y.lines=1,Y.uncompress=V;break;case"RLE_COMPRESSION":Y.lines=1,Y.uncompress=U;break;case"ZIPS_COMPRESSION":Y.lines=1,Y.uncompress=ce;break;case"ZIP_COMPRESSION":Y.lines=16,Y.uncompress=ce;break;case"PIZ_COMPRESSION":Y.lines=32,Y.uncompress=Oe;break;case"PXR24_COMPRESSION":Y.lines=16,Y.uncompress=Ne;break;case"DWAA_COMPRESSION":Y.lines=32,Y.uncompress=De;break;case"DWAB_COMPRESSION":Y.lines=256,Y.uncompress=De;break;default:throw"EXRLoader.parse: "+D.compression+" is unsupported"}if(Y.scanlineBlockSize=Y.lines,Y.type==1)switch(H){case Vn:Y.getter=Ve,Y.inputSize=2;break;case $n:Y.getter=Ie,Y.inputSize=2;break}else if(Y.type==2)switch(H){case Vn:Y.getter=Me,Y.inputSize=4;break;case $n:Y.getter=q,Y.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Y.type+" for "+D.compression+".";Y.blockCount=(D.dataWindow.yMax+1)/Y.scanlineBlockSize;for(var ue=0;ue<Y.blockCount;ue++)fe(C,G);Y.outputChannels=Y.channels==3?4:Y.channels;const he=Y.width*Y.height*Y.outputChannels;switch(H){case Vn:Y.byteArray=new Float32Array(he),Y.channels<Y.outputChannels&&Y.byteArray.fill(1,0,he);break;case $n:Y.byteArray=new Uint16Array(he),Y.channels<Y.outputChannels&&Y.byteArray.fill(15360,0,he);break;default:console.error("THREE.EXRLoader: unsupported type: ",H);break}return Y.bytesPerLine=Y.width*Y.inputSize*Y.channels,Y.outputChannels==4?Y.format=Hn:Y.format=Bv,Ac?Y.colorSpace="srgb-linear":Y.encoding=3e3,Y}const Qr=new DataView(e),Rr=new Uint8Array(e),Pr={value:0},ni=wo(Qr,e,Pr),Nt=So(ni,Qr,Rr,Pr,this.type),Mo={value:0},Wl={R:0,G:1,B:2,A:3,Y:0};for(let D=0;D<Nt.height/Nt.scanlineBlockSize;D++){const C=Re(Qr,Pr);Nt.size=Re(Qr,Pr),Nt.lines=C+Nt.scanlineBlockSize>Nt.height?Nt.height-C:Nt.scanlineBlockSize;const G=Nt.size<Nt.lines*Nt.bytesPerLine?Nt.uncompress(Nt):V(Nt);Pr.value+=Nt.size;for(let H=0;H<Nt.scanlineBlockSize;H++){const Y=H+D*Nt.scanlineBlockSize;if(Y>=Nt.height)break;for(let ue=0;ue<Nt.channels;ue++){const he=Wl[ni.channels[ue].name];for(let _e=0;_e<Nt.width;_e++){Mo.value=(H*(Nt.channels*Nt.width)+ue*Nt.width+_e)*Nt.inputSize;const xe=(Nt.height-1-Y)*(Nt.width*Nt.outputChannels)+_e*Nt.outputChannels+he;Nt.byteArray[xe]=Nt.getter(G,Mo)}}}}return{header:ni,width:Nt.width,height:Nt.height,data:Nt.byteArray,format:Nt.format,[Ac?"colorSpace":"encoding"]:Nt[Ac?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(a,o){Ac?a.colorSpace=o.colorSpace:a.encoding=o.encoding,a.minFilter=Zt,a.magFilter=Zt,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,o)}return super.load(e,s,n,i)}}let Ug=null;async function uz(r){return typeof r=="string"?await(await fetch(r)).json():r}function dz(r){return Ug||(Ug=new rz),Ug.parse(r)}async function lT(r){const e=await uz(r);return dz(e)}function Cx(r){return LE(lT,[r])}Cx.preload=r=>kE(lT,[r]);Cx.clear=r=>DE([r]);const hz=["string","number"],fz=r=>{let e="";const t=[];return B.Children.forEach(r,n=>{hz.includes(typeof n)?e+=n+"":t.push(n)}),[e,...t]},pz=B.forwardRef(({font:r,letterSpacing:e=0,lineHeight:t=1,size:n=1,height:i=.2,bevelThickness:s=.1,bevelSize:a=.01,bevelEnabled:o=!1,bevelOffset:l=0,bevelSegments:d=4,curveSegments:h=8,smooth:f,children:p,...g},y)=>{B.useMemo(()=>Mx({RenamedTextGeometry:tz}),[]);const b=B.useRef(null),_=Cx(r),x=B.useMemo(()=>({font:_,size:n,height:i,bevelThickness:s,bevelSize:a,bevelEnabled:o,bevelSegments:d,bevelOffset:l,curveSegments:h,letterSpacing:e,lineHeight:t}),[_,n,i,s,a,o,d,l,h,e,t]),[M,...S]=B.useMemo(()=>fz(p),[p]),E=B.useMemo(()=>[M,x],[M,x]);return B.useLayoutEffect(()=>{f&&(b.current.geometry=NF(b.current.geometry,f),b.current.geometry.computeVertexNormals())},[E,f]),B.useImperativeHandle(y,()=>b.current,[]),B.createElement("mesh",yu({},g,{ref:b}),B.createElement("renamedTextGeometry",{args:E}),S)}),mz=()=>parseInt(zl.replace(/\D+/g,"")),gz=mz(),vz=B.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:a,onStart:o,onEnd:l,...d},h)=>{const f=Vi(P=>P.invalidate),p=Vi(P=>P.camera),g=Vi(P=>P.gl),y=Vi(P=>P.events),b=Vi(P=>P.setEvents),_=Vi(P=>P.set),x=Vi(P=>P.get),M=Vi(P=>P.performance),S=e||p,E=n||y.connected||g.domElement,T=B.useMemo(()=>new ez(S),[S]);return Gl(()=>{T.enabled&&T.update()},-1),B.useEffect(()=>(s&&T.connect(s===!0?E:s),T.connect(E),()=>void T.dispose()),[s,E,t,T,f]),B.useEffect(()=>{const P=R=>{f(),t&&M.regress(),a&&a(R)},I=R=>{o&&o(R)},k=R=>{l&&l(R)};return T.addEventListener("change",P),T.addEventListener("start",I),T.addEventListener("end",k),()=>{T.removeEventListener("start",I),T.removeEventListener("end",k),T.removeEventListener("change",P)}},[a,o,l,T,f,b]),B.useEffect(()=>{if(r){const P=x().controls;return _({controls:T}),()=>_({controls:P})}},[r,T]),B.createElement("primitive",yu({ref:h,object:T,enableDamping:i},d))}),xz=3e3,yz=3001,cT=(r,e,t)=>{let n;switch(r){case Zi:n=new Uint8ClampedArray(e*t*4);break;case $n:n=new Uint16Array(e*t*4);break;case Gr:n=new Uint32Array(e*t*4);break;case Uv:n=new Int8Array(e*t*4);break;case Fv:n=new Int16Array(e*t*4);break;case Rf:n=new Int32Array(e*t*4);break;case Vn:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let Fh;const _z=(r,e,t,n)=>{if(Fh!==void 0)return Fh;const i=new er(1,1,n);e.setRenderTarget(i);const s=new jn(new xo,new Rs({color:16777215}));e.render(s,t),e.setRenderTarget(null);const a=cT(r,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,a),i.dispose(),s.geometry.dispose(),s.material.dispose(),Fh=a[0]!==0,Fh};class Rx{constructor(e){var t,n,i,s,a,o,l,d,h,f,p,g,y,b,_,x;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(S){throw this._renderer.setRenderTarget(null),S}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const M={format:Hn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:Zt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.minFilter:Zt,samples:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapS:vn,wrapT:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapT)!==void 0?(b=e.renderTargetOptions)===null||b===void 0?void 0:b.wrapT:vn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Rx.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Lu,this._camera=new Ss,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!_z(this._type,this._renderer,this._camera,M)){let S;switch(this._type){case $n:S=this._renderer.extensions.has("EXT_color_buffer_float")?Vn:void 0;break}S!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Vn}`),this._type=S):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new jn(new xo,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new er(this.width,this.height,M),this._renderTarget.texture.mapping=((_=e.renderTargetOptions)===null||_===void 0?void 0:_.mapping)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping:la}static instantiateRenderer(){const e=new Df;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=cT(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new io(this.toArray(),this.width,this.height,Hn,this._type,(e==null?void 0:e.mapping)||la,(e==null?void 0:e.wrapS)||vn,(e==null?void 0:e.wrapT)||vn,(e==null?void 0:e.magFilter)||Zt,(e==null?void 0:e.minFilter)||Zt,(e==null?void 0:e.anisotropy)||1,Qi);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Oi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof an&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof an&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const bz=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,wz=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Sz extends Oi{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:i,gainMapMax:s,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:l,sdr:d,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:bz,fragmentShader:wz,uniforms:{sdr:{value:d},gainMap:{value:h},gamma:{value:new j(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new j().fromArray(t)},offsetSdr:{value:new j().fromArray(n)},gainMapMin:{value:new j().fromArray(i)},gainMapMax:{value:new j().fromArray(s)},weightFactor:{value:(Math.log2(a)-o)/(l-o)}},blending:Xr,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class uT extends Error{}class dT extends Error{}const Cc=(r,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(r);if(n)return n[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(r);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Mz=r=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(r):e=r.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),i=e.slice(t,n+10);try{const s=Cc(i,"hdrgm:GainMapMin","0"),a=Cc(i,"hdrgm:GainMapMax"),o=Cc(i,"hdrgm:Gamma","1"),l=Cc(i,"hdrgm:OffsetSDR","0.015625"),d=Cc(i,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),f=h?h[1]:"0",p=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!p)throw new Error("Incomplete gainmap metadata");const g=p[1];return{gainMapMin:Array.isArray(s)?s.map(y=>parseFloat(y)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(y=>parseFloat(y)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(y=>parseFloat(y)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(y=>parseFloat(y)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(d)?d.map(y=>parseFloat(y)):[parseFloat(d),parseFloat(d),parseFloat(d)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(g)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class Ez{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const a=s.byteLength;let o=2,l=0,d;for(;o<a;){if(++l>250){n(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(o)!==255){n(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${s.getUint8(o).toString(16)}`));return}if(d=s.getUint8(o+1),i&&console.log(`Marker: ${d.toString(16)}`),d===226){i&&console.log("Found APP2 marker (0xffe2)");const h=o+4;if(s.getUint32(h)===1297106432){const f=h+4;let p;if(s.getUint16(f)===18761)p=!1;else if(s.getUint16(f)===19789)p=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!p)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const g=s.getUint32(f+4,!p);if(g<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const y=f+g,b=s.getUint16(y,!p),_=y+2;let x=0;for(let T=_;T<_+12*b;T+=12)s.getUint16(T,!p)===45057&&(x=s.getUint32(T+8,!p));const S=y+2+b*12+4,E=[];for(let T=S;T<S+x*16;T+=16){const P={MPType:s.getUint32(T,!p),size:s.getUint32(T+4,!p),dataOffset:s.getUint32(T+8,!p),dependantImages:s.getUint32(T+12,!p),start:-1,end:-1,isFII:!1};P.dataOffset?(P.start=f+P.dataOffset,P.isFII=!1):(P.start=0,P.isFII=!0),P.end=P.start+P.size,E.push(P)}if(this.options.extractNonFII&&E.length){const T=new Blob([s]),P=[];for(const I of E){if(I.isFII&&!this.options.extractFII)continue;const k=T.slice(I.start,I.end+1,"image/jpeg");P.push(k)}t(P)}}}o+=2+s.getUint16(o+2)}})}}const Tz=async r=>{const e=Mz(r);if(!e)throw new dT("Gain map XMP metadata not found");const n=await new Ez({extractFII:!0,extractNonFII:!0}).extract(r);if(n.length!==2)throw new uT("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},Mw=r=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=i=>{t(i)},n.src=URL.createObjectURL(r)});class hT extends mi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Qf}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Sz({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new an,sdr:new an});return new Rx({width:16,height:16,type:$n,colorSpace:Qi,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,a=new Blob([n],{type:"image/jpeg"});let o,l,d=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?Mw(s):Promise.resolve(void 0),Mw(a)]);l=p[0],o=p[1],d=!0}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);l=p[0],o=p[1]}const h=new an(l||new ImageData(2,2),la,vn,vn,Zt,m0,Hn,Zi,1,Qi);h.flipY=d,h.needsUpdate=!0;const f=new an(o,la,vn,vn,Zt,m0,Hn,Zi,1,zn);f.flipY=d,f.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=h,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Az extends hT{load([e,t,n],i,s,a){const o=this.prepareQuadRenderer();let l,d,h;const f=async()=>{if(l&&d&&h){try{await this.render(o,h,l,d)}catch(R){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof a=="function"&&a(R),o.disposeOnDemandRenderer();return}typeof i=="function"&&i(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),o.disposeOnDemandRenderer()}};let p=!0,g=0,y=0,b=!0,_=0,x=0,M=!0,S=0,E=0;const T=()=>{if(typeof s=="function"){const R=g+_+S,L=y+x+E,F=p&&b&&M;s(new ProgressEvent("progress",{lengthComputable:F,loaded:L,total:R}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const P=new ki(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(e,async R=>{if(typeof R=="string")throw new Error("Invalid sdr buffer");l=R,await f()},R=>{p=R.lengthComputable,y=R.loaded,g=R.total,T()},R=>{this.manager.itemError(e),typeof a=="function"&&a(R)});const I=new ki(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(t,async R=>{if(typeof R=="string")throw new Error("Invalid gainmap buffer");d=R,await f()},R=>{b=R.lengthComputable,x=R.loaded,_=R.total,T()},R=>{this.manager.itemError(t),typeof a=="function"&&a(R)});const k=new ki(this._internalLoadingManager);return k.setRequestHeader(this.requestHeader),k.setPath(this.path),k.setWithCredentials(this.withCredentials),k.load(n,async R=>{if(typeof R!="string")throw new Error("Invalid metadata string");h=JSON.parse(R),await f()},R=>{M=R.lengthComputable,E=R.loaded,S=R.total,T()},R=>{this.manager.itemError(n),typeof a=="function"&&a(R)}),o}}class Cz extends hT{load(e,t,n,i){const s=this.prepareQuadRenderer(),a=new ki(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let d,h,f;try{const p=await Tz(l);d=p.sdr,h=p.gainMap,f=p.metadata}catch(p){if(p instanceof dT||p instanceof uT)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},d=l;else throw p}try{await this.render(s,f,d,h)}catch(p){this.manager.itemError(e),typeof i=="function"&&i(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,o=>{this.manager.itemError(e),typeof i=="function"&&i(o)}),s}}const _u={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},fT="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Ml=r=>Array.isArray(r),Px=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function tp({files:r=Px,path:e="",preset:t=void 0,encoding:n=void 0,extensions:i}={}){let s=null,a=!1;t&&(Nx(t),r=_u[t],e=fT),a=Ml(r);const{extension:o,isCubemap:l}=Ix(r);if(s=Lx(o),!s)throw new Error("useEnvironment: Unrecognized file extension: "+r);const d=Vi(g=>g.gl);B.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function g(){Ol.clear(s,a?[r]:r)}d.domElement.addEventListener("webglcontextlost",g,{once:!0})},[r,d.domElement]);const h=Ol(s,a?[r]:r,g=>{(o==="webp"||o==="jpg"||o==="jpeg")&&g.setRenderer(d),g.setPath==null||g.setPath(e),i&&i(g)});let f=a?h[0]:h;if(o==="jpg"||o==="jpeg"||o==="webp"){var p;f=(p=f.renderTarget)==null?void 0:p.texture}return f.mapping=l?Kr:Il,"colorSpace"in f?f.colorSpace=n??l?"srgb":"srgb-linear":f.encoding=n??l?yz:xz,f}const Rz={files:Px,path:"",preset:void 0,extensions:void 0};tp.preload=r=>{const e={...Rz,...r};let{files:t,path:n=""}=e;const{preset:i,extensions:s}=e;i&&(Nx(i),t=_u[i],n=fT);const{extension:a}=Ix(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=Lx(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);Ol.preload(o,Ml(t)?[t]:t,l=>{l.setPath==null||l.setPath(n),s&&s(l)})};const Pz={files:Px,preset:void 0};tp.clear=r=>{const e={...Pz,...r};let{files:t}=e;const{preset:n}=e;n&&(Nx(n),t=_u[n]);const{extension:i}=Ix(t),s=Lx(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Ol.clear(s,Ml(t)?[t]:t)};function Nx(r){if(!(r in _u))throw new Error("Preset must be one of: "+Object.keys(_u).join(", "))}function Ix(r){var e;const t=Ml(r)&&r.length===6,n=Ml(r)&&r.length===3&&r.some(a=>a.endsWith("json")),i=Ml(r)?r[0]:r;return{extension:t?"cube":n?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function Lx(r){return r==="cube"?fE:r==="hdr"?lz:r==="exr"?cz:r==="jpg"||r==="jpeg"?Cz:r==="webp"?Az:null}const Nz=r=>r.current&&r.current.isScene,Iz=r=>Nz(r)?r.current:r;function kx(r,e,t,n,i={}){var s,a,o,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const d=Iz(e||t),h=d.background,f=d.environment,p={backgroundBlurriness:d.backgroundBlurriness,backgroundIntensity:d.backgroundIntensity,backgroundRotation:(s=(a=d.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:d.environmentIntensity,environmentRotation:(o=(l=d.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return r!=="only"&&(d.environment=n),r&&(d.background=n),Ys(d,i),()=>{r!=="only"&&(d.environment=f),r&&(d.background=h),Ys(d,p)}}function Dx({scene:r,background:e=!1,map:t,...n}){const i=Vi(s=>s.scene);return B.useLayoutEffect(()=>{if(t)return kx(e,r,i,t,n)}),null}function pT({background:r=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:a,environmentRotation:o,...l}){const d=tp(l),h=Vi(f=>f.scene);return B.useLayoutEffect(()=>kx(r,e,h,d,{backgroundBlurriness:t??n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:a,environmentRotation:o})),B.useEffect(()=>()=>{d.dispose()},[d]),null}function Lz({children:r,near:e=.1,far:t=1e3,resolution:n=256,frames:i=1,map:s,background:a=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:d,backgroundRotation:h,environmentIntensity:f,environmentRotation:p,scene:g,files:y,path:b,preset:_=void 0,extensions:x}){const M=Vi(k=>k.gl),S=Vi(k=>k.scene),E=B.useRef(null),[T]=B.useState(()=>new Lu),P=B.useMemo(()=>{const k=new Jv(n);return k.texture.type=$n,k},[n]);B.useEffect(()=>()=>{P.dispose()},[P]),B.useLayoutEffect(()=>{if(i===1){const k=M.autoClear;M.autoClear=!0,E.current.update(M,T),M.autoClear=k}return kx(a,g,S,P.texture,{backgroundBlurriness:o??l,backgroundIntensity:d,backgroundRotation:h,environmentIntensity:f,environmentRotation:p})},[r,T,P.texture,g,S,a,i,M]);let I=1;return Gl(()=>{if(i===1/0||I<i){const k=M.autoClear;M.autoClear=!0,E.current.update(M,T),M.autoClear=k,I++}}),B.createElement(B.Fragment,null,hF(B.createElement(B.Fragment,null,r,B.createElement("cubeCamera",{ref:E,args:[e,t,P]}),y||_?B.createElement(pT,{background:!0,files:y,preset:_,path:b,extensions:x}):s?B.createElement(Dx,{background:!0,map:s,extensions:x}):null),T))}function kz(r){var e,t,n,i;const s=tp(r),a=r.map||s;B.useMemo(()=>Mx({GroundProjectedEnvImpl:XF}),[]),B.useEffect(()=>()=>{s.dispose()},[s]);const o=B.useMemo(()=>[a],[a]),l=(e=r.ground)==null?void 0:e.height,d=(t=r.ground)==null?void 0:t.radius,h=(n=(i=r.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return B.createElement(B.Fragment,null,B.createElement(Dx,yu({},r,{map:a})),B.createElement("groundProjectedEnvImpl",{args:o,scale:h,height:l,radius:d}))}function Dz(r){return r.ground?B.createElement(kz,r):r.map?B.createElement(Dx,r):r.children?B.createElement(Lz,r):B.createElement(pT,r)}class Oz extends Oi{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${gz>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const Uz=r=>new j().setFromSpherical(new ff(r,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Fz=B.forwardRef(({radius:r=100,depth:e=50,count:t=5e3,saturation:n=0,factor:i=4,fade:s=!1,speed:a=1},o)=>{const l=B.useRef(),[d,h,f]=B.useMemo(()=>{const g=[],y=[],b=Array.from({length:t},()=>(.5+.5*Math.random())*i),_=new rt;let x=r+e;const M=e/t;for(let S=0;S<t;S++)x-=M*Math.random(),g.push(...Uz(x).toArray()),_.setHSL(S/t,n,.9),y.push(_.r,_.g,_.b);return[new Float32Array(g),new Float32Array(y),new Float32Array(b)]},[t,e,i,r,n]);Gl(g=>l.current&&(l.current.uniforms.time.value=g.clock.elapsedTime*a));const[p]=B.useState(()=>new Oz);return B.createElement("points",{ref:o},B.createElement("bufferGeometry",null,B.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),B.createElement("bufferAttribute",{attach:"attributes-color",args:[h,3]}),B.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),B.createElement("primitive",{ref:l,object:p,attach:"material",blending:of,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});function zz(){const r=B.useRef(null);return Gl(({clock:e})=>{var t;if(r.current){r.current.rotation.z+=.002;const n=r.current.material;(t=n.uniforms)!=null&&t.time&&(n.uniforms.time.value=e.getElapsedTime())}}),m.jsxs("mesh",{ref:r,position:[0,0,-30],children:[m.jsx("cylinderGeometry",{args:[5,5,60,64,1,!0]}),m.jsx("shaderMaterial",{side:hi,transparent:!0,uniforms:{time:{value:0}},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          varying vec2 vUv;
          uniform float time;
          void main() {
            float wave = sin(vUv.y * 20.0 + time * 5.0) * 0.05;
            vec3 color = mix(vec3(0.0, 0.8, 1.0), vec3(0.5, 0.0, 1.0), vUv.y + wave);
            gl_FragColor = vec4(color, 0.8);
          }
        `})]})}function jz(){const r=B.useRef(null),e=150,t=new Array(e).fill(0);return Gl(()=>{r.current.children.forEach(n=>{n.position.z+=.8,n.position.z>10&&(n.position.z=-200,n.position.x=Math.random()*100-50,n.position.y=Math.random()*100-50),n.rotation.x+=.02,n.rotation.y+=.02})}),m.jsx("group",{ref:r,children:t.map((n,i)=>m.jsxs("mesh",{position:[Math.random()*100-50,Math.random()*100-50,Math.random()*-200],children:[m.jsx("icosahedronGeometry",{args:[.5,0]}),m.jsx("meshStandardMaterial",{color:"#aaa",metalness:.3,roughness:.7})]},i))})}function Bz(){const r=B.useRef(null);return Gl(({clock:e})=>{r.current.position.z=Math.sin(e.getElapsedTime())*.5,r.current.rotation.y=Math.sin(e.getElapsedTime()*.5)*.3}),m.jsxs(pz,{ref:r,font:"/fonts/helvetiker_regular.typeface.json",size:2,height:.3,curveSegments:12,bevelEnabled:!0,bevelSize:.04,bevelSegments:5,position:[-3,0,0],children:["404",m.jsx("meshStandardMaterial",{color:"#00ffff",emissive:"#00ffff",emissiveIntensity:.9})]})}function Hz(){const[r,e]=B.useState(!1);return m.jsxs("div",{className:"w-screen h-screen bg-black relative",children:[m.jsx(mr,{children:!r&&m.jsxs(ve.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},className:"absolute inset-0 flex flex-col justify-center items-center text-center text-white z-10 bg-black bg-opacity-90",children:[m.jsx(ve.h1,{className:"text-6xl font-bold mb-4",animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2},children:"Lost in a Wormhole"}),m.jsx("p",{className:"text-lg mb-6",children:"Click to warp through spacetime..."}),m.jsx("button",{onClick:()=>e(!0),className:"px-6 py-3 bg-cyan-500 hover:bg-cyan-600 rounded-lg text-lg font-semibold",children:"Enter the Rift"})]})}),r&&m.jsx(PF,{camera:{position:[0,0,10],fov:75},children:m.jsxs(B.Suspense,{fallback:null,children:[m.jsx("ambientLight",{intensity:.4}),m.jsx("pointLight",{position:[10,10,10],intensity:1}),m.jsx(Dz,{preset:"night"}),m.jsx(Fz,{radius:300,depth:100,count:1e4,factor:5}),m.jsx(zz,{}),m.jsx(jz,{}),m.jsx(Bz,{}),m.jsx(vz,{enableZoom:!1})]})})]})}var nv={exports:{}},Fg={},Ew;function Vz(){return Ew||(Ew=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});const e=B,t=typeof window>"u",n=t?()=>{}:e.useLayoutEffect,i=t?()=>{}:e.useEffect;function s(a){const{headManager:o,reduceComponentsToState:l}=a;function d(){if(o&&o.mountedInstances){const f=e.Children.toArray(Array.from(o.mountedInstances).filter(Boolean));o.updateHead(l(f,a))}}if(t){var h;o==null||(h=o.mountedInstances)==null||h.add(a.children),d()}return n(()=>{var f;return o==null||(f=o.mountedInstances)==null||f.add(a.children),()=>{var p;o==null||(p=o.mountedInstances)==null||p.delete(a.children)}}),n(()=>(o&&(o._pendingUpdate=d),()=>{o&&(o._pendingUpdate=d)})),i(()=>(o&&o._pendingUpdate&&(o._pendingUpdate(),o._pendingUpdate=null),()=>{o&&o._pendingUpdate&&(o._pendingUpdate(),o._pendingUpdate=null)})),null}}(Fg)),Fg}var zg={},Tw;function Gz(){return Tw||(Tw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AmpStateContext",{enumerable:!0,get:function(){return n}});const n=Au._(B).default.createContext({})}(zg)),zg}var jg={},Aw;function Wz(){return Aw||(Aw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return n}});const n=Au._(B).default.createContext({})}(jg)),jg}var Bg={},Cw;function Xz(){return Cw||(Cw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isInAmpMode",{enumerable:!0,get:function(){return e}});function e(t){let{ampFirst:n=!1,hybrid:i=!1,hasQuery:s=!1}=t===void 0?{}:t;return n||i&&s}}(Bg)),Bg}var Hg={},Rw;function qz(){return Rw||(Rw=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return e}});let e=t=>{}}(Hg)),Hg}(function(r,e){"use client";Object.defineProperty(e,"__esModule",{value:!0});function t(M,S){for(var E in S)Object.defineProperty(M,E,{enumerable:!0,get:S[E]})}t(e,{default:function(){return x},defaultHead:function(){return f}});const n=Au,i=Mf,s=m,a=i._(B),o=n._(Vz()),l=Gz(),d=Wz(),h=Xz();qz();function f(M){M===void 0&&(M=!1);const S=[(0,s.jsx)("meta",{charSet:"utf-8"},"charset")];return M||S.push((0,s.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),S}function p(M,S){return typeof S=="string"||typeof S=="number"?M:S.type===a.default.Fragment?M.concat(a.default.Children.toArray(S.props.children).reduce((E,T)=>typeof T=="string"||typeof T=="number"?E:E.concat(T),[])):M.concat(S)}const g=["name","httpEquiv","charSet","itemProp"];function y(){const M=new Set,S=new Set,E=new Set,T={};return P=>{let I=!0,k=!1;if(P.key&&typeof P.key!="number"&&P.key.indexOf("$")>0){k=!0;const R=P.key.slice(P.key.indexOf("$")+1);M.has(R)?I=!1:M.add(R)}switch(P.type){case"title":case"base":S.has(P.type)?I=!1:S.add(P.type);break;case"meta":for(let R=0,L=g.length;R<L;R++){const F=g[R];if(P.props.hasOwnProperty(F))if(F==="charSet")E.has(F)?I=!1:E.add(F);else{const W=P.props[F],J=T[F]||new Set;(F!=="name"||!k)&&J.has(W)?I=!1:(J.add(W),T[F]=J)}}break}return I}}function b(M,S){const{inAmpMode:E}=S;return M.reduce(p,[]).reverse().concat(f(E).reverse()).filter(y()).reverse().map((T,P)=>{const I=T.key||P;return a.default.cloneElement(T,{key:I})})}function _(M){let{children:S}=M;const E=(0,a.useContext)(l.AmpStateContext),T=(0,a.useContext)(d.HeadManagerContext);return(0,s.jsx)(o.default,{reduceComponentsToState:b,headManager:T,inAmpMode:(0,h.isInAmpMode)(E),children:S})}const x=_;(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),r.exports=e.default)})(nv,nv.exports);var Yz=nv.exports,Zz=Yz;const mT=rv(Zz),Kz=()=>m.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[m.jsxs(mT,{children:[m.jsx("title",{children:"Terms of Service | Sahil Ali"}),m.jsx("meta",{name:"description",content:"Terms of Service for Sahil Ali's professional portfolio website."})]}),m.jsxs("main",{className:"container mx-auto px-6 py-20 max-w-4xl",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold mb-10 text-foreground",children:"Terms of Service"}),m.jsxs("p",{className:"text-muted-foreground mb-8 italic",children:["Last updated: ",new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]}),m.jsxs("article",{className:"prose prose-lg dark:prose-invert max-w-none space-y-8",children:[m.jsxs("section",{children:[m.jsx("h2",{children:"1. Introduction"}),m.jsx("p",{children:"Welcome to my portfolio website. By accessing or using this website, you agree to comply with and be bound by these Terms of Service. Please read them carefully."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"2. Intellectual Property"}),m.jsx("p",{children:"All content on this site, including text, graphics, logos, images, and other materials, is the intellectual property of Sahil Ali and protected under applicable copyright and intellectual property laws."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"3. Use License"}),m.jsx("p",{children:"You are granted a limited, non-exclusive license to access and temporarily download one copy of the materials for personal, non-commercial use only. Any unauthorized use may violate copyright laws."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"4. Limitations of Liability"}),m.jsx("p",{children:"Sahil Ali shall not be held liable for any damages arising from the use or inability to use the materials provided on this website."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"5. Revisions and Errors"}),m.jsx("p",{children:"While every effort is made to ensure accuracy, this website may contain technical, typographical, or photographic errors. Sahil Ali reserves the right to make corrections without prior notice."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"6. Contact"}),m.jsxs("p",{children:["If you have any questions or concerns regarding these Terms of Service, please feel free to ",m.jsx("a",{href:"mailto:sahilkhan36985@gmail.com",className:"text-blue-600 hover:underline dark:text-blue-400",children:"contact me"}),"."]})]})]})]})]}),$z=()=>m.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[m.jsxs(mT,{children:[m.jsx("title",{children:"Privacy Policy | Sahil Ali"}),m.jsx("meta",{name:"description",content:"Privacy Policy for Sahil Ali's professional portfolio website."})]}),m.jsxs("main",{className:"container mx-auto px-6 py-20 max-w-4xl",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold mb-10 text-foreground",children:"Privacy Policy"}),m.jsxs("p",{className:"text-muted-foreground mb-8 italic",children:["Last updated: ",new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]}),m.jsxs("article",{className:"prose prose-lg dark:prose-invert max-w-none space-y-8",children:[m.jsxs("section",{children:[m.jsx("h2",{children:"1. Information We Collect"}),m.jsx("p",{children:"When you visit this website, we automatically collect certain information sent by your browser, such as your IP address, browser type and version, and the pages you access. This data helps us understand how visitors use our site and improve your experience."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"2. Use of Data"}),m.jsx("p",{children:"The collected data is used to operate and maintain the website, inform you about updates, enable interactive features, and analyze site usage to enhance functionality."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"3. Cookies"}),m.jsx("p",{children:"Cookies are used to gather information and improve website performance. You can choose to disable cookies through your browser settings, though some features may not function properly without them."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"4. Security"}),m.jsx("p",{children:"We prioritize the protection of your data but acknowledge that no internet transmission or electronic storage method is completely secure. We strive to use commercially acceptable means to safeguard your information."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"5. Changes to This Privacy Policy"}),m.jsx("p",{children:"This policy may be updated periodically. Any changes will be posted here, and we encourage you to review this page regularly for updates."})]}),m.jsxs("section",{children:[m.jsx("h2",{children:"6. Contact Us"}),m.jsxs("p",{children:["For any questions or concerns about this Privacy Policy, please ",m.jsx("a",{href:"mailto:sahilkhan36985@gmail.com",className:"text-blue-600 hover:underline dark:text-blue-400",children:"contact me"}),"."]})]})]})]})]});class Jz extends B.Component{constructor(){super(...arguments);am(this,"state",{hasError:!1});am(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){this.setState({errorInfo:n}),this.props.onError?this.props.onError(t,n):console.error("Uncaught error:",t,n)}renderFallback(){const{fallback:t,showErrorDetails:n}=this.props,{error:i,errorInfo:s}=this.state;return t||m.jsxs("div",{role:"alert",className:"relative dark:bg-gray-900 min-h-screen flex flex-col items-center justify-center px-4 py-20 text-center",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/60 dark:from-black/70 dark:via-black/50 dark:to-black-70"}),m.jsxs("div",{className:"relative z-10 max-w-lg w-full",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-white mb-4",children:"Oops! Something went wrong."}),m.jsx("p",{className:"text-lg text-gray-300 mb-8",children:"Please try refreshing the page or contact support if the issue persists."}),n&&i&&m.jsxs("details",{className:"mb-8 text-left text-xs text-red-400 whitespace-pre-wrap",children:[m.jsx("summary",{className:"cursor-pointer font-semibold",children:"Error details"}),m.jsx("p",{children:i.toString()}),(s==null?void 0:s.componentStack)&&m.jsx("pre",{className:"mt-2",children:s.componentStack})]}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsx("button",{onClick:this.handleReset,className:"px-6 py-3 rounded-md border border-primary text-primary font-semibold hover:bg-primary hover:text-primary-foreground transition","aria-label":"Try to recover from error",children:"Try Again"}),m.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 rounded-md bg-primary text-primary-foreground font-semibold hover:bg-primary/90 transition","aria-label":"Reload the page",children:"Reload Page"})]})]})]})}render(){return this.state.hasError?this.renderFallback():this.props.children}}const Qz=()=>{const{pathname:r}=bu(),[e,t]=B.useState(!1),n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return B.useEffect(()=>{const i=()=>{window.pageYOffset>300?t(!0):t(!1)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]),B.useEffect(()=>{window.scrollTo(0,0),document.documentElement.style.scrollBehavior="smooth";const i=setTimeout(()=>{document.documentElement.style.scrollBehavior="auto"},1e3);return()=>clearTimeout(i)},[r]),m.jsx(mr,{children:e&&m.jsx(ve.button,{className:`fixed bottom-6 right-6 z-50 p-3 rounded-full bg-primary text-primary-foreground shadow-lg 
                    hover:bg-primary/90 transition-all duration-300 focus:outline-none focus:ring-2 
                    focus:ring-primary/50 focus:ring-offset-2 focus:ring-offset-background`,onClick:n,"aria-label":"Scroll to top",initial:{opacity:0,y:50,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.8},whileHover:{scale:1.1},whileTap:{scale:.95},children:m.jsx(CA,{className:"w-6 h-6"})})})},ej=B.lazy(()=>wu(()=>import("./ProjectDetails.Cbx1NI6f.js"),__vite__mapDeps([6,1,2]))),tj=()=>{const r=bu(),[e,t]=B.useState(!0);return B.useEffect(()=>{const n=setTimeout(()=>{t(!1)},100);return()=>clearTimeout(n)},[]),e?m.jsx(f_,{children:m.jsx(xr,{path:"*",element:m.jsx(T_,{})})}):m.jsx(mr,{mode:"wait",initial:!1,children:m.jsxs(f_,{location:r,children:[m.jsx(xr,{path:"/",element:m.jsx(jr,{children:m.jsx(T_,{})})}),m.jsx(xr,{path:"/about",element:m.jsx(jr,{children:m.jsx(IP,{})})}),m.jsx(xr,{path:"/experience",element:m.jsx(jr,{children:m.jsx(BP,{})})}),m.jsx(xr,{path:"/projects",element:m.jsx(jr,{children:m.jsx(KP,{})})}),m.jsx(xr,{path:"/projects/:id",element:m.jsx(jr,{children:m.jsx(ej,{})})}),m.jsx(xr,{path:"/contact",element:m.jsx(jr,{children:m.jsx(qI,{})})}),m.jsx(xr,{path:"/blog",element:m.jsx(jr,{children:m.jsx(cL,{})})}),m.jsx(xr,{path:"/terms-of-service",element:m.jsx(jr,{children:m.jsx(Kz,{})})}),m.jsx(xr,{path:"/privacy-policy",element:m.jsx(jr,{children:m.jsx($z,{})})}),m.jsx(xr,{path:"*",element:m.jsx(jr,{children:m.jsx(Hz,{})})})]},r.pathname)})},jr=({children:r})=>m.jsx(ve.div,{initial:{x:"30px",opacity:0},animate:{x:0,opacity:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{x:"-30px",opacity:0,transition:{duration:.3,ease:[.4,0,.2,1]}},className:"w-full",children:r}),nj=()=>(kw(),m.jsx(Uw,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:m.jsxs("div",{className:"flex flex-col min-h-screen",children:[m.jsx(JA,{}),m.jsx("main",{className:"flex-grow pt-20",children:m.jsxs(Jz,{children:[m.jsx(Qz,{}),m.jsx(tj,{})]})}),m.jsx(_3,{})]})})),Pw=document.getElementById("root");Pw&&Lw(Pw).render(m.jsx(Lc.StrictMode,{children:m.jsx(oA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:m.jsx(Uw,{children:m.jsx(nj,{})})})}));export{LA as A,wi as B,Ks as F,Nv as H,ov as L,Hz as N,Er as S,wu as _,Ww as a,jw as b,El as c,lo as d,Xw as e,_j as f,ws as g,vj as h,hj as i,m as j,cj as k,uj as l,gj as m,xj as n,yj as o,Gg as p,fj as q,dj as r,pj as s,mj as t,DP as u,PA as v,lj as w,Fw as x,oj as y,aj as z};
//# sourceMappingURL=index.Bjk5tWHM.js.map
